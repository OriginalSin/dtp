var dtp=function(){"use strict";const e=window.L;e.Control.GmxIcon=e.Control.extend({includes:e.Evented?e.Evented.prototype:e.Mixin.Events,options:{position:"topleft",id:"defaultIcon",isActive:!1},setActive:function(t,n,l){var s=this.options,o=this._container;if(s.togglable||s.toggle){var i=s.isActive,r=this._prefix,a=r+"-"+s.id;s.isActive=t,this._img&&(t&&s.activeImageUrl?this._img.src=s.activeImageUrl:!t&&s.regularImageUrl&&(this._img.src=s.regularImageUrl)),t?(e.DomUtil.addClass(o,r+"-active"),e.DomUtil.addClass(o,a+"-active"),o.children.length&&e.DomUtil.addClass(o,r+"-externalImage-active"),s.styleActive&&this.setStyle(s.styleActive)):(e.DomUtil.removeClass(o,r+"-active"),e.DomUtil.removeClass(o,a+"-active"),o.children.length&&e.DomUtil.removeClass(o,r+"-externalImage-active"),s.style&&this.setStyle(s.style)),n||i===t||this.fire("statechange",l)}if(e.gmxUtil&&e.gmxUtil.isIEOrEdge){var c=o.getElementsByTagName("use");if(c.length){var p=c[0],d=p.getAttribute("href")||p.getAttribute("xlink:href");p.setAttribute("href",d)}}},onAdd:function(t){var n=null,l=this.options,s=l.svgSprite||t.options.svgSprite,o="leaflet-gmx-icon"+(!s||l.regularImageUrl||l.text?"":"Svg"),i=o+"-"+l.id;this._prefix=o;var r=e.DomUtil.create("div",o+" "+i);if(r._id=l.id,this._container=r,l.title&&(r.title=l.title),this.setStyle=function(e){for(var t in e)r.style[t]=e[t]},l.className&&e.DomUtil.addClass(r,l.className),l.regularImageUrl)(n=e.DomUtil.create("img","",r)).src=l.regularImageUrl,this._img=n,e.DomUtil.addClass(r,o+"-img"),e.DomUtil.addClass(r,o+"-externalImage");else if(l.text)e.DomUtil.addClass(r,o+"-text"),e.DomUtil.create("span","",r).innerHTML=l.text;else if(s){e.DomUtil.addClass(r,"svgIcon");var a="#"+l.id.toLowerCase();r.innerHTML='<svg role="img" class="svgIcon"><use xlink:href="'+a+'" href="'+a+'"></use></svg>'}else e.DomUtil.addClass(r,o+"-img "+o+"-sprite");l.style&&this.setStyle(l.style),this._iconClick=function(e){r.parentNode&&r===e.toElement&&(this.setActive(!this.options.isActive,!1,e),this.fire("click",e),this.options.stateChange&&this.options.stateChange(this,e))};var c=e.DomEvent.stopPropagation;e.DomEvent.preventDefault;return e.DomEvent.on(r,"mousemove",c).on(r,"touchstart",c).on(r,"mousedown",c).on(r,"dblclick",c).on(r,"click",c).on(r,"click",this._iconClick,this),l.onAdd&&l.onAdd(this),this.fire("controladd"),t.fire("controladd",this),l.notHide&&(r._notHide=!0),t.gmxControlsManager&&t.gmxControlsManager.add(this),r},onRemove:function(t){t.gmxControlsManager&&t.gmxControlsManager.remove(this),this.fire("controlremove"),t.fire("controlremove",this);var n=this._container,l=e.DomEvent.stopPropagation;e.DomEvent.off(n,"mousemove",l).off(n,"touchstart",l).off(n,"mousedown",l).off(n,"dblclick",l).off(n,"click",l).off(n,"click",this._iconClick,this)},addTo:function(t){return e.Control.prototype.addTo.call(this,t),this.options.addBefore&&this.addBefore(this.options.addBefore),this},addBefore:function(e){var t=this._parent&&this._parent._container;if(t||(t=this._map&&this._map._controlCorners[this.getPosition()]),t)for(var n=0,l=t.childNodes.length;n<l;n++){var s=t.childNodes[n];if(e===s._id){t.insertBefore(this._container,s);break}}else this.options.addBefore=e;return this}}),e.Control.gmxIcon=e.Control.GmxIcon,e.control.gmxIcon=function(t){return new e.Control.GmxIcon(t)};const t=window.L;t.Control.GmxCenter=t.Control.extend({options:{position:"center",id:"center",notHide:!0,color:"red"},onRemove:function(e){e.gmxControlsManager&&e.gmxControlsManager.remove(this),e.fire("controlremove",this)},onAdd:function(e){var n="http://www.w3.org/2000/svg",l=t.DomUtil.create("div","leaflet-gmx-center"),s=t.DomUtil.create("div","leaflet-gmx-center"),o=document.createElementNS(n,"svg"),i=document.createElementNS(n,"g"),r=document.createElementNS(n,"path");return this._container=l,l._id=this.options.id,this.options.notHide&&(l._notHide=!0),r.setAttribute("stroke-width",2),r.setAttribute("stroke-opacity",2),r.setAttribute("d","M9 0L9 18M0 9L18 9"),this._path=r,i.appendChild(r),o.appendChild(i),o.setAttribute("width",18),o.setAttribute("height",18),s.appendChild(o),l.appendChild(s),this.setColor(this.options.color),e.fire("controladd",this),e.gmxControlsManager&&e.gmxControlsManager.add(this),l},setColor:function(e){return this.options.color=e,this._map&&this._path.setAttribute("stroke",e),this}}),t.Control.gmxCenter=t.Control.GmxCenter,t.control.gmxCenter=function(e){return new t.Control.GmxCenter(e)};const n=window.L;n.Control.FitCenter=n.Control.extend({options:{position:"topright",id:"fitcenter",notHide:!0,color:"#216b9c"},onRemove:function(e){e.gmxControlsManager&&e.gmxControlsManager.remove(this),e.off("moveend",this._update,this).fire("controlremove",this)},onAdd:function(e){var t=this.options.id,l="leaflet-gmx-"+t,s=n.DomUtil.create("div",l),o=n.DomUtil.create("input","",s),i=n.DomUtil.create("button","",s),r=n.DomUtil.create("div","results",s);return i.title="Переместить центр карты",o.placeholder="Поиск по адресам, координатам",this._input=o,this._container=s,this._results=r,s._id=t,e.on("mousemove",e=>{this._results.style.display="none"},this),n.DomEvent.on(o,"input",this._getSuggestions,this),n.DomEvent.on(o,"contextmenu",n.DomEvent.stopPropagation,this),n.DomEvent.on(s,"mousemove",n.DomEvent.stop),n.DomEvent.on(s,"mouseover",e=>{"block"!==this._results.style.display&&(this._results.style.display="block")},this),n.DomEvent.on(i,"click",(function(){let t=o.value.match(/[+-]?([0-9]*[.])?[0-9]+/g);t&&t.length>1&&e.setView([Number(t[0]),Number(t[1])])})),n.DomEvent.disableClickPropagation(s),e.on("moveend",this._update,this).fire("controladd",this),e.gmxControlsManager&&e.gmxControlsManager.add(this),s},_parseSearch:function(e){if((e=e||[]).length){this._results;let t=document.createDocumentFragment();e.forEach(e=>{let l=e.display_name,s=e.boundingbox,o=n.DomUtil.create("div","",t);o.innerHTML=l,n.DomEvent.on(o,"click",e=>{this._map.fitBounds([[s[0],s[2]],[s[1],s[3]]])},this)}),this._results.innerText="",this._results.appendChild(t),this._results.classList.add("active")}},_getSuggestions:function(e){const t=e.target.value||"калужское шоссе",n=["format=json","limit=10","polygon_text=1","bounded=1","viewbox=34,53,41,57"].join("&"),l="&q="+encodeURI(t);fetch(`//nominatim.openstreetmap.org/search?${n}${l}`,{}).then(e=>e.json()).then(this._parseSearch.bind(this))},_update:function(e){this._map&&this.setCoords(this._map.getCenter())},_trunc:function(e){return(""+(Math.round(1e7*e)/1e7+1e-8)).substring(0,9)},setCoords:function(e){return this}}),n.control.fitCenter=function(e){return new n.Control.FitCenter(e)};const l='&copy; <a href="https://n.maps.yandex.ru/?oid=1900133#!/?z=18&ll=36.860478%2C55.429679&l=nk%23map">Yandex</a> contributors',s="//inv.mvs.group/mapcache/",o=new Date,i=o.getMonth()+1,r=o.getDate(),a=(o.getFullYear(),{m1:{title:"Дороги",prefix:s+"m1/",postfix:"?x={x}&y={y}&z={z}&l=mrcss",errorTileUrlPrefix:"//core-nmaps-mrc-browser.maps.yandex.ru/tiles",options:{key:"m1",minZoom:10,maxZoom:19,attribution:l}},m2:{title:"Карта(Яндекс)",prefix:s+"m2/tiles",postfix:"?l=map&v=18.01.10-2&x={x}&y={y}&z={z}&scale=1&lang=ru_RU",errorTileUrlPrefix:"//vec01.maps.yandex.net/tiles",options:{key:"m2",maxNativeZoom:19,maxZoom:21,attribution:l}},m3:{title:"Снимки(Яндекс)",prefix:s+"m3/tiles",postfix:"?l=sat&v=3.462.0&x={x}&y={y}&z={z}&lang=ru_RU",errorTileUrlPrefix:"//sat04.maps.yandex.net/tiles",options:{key:"m3",maxNativeZoom:19,maxZoom:21,attribution:l}},m4:{title:"Скорость(Народная карта)",prefix:s+"m4/",postfix:"?x={x}&y={y}&z={z}&l=mpskl&sl=104,301135,302526,302827,5300026,5400046,70300236,70300638",errorTileUrlPrefix:"//04.core-nmaps-renderer-nmaps.maps.yandex.net/tile",options:{key:"m4",minZoom:8,maxZoom:19,attribution:l}},m5:{title:"Светофоры",prefix:s+"m5/",postfix:"?x={x}&y={y}&z={z}&l=mpskl&sl=301750",errorTileUrlPrefix:"//04.core-nmaps-renderer-nmaps.maps.yandex.net/tile",options:{key:"m4",minZoom:12,maxZoom:19,attribution:l}},m6:{title:"Дороги в стадии строительства",prefix:"//03.core-nmaps-renderer-nmaps.maps.yandex.net/",postfix:"?x={x}&y={y}&z={z}&l=mpskl&sl=70300289",errorTileUrlPrefix:"//03.core-nmaps-renderer-nmaps.maps.yandex.net/",options:{key:"m6",minZoom:10,maxZoom:19,attribution:l}}}),c={};window.URLSearchParams&&new URLSearchParams(window.location.search).forEach((e,t)=>{c[t]=e});const p=window.L;let d=p.canvas();const u=function(e,t){var n=p.Projection.Mercator.project(t),l=p.Projection.Mercator.unproject(new p.Point(n.x+40,n.y+30));return 156543.033928041*Math.pow(2,-e)*((e,t)=>{for(var n=Math.PI/180,l={lon:n*e.lng,lat:n*e.lat},s={lon:n*t.lng,lat:n*t.lat},o=6378137,i=6356752.3142,r=1/298.257223563,a=s.lon-l.lon,c=Math.atan((1-r)*Math.tan(l.lat)),p=Math.atan((1-r)*Math.tan(s.lat)),d=Math.sin(c),u=Math.cos(c),_=Math.sin(p),h=Math.cos(p),v=a,f=2*Math.PI,m=20;Math.abs(v-f)>1e-12&&--m>0;){var y=Math.sin(v),g=Math.cos(v),b=Math.sqrt(h*y*(h*y)+(u*_-d*h*g)*(u*_-d*h*g));if(0===b)return 0;var k=d*_+u*h*g,j=Math.atan2(b,k),x=u*h*y/b,L=1-x*x,C=k-2*d*_/L;isNaN(C)&&(C=0);var D=r/16*L*(4+r*(4-3*L));f=v,v=a+(1-D)*r*x*(j+D*b*(C+D*k*(2*C*C-1)))}if(0===m)return NaN;var w=L*(o*o/(i*i)-1),z=w/1024*(256+w*(w*(74-47*w)-128));return i*(1+w/16384*(4096+w*(w*(320-175*w)-768)))*(j-z*b*(C+z/4*(k*(2*C*C-1)-z/6*C*(4*b*b-3)*(4*C*C-3))))})(t,l)/50},_=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix(),h={camera:((e,t,n)=>{let l=new Path2D(e),s=new Path2D;return s.addPath(l,_.translate(t,n).rotate(180).scale(-20/832,-20/832)),s})("M864 260H728l-32.4-90.8a32.07 32.07 0 0 0-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 260H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V340c0-44.2-35.8-80-80-80zM512 716c-88.4 0-160-71.6-160-160s71.6-160 160-160 160 71.6 160 160-71.6 160-160 160zm-96-160a96 96 0 1 0 192 0 96 96 0 1 0-192 0z",-12,-13)};p.canvas({padding:.5});p.Canvas.include({_updateMarkerPoint:function(e){if(!(!this._drawing||e._empty()||e.feature&&e.feature.properties._isHidden)){var t=e._point,n=e.options._radiusM,l=e.options.image,s=e._map,o=this._ctx,i=e.options.iconName||"border";if(s){if(l){let n=e.options.w||20,s=e.options.h||20;return void o.drawImage(l,t.x-n/2,t.y-s/2,n,s)}let r=s._zoom;n&&!s._rpx&&s._needRound&&(s._rpx=s._needRound*n/u(r,s.getCenter())),s._rpx>20&&s._needRound&&(o.save(),o.beginPath(),o.globalAlpha=.2,o.fillStyle="gray",o.arc(t.x,t.y,s._rpx,0,2*Math.PI),o.fill(),o.stroke(),o.closePath(),o.restore()),r>12&&(o.save(),o.beginPath(),o.globalAlpha=1,o.fillStyle="white",o.arc(t.x,t.y,14,0,2*Math.PI),o.fill(),o.closePath(),o.restore()),o.save(),o.beginPath(),o.translate(t.x-0,t.y-0),this._fillStroke(o,e),o.stroke(iconPaths[i].path),o.globalAlpha=e.options.fillOpacity,o.fill(iconPaths[i].path),o.closePath(),o.restore()}}},_updateCirclePoint:function(e){if(this._drawing&&!e._empty()){var t=e._point,n=e.options,l=n.radius||14,s=2*l,o=(e._map,this._ctx);if(o.save(),o.beginPath(),o.globalAlpha=1,o.fillStyle=n.fillColor||"red",n.triangle)o.moveTo(t.x,t.y+l),o.lineTo(t.x+l,t.y-l),o.lineTo(t.x-l,t.y-l),o.lineTo(t.x,t.y+l);else if(n.rhomb)o.moveTo(t.x+l,t.y),o.lineTo(t.x,t.y+l),o.lineTo(t.x-l,t.y),o.lineTo(t.x,t.y-l),o.lineTo(t.x+l,t.y);else if(n.box)o.fillRect(t.x-l,t.y-l,s,s);else if(n.path){let e=h[n.path];o.translate(t.x,t.y),o.fill(e),o.stroke(e)}else o.arc(t.x,t.y,l,0,2*Math.PI);o.fill(),n.stroke&&(o.stroke(),n.triangle?(o.moveTo(t.x,t.y+l),o.lineTo(t.x+l,t.y-l),o.lineTo(t.x-l,t.y-l),o.lineTo(t.x,t.y+l)):n.box?o.strokeRect(t.x-l,t.y-l,s,s):o.arc(t.x,t.y,l,0,2*Math.PI)),o.closePath(),o.restore()}}});p.CircleMarker.extend({_updatePath:function(){this._renderer._updateMarkerPoint(this)}});const v=p.CircleMarker.extend({options:{renderer:d},_updatePath:function(){this._renderer._updateCirclePoint(this)}});p.Rectangle.extend({options:{renderer:d}});function f(){}function m(e){return e()}function y(){return Object.create(null)}function g(e){e.forEach(m)}function b(e){return"function"==typeof e}function k(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function j(e){return null==e?"":e}function x(e,t){e.appendChild(t)}function C(e,t,n){e.insertBefore(t,n||null)}function D(e){e.parentNode.removeChild(e)}function w(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function z(e){return document.createElement(e)}function T(e){return document.createTextNode(e)}function O(){return T(" ")}function F(){return T("")}function $(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function E(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function M(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function H(e){return""===e?void 0:+e}function P(e,t){t=""+t,e.data!==t&&(e.data=t)}function S(e,t){(null!=t||e.value)&&(e.value=t)}function q(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t)return void(l.selected=!0)}}function U(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];l.selected=~t.indexOf(l.__value)}}function I(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function N(e){return[].map.call(e.querySelectorAll(":checked"),e=>e.__value)}let A;function B(e){A=e}function G(){if(!A)throw new Error("Function called outside component initialization");return A}function R(e){G().$$.after_update.push(e)}function Z(){const e=G();return(t,n)=>{const l=e.$$.callbacks[t];if(l){const s=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);l.slice().forEach(t=>{t.call(e,s)})}}}const Y=[],V=[],W=[],K=[],Q=Promise.resolve();let J=!1;function X(e){W.push(e)}let ee=!1;const te=new Set;function ne(){if(!ee){ee=!0;do{for(let e=0;e<Y.length;e+=1){const t=Y[e];B(t),le(t.$$)}for(Y.length=0;V.length;)V.pop()();for(let e=0;e<W.length;e+=1){const t=W[e];te.has(t)||(te.add(t),t())}W.length=0}while(Y.length);for(;K.length;)K.pop()();J=!1,ee=!1,te.clear()}}function le(e){if(null!==e.fragment){e.update(),g(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(X)}}const se=new Set;let oe;function ie(){oe={r:0,c:[],p:oe}}function re(){oe.r||g(oe.c),oe=oe.p}function ae(e,t){e&&e.i&&(se.delete(e),e.i(t))}function ce(e,t,n,l){if(e&&e.o){if(se.has(e))return;se.add(e),oe.c.push(()=>{se.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}}function pe(e){e&&e.c()}function de(e,t,n){const{fragment:l,on_mount:s,on_destroy:o,after_update:i}=e.$$;l&&l.m(t,n),X(()=>{const t=s.map(m).filter(b);o?o.push(...t):g(t),e.$$.on_mount=[]}),i.forEach(X)}function ue(e,t){const n=e.$$;null!==n.fragment&&(g(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function _e(e,t){-1===e.$$.dirty[0]&&(Y.push(e),J||(J=!0,Q.then(ne)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function he(e,t,n,l,s,o,i=[-1]){const r=A;B(e);const a=t.props||{},c=e.$$={fragment:null,ctx:null,props:o,update:f,not_equal:s,bound:y(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(r?r.$$.context:[]),callbacks:y(),dirty:i};let p=!1;if(c.ctx=n?n(e,a,(t,n,...l)=>{const o=l.length?l[0]:n;return c.ctx&&s(c.ctx[t],c.ctx[t]=o)&&(c.bound[t]&&c.bound[t](o),p&&_e(e,t)),n}):[],c.update(),p=!0,g(c.before_update),c.fragment=!!l&&l(c.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);c.fragment&&c.fragment.l(e),e.forEach(D)}else c.fragment&&c.fragment.c();t.intro&&ae(e.$$.fragment),de(e,t.target,t.anchor),ne()}B(r)}class ve{$destroy(){ue(this,1),this.$destroy=f}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function fe(e,t,n){const l=e.slice();return l[7]=t[n],l[9]=n,l}function me(e){let t,n,l,s,o;function i(...t){return e[6](e[9],...t)}return{c(){t=z("li"),M(t,"class",n="dot"+(e[9]===e[1]?" selected":"")+" svelte-jjp3es"),t.value=l=e[9],M(t,"role","button"),M(t,"tabindex","0"),M(t,"aria-label",s="slide item "+e[9])},m(e,n,l){C(e,t,n),l&&o(),o=$(t,"click",E(i))},p(l,s){e=l,2&s&&n!==(n="dot"+(e[9]===e[1]?" selected":"")+" svelte-jjp3es")&&M(t,"class",n)},d(e){e&&D(t),o()}}}function ye(e){let t,n,l,s,o,i,r,a,c,p,d,u,_,h,v,m,y,b,k,j,L,F,H,S,q,U,I,N,A,B,G=(e[0][e[1]].kindName||"Фото и схемы ДТП")+"",R=e[1]+1+"",Z=e[0].length+"",Y=e[0],V=[];for(let t=0;t<Y.length;t+=1)V[t]=me(fe(e,Y,t));return{c(){t=z("div"),n=O(),l=z("div"),s=z("div"),o=O(),i=z("div"),r=z("div"),a=z("div"),c=T(G),p=O(),d=z("div"),u=z("div"),_=z("div"),h=z("button"),v=O(),m=z("div"),y=z("a"),b=z("img"),L=O(),F=z("button"),H=O(),S=z("ul");for(let e=0;e<V.length;e+=1)V[e].c();q=O(),U=z("p"),I=T(R),N=T(" из "),A=T(Z),M(t,"class","modal-background svelte-jjp3es"),M(s,"title","Закрыть"),M(s,"class","ant-modal-close svelte-jjp3es"),M(a,"class","ant-modal-title"),M(a,"id","rcDialogTitle1"),M(r,"class","ant-modal-header svelte-jjp3es"),M(h,"type","button"),M(h,"aria-label","previous slide / item"),M(h,"class","control-arrow control-prev svelte-jjp3es"),b.src!==(k=""+(ge+e[0][e[1]].guid))&&M(b,"src",k),M(b,"alt",""),M(b,"class","svelte-jjp3es"),M(y,"target","_blank"),M(y,"href",j=""+(ge+e[0][e[1]].guid)),M(y,"title","Открыть на весь экран"),M(y,"class","svelte-jjp3es"),M(m,"class","slider-wrapper axis-horizontal svelte-jjp3es"),M(F,"type","button"),M(F,"aria-label","next slide / item"),M(F,"class","control-arrow control-next svelte-jjp3es"),M(S,"class","control-dots svelte-jjp3es"),M(U,"class","carousel-status svelte-jjp3es"),M(_,"class","carousel carousel-slider svelte-jjp3es"),function(e,t,n,l){e.style.setProperty(t,n,l?"important":"")}(_,"width","100%"),M(d,"class","ant-modal-body svelte-jjp3es"),M(i,"class","ant-modal-content svelte-jjp3es"),M(l,"class","modal svelte-jjp3es"),M(l,"role","dialog"),M(l,"aria-modal","true")},m(f,k,j){C(f,t,k),C(f,n,k),C(f,l,k),x(l,s),x(l,o),x(l,i),x(i,r),x(r,a),x(a,c),x(i,p),x(i,d),x(d,u),x(u,_),x(_,h),x(_,v),x(_,m),x(m,y),x(y,b),x(_,L),x(_,F),x(_,H),x(_,S);for(let e=0;e<V.length;e+=1)V[e].m(S,null);x(_,q),x(_,U),x(U,I),x(U,N),x(U,A),j&&g(B),B=[$(t,"click",E(e[2])),$(s,"click",E(e[2])),$(h,"click",E(e[3])),$(F,"click",E(e[4])),$(l,"click",E(be))]},p(e,[t]){if(3&t&&G!==(G=(e[0][e[1]].kindName||"Фото и схемы ДТП")+"")&&P(c,G),3&t&&b.src!==(k=""+(ge+e[0][e[1]].guid))&&M(b,"src",k),3&t&&j!==(j=""+(ge+e[0][e[1]].guid))&&M(y,"href",j),3&t){let n;for(Y=e[0],n=0;n<Y.length;n+=1){const l=fe(e,Y,n);V[n]?V[n].p(l,t):(V[n]=me(l),V[n].c(),V[n].m(S,null))}for(;n<V.length;n+=1)V[n].d(1);V.length=Y.length}2&t&&R!==(R=e[1]+1+"")&&P(I,R),1&t&&Z!==(Z=e[0].length+"")&&P(A,Z)},i:f,o:f,d(e){e&&D(t),e&&D(n),e&&D(l),w(V,e),g(B)}}}const ge="//map.mvs.group/skpdi/proxy.php?guid=",be=()=>{};function ke(e,t,n){const l=Z();let{data:s}=t,o=0;return e.$set=e=>{"data"in e&&n(0,s=e.data)},[s,o,()=>{l("close")},()=>{o&&n(1,o--,o)},()=>{o<s.length-1&&n(1,o++,o)},l,e=>{n(1,o=e)}]}class je extends ve{constructor(e){super(),he(this,e,ke,ye,k,{data:0})}}function xe(e,t,n){const l=e.slice();return l[9]=t[n],l}function Le(e,t,n){const l=e.slice();return l[6]=t[n],l}function Ce(e){let t,n,l,s=e[9].k_uch&&(e[9].npdd||e[9].sop_npdd)&&function(e){let t,n,l=e[9].k_uch+"";return{c(){t=z("li"),n=T(l)},m(e,l){C(e,t,l),x(t,n)},p:f,d(e){e&&D(t)}}}(e),o=e[9].npdd&&function(e){let t,n,l=e[9].npdd+"";return{c(){t=z("li"),n=T(l)},m(e,l){C(e,t,l),x(t,n)},p:f,d(e){e&&D(t)}}}(e),i=e[9].sop_npdd&&function(e){let t,n,l=e[9].sop_npdd+"";return{c(){t=z("li"),n=T(l)},m(e,l){C(e,t,l),x(t,n)},p:f,d(e){e&&D(t)}}}(e);return{c(){s&&s.c(),t=O(),o&&o.c(),n=O(),i&&i.c(),l=F()},m(e,r){s&&s.m(e,r),C(e,t,r),o&&o.m(e,r),C(e,n,r),i&&i.m(e,r),C(e,l,r)},p(e,t){e[9].k_uch&&(e[9].npdd||e[9].sop_npdd)&&s.p(e,t),e[9].npdd&&o.p(e,t),e[9].sop_npdd&&i.p(e,t)},d(e){s&&s.d(e),e&&D(t),o&&o.d(e),e&&D(n),i&&i.d(e),e&&D(l)}}}function De(e){let t,n,l=e[6].ts&&function(e){let t,n,l=e[6].ts+"";return{c(){t=z("li"),n=T(l)},m(e,l){C(e,t,l),x(t,n)},p:f,d(e){e&&D(t)}}}(e),s=e[6].arr,o=[];for(let t=0;t<s.length;t+=1)o[t]=Ce(xe(e,s,t));return{c(){l&&l.c(),t=O();for(let e=0;e<o.length;e+=1)o[e].c();n=F()},m(e,s){l&&l.m(e,s),C(e,t,s);for(let t=0;t<o.length;t+=1)o[t].m(e,s);C(e,n,s)},p(e,t){if(e[6].ts&&l.p(e,t),4&t){let l;for(s=e[6].arr,l=0;l<s.length;l+=1){const i=xe(e,s,l);o[l]?o[l].p(i,t):(o[l]=Ce(i),o[l].c(),o[l].m(n.parentNode,n))}for(;l<o.length;l+=1)o[l].d(1);o.length=s.length}},d(e){l&&l.d(e),e&&D(t),w(o,e),e&&D(n)}}}function we(e){let t,n,l,s,o,i=e[0].spog+"";return{c(){t=z("div"),n=z("div"),n.textContent="Погода:",l=O(),s=z("div"),o=T(i),M(n,"class","stitle"),M(s,"class","sval")},m(e,i){C(e,t,i),x(t,n),x(t,l),x(t,s),x(s,o)},p(e,t){1&t&&i!==(i=e[0].spog+"")&&P(o,i)},d(e){e&&D(t)}}}function ze(e){let t,n,l,s,o,i=e[0].s_pch+"";return{c(){t=z("div"),n=z("div"),n.textContent="Покрытие:",l=O(),s=z("div"),o=T(i),M(n,"class","stitle"),M(s,"class","sval")},m(e,i){C(e,t,i),x(t,n),x(t,l),x(t,s),x(s,o)},p(e,t){1&t&&i!==(i=e[0].s_pch+"")&&P(o,i)},d(e){e&&D(t)}}}function Te(e){let t,n,l,s,o,i=e[0].osv+"";return{c(){t=z("div"),n=z("div"),n.textContent="Освещенность:",l=O(),s=z("div"),o=T(i),M(n,"class","stitle"),M(s,"class","sval")},m(e,i){C(e,t,i),x(t,n),x(t,l),x(t,s),x(s,o)},p(e,t){1&t&&i!==(i=e[0].osv+"")&&P(o,i)},d(e){e&&D(t)}}}function Oe(e){let t,n,l,s,o,i=e[0].ndu+"";return{c(){t=z("div"),n=z("div"),n.textContent="Иные условия:",l=O(),s=z("div"),o=T(i),M(n,"class","stitle"),M(s,"class","sval")},m(e,i){C(e,t,i),x(t,n),x(t,l),x(t,s),x(s,o)},p(e,t){1&t&&i!==(i=e[0].ndu+"")&&P(o,i)},d(e){e&&D(t)}}}function Fe(e){let t,n,l,s,o,i,r,a,c,p,d,u,_,h,v,m,y,g,b,k,j,L,F,E,H,S,q,U,I,N,A,B,G,R,Z,Y,V,W,K,Q,J,X,ee,te,ne,le,se,oe,ie,re,ae,ce,pe,de,ue,_e,he,ve,fe,me,ye,ge,be,ke,je,xe,Ce,Fe,$e,Ee,Me,He,Pe,Se,qe,Ue,Ie,Ne,Ae=(e[0].name||e[0].dtvp||"")+"",Be=(e[0].sid||e[0].id_stat||e[0].id_skpdi||"")+"",Ge=(e[0].district||"")+"",Re=(e[0].dor||"")+"",Ze=(e[0].km||0)+"",Ye=(e[0].m||0)+"",Ve=e[0].lat+"",We=e[0].lon+"",Ke=(e[0].collision_date||e[0].dtp_date||"")+"",Qe=(e[0].dtvp||"")+"",Je=e[0].pog+"",Xe=e[0].ran+"",et=e[2],tt=[];for(let t=0;t<et.length;t+=1)tt[t]=De(Le(e,et,t));let nt=e[0].spog&&we(e),lt=e[0].s_pch&&ze(e),st=e[0].osv&&Te(e),ot=e[0].ndu&&Oe(e);return{c(){t=z("div"),n=z("div"),l=z("b"),s=T(Ae),o=O(),i=z("div"),r=z("table"),a=z("tbody"),c=z("tr"),p=z("td"),p.textContent="ID:",d=O(),u=z("td"),_=T(Be),h=O(),v=z("tr"),m=z("td"),m.textContent="Адрес:",y=O(),g=z("td"),b=T(Ge),k=O(),j=T(Re),L=O(),F=z("tr"),E=z("td"),E.textContent="Пикетаж:",H=O(),S=z("td"),q=z("b"),U=T(Ze),I=T(" км. "),N=z("b"),A=T(Ye),B=T(" м."),G=O(),R=z("tr"),Z=z("td"),Z.textContent="Координаты:",Y=O(),V=z("td"),W=T(Ve),K=O(),Q=T(We),J=O(),X=z("span"),ee=O(),te=z("tr"),ne=z("td"),ne.textContent="Дата/время:",le=O(),se=z("td"),oe=T(Ke),ie=O(),re=z("tr"),ae=z("td"),ae.textContent="Вид ДТП:",ce=O(),pe=z("td"),de=T(Qe),ue=O(),_e=z("tr"),he=z("td"),he.textContent="Нарушения:",ve=O(),fe=z("td"),me=z("ul");for(let e=0;e<tt.length;e+=1)tt[e].c();ye=O(),ge=z("tr"),be=z("td"),be.textContent="Условия:",ke=O(),je=z("td"),nt&&nt.c(),xe=O(),lt&&lt.c(),Ce=O(),st&&st.c(),Fe=O(),ot&&ot.c(),$e=O(),Ee=z("tr"),Me=z("td"),Me.textContent="Количество погибших/раненых:",He=O(),Pe=z("td"),Se=z("b"),qe=T(Je),Ue=T("/"),Ie=T(Xe),M(n,"class","pLine"),M(p,"class","first svelte-ipyqnf"),M(m,"class","first svelte-ipyqnf"),M(E,"class","first svelte-ipyqnf"),M(Z,"class","first svelte-ipyqnf"),M(X,"title","Скопировать в буфер обмена"),M(X,"class","leaflet-gmx-icon-copy"),M(ne,"class","first svelte-ipyqnf"),M(ae,"class","first svelte-ipyqnf"),M(he,"class","first svelte-ipyqnf"),M(be,"class","first svelte-ipyqnf"),M(Me,"class","first svelte-ipyqnf"),M(r,"class","table"),M(i,"class","featureCont"),M(t,"class","mvsPopup svelte-ipyqnf")},m(f,D,w){C(f,t,D),x(t,n),x(n,l),x(l,s),x(t,o),x(t,i),x(i,r),x(r,a),x(a,c),x(c,p),x(c,d),x(c,u),x(u,_),x(a,h),x(a,v),x(v,m),x(v,y),x(v,g),x(g,b),x(g,k),x(g,j),x(a,L),x(a,F),x(F,E),x(F,H),x(F,S),x(S,q),x(q,U),x(S,I),x(S,N),x(N,A),x(S,B),x(a,G),x(a,R),x(R,Z),x(R,Y),x(R,V),x(V,W),x(V,K),x(V,Q),x(V,J),x(V,X),x(a,ee),x(a,te),x(te,ne),x(te,le),x(te,se),x(se,oe),x(a,ie),x(a,re),x(re,ae),x(re,ce),x(re,pe),x(pe,de),x(a,ue),x(a,_e),x(_e,he),x(_e,ve),x(_e,fe),x(fe,me);for(let e=0;e<tt.length;e+=1)tt[e].m(me,null);x(a,ye),x(a,ge),x(ge,be),x(ge,ke),x(ge,je),nt&&nt.m(je,null),x(je,xe),lt&&lt.m(je,null),x(je,Ce),st&&st.m(je,null),x(je,Fe),ot&&ot.m(je,null),x(a,$e),x(a,Ee),x(Ee,Me),x(Ee,He),x(Ee,Pe),x(Pe,Se),x(Se,qe),x(Se,Ue),x(Se,Ie),w&&Ne(),Ne=$(X,"click",e[1])},p(e,[t]){if(1&t&&Ae!==(Ae=(e[0].name||e[0].dtvp||"")+"")&&P(s,Ae),1&t&&Be!==(Be=(e[0].sid||e[0].id_stat||e[0].id_skpdi||"")+"")&&P(_,Be),1&t&&Ge!==(Ge=(e[0].district||"")+"")&&P(b,Ge),1&t&&Re!==(Re=(e[0].dor||"")+"")&&P(j,Re),1&t&&Ze!==(Ze=(e[0].km||0)+"")&&P(U,Ze),1&t&&Ye!==(Ye=(e[0].m||0)+"")&&P(A,Ye),1&t&&Ve!==(Ve=e[0].lat+"")&&P(W,Ve),1&t&&We!==(We=e[0].lon+"")&&P(Q,We),1&t&&Ke!==(Ke=(e[0].collision_date||e[0].dtp_date||"")+"")&&P(oe,Ke),1&t&&Qe!==(Qe=(e[0].dtvp||"")+"")&&P(de,Qe),4&t){let n;for(et=e[2],n=0;n<et.length;n+=1){const l=Le(e,et,n);tt[n]?tt[n].p(l,t):(tt[n]=De(l),tt[n].c(),tt[n].m(me,null))}for(;n<tt.length;n+=1)tt[n].d(1);tt.length=et.length}e[0].spog?nt?nt.p(e,t):(nt=we(e),nt.c(),nt.m(je,xe)):nt&&(nt.d(1),nt=null),e[0].s_pch?lt?lt.p(e,t):(lt=ze(e),lt.c(),lt.m(je,Ce)):lt&&(lt.d(1),lt=null),e[0].osv?st?st.p(e,t):(st=Te(e),st.c(),st.m(je,Fe)):st&&(st.d(1),st=null),e[0].ndu?ot?ot.p(e,t):(ot=Oe(e),ot.c(),ot.m(je,null)):ot&&(ot.d(1),ot=null),1&t&&Je!==(Je=e[0].pog+"")&&P(qe,Je),1&t&&Xe!==(Xe=e[0].ran+"")&&P(Ie,Xe)},i:f,o:f,d(e){e&&D(t),w(tt,e),nt&&nt.d(),lt&&lt.d(),st&&st.d(),ot&&ot.d(),Ne()}}}function $e(e,t,n){let l,{showModal:s=!1}=t,{prp:o}=t;o.skpdiFiles;R(()=>{s&&(l=new je({target:document.body,props:{data:o.skpdiFiles}}),l.$on("close",e=>{l.$destroy(),n(3,s=!1)}))});const i=(o.tsInfo||[]).map(e=>{let t=e.ts_uch||[];return{ts:"Осталось на месте ДТП"!==e.ts?e.ts:"",arr:t.map(e=>({k_uch:e.k_uch||"",npdd:"Нет нарушений"!==e.npdd?e.npdd:"",sop_npdd:"Нет нарушений"!==e.sop_npdd?e.sop_npdd:""}))}});return e.$set=e=>{"showModal"in e&&n(3,s=e.showModal),"prp"in e&&n(0,o=e.prp)},[o,e=>{navigator.clipboard.writeText(e.target.parentNode.textContent).catch(e=>{console.log("Something went wrong",e)})},i,s]}class Ee extends ve{constructor(e){super(),he(this,e,$e,Fe,k,{showModal:3,prp:0})}}const Me=window.L,He=Me.popup();let Pe;const Se=Me.featureGroup([]);function qe(e,t,n){const l=e.slice();return l[6]=t[n],l}function Ue(e,t,n){const l=e.slice();return l[6]=t[n],l}function Ie(e){let t,n=e[1].collisionTypes,l=[];for(let t=0;t<n.length;t+=1)l[t]=Ne(Ue(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=F()},m(e,n){for(let t=0;t<l.length;t+=1)l[t].m(e,n);C(e,t,n)},p(e,s){if(2&s){let o;for(n=e[1].collisionTypes,o=0;o<n.length;o+=1){const i=Ue(e,n,o);l[o]?l[o].p(i,s):(l[o]=Ne(i),l[o].c(),l[o].m(t.parentNode,t))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(e){w(l,e),e&&D(t)}}}function Ne(e){let t,n,l=(e[6].collisionType||"")+"";return{c(){t=z("li"),n=T(l)},m(e,l){C(e,t,l),x(t,n)},p(e,t){2&t&&l!==(l=(e[6].collisionType||"")+"")&&P(n,l)},d(e){e&&D(t)}}}function Ae(e){let t,n=e[1].uchs,l=[];for(let t=0;t<n.length;t+=1)l[t]=Be(qe(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=F()},m(e,n){for(let t=0;t<l.length;t+=1)l[t].m(e,n);C(e,t,n)},p(e,s){if(2&s){let o;for(n=e[1].uchs,o=0;o<n.length;o+=1){const i=qe(e,n,o);l[o]?l[o].p(i,s):(l[o]=Be(i),l[o].c(),l[o].m(t.parentNode,t))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(e){w(l,e),e&&D(t)}}}function Be(e){let t,n,l,s,o,i,r,a,c=(e[6].collisionPartyCategory||"")+"",p=(e[6].collisionPartyCond||"")+"";return{c(){t=z("li"),n=T(c),l=O(),s=z("b"),o=z("i"),i=T("("),r=T(p),a=T(")")},m(e,c){C(e,t,c),x(t,n),x(t,l),x(t,s),x(s,o),x(o,i),x(o,r),x(o,a)},p(e,t){2&t&&c!==(c=(e[6].collisionPartyCategory||"")+"")&&P(n,c),2&t&&p!==(p=(e[6].collisionPartyCond||"")+"")&&P(r,p)},d(e){e&&D(t)}}}function Ge(e){let t,n,l,s,o,i,r,a,c,p,d,u,_,h,v,m,y,b,k,j,L,w,F,E,H,S,q,U,I,N,A,B,G,R,Z,Y,V,W,K,Q,J,X,ee,te,ne,le,se,oe,ie,re,ae,ce,pe,de,ue,_e,he,ve,fe,me,ye,ge,be,ke,je,xe=(e[1].name||e[1].dtvp||"")+"",Le=(e[1].id||e[1].id_stat||e[1].id_skpdi||"")+"",Ce=(e[1].km||0)+"",De=(e[1].m||0)+"",we=e[1].lat+"",ze=e[1].lon+"",Te=(e[1].collision_date||e[1].dtp_date||"")+"",Oe=(e[1].collision_context||e[1].dtp_date||"")+"",Fe=e[1].collisionTypes&&e[1].collisionTypes.length&&Ie(e),$e=e[1].uchs&&e[1].uchs.length&&Ae(e);return{c(){t=z("div"),n=z("div"),l=z("b"),s=T(xe),o=O(),i=z("div"),r=z("table"),a=z("tbody"),c=z("tr"),p=z("td"),p.textContent="ID:",d=O(),u=z("td"),_=T(Le),h=O(),v=z("tr"),m=z("td"),m.textContent="Пикетаж:",y=O(),b=z("td"),k=z("b"),j=T(Ce),L=T(" км. "),w=z("b"),F=T(De),E=T(" м."),H=O(),S=z("tr"),q=z("td"),q.textContent="Координаты:",U=O(),I=z("td"),N=T(we),A=O(),B=T(ze),G=O(),R=z("span"),Z=O(),Y=z("tr"),V=z("td"),V.textContent="Дата/время:",W=O(),K=z("td"),Q=T(Te),J=O(),X=z("tr"),ee=z("td"),te=z("div"),te.textContent="Условия ДТП:",ne=O(),le=z("div"),se=T(Oe),oe=O(),ie=z("tr"),re=z("td"),re.textContent="Нарушения:",ae=O(),ce=z("td"),pe=z("ul"),Fe&&Fe.c(),de=O(),ue=z("tr"),_e=z("td"),_e.textContent="Участники:",he=O(),ve=z("td"),fe=z("ul"),$e&&$e.c(),me=O(),ye=z("tr"),ge=z("td"),be=z("button"),ke=T("Фото и схемы"),M(n,"class","pLine"),M(p,"class","first"),M(m,"class","first"),M(q,"class","first"),M(R,"title","Скопировать в буфер обмена"),M(R,"class","leaflet-gmx-icon-copy"),M(V,"class","first"),M(te,"class","first"),M(ee,"colspan","2"),M(re,"class","first"),M(_e,"class","first"),M(be,"class","primary svelte-1aipaym"),be.disabled=e[2],M(ge,"class","center"),M(ge,"colspan","2"),M(r,"class","table"),M(i,"class","featureCont"),M(t,"class","mvsPopup")},m(f,D,z){C(f,t,D),x(t,n),x(n,l),x(l,s),x(t,o),x(t,i),x(i,r),x(r,a),x(a,c),x(c,p),x(c,d),x(c,u),x(u,_),x(a,h),x(a,v),x(v,m),x(v,y),x(v,b),x(b,k),x(k,j),x(b,L),x(b,w),x(w,F),x(b,E),x(a,H),x(a,S),x(S,q),x(S,U),x(S,I),x(I,N),x(I,A),x(I,B),x(I,G),x(I,R),x(a,Z),x(a,Y),x(Y,V),x(Y,W),x(Y,K),x(K,Q),x(a,J),x(a,X),x(X,ee),x(ee,te),x(ee,ne),x(ee,le),x(le,se),x(a,oe),x(a,ie),x(ie,re),x(ie,ae),x(ie,ce),x(ce,pe),Fe&&Fe.m(pe,null),x(a,de),x(a,ue),x(ue,_e),x(ue,he),x(ue,ve),x(ve,fe),$e&&$e.m(fe,null),x(a,me),x(a,ye),x(ye,ge),x(ge,be),x(be,ke),z&&g(je),je=[$(R,"click",e[3]),$(be,"click",e[5])]},p(e,[t]){2&t&&xe!==(xe=(e[1].name||e[1].dtvp||"")+"")&&P(s,xe),2&t&&Le!==(Le=(e[1].id||e[1].id_stat||e[1].id_skpdi||"")+"")&&P(_,Le),2&t&&Ce!==(Ce=(e[1].km||0)+"")&&P(j,Ce),2&t&&De!==(De=(e[1].m||0)+"")&&P(F,De),2&t&&we!==(we=e[1].lat+"")&&P(N,we),2&t&&ze!==(ze=e[1].lon+"")&&P(B,ze),2&t&&Te!==(Te=(e[1].collision_date||e[1].dtp_date||"")+"")&&P(Q,Te),2&t&&Oe!==(Oe=(e[1].collision_context||e[1].dtp_date||"")+"")&&P(se,Oe),e[1].collisionTypes&&e[1].collisionTypes.length?Fe?Fe.p(e,t):(Fe=Ie(e),Fe.c(),Fe.m(pe,null)):Fe&&(Fe.d(1),Fe=null),e[1].uchs&&e[1].uchs.length?$e?$e.p(e,t):($e=Ae(e),$e.c(),$e.m(fe,null)):$e&&($e.d(1),$e=null),4&t&&(be.disabled=e[2])},i:f,o:f,d(e){e&&D(t),Fe&&Fe.d(),$e&&$e.d(),g(je)}}}function Re(e,t,n){let l,{showModal:s=!1}=t,{prp:o}=t,i=o.files&&o.files.length?"":"disabled";R(()=>{n(2,i=o.files&&o.files.length?"":"disabled"),s&&(l=new je({target:document.body,props:{data:o.files}}),l.$on("close",e=>{l.$destroy(),n(0,s=!1)}))});return e.$set=e=>{"showModal"in e&&n(0,s=e.showModal),"prp"in e&&n(1,o=e.prp)},[s,o,i,e=>{navigator.clipboard.writeText(e.target.parentNode.textContent).catch(e=>{console.log("Something went wrong",e)})},l,()=>n(0,s=!0)]}Se._needHeat={radius:19,blur:11.26,minOpacity:.34},Se.checkZoom=e=>{Object.keys(Se._layers).length?e<12&&Se.setFilter(Pe):e>11&&Se.setFilter(Pe)},Se.setFilter=e=>{if(!Se._map)return;Se.clearLayers(),Pe=e||[];let t=[],n=[];Se._group&&Se._map&&(Se._group.getLayers().forEach(e=>{let l=e.options.props,s=0;Pe.forEach(e=>{"collision_type"===e.type?(""===e.zn[0]||e.zn.filter(e=>e===l.collision_type).length)&&s++:"id_dtp"===e.type?l.id==e.zn&&s++:"date"===e.type&&l.date>=e.zn[0]&&l.date<e.zn[1]&&s++}),s===Pe.length&&(t.push(e),n.push(e._latlng))}),Se._needHeat?(Se._map.addLayer(Se._heat),Se._heat.setLatLngs(n),Se._heat.setOptions(Se._needHeat),Se._map._zoom>11&&Se.addLayer(Me.layerGroup(t))):(Se.addLayer(Me.layerGroup(t)),Se._map.removeLayer(Se._heat)))},Se.on("remove",e=>{Se._map.removeLayer(Se._heat),Se.clearLayers()}).on("add",e=>{Se._heat=Me.heatLayer([],{gradient:{.1:"blue",.4:"lime",1:"red"}}),Pe=[],fetch("https://dtp.mvs.group/scripts/index_dev.php?request=get_stat_gipdd",{}).then(e=>e.json()).then(e=>{let t={collision_type:{},iconType:{}},n=[],l=e.map(e=>{let l=e.iconType||0,s=!1,o="#2F4F4F";l&&(s=l%2==0,l>=1&&l<=6?o="#8B4513":7===l||8===l?o="#228B22":l>=9&&l<=14?o="#8B4513":15===l||16===l?o="#7B68EE":17!==l&&18!==l||(o="#2F4F4F")),e.lat&&e.lon||(console.log("_______",e),e.lat=e.lon=0);let i=t.collision_type[e.collision_type];i?i++:i=1,t.collision_type[e.collision_type]=i,t.iconType[e.collision_type]=l;let r=Me.latLng(e.lat,e.lon,s?1:.5);return n.push(r),new v(r,{props:e,radius:6,stroke:s,fillColor:o}).bindPopup(He).on("popupopen",e=>{var t;t=e.target.options.props.id,fetch("https://dtp.mvs.group/scripts/index_dev.php?request=get_dtp_id&id="+t+"&type=gibdd",{}).then(e=>e.json()).then(e=>{let t=Me.DomUtil.create("div");const n=new Ee({target:t,props:{prp:e}});He._svObj=n,He.setContent(t)})}).on("popupclose",e=>{e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)})});Se.addLayer(Se._heat),Se._heat.setLatLngs(n),Se._heat.setOptions(Se._needHeat),Se._opt=t,Se._group=Me.layerGroup(l),Pe?Se.setFilter(Pe):Se._map._zoom>11&&Se.addLayer(Se._group),Se._refreshFilters()})});class Ze extends ve{constructor(e){super(),he(this,e,Re,Ge,k,{showModal:0,prp:1})}}const Ye=window.L,Ve=Ye.popup();let We;const Ke=Ye.featureGroup([]);function Qe(e,t,n){const l=e.slice();return l[6]=t[n],l[8]=n,l}function Je(e){let t,n,l,s,o,i="gibdd"===e[6].type?"ГИБДД":"СКПДИ";return{c(){t=z("button"),n=T(i),M(t,"class",l=j(e[2]===e[8]?"current":"")+" svelte-txaali"),t.value=s=e[8]},m(l,s,i){C(l,t,s),x(t,n),i&&o(),o=$(t,"click",e[4])},p(e,s){1&s&&i!==(i="gibdd"===e[6].type?"ГИБДД":"СКПДИ")&&P(n,i),4&s&&l!==(l=j(e[2]===e[8]?"current":"")+" svelte-txaali")&&M(t,"class",l)},d(e){e&&D(t),o()}}}function Xe(e){let t;const n=new Ze({props:{prp:e[3]}});return{c(){pe(n.$$.fragment)},m(e,l){de(n,e,l),t=!0},p(e,t){const l={};8&t&&(l.prp=e[3]),n.$set(l)},i(e){t||(ae(n.$$.fragment,e),t=!0)},o(e){ce(n.$$.fragment,e),t=!1},d(e){ue(n,e)}}}function et(e){let t;const n=new Ee({props:{prp:e[3]}});return{c(){pe(n.$$.fragment)},m(e,l){de(n,e,l),t=!0},p(e,t){const l={};8&t&&(l.prp=e[3]),n.$set(l)},i(e){t||(ae(n.$$.fragment,e),t=!0)},o(e){ce(n.$$.fragment,e),t=!1},d(e){ue(n,e)}}}function tt(e){let t,n,l,s,o,i,r,a,c,p,d=e[0]._cur,u=[];for(let t=0;t<d.length;t+=1)u[t]=Je(Qe(e,d,t));const _=[et,Xe],h=[];function v(e,t){return"gibdd"===e[0]._cur[e[2]].type?0:1}return r=v(e),a=h[r]=_[r](e),{c(){t=z("div"),n=z("div"),l=z("a"),l.textContent="×",s=O(),o=z("div");for(let e=0;e<u.length;e+=1)u[e].c();i=O(),a.c(),M(l,"class","leaflet-popup-close-button"),M(l,"href","#close"),M(n,"class","close"),M(o,"class","pLine"),M(t,"class","mvsPopup")},m(a,d,_){C(a,t,d),x(t,n),x(n,l),x(t,s),x(t,o);for(let e=0;e<u.length;e+=1)u[e].m(o,null);var v;x(t,i),h[r].m(t,null),c=!0,_&&p(),p=$(l,"click",(v=function(){b(e[1])&&e[1].apply(this,arguments)},function(e){return e.preventDefault(),v.call(this,e)}))},p(n,[l]){if(e=n,21&l){let t;for(d=e[0]._cur,t=0;t<d.length;t+=1){const n=Qe(e,d,t);u[t]?u[t].p(n,l):(u[t]=Je(n),u[t].c(),u[t].m(o,null))}for(;t<u.length;t+=1)u[t].d(1);u.length=d.length}let s=r;r=v(e),r===s?h[r].p(e,l):(ie(),ce(h[s],1,1,()=>{h[s]=null}),re(),a=h[r],a||(a=h[r]=_[r](e),a.c()),ae(a,1),a.m(t,null))},i(e){c||(ae(a),c=!0)},o(e){ce(a),c=!1},d(e){e&&D(t),w(u,e),h[r].d(),p()}}}function nt(e,t,n){let{prp:l}=t,{closeMe:s=(()=>{})}=t,o=0,i={};const r=e=>{let t=l._cur[e],s=t.type,o="https://dtp.mvs.group/scripts/index_dev.php?request=get_dtp_id&id="+t.id+"&type="+s;fetch(o,{}).then(e=>e.json()).then(e=>{n(3,i=e)})};return r(o),e.$set=e=>{"prp"in e&&n(0,l=e.prp),"closeMe"in e&&n(1,s=e.closeMe)},[l,s,o,i,e=>{let t=e.target,l=Number(t.value);o!==l&&(n(2,o=l),r(o))}]}Ke._needHeat={radius:19,blur:11.26,minOpacity:.34},Ke.checkZoom=e=>{Object.keys(Ke._layers).length?e<12&&Ke.setFilter(We):e>11&&Ke.setFilter(We)},Ke.setFilter=e=>{if(!Ke._map)return;Ke.clearLayers(),We=e||[];let t=[],n=[];Ke._group&&Ke._map&&(Ke._group.getLayers().forEach(e=>{let l=e.options.props,s=0;We.forEach(e=>{"collision_type"===e.type?(""===e.zn[0]||e.zn.filter(e=>e===l.collision_type).length)&&s++:"id_dtp"===e.type?l.id==e.zn&&s++:"date"===e.type&&l.date>=e.zn[0]&&l.date<e.zn[1]&&s++}),s===We.length&&(t.push(e),n.push(e._latlng))}),Ke._needHeat?(Ke._map.addLayer(Ke._heat),Ke._heat.setLatLngs(n),Ke._heat.setOptions(Ke._needHeat),Ke._map._zoom>11&&Ke.addLayer(Ye.layerGroup(t))):(Ke.addLayer(Ye.layerGroup(t)),Ke._map.removeLayer(Ke._heat)))},Ke.on("remove",()=>{Ke._map.removeLayer(Ke._heat),Ke.clearLayers()}).on("add",e=>{Ke._heat=Ye.heatLayer([]),We=[],fetch("https://dtp.mvs.group/scripts/index_dev.php?request=get_skpdi",{}).then(e=>e.json()).then(e=>{let t={collision_type:{},iconType:{}},n=[],l=e.map(e=>{let l=e.iconType||0,s=!1,o="#2F4F4F";l&&(s=l%2==0,l>=1&&l<=6?o="#8B4513":7===l||8===l?o="#228B22":l>=9&&l<=14?o="#8B4513":15===l||16===l?o="#7B68EE":17!==l&&18!==l||(o="#2F4F4F")),e.lat&&e.lon||(console.log("_______",e),e.lat=e.lon=0);let i=t.collision_type[e.collision_type];i?i++:i=1,t.collision_type[e.collision_type]=i,t.iconType[e.collision_type]=l;let r=Ye.latLng(e.lat,e.lon,s?1:.5);return n.push(r),new v(r,{props:e,radius:6,box:!0,stroke:s,fillColor:o}).bindPopup(Ve).on("popupopen",e=>{var t;t=e.target.options.props.id,fetch("https://dtp.mvs.group/scripts/index_dev.php?request=get_dtp_id&id="+t+"&type=skpdi",{}).then(e=>e.json()).then(e=>{let t=Ye.DomUtil.create("div");const n=new Ze({target:t,props:{prp:e}});Ve._svObj=n,Ve.setContent(t)})}).on("popupclose",e=>{console.log("popupclose",e),e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)})});Ke.addLayer(Ke._heat),Ke._heat.setLatLngs(n),Ke._heat.setOptions(Ke._needHeat),Ke._opt=t,Ke._group=Ye.layerGroup(l),We?Ke.setFilter(We):Ke.addLayer(Ke._group),Ke.checkZoom(Ke._map._zoom),Ke._refreshFilters()})});class lt extends ve{constructor(e){super(),he(this,e,nt,tt,k,{prp:0,closeMe:1})}}const st=window.L,ot=st.popup();let it;const rt=st.featureGroup([]);function at(e,t,n){const l=e.slice();return l[159]=t[n],l}function ct(e,t,n){const l=e.slice();return l[159]=t[n],l}function pt(e,t,n){const l=e.slice();return l[159]=t[n],l}function dt(e,t,n){const l=e.slice();return l[159]=t[n],l}function ut(e,t,n){const l=e.slice();return l[159]=t[n],l}function _t(e,t,n){const l=e.slice();return l[172]=t[n],l}function ht(e,t,n){const l=e.slice();return l[159]=t[n],l}function vt(e,t,n){const l=e.slice();return l[159]=t[n],l}function ft(e,t,n){const l=e.slice();return l[159]=t[n],l}function mt(e,t,n){const l=e.slice();return l[172]=t[n],l}function yt(e,t,n){const l=e.slice();return l[159]=t[n],l}function gt(e,t,n){const l=e.slice();return l[159]=t[n],l}function bt(e,t,n){const l=e.slice();return l[159]=t[n],l}function kt(e,t,n){const l=e.slice();return l[172]=t[n],l}function jt(e,t,n){const l=e.slice();return l[159]=t[n],l}function xt(e,t,n){const l=e.slice();return l[159]=t[n],l}function Lt(e,t,n){const l=e.slice();return l[159]=t[n],l}function Ct(e,t,n){const l=e.slice();return l[159]=t[n],l}function Dt(e,t,n){const l=e.slice();return l[159]=t[n],l}function wt(e,t,n){const l=e.slice();return l[159]=t[n],l}function zt(e,t,n){const l=e.slice();return l[159]=t[n],l}function Tt(e){let t,n,l,s,o,i,r,a,c,p,d,u,_,h,v,f,m,y,b,k,j,L,F,E,H=e[71],P=[];for(let t=0;t<H.length;t+=1)P[t]=Ot(zt(e,H,t));return{c(){t=z("div"),t.innerHTML="Фильтры - <b>ДТП Очаги(Picket)</b>",n=O(),l=z("div"),s=z("div"),o=T("ID Очага: "),i=z("input"),r=O(),a=z("div"),c=T("ID ДТП: "),p=z("input"),d=O(),u=z("div"),_=z("input"),v=z("label"),v.textContent="одного типа",f=O(),m=z("input"),b=z("label"),b.textContent="разного типа",k=O(),j=z("div"),L=z("select"),F=z("option"),F.textContent=`\n\t\t\t\t\t\tВсе дороги (${e[71].reduce(e[115],0)})\n\t\t\t\t\t`;for(let e=0;e<P.length;e+=1)P[e].c();M(t,"class","pLine svelte-1jsovbn"),M(i,"type","text"),i.value=e[16],M(i,"class","svelte-1jsovbn"),M(s,"class","pLine svelte-1jsovbn"),M(p,"type","text"),p.value=e[13],M(p,"class","svelte-1jsovbn"),M(a,"class","pLine svelte-1jsovbn"),M(_,"type","checkbox"),M(_,"id","ht_3"),_.checked=h=e[15].hearth3,M(_,"name","hearth3"),M(_,"class","svelte-1jsovbn"),M(v,"for","ht_3"),M(v,"class","svelte-1jsovbn"),M(m,"type","checkbox"),M(m,"id","ht_5"),m.checked=y=e[15].hearth5,M(m,"name","hearth5"),M(m,"class","svelte-1jsovbn"),M(b,"for","ht_5"),M(b,"class","svelte-1jsovbn"),M(u,"class","pLine svelte-1jsovbn"),F.__value="",F.value=F.__value,M(F,"class","svelte-1jsovbn"),M(L,"class","multiple_icon_typeTmp svelte-1jsovbn"),L.multiple=!0,void 0===e[14]&&X(()=>e[116].call(L)),M(j,"class","pLine svelte-1jsovbn"),M(l,"class","filtersCont svelte-1jsovbn")},m(h,y,D){C(h,t,y),C(h,n,y),C(h,l,y),x(l,s),x(s,o),x(s,i),x(l,r),x(l,a),x(a,c),x(a,p),x(l,d),x(l,u),x(u,_),x(u,v),x(u,f),x(u,m),x(u,b),x(l,k),x(l,j),x(j,L),x(L,F);for(let e=0;e<P.length;e+=1)P[e].m(L,null);U(L,e[14]),D&&g(E),E=[$(i,"input",e[76]),$(p,"input",e[75]),$(_,"change",e[77]),$(m,"change",e[77]),$(L,"change",e[116]),$(L,"change",e[74])]},p(e,t){if(65536&t[0]&&i.value!==e[16]&&(i.value=e[16]),8192&t[0]&&p.value!==e[13]&&(p.value=e[13]),32768&t[0]&&h!==(h=e[15].hearth3)&&(_.checked=h),32768&t[0]&&y!==(y=e[15].hearth5)&&(m.checked=y),768&t[2]){let n;for(H=e[71],n=0;n<H.length;n+=1){const l=zt(e,H,n);P[n]?P[n].p(l,t):(P[n]=Ot(l),P[n].c(),P[n].m(L,null))}for(;n<P.length;n+=1)P[n].d(1);P.length=H.length}16384&t[0]&&U(L,e[14])},d(e){e&&D(t),e&&D(n),e&&D(l),w(P,e),g(E)}}}function Ot(e){let t,n,l,s,o,i,r,a,c=e[70].road[e[159]]+"",p=e[159]+"";return{c(){t=z("option"),n=T("("),l=T(c),s=T(") - "),o=T(p),i=O(),t.__value=r=e[159],t.value=t.__value,M(t,"class",a="road_"+e[159]+" svelte-1jsovbn")},m(e,r){C(e,t,r),x(t,n),x(t,l),x(t,s),x(t,o),x(t,i)},p:f,d(e){e&&D(t)}}}function Ft(e){let t,n,l,s,o,i,r,a,c,p,d,u,_,h,v,f,m,y,b,k,j,L,F,E,H,P,S,I,N,A,B,G=Object.keys(e[1]._opt.years).sort(),R=[];for(let t=0;t<G.length;t+=1)R[t]=$t(wt(e,G,t));let Z=e[69],Y=[];for(let t=0;t<Z.length;t+=1)Y[t]=Et(Dt(e,Z,t));return{c(){t=z("div"),t.innerHTML="Фильтры - <b>ДТП Очаги (5)</b>",n=O(),l=z("div"),s=z("div"),o=T("ID ДТП: "),i=z("input"),r=O(),a=z("div"),c=z("fieldset"),p=z("legend"),p.textContent="Фильтрация по периодам:",d=O(),u=z("div"),_=z("input"),f=z("label"),f.textContent="Фильтрация по годам",m=O(),y=z("div");for(let e=0;e<R.length;e+=1)R[e].c();b=O(),k=z("div"),j=z("select"),L=z("option"),L.textContent=`\n\t\t\t\t\t\tВсе типы (${e[69].reduce(e[119],0)})\n\t\t\t\t\t`;for(let e=0;e<Y.length;e+=1)Y[e].c();F=O(),E=z("div"),H=z("select"),P=z("option"),P.textContent=`(${e[68].stricken[0]||0}) Очаги все`,S=z("option"),S.textContent=`(${e[68].stricken[1]||0}) Только с погибшими`,I=z("option"),I.textContent=`(${e[68].stricken[2]||0}) Только с пострадавшими`,N=z("option"),N.textContent=`(${e[68].stricken[3]||0}) С пострадавшими или погибшими`,A=z("option"),A.textContent=`(${e[68].stricken[4]||0}) С пострадавшими и погибшими`,M(t,"class","pLine svelte-1jsovbn"),M(i,"type","text"),i.value=e[13],M(i,"class","svelte-1jsovbn"),M(s,"class","pLine svelte-1jsovbn"),M(_,"type","radio"),_.__value=h=1,_.value=_.__value,_.checked=v=1===e[31],M(_,"id","hearths_period_type_51"),M(_,"name","hearths_period_type_5"),M(_,"class","svelte-1jsovbn"),e[118][4].push(_),M(f,"for","hearths_period_type_51"),M(f,"class","svelte-1jsovbn"),M(y,"class","pLine margin svelte-1jsovbn"),M(u,"class","pLine type svelte-1jsovbn"),M(a,"class","pLine nowrap svelte-1jsovbn"),L.__value="",L.value=L.__value,M(L,"class","svelte-1jsovbn"),M(j,"class","multiple_icon_typeTmp svelte-1jsovbn"),j.multiple=!0,void 0===e[30]&&X(()=>e[120].call(j)),M(k,"class","pLine svelte-1jsovbn"),P.__value="",P.value=P.__value,S.__value="1",S.value=S.__value,I.__value="2",I.value=I.__value,N.__value="3",N.value=N.__value,A.__value="4",A.value=A.__value,M(H,"class","svelte-1jsovbn"),void 0===e[29]&&X(()=>e[121].call(H)),M(E,"class","pLine svelte-1jsovbn"),M(l,"class","filtersCont svelte-1jsovbn")},m(h,v,D){C(h,t,v),C(h,n,v),C(h,l,v),x(l,s),x(s,o),x(s,i),x(l,r),x(l,a),x(a,c),x(c,p),x(c,d),x(c,u),x(u,_),_.checked=_.__value===e[31],x(u,f),x(u,m),x(u,y);for(let e=0;e<R.length;e+=1)R[e].m(y,null);x(l,b),x(l,k),x(k,j),x(j,L);for(let e=0;e<Y.length;e+=1)Y[e].m(j,null);U(j,e[30]),x(l,F),x(l,E),x(E,H),x(H,P),x(H,S),x(H,I),x(H,N),x(H,A),q(H,e[29]),D&&g(B),B=[$(i,"input",e[75]),$(_,"change",e[87]),$(_,"change",e[117]),$(j,"change",e[120]),$(j,"change",e[87]),$(H,"change",e[121]),$(H,"change",e[87])]},p(e,t){if(8192&t[0]&&i.value!==e[13]&&(i.value=e[13]),1&t[1]&&v!==(v=1===e[31])&&(_.checked=v),1&t[1]&&(_.checked=_.__value===e[31]),2&t[0]|3&t[1]|33554432&t[2]){let n;for(G=Object.keys(e[1]._opt.years).sort(),n=0;n<G.length;n+=1){const l=wt(e,G,n);R[n]?R[n].p(l,t):(R[n]=$t(l),R[n].c(),R[n].m(y,null))}for(;n<R.length;n+=1)R[n].d(1);R.length=G.length}if(192&t[2]){let n;for(Z=e[69],n=0;n<Z.length;n+=1){const l=Dt(e,Z,n);Y[n]?Y[n].p(l,t):(Y[n]=Et(l),Y[n].c(),Y[n].m(j,null))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=Z.length}1073741824&t[0]&&U(j,e[30]),536870912&t[0]&&q(H,e[29])},d(s){s&&D(t),s&&D(n),s&&D(l),e[118][4].splice(e[118][4].indexOf(_),1),w(R,s),w(Y,s),g(B)}}}function $t(e){let t,n,l,s,o,i,r,a=e[159]+"";return{c(){t=z("input"),o=z("label"),i=T(a),M(t,"type","checkbox"),M(t,"id","hearths_year_5"),t.checked=n=e[32][e[159]],t.disabled=l=2===e[31],M(t,"name",s=e[159]),M(t,"class","svelte-1jsovbn"),M(o,"for","hearths_year_5"),M(o,"class","svelte-1jsovbn")},m(n,l,s){C(n,t,l),C(n,o,l),x(o,i),s&&r(),r=$(t,"change",e[87])},p(e,o){2&o[0]|2&o[1]&&n!==(n=e[32][e[159]])&&(t.checked=n),1&o[1]&&l!==(l=2===e[31])&&(t.disabled=l),2&o[0]&&s!==(s=e[159])&&M(t,"name",s),2&o[0]&&a!==(a=e[159]+"")&&P(i,a)},d(e){e&&D(t),e&&D(o),r()}}}function Et(e){let t,n,l,s,o,i,r,a,c=e[68].str_icon_type[e[159]]+"",p=e[159]+"";return{c(){t=z("option"),n=T("("),l=T(c),s=T(") - "),o=T(p),i=O(),t.__value=r=e[159],t.value=t.__value,M(t,"class",a="icon_type_"+e[68].iconType[e[159]]+" svelte-1jsovbn")},m(e,r){C(e,t,r),x(t,n),x(t,l),x(t,s),x(t,o),x(t,i)},p:f,d(e){e&&D(t)}}}function Mt(e){let t,n,l,s,o,i,r,a,c,p,d,u,_,h,v,f,m,y,b,k,j,L,F,E,H,P,S,I,N,A,B,G=Object.keys(e[2]._opt.years).sort(),R=[];for(let t=0;t<G.length;t+=1)R[t]=Ht(Ct(e,G,t));let Z=e[67],Y=[];for(let t=0;t<Z.length;t+=1)Y[t]=Pt(Lt(e,Z,t));return{c(){t=z("div"),t.innerHTML="Фильтры - <b>ДТП Очаги (3)</b>",n=O(),l=z("div"),s=z("div"),o=T("ID ДТП: "),i=z("input"),r=O(),a=z("div"),c=z("fieldset"),p=z("legend"),p.textContent="Фильтрация по периодам:",d=O(),u=z("div"),_=z("input"),f=z("label"),f.textContent="Фильтрация по годам",m=O(),y=z("div");for(let e=0;e<R.length;e+=1)R[e].c();b=O(),k=z("div"),j=z("select"),L=z("option"),L.textContent=`\n\t\t\t\t\t\tВсе типы (${e[67].reduce(e[123],0)})\n\t\t\t\t\t`;for(let e=0;e<Y.length;e+=1)Y[e].c();F=O(),E=z("div"),H=z("select"),P=z("option"),P.textContent=`(${e[66].stricken[0]||0}) Очаги все`,S=z("option"),S.textContent=`(${e[66].stricken[1]||0}) Только с погибшими`,I=z("option"),I.textContent=`(${e[66].stricken[2]||0}) Только с пострадавшими`,N=z("option"),N.textContent=`(${e[66].stricken[3]||0}) С пострадавшими или погибшими`,A=z("option"),A.textContent=`(${e[66].stricken[4]||0}) С пострадавшими и погибшими`,M(t,"class","pLine svelte-1jsovbn"),M(i,"type","text"),i.value=e[13],M(i,"class","svelte-1jsovbn"),M(s,"class","pLine svelte-1jsovbn"),M(_,"type","radio"),_.__value=h=1,_.value=_.__value,_.checked=v=1===e[35],M(_,"id","hearths_period_type_31"),M(_,"name","hearths_period_type_3"),M(_,"class","svelte-1jsovbn"),e[118][3].push(_),M(f,"for","hearths_period_type_31"),M(f,"class","svelte-1jsovbn"),M(y,"class","pLine margin svelte-1jsovbn"),M(u,"class","pLine type svelte-1jsovbn"),M(a,"class","pLine nowrap svelte-1jsovbn"),L.__value="",L.value=L.__value,M(L,"class","svelte-1jsovbn"),M(j,"class","multiple_icon_typeTmp svelte-1jsovbn"),j.multiple=!0,void 0===e[34]&&X(()=>e[124].call(j)),M(k,"class","pLine svelte-1jsovbn"),P.__value="",P.value=P.__value,S.__value="1",S.value=S.__value,I.__value="2",I.value=I.__value,N.__value="3",N.value=N.__value,A.__value="4",A.value=A.__value,M(H,"class","svelte-1jsovbn"),void 0===e[33]&&X(()=>e[125].call(H)),M(E,"class","pLine svelte-1jsovbn"),M(l,"class","filtersCont svelte-1jsovbn")},m(h,v,D){C(h,t,v),C(h,n,v),C(h,l,v),x(l,s),x(s,o),x(s,i),x(l,r),x(l,a),x(a,c),x(c,p),x(c,d),x(c,u),x(u,_),_.checked=_.__value===e[35],x(u,f),x(u,m),x(u,y);for(let e=0;e<R.length;e+=1)R[e].m(y,null);x(l,b),x(l,k),x(k,j),x(j,L);for(let e=0;e<Y.length;e+=1)Y[e].m(j,null);U(j,e[34]),x(l,F),x(l,E),x(E,H),x(H,P),x(H,S),x(H,I),x(H,N),x(H,A),q(H,e[33]),D&&g(B),B=[$(i,"input",e[75]),$(_,"change",e[88]),$(_,"change",e[122]),$(j,"change",e[124]),$(j,"change",e[88]),$(H,"change",e[125]),$(H,"change",e[88])]},p(e,t){if(8192&t[0]&&i.value!==e[13]&&(i.value=e[13]),16&t[1]&&v!==(v=1===e[35])&&(_.checked=v),16&t[1]&&(_.checked=_.__value===e[35]),4&t[0]|48&t[1]|67108864&t[2]){let n;for(G=Object.keys(e[2]._opt.years).sort(),n=0;n<G.length;n+=1){const l=Ct(e,G,n);R[n]?R[n].p(l,t):(R[n]=Ht(l),R[n].c(),R[n].m(y,null))}for(;n<R.length;n+=1)R[n].d(1);R.length=G.length}if(48&t[2]){let n;for(Z=e[67],n=0;n<Z.length;n+=1){const l=Lt(e,Z,n);Y[n]?Y[n].p(l,t):(Y[n]=Pt(l),Y[n].c(),Y[n].m(j,null))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=Z.length}8&t[1]&&U(j,e[34]),4&t[1]&&q(H,e[33])},d(s){s&&D(t),s&&D(n),s&&D(l),e[118][3].splice(e[118][3].indexOf(_),1),w(R,s),w(Y,s),g(B)}}}function Ht(e){let t,n,l,s,o,i,r,a=e[159]+"";return{c(){t=z("input"),o=z("label"),i=T(a),M(t,"type","checkbox"),M(t,"id","hearths_year_3"),t.checked=n=e[36][e[159]],t.disabled=l=2===e[35],M(t,"name",s=e[159]),M(t,"class","svelte-1jsovbn"),M(o,"for","hearths_year_3"),M(o,"class","svelte-1jsovbn")},m(n,l,s){C(n,t,l),C(n,o,l),x(o,i),s&&r(),r=$(t,"change",e[88])},p(e,o){4&o[0]|32&o[1]&&n!==(n=e[36][e[159]])&&(t.checked=n),16&o[1]&&l!==(l=2===e[35])&&(t.disabled=l),4&o[0]&&s!==(s=e[159])&&M(t,"name",s),4&o[0]&&a!==(a=e[159]+"")&&P(i,a)},d(e){e&&D(t),e&&D(o),r()}}}function Pt(e){let t,n,l,s,o,i,r,a,c=e[66].str_icon_type[e[159]]+"",p=e[159]+"";return{c(){t=z("option"),n=T("("),l=T(c),s=T(") - "),o=T(p),i=O(),t.__value=r=e[159],t.value=t.__value,M(t,"class",a="icon_type_"+e[66].iconType[e[159]]+" svelte-1jsovbn")},m(e,r){C(e,t,r),x(t,n),x(t,l),x(t,s),x(t,o),x(t,i)},p:f,d(e){e&&D(t)}}}function St(e){let t,n,l,s,o,i,r,a,c,p,d,u,_,h,v,f,m,y,b,k,j,L,F,E,H,P,S,I,N,A,B,G,R,Z,Y,V,W,K,Q=Object.keys(e[8]._opt.years).sort(),J=[];for(let t=0;t<Q.length;t+=1)J[t]=qt(xt(e,Q,t));let ee=Object.keys(e[8]._opt.years).sort(),te=[];for(let t=0;t<ee.length;t+=1)te[t]=It(jt(e,ee,t));let ne=e[65],le=[];for(let t=0;t<ne.length;t+=1)le[t]=Nt(bt(e,ne,t));return{c(){t=z("div"),t.innerHTML="Фильтры - <b>ДТП Очаги (Stat)</b>",n=O(),l=z("div"),s=z("div"),o=T("ID ДТП: "),i=z("input"),r=O(),a=z("div"),c=z("fieldset"),p=z("legend"),p.textContent="Фильтрация по периодам:",d=O(),u=z("div"),_=z("input"),f=z("label"),f.textContent="Фильтрация по годам",m=O(),y=z("div");for(let e=0;e<J.length;e+=1)J[e].c();b=O(),k=z("div"),j=z("input"),F=z("label"),F.textContent="Фильтрация по кварталам",E=O(),H=z("div");for(let e=0;e<te.length;e+=1)te[e].c();P=O(),S=z("div"),I=z("select"),N=z("option"),N.textContent=`\n\t\t\t\t\t\tВсе типы (${e[65].reduce(e[128],0)})\n\t\t\t\t\t`;for(let e=0;e<le.length;e+=1)le[e].c();A=O(),B=z("div"),G=z("select"),R=z("option"),R.textContent=`(${e[64].stricken[0]||0}) Очаги все`,Z=z("option"),Z.textContent=`(${e[64].stricken[1]||0}) Только с погибшими`,Y=z("option"),Y.textContent=`(${e[64].stricken[2]||0}) Только с пострадавшими`,V=z("option"),V.textContent=`(${e[64].stricken[3]||0}) С пострадавшими или погибшими`,W=z("option"),W.textContent=`(${e[64].stricken[4]||0}) С пострадавшими и погибшими`,M(t,"class","pLine svelte-1jsovbn"),M(i,"type","text"),i.value=e[13],M(i,"class","svelte-1jsovbn"),M(s,"class","pLine svelte-1jsovbn"),M(_,"type","radio"),_.__value=h=1,_.value=_.__value,_.checked=v=1===e[39],M(_,"id","hearths_period_type_Stat1"),M(_,"name","hearths_period_type_Stat"),M(_,"class","svelte-1jsovbn"),e[118][2].push(_),M(f,"for","hearths_period_type_Stat1"),M(f,"class","svelte-1jsovbn"),M(y,"class","pLine margin svelte-1jsovbn"),M(u,"class","pLine type svelte-1jsovbn"),M(j,"type","radio"),j.__value=L=2,j.value=j.__value,M(j,"id","hearths_period_type_Stat2"),M(j,"name","hearths_period_type_Stat"),M(j,"class","svelte-1jsovbn"),e[118][2].push(j),M(F,"for","hearths_period_type_Stat2"),M(F,"class","svelte-1jsovbn"),M(H,"class","pLine margin svelte-1jsovbn"),M(k,"class","pLine type svelte-1jsovbn"),M(a,"class","pLine nowrap svelte-1jsovbn"),N.__value="",N.value=N.__value,M(N,"class","svelte-1jsovbn"),M(I,"class","multiple_icon_typeTmp svelte-1jsovbn"),I.multiple=!0,void 0===e[38]&&X(()=>e[129].call(I)),M(S,"class","pLine svelte-1jsovbn"),R.__value="",R.value=R.__value,Z.__value="1",Z.value=Z.__value,Y.__value="2",Y.value=Y.__value,V.__value="3",V.value=V.__value,W.__value="4",W.value=W.__value,M(G,"class","svelte-1jsovbn"),void 0===e[37]&&X(()=>e[130].call(G)),M(B,"class","pLine svelte-1jsovbn"),M(l,"class","filtersCont svelte-1jsovbn")},m(h,v,L){C(h,t,v),C(h,n,v),C(h,l,v),x(l,s),x(s,o),x(s,i),x(l,r),x(l,a),x(a,c),x(c,p),x(c,d),x(c,u),x(u,_),_.checked=_.__value===e[39],x(u,f),x(u,m),x(u,y);for(let e=0;e<J.length;e+=1)J[e].m(y,null);x(c,b),x(c,k),x(k,j),j.checked=j.__value===e[39],x(k,F),x(k,E),x(k,H);for(let e=0;e<te.length;e+=1)te[e].m(H,null);x(l,P),x(l,S),x(S,I),x(I,N);for(let e=0;e<le.length;e+=1)le[e].m(I,null);U(I,e[38]),x(l,A),x(l,B),x(B,G),x(G,R),x(G,Z),x(G,Y),x(G,V),x(G,W),q(G,e[37]),L&&g(K),K=[$(i,"input",e[75]),$(_,"change",e[89]),$(_,"change",e[126]),$(j,"change",e[89]),$(j,"change",e[127]),$(I,"change",e[129]),$(I,"change",e[89]),$(G,"change",e[130]),$(G,"change",e[89])]},p(e,t){if(8192&t[0]&&i.value!==e[13]&&(i.value=e[13]),256&t[1]&&v!==(v=1===e[39])&&(_.checked=v),256&t[1]&&(_.checked=_.__value===e[39]),256&t[0]|768&t[1]|134217728&t[2]){let n;for(Q=Object.keys(e[8]._opt.years).sort(),n=0;n<Q.length;n+=1){const l=xt(e,Q,n);J[n]?J[n].p(l,t):(J[n]=qt(l),J[n].c(),J[n].m(y,null))}for(;n<J.length;n+=1)J[n].d(1);J.length=Q.length}if(256&t[1]&&(j.checked=j.__value===e[39]),256&t[0]|1280&t[1]|134217728&t[2]){let n;for(ee=Object.keys(e[8]._opt.years).sort(),n=0;n<ee.length;n+=1){const l=jt(e,ee,n);te[n]?te[n].p(l,t):(te[n]=It(l),te[n].c(),te[n].m(H,null))}for(;n<te.length;n+=1)te[n].d(1);te.length=ee.length}if(12&t[2]){let n;for(ne=e[65],n=0;n<ne.length;n+=1){const l=bt(e,ne,n);le[n]?le[n].p(l,t):(le[n]=Nt(l),le[n].c(),le[n].m(I,null))}for(;n<le.length;n+=1)le[n].d(1);le.length=ne.length}128&t[1]&&U(I,e[38]),64&t[1]&&q(G,e[37])},d(s){s&&D(t),s&&D(n),s&&D(l),e[118][2].splice(e[118][2].indexOf(_),1),w(J,s),e[118][2].splice(e[118][2].indexOf(j),1),w(te,s),w(le,s),g(K)}}}function qt(e){let t,n,l,s,o,i,r,a=e[159]+"";return{c(){t=z("input"),o=z("label"),i=T(a),M(t,"type","checkbox"),M(t,"id","hearths_year_Stat"),t.checked=n=e[40][e[159]],t.disabled=l=2===e[39],M(t,"name",s=e[159]),M(t,"class","svelte-1jsovbn"),M(o,"for","hearths_year_Stat"),M(o,"class","svelte-1jsovbn")},m(n,l,s){C(n,t,l),C(n,o,l),x(o,i),s&&r(),r=$(t,"change",e[89])},p(e,o){256&o[0]|512&o[1]&&n!==(n=e[40][e[159]])&&(t.checked=n),256&o[1]&&l!==(l=2===e[39])&&(t.disabled=l),256&o[0]&&s!==(s=e[159])&&M(t,"name",s),256&o[0]&&a!==(a=e[159]+"")&&P(i,a)},d(e){e&&D(t),e&&D(o),r()}}}function Ut(e){let t,n,l,s,o,i,r,a,c,p,d=e[172]+"",u=e[159]+"";return{c(){t=z("input"),o=z("label"),i=T(d),r=T(" кв. "),a=T(u),M(t,"type","checkbox"),M(t,"id","hearths_quarter_Stat"),t.checked=n=e[41][e[159]]&&e[41][e[159]][e[172]],t.disabled=l=1===e[39],M(t,"name",s=e[159]+"_"+e[172]),M(t,"class","svelte-1jsovbn"),M(o,"for",c="hearths_quarter_Stat_"+e[159]+"_"+e[172]),M(o,"class","svelte-1jsovbn")},m(n,l,s){C(n,t,l),C(n,o,l),x(o,i),x(o,r),x(o,a),s&&p(),p=$(t,"change",e[89])},p(e,r){256&r[0]|1024&r[1]&&n!==(n=e[41][e[159]]&&e[41][e[159]][e[172]])&&(t.checked=n),256&r[1]&&l!==(l=1===e[39])&&(t.disabled=l),256&r[0]&&s!==(s=e[159]+"_"+e[172])&&M(t,"name",s),256&r[0]&&d!==(d=e[172]+"")&&P(i,d),256&r[0]&&u!==(u=e[159]+"")&&P(a,u),256&r[0]&&c!==(c="hearths_quarter_Stat_"+e[159]+"_"+e[172])&&M(o,"for",c)},d(e){e&&D(t),e&&D(o),p()}}}function It(e){let t,n,l=Object.keys(e[8]._opt.years[e[159]]).sort(),s=[];for(let t=0;t<l.length;t+=1)s[t]=Ut(kt(e,l,t));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=O(),n=z("br")},m(e,l){for(let t=0;t<s.length;t+=1)s[t].m(e,l);C(e,t,l),C(e,n,l)},p(e,n){if(256&n[0]|1280&n[1]|134217728&n[2]){let o;for(l=Object.keys(e[8]._opt.years[e[159]]).sort(),o=0;o<l.length;o+=1){const i=kt(e,l,o);s[o]?s[o].p(i,n):(s[o]=Ut(i),s[o].c(),s[o].m(t.parentNode,t))}for(;o<s.length;o+=1)s[o].d(1);s.length=l.length}},d(e){w(s,e),e&&D(t),e&&D(n)}}}function Nt(e){let t,n,l,s,o,i,r,a,c=e[64].str_icon_type[e[159]]+"",p=e[159]+"";return{c(){t=z("option"),n=T("("),l=T(c),s=T(") - "),o=T(p),i=O(),t.__value=r=e[159],t.value=t.__value,M(t,"class",a="icon_type_"+e[64].iconType[e[159]]+" svelte-1jsovbn")},m(e,r){C(e,t,r),x(t,n),x(t,l),x(t,s),x(t,o),x(t,i)},p:f,d(e){e&&D(t)}}}function At(e){let t,n,l,s,o,i,r,a,c,p,d,u,_,h,v,f,m,y,b,k,j,L,F,E,H,P,S,I,N,A,B,G,R,Z,Y,V,W,K,Q=Object.keys(e[9]._opt.years).sort(),J=[];for(let t=0;t<Q.length;t+=1)J[t]=Bt(gt(e,Q,t));let ee=Object.keys(e[9]._opt.years).sort(),te=[];for(let t=0;t<ee.length;t+=1)te[t]=Rt(yt(e,ee,t));let ne=e[63],le=[];for(let t=0;t<ne.length;t+=1)le[t]=Zt(ft(e,ne,t));return{c(){t=z("div"),t.innerHTML="Фильтры - <b>ДТП Очаги (TMP)</b>",n=O(),l=z("div"),s=z("div"),o=T("ID ДТП: "),i=z("input"),r=O(),a=z("div"),c=z("fieldset"),p=z("legend"),p.textContent="Фильтрация по периодам:",d=O(),u=z("div"),_=z("input"),f=z("label"),f.textContent="Фильтрация по годам",m=O(),y=z("div");for(let e=0;e<J.length;e+=1)J[e].c();b=O(),k=z("div"),j=z("input"),F=z("label"),F.textContent="Фильтрация по кварталам",E=O(),H=z("div");for(let e=0;e<te.length;e+=1)te[e].c();P=O(),S=z("div"),I=z("select"),N=z("option"),N.textContent=`\n\t\t\t\t\t\tВсе типы (${e[63].reduce(e[133],0)})\n\t\t\t\t\t`;for(let e=0;e<le.length;e+=1)le[e].c();A=O(),B=z("div"),G=z("select"),R=z("option"),R.textContent=`(${e[62].stricken[0]||0}) Очаги все`,Z=z("option"),Z.textContent=`(${e[62].stricken[1]||0}) Только с погибшими`,Y=z("option"),Y.textContent=`(${e[62].stricken[2]||0}) Только с пострадавшими`,V=z("option"),V.textContent=`(${e[62].stricken[3]||0}) С пострадавшими или погибшими`,W=z("option"),W.textContent=`(${e[62].stricken[4]||0}) С пострадавшими и погибшими`,M(t,"class","pLine svelte-1jsovbn"),M(i,"type","text"),i.value=e[13],M(i,"class","svelte-1jsovbn"),M(s,"class","pLine svelte-1jsovbn"),M(_,"type","radio"),_.__value=h=1,_.value=_.__value,_.checked=v=1===e[44],M(_,"id","hearths_period_type_tmp1"),M(_,"name","hearths_period_type_tmp"),M(_,"class","svelte-1jsovbn"),e[118][1].push(_),M(f,"for","hearths_period_type_tmp1"),M(f,"class","svelte-1jsovbn"),M(y,"class","pLine margin svelte-1jsovbn"),M(u,"class","pLine type svelte-1jsovbn"),M(j,"type","radio"),j.__value=L=2,j.value=j.__value,M(j,"id","hearths_period_type_tmp2"),M(j,"name","hearths_period_type_tmp"),M(j,"class","svelte-1jsovbn"),e[118][1].push(j),M(F,"for","hearths_period_type_tmp2"),M(F,"class","svelte-1jsovbn"),M(H,"class","pLine margin svelte-1jsovbn"),M(k,"class","pLine type svelte-1jsovbn"),M(a,"class","pLine nowrap svelte-1jsovbn"),N.__value="",N.value=N.__value,M(N,"class","svelte-1jsovbn"),M(I,"class","multiple_icon_typeTmp svelte-1jsovbn"),I.multiple=!0,void 0===e[43]&&X(()=>e[134].call(I)),M(S,"class","pLine svelte-1jsovbn"),R.__value="",R.value=R.__value,Z.__value="1",Z.value=Z.__value,Y.__value="2",Y.value=Y.__value,V.__value="3",V.value=V.__value,W.__value="4",W.value=W.__value,M(G,"class","svelte-1jsovbn"),void 0===e[42]&&X(()=>e[135].call(G)),M(B,"class","pLine svelte-1jsovbn"),M(l,"class","filtersCont svelte-1jsovbn")},m(h,v,L){C(h,t,v),C(h,n,v),C(h,l,v),x(l,s),x(s,o),x(s,i),x(l,r),x(l,a),x(a,c),x(c,p),x(c,d),x(c,u),x(u,_),_.checked=_.__value===e[44],x(u,f),x(u,m),x(u,y);for(let e=0;e<J.length;e+=1)J[e].m(y,null);x(c,b),x(c,k),x(k,j),j.checked=j.__value===e[44],x(k,F),x(k,E),x(k,H);for(let e=0;e<te.length;e+=1)te[e].m(H,null);x(l,P),x(l,S),x(S,I),x(I,N);for(let e=0;e<le.length;e+=1)le[e].m(I,null);U(I,e[43]),x(l,A),x(l,B),x(B,G),x(G,R),x(G,Z),x(G,Y),x(G,V),x(G,W),q(G,e[42]),L&&g(K),K=[$(i,"input",e[75]),$(_,"change",e[90]),$(_,"change",e[131]),$(j,"change",e[90]),$(j,"change",e[132]),$(I,"change",e[134]),$(I,"change",e[90]),$(G,"change",e[135]),$(G,"change",e[90])]},p(e,t){if(8192&t[0]&&i.value!==e[13]&&(i.value=e[13]),8192&t[1]&&v!==(v=1===e[44])&&(_.checked=v),8192&t[1]&&(_.checked=_.__value===e[44]),512&t[0]|24576&t[1]|268435456&t[2]){let n;for(Q=Object.keys(e[9]._opt.years).sort(),n=0;n<Q.length;n+=1){const l=gt(e,Q,n);J[n]?J[n].p(l,t):(J[n]=Bt(l),J[n].c(),J[n].m(y,null))}for(;n<J.length;n+=1)J[n].d(1);J.length=Q.length}if(8192&t[1]&&(j.checked=j.__value===e[44]),512&t[0]|40960&t[1]|268435456&t[2]){let n;for(ee=Object.keys(e[9]._opt.years).sort(),n=0;n<ee.length;n+=1){const l=yt(e,ee,n);te[n]?te[n].p(l,t):(te[n]=Rt(l),te[n].c(),te[n].m(H,null))}for(;n<te.length;n+=1)te[n].d(1);te.length=ee.length}if(3&t[2]){let n;for(ne=e[63],n=0;n<ne.length;n+=1){const l=ft(e,ne,n);le[n]?le[n].p(l,t):(le[n]=Zt(l),le[n].c(),le[n].m(I,null))}for(;n<le.length;n+=1)le[n].d(1);le.length=ne.length}4096&t[1]&&U(I,e[43]),2048&t[1]&&q(G,e[42])},d(s){s&&D(t),s&&D(n),s&&D(l),e[118][1].splice(e[118][1].indexOf(_),1),w(J,s),e[118][1].splice(e[118][1].indexOf(j),1),w(te,s),w(le,s),g(K)}}}function Bt(e){let t,n,l,s,o,i,r,a=e[159]+"";return{c(){t=z("input"),o=z("label"),i=T(a),M(t,"type","checkbox"),M(t,"id","hearths_year_tmp"),t.checked=n=e[45][e[159]],t.disabled=l=2===e[44],M(t,"name",s=e[159]),M(t,"class","svelte-1jsovbn"),M(o,"for","hearths_year_tmp"),M(o,"class","svelte-1jsovbn")},m(n,l,s){C(n,t,l),C(n,o,l),x(o,i),s&&r(),r=$(t,"change",e[90])},p(e,o){512&o[0]|16384&o[1]&&n!==(n=e[45][e[159]])&&(t.checked=n),8192&o[1]&&l!==(l=2===e[44])&&(t.disabled=l),512&o[0]&&s!==(s=e[159])&&M(t,"name",s),512&o[0]&&a!==(a=e[159]+"")&&P(i,a)},d(e){e&&D(t),e&&D(o),r()}}}function Gt(e){let t,n,l,s,o,i,r,a,c,p,d=e[172]+"",u=e[159]+"";return{c(){t=z("input"),o=z("label"),i=T(d),r=T(" кв. "),a=T(u),M(t,"type","checkbox"),M(t,"id","hearths_quarter_tmp"),t.checked=n=e[46][e[159]]&&e[46][e[159]][e[172]],t.disabled=l=1===e[44],M(t,"name",s=e[159]+"_"+e[172]),M(t,"class","svelte-1jsovbn"),M(o,"for",c="hearths_quarter_tmp_"+e[159]+"_"+e[172]),M(o,"class","svelte-1jsovbn")},m(n,l,s){C(n,t,l),C(n,o,l),x(o,i),x(o,r),x(o,a),s&&p(),p=$(t,"change",e[90])},p(e,r){512&r[0]|32768&r[1]&&n!==(n=e[46][e[159]]&&e[46][e[159]][e[172]])&&(t.checked=n),8192&r[1]&&l!==(l=1===e[44])&&(t.disabled=l),512&r[0]&&s!==(s=e[159]+"_"+e[172])&&M(t,"name",s),512&r[0]&&d!==(d=e[172]+"")&&P(i,d),512&r[0]&&u!==(u=e[159]+"")&&P(a,u),512&r[0]&&c!==(c="hearths_quarter_tmp_"+e[159]+"_"+e[172])&&M(o,"for",c)},d(e){e&&D(t),e&&D(o),p()}}}function Rt(e){let t,n,l=Object.keys(e[9]._opt.years[e[159]]).sort(),s=[];for(let t=0;t<l.length;t+=1)s[t]=Gt(mt(e,l,t));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=O(),n=z("br")},m(e,l){for(let t=0;t<s.length;t+=1)s[t].m(e,l);C(e,t,l),C(e,n,l)},p(e,n){if(512&n[0]|40960&n[1]|268435456&n[2]){let o;for(l=Object.keys(e[9]._opt.years[e[159]]).sort(),o=0;o<l.length;o+=1){const i=mt(e,l,o);s[o]?s[o].p(i,n):(s[o]=Gt(i),s[o].c(),s[o].m(t.parentNode,t))}for(;o<s.length;o+=1)s[o].d(1);s.length=l.length}},d(e){w(s,e),e&&D(t),e&&D(n)}}}function Zt(e){let t,n,l,s,o,i,r,a,c=e[62].str_icon_type[e[159]]+"",p=e[159]+"";return{c(){t=z("option"),n=T("("),l=T(c),s=T(") - "),o=T(p),i=O(),t.__value=r=e[159],t.value=t.__value,M(t,"class",a="icon_type_"+e[62].iconType[e[159]]+" svelte-1jsovbn")},m(e,r){C(e,t,r),x(t,n),x(t,l),x(t,s),x(t,o),x(t,i)},p:f,d(e){e&&D(t)}}}function Yt(e){let t,n,l,s,o,i,r,a,c,p,d,u,_,h,v,f,m,y,b,k,j,L,F,E,H,P,S,I,N,A,B,G,R,Z,Y,V,W,K,Q,J,ee=Object.keys(e[10]._opt.years).sort(),te=[];for(let t=0;t<ee.length;t+=1)te[t]=Vt(vt(e,ee,t));let ne=Object.keys(e[10]._opt.years).sort(),le=[];for(let t=0;t<ne.length;t+=1)le[t]=Kt(ht(e,ne,t));let se=e[61],oe=[];for(let t=0;t<se.length;t+=1)oe[t]=Qt(ut(e,se,t));return{c(){t=z("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=O(),l=z("div"),l.innerHTML="Фильтры - <b>ДТП Очаги</b>",s=O(),o=z("div"),i=z("div"),r=T("ID ДТП: "),a=z("input"),c=O(),p=z("div"),d=z("fieldset"),u=z("legend"),u.textContent="Фильтрация по периодам:",_=O(),h=z("div"),v=z("input"),y=z("label"),y.textContent="Фильтрация по годам",b=O(),k=z("div");for(let e=0;e<te.length;e+=1)te[e].c();j=O(),L=z("div"),F=z("input"),H=z("label"),H.textContent="Фильтрация по кварталам",P=O(),S=z("div");for(let e=0;e<le.length;e+=1)le[e].c();I=O(),N=z("div"),A=z("select"),B=z("option"),B.textContent=`\n\t\t\t\t\t\tВсе типы (${e[61].reduce(e[138],0)})\n\t\t\t\t\t`;for(let e=0;e<oe.length;e+=1)oe[e].c();G=O(),R=z("div"),Z=z("select"),Y=z("option"),Y.textContent=`(${e[60].stricken[0]||0}) Очаги все`,V=z("option"),V.textContent=`(${e[60].stricken[1]||0}) Только с погибшими`,W=z("option"),W.textContent=`(${e[60].stricken[2]||0}) Только с пострадавшими`,K=z("option"),K.textContent=`(${e[60].stricken[3]||0}) С пострадавшими или погибшими`,Q=z("option"),Q.textContent=`(${e[60].stricken[4]||0}) С пострадавшими и погибшими`,M(t,"class","pLine svelte-1jsovbn"),M(l,"class","pLine svelte-1jsovbn"),M(a,"type","text"),a.value=e[13],M(a,"class","svelte-1jsovbn"),M(i,"class","pLine svelte-1jsovbn"),M(v,"type","radio"),v.__value=f=1,v.value=v.__value,v.checked=m=1===e[49],M(v,"id","hearths_period_type1"),M(v,"name","hearths_period_type"),M(v,"class","svelte-1jsovbn"),e[118][0].push(v),M(y,"for","hearths_period_type1"),M(y,"class","svelte-1jsovbn"),M(k,"class","pLine margin svelte-1jsovbn"),M(h,"class","pLine type svelte-1jsovbn"),M(F,"type","radio"),F.__value=E=2,F.value=F.__value,M(F,"id","hearths_period_type2"),M(F,"name","hearths_period_type"),M(F,"class","svelte-1jsovbn"),e[118][0].push(F),M(H,"for","hearths_period_type2"),M(H,"class","svelte-1jsovbn"),M(S,"class","pLine margin svelte-1jsovbn"),M(L,"class","pLine type svelte-1jsovbn"),M(p,"class","pLine nowrap svelte-1jsovbn"),B.__value="",B.value=B.__value,M(B,"class","svelte-1jsovbn"),M(A,"class","multiple_icon_typeTmp svelte-1jsovbn"),A.multiple=!0,void 0===e[48]&&X(()=>e[139].call(A)),M(N,"class","pLine svelte-1jsovbn"),Y.__value="",Y.value=Y.__value,V.__value="1",V.value=V.__value,W.__value="2",W.value=W.__value,K.__value="3",K.value=K.__value,Q.__value="4",Q.value=Q.__value,M(Z,"class","svelte-1jsovbn"),void 0===e[47]&&X(()=>e[140].call(Z)),M(R,"class","pLine svelte-1jsovbn"),M(o,"class","filtersCont svelte-1jsovbn")},m(f,m,D){C(f,t,m),C(f,n,m),C(f,l,m),C(f,s,m),C(f,o,m),x(o,i),x(i,r),x(i,a),x(o,c),x(o,p),x(p,d),x(d,u),x(d,_),x(d,h),x(h,v),v.checked=v.__value===e[49],x(h,y),x(h,b),x(h,k);for(let e=0;e<te.length;e+=1)te[e].m(k,null);x(d,j),x(d,L),x(L,F),F.checked=F.__value===e[49],x(L,H),x(L,P),x(L,S);for(let e=0;e<le.length;e+=1)le[e].m(S,null);x(o,I),x(o,N),x(N,A),x(A,B);for(let e=0;e<oe.length;e+=1)oe[e].m(A,null);U(A,e[48]),x(o,G),x(o,R),x(R,Z),x(Z,Y),x(Z,V),x(Z,W),x(Z,K),x(Z,Q),q(Z,e[47]),D&&g(J),J=[$(a,"input",e[75]),$(v,"change",e[91]),$(v,"change",e[136]),$(F,"change",e[91]),$(F,"change",e[137]),$(A,"change",e[139]),$(A,"change",e[91]),$(Z,"change",e[140]),$(Z,"change",e[91])]},p(e,t){if(8192&t[0]&&a.value!==e[13]&&(a.value=e[13]),262144&t[1]&&m!==(m=1===e[49])&&(v.checked=m),262144&t[1]&&(v.checked=v.__value===e[49]),1024&t[0]|786432&t[1]|536870912&t[2]){let n;for(ee=Object.keys(e[10]._opt.years).sort(),n=0;n<ee.length;n+=1){const l=vt(e,ee,n);te[n]?te[n].p(l,t):(te[n]=Vt(l),te[n].c(),te[n].m(k,null))}for(;n<te.length;n+=1)te[n].d(1);te.length=ee.length}if(262144&t[1]&&(F.checked=F.__value===e[49]),1024&t[0]|1310720&t[1]|536870912&t[2]){let n;for(ne=Object.keys(e[10]._opt.years).sort(),n=0;n<ne.length;n+=1){const l=ht(e,ne,n);le[n]?le[n].p(l,t):(le[n]=Kt(l),le[n].c(),le[n].m(S,null))}for(;n<le.length;n+=1)le[n].d(1);le.length=ne.length}if(1610612736&t[1]){let n;for(se=e[61],n=0;n<se.length;n+=1){const l=ut(e,se,n);oe[n]?oe[n].p(l,t):(oe[n]=Qt(l),oe[n].c(),oe[n].m(A,null))}for(;n<oe.length;n+=1)oe[n].d(1);oe.length=se.length}131072&t[1]&&U(A,e[48]),65536&t[1]&&q(Z,e[47])},d(i){i&&D(t),i&&D(n),i&&D(l),i&&D(s),i&&D(o),e[118][0].splice(e[118][0].indexOf(v),1),w(te,i),e[118][0].splice(e[118][0].indexOf(F),1),w(le,i),w(oe,i),g(J)}}}function Vt(e){let t,n,l,s,o,i,r,a,c=e[159]+"";return{c(){t=z("input"),o=z("label"),i=T(c),M(t,"type","checkbox"),M(t,"id","hearths_year"),t.checked=n=e[50][e[159]],t.disabled=l=2===e[49],M(t,"name",s=e[159]),M(t,"class","svelte-1jsovbn"),M(o,"for",r="hearths_year"+e[159]),M(o,"class","svelte-1jsovbn")},m(n,l,s){C(n,t,l),C(n,o,l),x(o,i),s&&a(),a=$(t,"change",e[91])},p(e,a){1024&a[0]|524288&a[1]&&n!==(n=e[50][e[159]])&&(t.checked=n),262144&a[1]&&l!==(l=2===e[49])&&(t.disabled=l),1024&a[0]&&s!==(s=e[159])&&M(t,"name",s),1024&a[0]&&c!==(c=e[159]+"")&&P(i,c),1024&a[0]&&r!==(r="hearths_year"+e[159])&&M(o,"for",r)},d(e){e&&D(t),e&&D(o),a()}}}function Wt(e){let t,n,l,s,o,i,r,a,c,p,d=e[172]+"",u=e[159]+"";return{c(){t=z("input"),o=z("label"),i=T(d),r=T(" кв. "),a=T(u),M(t,"type","checkbox"),M(t,"id","hearths_quarter"),t.checked=n=e[51][e[159]]&&e[51][e[159]][e[172]],t.disabled=l=1===e[49],M(t,"name",s=e[159]+"_"+e[172]),M(t,"class","svelte-1jsovbn"),M(o,"for",c="hearths_quarter_"+e[159]+"_"+e[172]),M(o,"class","svelte-1jsovbn")},m(n,l,s){C(n,t,l),C(n,o,l),x(o,i),x(o,r),x(o,a),s&&p(),p=$(t,"change",e[91])},p(e,r){1024&r[0]|1048576&r[1]&&n!==(n=e[51][e[159]]&&e[51][e[159]][e[172]])&&(t.checked=n),262144&r[1]&&l!==(l=1===e[49])&&(t.disabled=l),1024&r[0]&&s!==(s=e[159]+"_"+e[172])&&M(t,"name",s),1024&r[0]&&d!==(d=e[172]+"")&&P(i,d),1024&r[0]&&u!==(u=e[159]+"")&&P(a,u),1024&r[0]&&c!==(c="hearths_quarter_"+e[159]+"_"+e[172])&&M(o,"for",c)},d(e){e&&D(t),e&&D(o),p()}}}function Kt(e){let t,n,l=Object.keys(e[10]._opt.years[e[159]]).sort(),s=[];for(let t=0;t<l.length;t+=1)s[t]=Wt(_t(e,l,t));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=O(),n=z("br")},m(e,l){for(let t=0;t<s.length;t+=1)s[t].m(e,l);C(e,t,l),C(e,n,l)},p(e,n){if(1024&n[0]|1310720&n[1]|536870912&n[2]){let o;for(l=Object.keys(e[10]._opt.years[e[159]]).sort(),o=0;o<l.length;o+=1){const i=_t(e,l,o);s[o]?s[o].p(i,n):(s[o]=Wt(i),s[o].c(),s[o].m(t.parentNode,t))}for(;o<s.length;o+=1)s[o].d(1);s.length=l.length}},d(e){w(s,e),e&&D(t),e&&D(n)}}}function Qt(e){let t,n,l,s,o,i,r,a,c=e[60].str_icon_type[e[159]]+"",p=e[159]+"";return{c(){t=z("option"),n=T("("),l=T(c),s=T(") - "),o=T(p),i=O(),t.__value=r=e[159],t.value=t.__value,M(t,"class",a="icon_type_"+e[60].iconType[e[159]]+" svelte-1jsovbn")},m(e,r){C(e,t,r),x(t,n),x(t,l),x(t,s),x(t,o),x(t,i)},p:f,d(e){e&&D(t)}}}function Jt(e){let t;return{c(){t=z("div"),t.textContent="Нет включенных слоев",M(t,"class","pLine svelte-1jsovbn")},m(e,n){C(e,t,n)},p:f,d(e){e&&D(t)}}}function Xt(e){let t,n,l,s,o,i,r,a,c,p,d,u,_,h,v,f,m,y,b,k,j,L,w,F,E,H,q,U,I,N,A,B,G,R,Z,Y,V,W,K,Q,J,X,ee,te,ne,le,se;return{c(){t=z("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=O(),l=z("div"),s=z("button"),o=O(),i=z("input"),r=O(),a=z("input"),c=O(),p=z("button"),d=O(),u=z("div"),_=z("br"),h=O(),v=z("label"),f=z("input"),y=z("span"),b=T("Мин.яркость ("),k=T(e[23]),j=T(")"),L=O(),w=z("br"),F=O(),E=z("label"),H=z("input"),U=z("span"),I=T("Радиус ("),N=T(e[21]),A=T(")"),B=O(),G=z("br"),R=O(),Z=z("label"),Y=z("input"),W=z("span"),K=T("Размытие ("),Q=T(e[22]),J=T(")"),X=O(),ee=z("div"),te=z("input"),le=z("label"),le.textContent="- тепловая карта",M(t,"class","pLine svelte-1jsovbn"),M(s,"class","pika-prev"),M(i,"type","text"),M(i,"class","begDate svelte-1jsovbn"),M(a,"type","text"),M(a,"class","endDate svelte-1jsovbn"),M(p,"class","pika-next"),M(l,"class","pikaday pLine svelte-1jsovbn"),M(f,"type","range"),M(f,"min","0.05"),M(f,"max","1"),M(f,"step","0.01"),f.disabled=m=!e[72],M(f,"class","svelte-1jsovbn"),M(v,"class","svelte-1jsovbn"),M(H,"type","range"),M(H,"min","0"),M(H,"max","100"),M(H,"step","1"),H.disabled=q=!e[72],M(H,"class","svelte-1jsovbn"),M(E,"class","svelte-1jsovbn"),M(Y,"type","range"),M(Y,"min","0"),M(Y,"max","15"),M(Y,"step","0.01"),Y.disabled=V=!e[72],M(Y,"class","svelte-1jsovbn"),M(Z,"class","svelte-1jsovbn"),M(u,"class","pLine svelte-1jsovbn"),M(te,"type","checkbox"),te.checked=ne=e[6]._needHeat||e[5]._needHeat||e[4]._needHeat||e[3]._needHeat,M(te,"name","heat"),M(te,"class","svelte-1jsovbn"),M(le,"for","heat"),M(le,"class","svelte-1jsovbn"),M(ee,"class","pLine svelte-1jsovbn")},m(m,D,z){C(m,t,D),C(m,n,D),C(m,l,D),x(l,s),x(l,o),x(l,i),e[141](i),x(l,r),x(l,a),e[142](a),x(l,c),x(l,p),C(m,d,D),C(m,u,D),x(u,_),x(u,h),x(u,v),x(v,f),S(f,e[23]),x(v,y),x(y,b),x(y,k),x(y,j),x(u,L),x(u,w),x(u,F),x(u,E),x(E,H),S(H,e[21]),x(E,U),x(U,I),x(U,N),x(U,A),x(u,B),x(u,G),x(u,R),x(u,Z),x(Z,Y),S(Y,e[22]),x(Z,W),x(W,K),x(W,Q),x(W,J),C(m,X,D),C(m,ee,D),x(ee,te),e[146](te),x(ee,le),z&&g(se),se=[$(s,"click",e[85]),$(p,"click",e[86]),$(f,"change",e[143]),$(f,"input",e[143]),$(f,"input",e[79]),$(H,"change",e[144]),$(H,"input",e[144]),$(H,"input",e[79]),$(Y,"change",e[145]),$(Y,"input",e[145]),$(Y,"input",e[79]),$(te,"change",e[78])]},p(e,t){8388608&t[0]&&S(f,e[23]),8388608&t[0]&&P(k,e[23]),2097152&t[0]&&S(H,e[21]),2097152&t[0]&&P(N,e[21]),4194304&t[0]&&S(Y,e[22]),4194304&t[0]&&P(Q,e[22]),120&t[0]&&ne!==(ne=e[6]._needHeat||e[5]._needHeat||e[4]._needHeat||e[3]._needHeat)&&(te.checked=ne)},d(s){s&&D(t),s&&D(n),s&&D(l),e[141](null),e[142](null),s&&D(d),s&&D(u),s&&D(X),s&&D(ee),e[146](null),g(se)}}}function en(e){let t,n,l,s,o,i,r,a,c,p,d,u,_,h,v,f,m,y,b;function k(e,t){return e[3]._arm?nn:tn}let j=k(e),L=j(e),F=e[52].collision_type&&function(e){let t,n,l,s,o=e[53],i=[];for(let t=0;t<o.length;t+=1)i[t]=ln(dt(e,o,t));return{c(){t=z("div"),n=z("select"),l=z("option"),l.textContent=`\n\t\t\t\t\t\tВсе типы (${e[53].reduce(e[147],0)})\n\t\t\t\t\t`;for(let e=0;e<i.length;e+=1)i[e].c();l.__value="",l.value=l.__value,M(l,"class","svelte-1jsovbn"),M(n,"class","multiple_icon_type svelte-1jsovbn"),n.multiple=!0,void 0===e[17]&&X(()=>e[148].call(n)),M(t,"class","pLine svelte-1jsovbn")},m(o,r,a){C(o,t,r),x(t,n),x(n,l);for(let e=0;e<i.length;e+=1)i[e].m(n,null);U(n,e[17]),a&&g(s),s=[$(n,"change",e[148]),$(n,"change",e[80])]},p(e,t){if(6291456&t[1]){let l;for(o=e[53],l=0;l<o.length;l+=1){const s=dt(e,o,l);i[l]?i[l].p(s,t):(i[l]=ln(s),i[l].c(),i[l].m(n,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=o.length}131072&t[0]&&U(n,e[17])},d(e){e&&D(t),w(i,e),g(s)}}}(e);return{c(){t=z("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=O(),l=z("div"),l.innerHTML="Фильтры - <b>ДТП Сводный</b>",s=O(),o=z("div"),i=z("div"),r=T("ID ДТП: "),a=z("input"),c=O(),p=z("div"),d=z("input"),u=z("label"),u.textContent="Все",_=O(),L.c(),h=O(),v=z("div"),f=z("input"),m=z("label"),m.textContent="Только ГИБДД",y=O(),F&&F.c(),M(t,"class","pLine svelte-1jsovbn"),M(l,"class","pLine svelte-1jsovbn"),M(a,"type","text"),a.value=e[13],M(a,"class","svelte-1jsovbn"),M(i,"class","pLine svelte-1jsovbn"),M(d,"type","radio"),M(d,"id","d0"),M(d,"name","drone"),d.value="0",d.checked=!0,M(d,"class","svelte-1jsovbn"),M(u,"for","d0"),M(u,"class","svelte-1jsovbn"),M(p,"class","pLine svelte-1jsovbn"),M(f,"type","radio"),M(f,"id","d3"),M(f,"name","drone"),f.value="3",M(f,"class","svelte-1jsovbn"),M(m,"for","d3"),M(m,"class","svelte-1jsovbn"),M(v,"class","pLine svelte-1jsovbn"),M(o,"class","filtersCont svelte-1jsovbn")},m(k,j,D){C(k,t,j),C(k,n,j),C(k,l,j),C(k,s,j),C(k,o,j),x(o,i),x(i,r),x(i,a),x(o,c),x(o,p),x(p,d),x(p,u),x(o,_),L.m(o,null),x(o,h),x(o,v),x(v,f),x(v,m),x(o,y),F&&F.m(o,null),D&&g(b),b=[$(a,"input",e[75]),$(d,"click",e[84]),$(f,"click",e[84])]},p(e,t){8192&t[0]&&a.value!==e[13]&&(a.value=e[13]),j===(j=k(e))&&L?L.p(e,t):(L.d(1),L=j(e),L&&(L.c(),L.m(o,h))),e[52].collision_type&&F.p(e,t)},d(e){e&&D(t),e&&D(n),e&&D(l),e&&D(s),e&&D(o),L.d(),F&&F.d(),g(b)}}}function tn(e){let t,n,l,s,o,i,r,a;return{c(){t=z("div"),n=z("input"),l=z("label"),l.textContent="Только Пересечения",s=O(),o=z("div"),i=z("input"),r=z("label"),r.textContent="Только СКПДИ",M(n,"type","radio"),M(n,"id","d1"),M(n,"name","drone"),n.value="1",M(n,"class","svelte-1jsovbn"),M(l,"for","d1"),M(l,"class","svelte-1jsovbn"),M(t,"class","pLine svelte-1jsovbn"),M(i,"type","radio"),M(i,"id","d2"),M(i,"name","drone"),i.value="2",M(i,"class","svelte-1jsovbn"),M(r,"for","d2"),M(r,"class","svelte-1jsovbn"),M(o,"class","pLine svelte-1jsovbn")},m(c,p,d){C(c,t,p),x(t,n),x(t,l),C(c,s,p),C(c,o,p),x(o,i),x(o,r),d&&g(a),a=[$(n,"click",e[84]),$(i,"click",e[84])]},p:f,d(e){e&&D(t),e&&D(s),e&&D(o),g(a)}}}function nn(e){let t,n,l,s;return{c(){t=z("div"),n=z("input"),l=z("label"),l.textContent="Только Пересечения ГИБДД и СКПДИ",M(n,"type","radio"),M(n,"id","d1"),M(n,"name","drone"),n.value="1",M(n,"class","svelte-1jsovbn"),M(l,"for","d1"),M(l,"class","svelte-1jsovbn"),M(t,"class","pLine svelte-1jsovbn")},m(o,i,r){C(o,t,i),x(t,n),x(t,l),r&&s(),s=$(n,"click",e[84])},p:f,d(e){e&&D(t),s()}}}function ln(e){let t,n,l,s,o,i,r,a,c=e[52].collision_type[e[159]]+"",p=e[159]+"";return{c(){t=z("option"),n=T("("),l=T(c),s=T(") - "),o=T(p),i=O(),t.__value=r=e[159],t.value=t.__value,M(t,"class",a="icon_type_"+e[52].iconType[e[159]]+" svelte-1jsovbn")},m(e,r){C(e,t,r),x(t,n),x(t,l),x(t,s),x(t,o),x(t,i)},p:f,d(e){e&&D(t)}}}function sn(e){let t,n,l,s,o,i,r,a,c,p,d=e[54].collision_type&&function(e){let t,n,l,s,o=e[55],i=[];for(let t=0;t<o.length;t+=1)i[t]=on(pt(e,o,t));return{c(){t=z("div"),n=z("select"),l=z("option"),l.textContent=`\n\t\t\t\t\t\tВсе типы (${e[55].reduce(e[149],0)})\n\t\t\t\t\t`;for(let e=0;e<i.length;e+=1)i[e].c();l.__value="",l.value=l.__value,M(l,"class","svelte-1jsovbn"),M(n,"class","multiple_icon_type svelte-1jsovbn"),n.multiple=!0,void 0===e[18]&&X(()=>e[150].call(n)),M(t,"class","pLine svelte-1jsovbn")},m(o,r,a){C(o,t,r),x(t,n),x(n,l);for(let e=0;e<i.length;e+=1)i[e].m(n,null);U(n,e[18]),a&&g(s),s=[$(n,"change",e[150]),$(n,"change",e[83])]},p(e,t){if(25165824&t[1]){let l;for(o=e[55],l=0;l<o.length;l+=1){const s=pt(e,o,l);i[l]?i[l].p(s,t):(i[l]=on(s),i[l].c(),i[l].m(n,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=o.length}262144&t[0]&&U(n,e[18])},d(e){e&&D(t),w(i,e),g(s)}}}(e);return{c(){t=z("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=O(),l=z("div"),l.innerHTML="Фильтры - <b>ДТП СКПДИ</b>",s=O(),o=z("div"),i=z("div"),r=T("ID ДТП: "),a=z("input"),c=O(),d&&d.c(),M(t,"class","pLine svelte-1jsovbn"),M(l,"class","pLine svelte-1jsovbn"),M(a,"type","text"),a.value=e[13],M(a,"class","svelte-1jsovbn"),M(i,"class","pLine svelte-1jsovbn"),M(o,"class","filtersCont svelte-1jsovbn")},m(u,_,h){C(u,t,_),C(u,n,_),C(u,l,_),C(u,s,_),C(u,o,_),x(o,i),x(i,r),x(i,a),x(o,c),d&&d.m(o,null),h&&p(),p=$(a,"input",e[75])},p(e,t){8192&t[0]&&a.value!==e[13]&&(a.value=e[13]),e[54].collision_type&&d.p(e,t)},d(e){e&&D(t),e&&D(n),e&&D(l),e&&D(s),e&&D(o),d&&d.d(),p()}}}function on(e){let t,n,l,s,o,i,r,a,c=e[54].collision_type[e[159]]+"",p=e[159]+"";return{c(){t=z("option"),n=T("("),l=T(c),s=T(") - "),o=T(p),i=O(),t.__value=r=e[159],t.value=t.__value,M(t,"class",a="icon_type_"+e[54].iconType[e[159]]+" svelte-1jsovbn")},m(e,r){C(e,t,r),x(t,n),x(t,l),x(t,s),x(t,o),x(t,i)},p:f,d(e){e&&D(t)}}}function rn(e){let t,n,l,s,o,i,r,a,c,p,d=e[56].collision_type&&function(e){let t,n,l,s,o=e[57],i=[];for(let t=0;t<o.length;t+=1)i[t]=an(ct(e,o,t));return{c(){t=z("div"),n=z("select"),l=z("option"),l.textContent=`\n\t\t\t\t\t\tВсе типы (${e[57].reduce(e[151],0)})\n\t\t\t\t\t`;for(let e=0;e<i.length;e+=1)i[e].c();l.__value="",l.value=l.__value,M(l,"class","svelte-1jsovbn"),M(n,"class","multiple_icon_type svelte-1jsovbn"),n.multiple=!0,void 0===e[19]&&X(()=>e[152].call(n)),M(t,"class","pLine svelte-1jsovbn")},m(o,r,a){C(o,t,r),x(t,n),x(n,l);for(let e=0;e<i.length;e+=1)i[e].m(n,null);U(n,e[19]),a&&g(s),s=[$(n,"change",e[152]),$(n,"change",e[82])]},p(e,t){if(100663296&t[1]){let l;for(o=e[57],l=0;l<o.length;l+=1){const s=ct(e,o,l);i[l]?i[l].p(s,t):(i[l]=an(s),i[l].c(),i[l].m(n,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=o.length}524288&t[0]&&U(n,e[19])},d(e){e&&D(t),w(i,e),g(s)}}}(e);return{c(){t=z("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=O(),l=z("div"),l.innerHTML="Фильтры - <b>ДТП ГИБДД</b>",s=O(),o=z("div"),i=z("div"),r=T("ID ДТП: "),a=z("input"),c=O(),d&&d.c(),M(t,"class","pLine svelte-1jsovbn"),M(l,"class","pLine svelte-1jsovbn"),M(a,"type","text"),a.value=e[13],M(a,"class","svelte-1jsovbn"),M(i,"class","pLine svelte-1jsovbn"),M(o,"class","filtersCont svelte-1jsovbn")},m(u,_,h){C(u,t,_),C(u,n,_),C(u,l,_),C(u,s,_),C(u,o,_),x(o,i),x(i,r),x(i,a),x(o,c),d&&d.m(o,null),h&&p(),p=$(a,"input",e[75])},p(e,t){8192&t[0]&&a.value!==e[13]&&(a.value=e[13]),e[56].collision_type&&d.p(e,t)},d(e){e&&D(t),e&&D(n),e&&D(l),e&&D(s),e&&D(o),d&&d.d(),p()}}}function an(e){let t,n,l,s,o,i,r,a,c=e[56].collision_type[e[159]]+"",p=e[159]+"";return{c(){t=z("option"),n=T("("),l=T(c),s=T(") - "),o=T(p),i=O(),t.__value=r=e[159],t.value=t.__value,M(t,"class",a="icon_type_"+e[56].iconType[e[159]]+" svelte-1jsovbn")},m(e,r){C(e,t,r),x(t,n),x(t,l),x(t,s),x(t,o),x(t,i)},p:f,d(e){e&&D(t)}}}function cn(e){let t,n,l,s,o,i,r,a,c,p,d,u,_,h,v,f,m,y=e[58].collision_type&&function(e){let t,n,l,s,o=e[59],i=[];for(let t=0;t<o.length;t+=1)i[t]=pn(at(e,o,t));return{c(){t=z("div"),n=z("select"),l=z("option"),l.textContent=`\n\t\t\t\t\t\tВсе типы (${e[59].reduce(e[155],0)})\n\t\t\t\t\t`;for(let e=0;e<i.length;e+=1)i[e].c();l.__value="",l.value=l.__value,M(l,"class","svelte-1jsovbn"),M(n,"class","multiple_icon_type svelte-1jsovbn"),n.multiple=!0,void 0===e[20]&&X(()=>e[156].call(n)),M(t,"class","pLine svelte-1jsovbn")},m(o,r,a){C(o,t,r),x(t,n),x(n,l);for(let e=0;e<i.length;e+=1)i[e].m(n,null);U(n,e[20]),a&&g(s),s=[$(n,"change",e[156]),$(n,"change",e[81])]},p(e,t){if(402653184&t[1]){let l;for(o=e[59],l=0;l<o.length;l+=1){const s=at(e,o,l);i[l]?i[l].p(s,t):(i[l]=pn(s),i[l].c(),i[l].m(n,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=o.length}1048576&t[0]&&U(n,e[20])},d(e){e&&D(t),w(i,e),g(s)}}}(e);return{c(){t=z("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=O(),l=z("div"),l.innerHTML="Фильтры - <b>ДТП ГИБДД + Рубежи</b>",s=O(),o=z("div"),i=T("ID ДТП: "),r=z("input"),a=O(),c=z("div"),p=z("input"),d=z("label"),d.textContent="- с рубежами",u=O(),_=z("input"),h=z("label"),h.textContent="- без рубежей",v=O(),f=z("div"),y&&y.c(),M(t,"class","pLine svelte-1jsovbn"),M(l,"class","pLine svelte-1jsovbn"),M(r,"type","text"),r.value=e[13],M(r,"class","svelte-1jsovbn"),M(o,"class","pLine svelte-1jsovbn"),M(p,"type","checkbox"),M(p,"name","list_rubOn"),M(p,"class","svelte-1jsovbn"),M(d,"for","list_rubOn"),M(d,"class","svelte-1jsovbn"),M(_,"type","checkbox"),M(_,"name","list_rubOff"),M(_,"class","svelte-1jsovbn"),M(h,"for","list_rubOff"),M(h,"class","svelte-1jsovbn"),M(c,"class","pLine svelte-1jsovbn"),M(f,"class","filtersCont svelte-1jsovbn")},m(b,k,j){C(b,t,k),C(b,n,k),C(b,l,k),C(b,s,k),C(b,o,k),x(o,i),x(o,r),C(b,a,k),C(b,c,k),x(c,p),p.checked=e[27],x(c,d),x(c,u),x(c,_),_.checked=e[28],x(c,h),C(b,v,k),C(b,f,k),y&&y.m(f,null),j&&g(m),m=[$(r,"input",e[75]),$(p,"change",e[153]),$(p,"change",e[81]),$(_,"change",e[154]),$(_,"change",e[81])]},p(e,t){8192&t[0]&&r.value!==e[13]&&(r.value=e[13]),134217728&t[0]&&(p.checked=e[27]),268435456&t[0]&&(_.checked=e[28]),e[58].collision_type&&y.p(e,t)},d(e){e&&D(t),e&&D(n),e&&D(l),e&&D(s),e&&D(o),e&&D(a),e&&D(c),e&&D(v),e&&D(f),y&&y.d(),g(m)}}}function pn(e){let t,n,l,s,o,i,r,a,c=e[58].collision_type[e[159]]+"",p=e[159]+"";return{c(){t=z("option"),n=T("("),l=T(c),s=T(") - "),o=T(p),i=O(),t.__value=r=e[159],t.value=t.__value,M(t,"class",a="icon_type_"+e[58].iconType[e[159]]+" svelte-1jsovbn")},m(e,r){C(e,t,r),x(t,n),x(t,l),x(t,s),x(t,o),x(t,i)},p:f,d(e){e&&D(t)}}}function dn(e){let t,n,l,s,o,i,r,a,c,p,d,u;return{c(){t=z("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=O(),l=z("div"),l.innerHTML="Фильтры - <b>Рубежей</b>",s=O(),o=z("div"),i=z("div"),r=z("input"),a=z("label"),a.textContent="- есть комплексы",c=O(),p=z("input"),d=z("label"),d.textContent="-  нет комплексов",M(t,"class","pLine svelte-1jsovbn"),M(l,"class","pLine svelte-1jsovbn"),M(r,"type","checkbox"),M(r,"name","comp1"),M(r,"class","svelte-1jsovbn"),M(a,"for","comp1"),M(a,"class","svelte-1jsovbn"),M(p,"type","checkbox"),M(p,"name","comp"),M(p,"class","svelte-1jsovbn"),M(d,"for","comp"),M(d,"class","svelte-1jsovbn"),M(i,"class","pLine svelte-1jsovbn"),M(o,"class","filtersCont")},m(_,h,v){C(_,t,h),C(_,n,h),C(_,l,h),C(_,s,h),C(_,o,h),x(o,i),x(i,r),r.checked=e[25],x(i,a),x(i,c),x(i,p),p.checked=e[26],x(i,d),v&&g(u),u=[$(r,"change",e[157]),$(r,"change",e[73]),$(p,"change",e[158]),$(p,"change",e[73])]},p(e,t){33554432&t[0]&&(r.checked=e[25]),67108864&t[0]&&(p.checked=e[26])},d(e){e&&D(t),e&&D(n),e&&D(l),e&&D(s),e&&D(o),g(u)}}}function un(e){let t,n,l,s,o,i,r,a,c,p,d,u,_=e[0]._map&&e[0]._opt&&e[0]._opt.years&&Tt(e),h=e[1]._map&&e[1]._opt&&e[1]._opt.years&&Ft(e),v=e[2]._map&&e[2]._opt&&e[2]._opt.years&&Mt(e),m=e[8]._map&&e[8]._opt&&e[8]._opt.years&&St(e),y=e[9]._map&&e[9]._opt&&e[9]._opt.years&&At(e),g=e[10]._map&&e[10]._opt&&e[10]._opt.years&&Yt(e);function b(e,t){return e[3]._map||e[4]._map||e[5]._map||e[6]._map?Xt:e[10]._map||e[8]._map||e[9]._map||e[0]._map||e[2]._map||e[1]._map||e[7]._map?void 0:Jt}let k=b(e),j=k&&k(e),L=e[3]._map&&en(e),w=e[4]._map&&sn(e),T=e[5]._map&&rn(e),F=e[6]._map&&cn(e),$=e[7]._map&&dn(e);return{c(){t=z("div"),_&&_.c(),n=O(),h&&h.c(),l=O(),v&&v.c(),s=O(),m&&m.c(),o=O(),y&&y.c(),i=O(),g&&g.c(),r=O(),j&&j.c(),a=O(),L&&L.c(),c=O(),w&&w.c(),p=O(),T&&T.c(),d=O(),F&&F.c(),u=O(),$&&$.c(),M(t,"class","mvsFilters")},m(e,f){C(e,t,f),_&&_.m(t,null),x(t,n),h&&h.m(t,null),x(t,l),v&&v.m(t,null),x(t,s),m&&m.m(t,null),x(t,o),y&&y.m(t,null),x(t,i),g&&g.m(t,null),x(t,r),j&&j.m(t,null),x(t,a),L&&L.m(t,null),x(t,c),w&&w.m(t,null),x(t,p),T&&T.m(t,null),x(t,d),F&&F.m(t,null),x(t,u),$&&$.m(t,null)},p(e,f){e[0]._map&&e[0]._opt&&e[0]._opt.years?_?_.p(e,f):(_=Tt(e),_.c(),_.m(t,n)):_&&(_.d(1),_=null),e[1]._map&&e[1]._opt&&e[1]._opt.years?h?h.p(e,f):(h=Ft(e),h.c(),h.m(t,l)):h&&(h.d(1),h=null),e[2]._map&&e[2]._opt&&e[2]._opt.years?v?v.p(e,f):(v=Mt(e),v.c(),v.m(t,s)):v&&(v.d(1),v=null),e[8]._map&&e[8]._opt&&e[8]._opt.years?m?m.p(e,f):(m=St(e),m.c(),m.m(t,o)):m&&(m.d(1),m=null),e[9]._map&&e[9]._opt&&e[9]._opt.years?y?y.p(e,f):(y=At(e),y.c(),y.m(t,i)):y&&(y.d(1),y=null),e[10]._map&&e[10]._opt&&e[10]._opt.years?g?g.p(e,f):(g=Yt(e),g.c(),g.m(t,r)):g&&(g.d(1),g=null),k===(k=b(e))&&j?j.p(e,f):(j&&j.d(1),j=k&&k(e),j&&(j.c(),j.m(t,a))),e[3]._map?L?L.p(e,f):(L=en(e),L.c(),L.m(t,c)):L&&(L.d(1),L=null),e[4]._map?w?w.p(e,f):(w=sn(e),w.c(),w.m(t,p)):w&&(w.d(1),w=null),e[5]._map?T?T.p(e,f):(T=rn(e),T.c(),T.m(t,d)):T&&(T.d(1),T=null),e[6]._map?F?F.p(e,f):(F=cn(e),F.c(),F.m(t,u)):F&&(F.d(1),F=null),e[7]._map?$?$.p(e,f):($=dn(e),$.c(),$.m(t,null)):$&&($.d(1),$=null)},i:f,o:f,d(e){e&&D(t),_&&_.d(),h&&h.d(),v&&v.d(),m&&m.d(),y&&y.d(),g&&g.d(),j&&j.d(),L&&L.d(),w&&w.d(),T&&T.d(),F&&F.d(),$&&$.d()}}}function _n(e,t,n){let{DtpHearthsPicket:l}=t,{DtpHearths5:s}=t,{DtpHearths3:o}=t,{DtpHearthsStat:i}=t,{DtpHearthsTmp:r}=t,{DtpHearths:a}=t,{DtpVerifyed:c}=t,{DtpSkpdi:p}=t,{DtpGibdd:d}=t,{DtpGibddRub:u}=t,{Rub:_}=t,{control:h}=t;_||(_={}),u||(u={}),l||(l={}),s||(s={}),o||(o={});let v,f,m=0;const y=new Date,g=new Date(new Date(y.getFullYear(),y.getMonth(),y.getDate()).getTime()),b=y,k=new Date(2019,0,1);let j,x,C,D=h._id_dtp||null,w=h._dateInterval||[k.getTime()/1e3,b.getTime()/1e3],z=c._opt||{},T=z.collision_type?Object.keys(z.collision_type).sort((e,t)=>z.collision_type[t]-z.collision_type[e]):[],O=p._opt||{},F=O.collision_type?Object.keys(O.collision_type).sort((e,t)=>O.collision_type[t]-O.collision_type[e]):[],$=d._opt||{},E=$.collision_type?Object.keys($.collision_type).sort((e,t)=>$.collision_type[t]-$.collision_type[e]):[],M=(u||{})._opt||{},P=M.collision_type?Object.keys(M.collision_type).sort((e,t)=>M.collision_type[t]-M.collision_type[e]):[],S=(a||{})._opt||{},q=S.str_icon_type?Object.keys(S.str_icon_type).sort((e,t)=>S.str_icon_type[t]-S.str_icon_type[e]):[],U=(r||{})._opt||{},A=U.str_icon_type?Object.keys(U.str_icon_type).sort((e,t)=>U.str_icon_type[t]-U.str_icon_type[e]):[],B=(i||{})._opt||{},R=B.str_icon_type?Object.keys(B.str_icon_type).sort((e,t)=>B.str_icon_type[t]-B.str_icon_type[e]):[],Z=(o||{})._opt||{},Y=Z.str_icon_type?Object.keys(Z.str_icon_type).sort((e,t)=>Z.str_icon_type[t]-Z.str_icon_type[e]):[],W=(s||{})._opt||{},K=W.str_icon_type?Object.keys(W.str_icon_type).sort((e,t)=>W.str_icon_type[t]-W.str_icon_type[e]):[],Q=(l||{})._opt||{},J=Q.road?Object.keys(Q.road).sort((e,t)=>Q.road[t]-Q.road[e]):[],X=[""],ee={hearth3:!0,hearth5:!0},te=null,ne=[""],le=[""],se=[""],oe=[""],ie={radius:19,blur:11.26,minOpacity:.34},re=ie.radius,ae=11.26,ce=.34,pe=_&&_._argFilters?_._argFilters[0]:{type:"comp",zn:{on:!0,off:!0}},de=pe.zn.on,ue=pe.zn.off;const _e=()=>{if(l._map){let e=[];D&&e.push({type:"id_dtp",zn:D}),te&&e.push({type:"id_hearth",zn:te}),X&&e.push({type:"roads",zn:X}),e.push({type:"ht",zn:ee}),l.setFilter(e)}},he=()=>{_e(),Te({}),Pe({}),lt({}),Ke({}),Be({}),ke(),be(),ge(),ve()},ve=()=>{if(c._map){let e=[{type:"itemType",zn:m}];D&&e.push({type:"id_dtp",zn:D}),w&&(n(92,h._dateInterval=w,h),e.push({type:"date",zn:w})),ne&&e.push({type:"collision_type",zn:ne}),c.setFilter(e)}};let fe=u._argFilters&&u._argFilters.length?u._argFilters[0]:{type:"list_rub",zn:{on:!0,off:!0}},me=fe.zn.on,ye=fe.zn.off;const ge=()=>{if(u._map){let e=[{type:"list_rub",zn:{on:me,off:ye}}];D&&e.push({type:"id_dtp",zn:D}),w&&e.push({type:"date",zn:w}),oe&&e.push({type:"collision_type",zn:oe}),u.setFilter(e)}},be=()=>{if(d._map){let e=[];D&&e.push({type:"id_dtp",zn:D}),w&&e.push({type:"date",zn:w}),se&&e.push({type:"collision_type",zn:se}),d.setFilter(e)}},ke=()=>{if(p._map){let e=[];D&&e.push({type:"id_dtp",zn:D}),w&&e.push({type:"date",zn:w}),le&&e.push({type:"collision_type",zn:le}),p.setFilter(e)}};var je;je=()=>{let e={onSelect(e){this._o.field.value=this.toString(),w[this._o._dint]=this.getDate().getTime()/1e3+24*this._o._dint*60*60,ve(),ke(),be(),ge()},toString(e,t){let n=e.getDate();n<10&&(n="0"+n);let l=e.getMonth()+1;return l<10&&(l="0"+l),`${n}.${l}.${e.getFullYear()}`},parse(e,t){const n=e.split("."),l=parseInt(n[0],10),s=parseInt(n[1],10)-1,o=parseInt(n[2],10);return new Date(o,s,l)},i18n:{previousMonth:"Предыдущий месяц",nextMonth:"Следующий месяц",months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],weekdays:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],weekdaysShort:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]},format:"DD.MM.YYYY",setDefaultDate:!0,yearRange:20,blurFieldOnSelect:!1};j=new Pikaday(L.extend({},e,{_dint:0,field:v,defaultDate:new Date(1e3*w[0])})),x=new Pikaday(L.extend({},e,{_dint:1,field:f,defaultDate:new Date(1e3*w[1])})),he()},G().$$.on_mount.push(je);let xe,Le,Ce=[""],De=1,we={},ze={};Object.keys(W.years||{}).sort().forEach(e=>{n(32,we[e]=!0,we),Object.keys(W.years[e]).sort().forEach(t=>{Le={},Le[e]={},Le[e][t]=!0})}),ze=Le||{};const Te=e=>{if(s._map){let t=[],l=e.target||{},o=l.checked,i=l.id,r=l.name;if("hearths_period_type_52"===i)n(31,De=2);else if("hearths_period_type_51"===i)n(31,De=1);else if("hearths_year_5"===i)o?n(32,we[r]=!0,we):delete we[r];else if("hearths_quarter_5"===i){let e=r.split("_");o?(ze[e[0]]||(ze[e[0]]={}),ze[e[0]][e[1]]=!0):(ze[e[0]]&&delete ze[e[0]][e[1]],0===Object.keys(ze[e[0]]).length&&delete ze[e[0]])}1===De?t.push({type:"year",zn:we}):2===De&&t.push({type:"quarter",zn:ze}),xe&&t.push({type:"stricken",zn:Number(xe)}),Ce.length>0&&Ce[0]&&t.push({type:"str_icon_type",zn:Ce}),D&&t.push({type:"id_dtp",zn:D}),s.setFilter(t)}};let Oe,Fe,$e=[""],Ee=1,Me={},He={};Object.keys(Z.years||{}).sort().forEach(e=>{n(36,Me[e]=!0,Me),Object.keys(Z.years[e]).sort().forEach(t=>{Fe={},Fe[e]={},Fe[e][t]=!0})}),He=Fe||{};const Pe=e=>{if(o._map){let t=[],l=e.target||{},s=l.checked,i=l.id,r=l.name;if("hearths_period_type_32"===i)n(35,Ee=2);else if("hearths_period_type_31"===i)n(35,Ee=1);else if("hearths_year_3"===i)s?n(36,Me[r]=!0,Me):delete Me[r];else if("hearths_quarter_3"===i){let e=r.split("_");s?(He[e[0]]||(He[e[0]]={}),He[e[0]][e[1]]=!0):(He[e[0]]&&delete He[e[0]][e[1]],0===Object.keys(He[e[0]]).length&&delete He[e[0]])}1===Ee?t.push({type:"year",zn:Me}):2===Ee&&t.push({type:"quarter",zn:He}),Oe&&t.push({type:"stricken",zn:Number(Oe)}),$e.length>0&&$e[0]&&t.push({type:"str_icon_type",zn:$e}),D&&t.push({type:"id_dtp",zn:D}),o.setFilter(t)}};let Se,qe,Ue=[""],Ie=1,Ne={},Ae={};Object.keys(B.years||{}).sort().forEach(e=>{n(40,Ne[e]=!0,Ne),Object.keys(B.years[e]).sort().forEach(t=>{qe={},qe[e]={},qe[e][t]=!0})}),Ae=qe||{};const Be=e=>{if(i._map){let t=[],l=e.target||{},s=l.checked,o=l.id,r=l.name;if("hearths_period_type_Stat2"===o)n(39,Ie=2);else if("hearths_period_type_Stat1"===o)n(39,Ie=1);else if("hearths_year_Stat"===o)s?n(40,Ne[r]=!0,Ne):delete Ne[r];else if("hearths_quarter_Stat"===o){let e=r.split("_");s?(Ae[e[0]]||n(41,Ae[e[0]]={},Ae),n(41,Ae[e[0]][e[1]]=!0,Ae)):(Ae[e[0]]&&delete Ae[e[0]][e[1]],0===Object.keys(Ae[e[0]]).length&&delete Ae[e[0]])}1===Ie?t.push({type:"year",zn:Ne}):2===Ie&&t.push({type:"quarter",zn:Ae}),Se&&t.push({type:"stricken",zn:Number(Se)}),Ue.length>0&&Ue[0]&&t.push({type:"str_icon_type",zn:Ue}),D&&t.push({type:"id_dtp",zn:D}),i.setFilter(t)}};let Ge,Re,Ze=[""],Ye=1,Ve={},We={};Object.keys(U.years||{}).sort().forEach(e=>{n(45,Ve[e]=!0,Ve),Object.keys(U.years[e]).sort().forEach(t=>{Re={},Re[e]={},Re[e][t]=!0})}),We=Re||{};const Ke=e=>{if(r._map){let t=[],l=e.target||{},s=l.checked,o=l.id,i=l.name;if("hearths_period_type_tmp2"===o)n(44,Ye=2);else if("hearths_period_type_tmp1"===o)n(44,Ye=1);else if("hearths_year_tmp"===o)s?n(45,Ve[i]=!0,Ve):delete Ve[i];else if("hearths_quarter_tmp"===o){let e=i.split("_");s?(We[e[0]]||n(46,We[e[0]]={},We),n(46,We[e[0]][e[1]]=!0,We)):(We[e[0]]&&delete We[e[0]][e[1]],0===Object.keys(We[e[0]]).length&&delete We[e[0]])}1===Ye?t.push({type:"year",zn:Ve}):2===Ye&&t.push({type:"quarter",zn:We}),Ge&&t.push({type:"stricken",zn:Number(Ge)}),Ze.length>0&&Ze[0]&&t.push({type:"str_icon_type",zn:Ze}),D&&t.push({type:"id_dtp",zn:D}),r.setFilter(t)}};let Qe,Je,Xe=[""],et=1,tt={},nt={};Object.keys(S.years||{}).sort().forEach(e=>{n(50,tt[e]=!0,tt),Object.keys(S.years[e]).sort().forEach(t=>{Je={},Je[e]={},Je[e][t]=!0})}),nt=Je||{};const lt=e=>{if(a._map){let t=[],l=e.target||{},s=l.checked,o=l.id,i=l.name;if("hearths_period_type2"===o)n(49,et=2);else if("hearths_period_type1"===o)n(49,et=1);else if("hearths_year"===o)s?n(50,tt[i]=!0,tt):delete tt[i];else if("hearths_quarter"===o){let e=i.split("_");s?(nt[e[0]]||n(51,nt[e[0]]={},nt),n(51,nt[e[0]][e[1]]=!0,nt)):(nt[e[0]]&&delete nt[e[0]][e[1]],0===Object.keys(nt[e[0]]).length&&delete nt[e[0]])}1===et?t.push({type:"year",zn:tt}):2===et&&t.push({type:"quarter",zn:nt}),Qe&&t.push({type:"stricken",zn:Number(Qe)}),Xe.length>0&&Xe[0]&&t.push({type:"str_icon_type",zn:Xe}),D&&t.push({type:"id_dtp",zn:D}),a.setFilter(t)}};return e.$set=e=>{"DtpHearthsPicket"in e&&n(0,l=e.DtpHearthsPicket),"DtpHearths5"in e&&n(1,s=e.DtpHearths5),"DtpHearths3"in e&&n(2,o=e.DtpHearths3),"DtpHearthsStat"in e&&n(8,i=e.DtpHearthsStat),"DtpHearthsTmp"in e&&n(9,r=e.DtpHearthsTmp),"DtpHearths"in e&&n(10,a=e.DtpHearths),"DtpVerifyed"in e&&n(3,c=e.DtpVerifyed),"DtpSkpdi"in e&&n(4,p=e.DtpSkpdi),"DtpGibdd"in e&&n(5,d=e.DtpGibdd),"DtpGibddRub"in e&&n(6,u=e.DtpGibddRub),"Rub"in e&&n(7,_=e.Rub),"control"in e&&n(92,h=e.control)},[l,s,o,c,p,d,u,_,i,r,a,v,f,D,X,ee,te,ne,le,se,oe,re,ae,ce,C,de,ue,me,ye,xe,Ce,De,we,Oe,$e,Ee,Me,Se,Ue,Ie,Ne,Ae,Ge,Ze,Ye,Ve,We,Qe,Xe,et,tt,nt,z,T,O,F,$,E,M,P,S,q,U,A,B,R,Z,Y,W,K,Q,J,ie,e=>{let t=[{type:"comp",zn:{on:de,off:ue}}];_.setFilter(t)},_e,e=>{let t=e.target.value;n(13,D=t||null),n(92,h._id_dtp=D,h),he()},e=>{let t=e.target.value;n(16,te=t||null),_e()},e=>{let t=e.target;n(15,ee[t.name]=t.checked,ee),_e()},e=>{let t=e.target;n(6,u._needHeat=n(5,d._needHeat=n(4,p._needHeat=n(3,c._needHeat=!!t.checked&&ie,c),p),d),u),ge(),be(),ke(),ve()},()=>{let e={radius:re,blur:ae,minOpacity:ce};d._heat&&d._heat.setOptions(e),p._heat&&p._heat.setOptions(e),c._heat&&c._heat.setOptions(e)},ve,ge,be,ke,e=>{let t=e.target;m=Number(t.value),ve()},()=>{let e=x.getDate(),t=j.getDate(),n=e-t;0===n&&(n=864e5),j.setDate(new Date(t.getTime()-n)),x.setDate(new Date(e.getTime()-n)),w=[j.getDate().getTime()/1e3,86400+x.getDate().getTime()/1e3],ve(),ke(),be(),ge()},()=>{let e=x.getDate(),t=j.getDate(),n=e-t;0===n&&(n=864e5),j.setDate(new Date(t.getTime()+n)),x.setDate(new Date(e.getTime()+n)),w=[j.getDate().getTime()/1e3,86400+x.getDate().getTime()/1e3],ve(),ke(),be(),ge()},Te,Pe,Be,Ke,lt,h,m,w,j,x,ze,Le,He,Fe,qe,Re,Je,y,g,b,k,void 0,void 0,void 0,void 0,pe,he,fe,(e,t)=>e+=Q.road[t],function(){X=N(this),n(14,X),n(71,J)},function(){De=this.__value,n(31,De)},[[],[],[],[],[]],(e,t)=>e+=W.str_icon_type[t],function(){Ce=N(this),n(30,Ce),n(69,K)},function(){xe=I(this),n(29,xe)},function(){Ee=this.__value,n(35,Ee)},(e,t)=>e+=Z.str_icon_type[t],function(){$e=N(this),n(34,$e),n(67,Y)},function(){Oe=I(this),n(33,Oe)},function(){Ie=this.__value,n(39,Ie)},function(){Ie=this.__value,n(39,Ie)},(e,t)=>e+=B.str_icon_type[t],function(){Ue=N(this),n(38,Ue),n(65,R)},function(){Se=I(this),n(37,Se)},function(){Ye=this.__value,n(44,Ye)},function(){Ye=this.__value,n(44,Ye)},(e,t)=>e+=U.str_icon_type[t],function(){Ze=N(this),n(43,Ze),n(63,A)},function(){Ge=I(this),n(42,Ge)},function(){et=this.__value,n(49,et)},function(){et=this.__value,n(49,et)},(e,t)=>e+=S.str_icon_type[t],function(){Xe=N(this),n(48,Xe),n(61,q)},function(){Qe=I(this),n(47,Qe)},function(e){V[e?"unshift":"push"](()=>{n(11,v=e)})},function(e){V[e?"unshift":"push"](()=>{n(12,f=e)})},function(){ce=H(this.value),n(23,ce)},function(){re=H(this.value),n(21,re)},function(){ae=H(this.value),n(22,ae)},function(e){V[e?"unshift":"push"](()=>{n(24,C=e)})},(e,t)=>e+=z.collision_type[t],function(){ne=N(this),n(17,ne),n(53,T)},(e,t)=>e+=O.collision_type[t],function(){le=N(this),n(18,le),n(55,F)},(e,t)=>e+=$.collision_type[t],function(){se=N(this),n(19,se),n(57,E)},function(){me=this.checked,n(27,me)},function(){ye=this.checked,n(28,ye)},(e,t)=>e+=M.collision_type[t],function(){oe=N(this),n(20,oe),n(59,P)},function(){de=this.checked,n(25,de)},function(){ue=this.checked,n(26,ue)}]}rt._needHeat={radius:19,blur:11.26,minOpacity:.34},rt.checkZoom=e=>{Object.keys(rt._layers).length?e<12&&rt.setFilter(it):e>11&&rt.setFilter(it)},rt.setFilter=e=>{if(!rt._map)return;rt.clearLayers(),it=e||[];let t=[],n=[];rt._group&&rt._map&&(rt._group.getLayers().forEach(e=>{let l=e.options.props,s=0;it.forEach(e=>{"itemType"===e.type?(0===e.zn||1===e.zn&&l.id_stat&&l.id_skpdi||2===e.zn&&l.id_skpdi&&!l.id_stat||3===e.zn&&l.id_stat&&!l.id_skpdi)&&s++:"id_dtp"===e.type?l.id_skpdi!=e.zn&&l.id_stat!=e.zn||s++:"collision_type"===e.type?(""===e.zn[0]||e.zn.filter(e=>e===l.collision_type).length)&&s++:"date"===e.type&&l.date>=e.zn[0]&&l.date<e.zn[1]&&s++}),s===it.length&&(t.push(e),n.push(e._latlng))}),rt._needHeat?(rt._map.addLayer(rt._heat),rt._heat.setLatLngs(n),rt._heat.setOptions(rt._needHeat),rt._map._zoom>11&&rt.addLayer(st.layerGroup(t))):(rt.addLayer(st.layerGroup(t)),rt._map.removeLayer(rt._heat)))},rt.on("remove",()=>{rt._map.removeLayer(rt._heat),rt.clearLayers()}).on("add",e=>{it=[],rt._heat=st.heatLayer([],{interactive:!1}),fetch("https://dtp.mvs.group/scripts/index_dev.php?request=get_collision",{}).then(e=>e.json()).then(e=>{let t={collision_type:{},iconType:{}},n=[],l=e.map(e=>{let l=e.iconType||0,s=[],o=!1,i="#2F4F4F";l&&(o=l%2==0,l>=1&&l<=6?i="#8B4513":7===l||8===l?i="#228B22":l>=9&&l<=14?i="#8B4513":15===l||16===l?i="#7B68EE":17!==l&&18!==l||(i="#2F4F4F")),e.id_skpdi&&s.push({type:"skpdi",id:e.id_skpdi}),e.id_stat&&s.push({type:"gibdd",id:e.id_stat}),e._cur=s,e.lat&&e.lon||(console.log("_______",e),e.lat=e.lon=0);let r=t.collision_type[e.collision_type];r?r++:r=1,t.collision_type[e.collision_type]=r,t.iconType[e.collision_type]=l;let a=st.latLng(e.lat,e.lon,o?1:.5);return n.push(a),new v(a,{props:e,radius:6,triangle:s.length>1,box:!!e.id_skpdi,stroke:o,fillColor:i}).bindPopup(ot).on("popupopen",e=>{!function(e){let t=st.DomUtil.create("div");new lt({target:t,props:{prp:e}}),ot.setContent(t)}(e.target.options.props)}).on("popupclose",e=>{e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)})});rt.addLayer(rt._heat),rt._heat.setLatLngs(n),rt._heat.setOptions(rt._needHeat),rt._opt=t,rt._group=st.layerGroup(l),it?rt.setFilter(it):rt.addLayer(rt._group),rt.checkZoom(rt._map._zoom),rt._refreshFilters()})});class hn extends ve{constructor(e){super(),he(this,e,_n,un,k,{DtpHearthsPicket:0,DtpHearths5:1,DtpHearths3:2,DtpHearthsStat:8,DtpHearthsTmp:9,DtpHearths:10,DtpVerifyed:3,DtpSkpdi:4,DtpGibdd:5,DtpGibddRub:6,Rub:7,control:92},[-1,-1,-1,-1,-1,-1,-1])}}function vn(e,t,n){const l=e.slice();return l[7]=t[n],l[9]=n,l}function fn(e){let t,n,l,s,o,i,r,a,c,p,d,u=(e[0].piketaj_start_km||0)+"",_=(e[0].piketaj_finish_km||0)+"";return{c(){t=z("tr"),n=z("td"),n.textContent="Пикетаж:",l=O(),s=z("td"),o=T("От: "),i=z("b"),r=T(u),a=T(" км. до: "),c=z("b"),p=T(_),d=T(" км."),M(n,"class","first svelte-mnr9l0")},m(e,u){C(e,t,u),x(t,n),x(t,l),x(t,s),x(s,o),x(s,i),x(i,r),x(s,a),x(s,c),x(c,p),x(s,d)},p(e,t){1&t&&u!==(u=(e[0].piketaj_start_km||0)+"")&&P(r,u),1&t&&_!==(_=(e[0].piketaj_finish_km||0)+"")&&P(p,_)},d(e){e&&D(t)}}}function mn(e){let t,n;const l=new lt({props:{prp:e[7],closeMe:e[6]}});return{c(){t=z("div"),pe(l.$$.fragment),M(t,"class","win leaflet-popup-content-wrapper  svelte-mnr9l0")},m(e,s){C(e,t,s),de(l,t,null),n=!0},p(e,t){const n={};1&t&&(n.prp=e[7]),2&t&&(n.closeMe=e[6]),l.$set(n)},i(e){n||(ae(l.$$.fragment,e),n=!0)},o(e){ce(l.$$.fragment,e),n=!1},d(e){e&&D(t),ue(l)}}}function yn(e){let t,n,l,s,o,i,r,a,c,p,d,u,_,h,v,f,m,y,b,k,j,L,w,F,E,H,S,q,U,I=Math.floor(e[7].piketaj_m/1e3)+"",N=e[7].piketaj_m%1e3+"",A=new Date(1e3*e[7].date).toLocaleDateString()+"",B=e[7].lost+"",G=e[7].stricken+"",R=e[7].address+"";function Z(...t){return e[4](e[9],...t)}function Y(...t){return e[5](e[9],...t)}let V=e[1]===e[9]&&mn(e);return{c(){t=z("tr"),n=z("td"),l=z("ul"),s=z("li"),o=T("Пикетаж: "),i=T(I),r=T(" км. "),a=T(N),c=T(" м."),p=O(),d=z("li"),u=T(A),_=T(" погибших "),h=T(B),v=T(", раненых "),f=T(G),y=O(),b=z("tr"),k=z("td"),k.textContent="Адрес:",j=O(),L=z("td"),w=T(R),F=z("br"),E=z("span"),E.textContent="подробнее",H=O(),V&&V.c(),S=O(),M(s,"class","svelte-mnr9l0"),M(d,"title",m="id: "+e[7].id),M(d,"class","svelte-mnr9l0"),M(n,"class","first svelte-mnr9l0"),M(n,"colspan","2"),M(k,"class","first svelte-mnr9l0"),M(E,"class","link svelte-mnr9l0")},m(e,m,D){C(e,t,m),x(t,n),x(n,l),x(l,s),x(s,o),x(s,i),x(s,r),x(s,a),x(s,c),x(l,p),x(l,d),x(d,u),x(d,_),x(d,h),x(d,v),x(d,f),C(e,y,m),C(e,b,m),x(b,k),x(b,j),x(b,L),x(L,w),x(L,F),x(L,E),x(L,H),V&&V.m(L,null),x(b,S),q=!0,D&&g(U),U=[$(d,"click",Z),$(E,"click",Y)]},p(t,n){e=t,(!q||1&n)&&I!==(I=Math.floor(e[7].piketaj_m/1e3)+"")&&P(i,I),(!q||1&n)&&N!==(N=e[7].piketaj_m%1e3+"")&&P(a,N),(!q||1&n)&&A!==(A=new Date(1e3*e[7].date).toLocaleDateString()+"")&&P(u,A),(!q||1&n)&&B!==(B=e[7].lost+"")&&P(h,B),(!q||1&n)&&G!==(G=e[7].stricken+"")&&P(f,G),(!q||1&n&&m!==(m="id: "+e[7].id))&&M(d,"title",m),(!q||1&n)&&R!==(R=e[7].address+"")&&P(w,R),e[1]===e[9]?V?(V.p(e,n),ae(V,1)):(V=mn(e),V.c(),ae(V,1),V.m(L,null)):V&&(ie(),ce(V,1,1,()=>{V=null}),re())},i(e){q||(ae(V),q=!0)},o(e){ce(V),q=!1},d(e){e&&D(t),e&&D(y),e&&D(b),V&&V.d(),g(U)}}}function gn(e){let t,n,l,s,o,i,r,a,c,p,d,u,_,h,v,f,m,y,g,b,k,j,L,F,$,E,H,S,q,U,I,N,A,B,G,R,Z,Y,V,W,K,Q=(e[0].id||e[0].id_hearth)+"",J=e[0].quarter?e[0].quarter+" кв.":"",X=e[0].year+"",ee=(e[0].str_icon_type||"")+"",te=e[0].list_dtp.length+"",ne=e[0].count_lost+"",le=e[0].count_stricken+"",se=e[0].piketaj_start_km&&fn(e),oe=e[0].list_dtp,pe=[];for(let t=0;t<oe.length;t+=1)pe[t]=yn(vn(e,oe,t));const de=e=>ce(pe[e],1,1,()=>{pe[e]=null});return{c(){t=z("div"),n=z("div"),l=T("Очаг ДТП (id: "),s=T(Q),o=T(")"),i=O(),r=z("div"),a=T(J),c=O(),p=T(X),d=T("г."),u=O(),_=z("div"),h=z("table"),v=z("tbody"),se&&se.c(),f=O(),m=z("tr"),y=z("td"),y.textContent="Тип ДТП:",g=O(),b=z("td"),k=T(ee),j=O(),L=z("tr"),F=z("td"),F.textContent="Всего ДТП:",$=O(),E=z("td"),H=T(te),S=O(),q=z("tr"),U=z("td"),U.textContent="Погибших:",I=O(),N=z("td"),A=T(ne),B=O(),G=z("tr"),R=z("td"),R.textContent="Раненых:",Z=O(),Y=z("td"),V=T(le),W=O();for(let e=0;e<pe.length;e+=1)pe[e].c();M(n,"class","pLine"),M(r,"class","pLine"),M(y,"class","first svelte-mnr9l0"),M(F,"class","first svelte-mnr9l0"),M(U,"class","first svelte-mnr9l0"),M(R,"class","first svelte-mnr9l0"),M(h,"class","table svelte-mnr9l0"),M(_,"class","featureCont"),M(t,"class","mvsPopup svelte-mnr9l0")},m(e,D){C(e,t,D),x(t,n),x(n,l),x(n,s),x(n,o),x(t,i),x(t,r),x(r,a),x(r,c),x(r,p),x(r,d),x(t,u),x(t,_),x(_,h),x(h,v),se&&se.m(v,null),x(v,f),x(v,m),x(m,y),x(m,g),x(m,b),x(b,k),x(v,j),x(v,L),x(L,F),x(L,$),x(L,E),x(E,H),x(v,S),x(v,q),x(q,U),x(q,I),x(q,N),x(N,A),x(v,B),x(v,G),x(G,R),x(G,Z),x(G,Y),x(Y,V),x(v,W);for(let e=0;e<pe.length;e+=1)pe[e].m(v,null);K=!0},p(e,[t]){if((!K||1&t)&&Q!==(Q=(e[0].id||e[0].id_hearth)+"")&&P(s,Q),(!K||1&t)&&J!==(J=e[0].quarter?e[0].quarter+" кв.":"")&&P(a,J),(!K||1&t)&&X!==(X=e[0].year+"")&&P(p,X),e[0].piketaj_start_km?se?se.p(e,t):(se=fn(e),se.c(),se.m(v,f)):se&&(se.d(1),se=null),(!K||1&t)&&ee!==(ee=(e[0].str_icon_type||"")+"")&&P(k,ee),(!K||1&t)&&te!==(te=e[0].list_dtp.length+"")&&P(H,te),(!K||1&t)&&ne!==(ne=e[0].count_lost+"")&&P(A,ne),(!K||1&t)&&le!==(le=e[0].count_stricken+"")&&P(V,le),7&t){let n;for(oe=e[0].list_dtp,n=0;n<oe.length;n+=1){const l=vn(e,oe,n);pe[n]?(pe[n].p(l,t),ae(pe[n],1)):(pe[n]=yn(l),pe[n].c(),ae(pe[n],1),pe[n].m(v,null))}for(ie(),n=oe.length;n<pe.length;n+=1)de(n);re()}},i(e){if(!K){for(let e=0;e<oe.length;e+=1)ae(pe[e]);K=!0}},o(e){pe=pe.filter(Boolean);for(let e=0;e<pe.length;e+=1)ce(pe[e]);K=!1},d(e){e&&D(t),se&&se.d(),w(pe,e)}}}function bn(e,t,n){let l,{prp:s}=t;const o=e=>{let t=s._bounds.options.items[e];t&&t._map&&t._map.panTo(t._latlng)};return e.$set=e=>{"prp"in e&&n(0,s=e.prp)},[s,l,o,e=>{console.log("showDtpInfo ",e)},e=>{o(e)},e=>{n(1,l=e)},()=>{n(1,l=null)}]}class kn extends ve{constructor(e){super(),he(this,e,bn,gn,k,{prp:0})}}const jn=(e,t)=>{let n=e.count_lost,l=e.count_stricken;!l&&n&&(t.stricken[1]=1+(t.stricken[1]||0)),l&&!n&&(t.stricken[2]=1+(t.stricken[2]||0)),(l||n)&&(t.stricken[3]=1+(t.stricken[3]||0)),l&&n&&(t.stricken[4]=1+(t.stricken[4]||0))},xn=window.L,Ln=xn.popup(),Cn=xn.popup({minWidth:200});let Dn;const wn=function(e){let t=xn.DomUtil.create("div");return new lt({target:t,props:{prp:e}}),Ln.setContent(t),t},zn=xn.featureGroup([]);zn.setFilter=e=>{zn.clearLayers(),Dn=e;let t=[];zn._group&&zn._map&&(zn._group.getLayers().forEach(e=>{let n=e.options.cluster,l=n.list_dtp||[],s=0;Dn.forEach(e=>{if("quarter"===e.type)e.zn[n.year]&&e.zn[n.year][n.quarter]&&s++;else if("id_dtp"===e.type)l.filter(t=>t.id==e.zn||t.id_skpdi==e.zn||t.id_stat==e.zn).length&&s++;else if("year"===e.type)e.zn[n.year]&&s++;else if("str_icon_type"===e.type)e.zn.filter(e=>e===n.str_icon_type).length&&s++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&!n.count_stricken&&n.count_lost||2===t&&n.count_stricken&&!n.count_lost||3===t&&(n.count_stricken||n.count_lost)||4===t&&n.count_stricken&&n.count_lost)&&s++:s++}}),s===Dn.length&&t.push(e)}),zn.addLayer(xn.layerGroup(t)))},zn.on("remove",()=>{zn.clearLayers()}).on("add",e=>{Dn=[];let t={str_icon_type:{},iconType:{},years:{},dtps:{},stricken:{0:0}},n=[];Promise.all([2019,2020].map(e=>fetch("https://dtp.mvs.group/scripts/hearths_dev/"+e+".txt",{}).then(e=>e.json()))).then(e=>{e.forEach(e=>{t.stricken[0]+=e.length,e.forEach(e=>{let l=e.icon_type||1,s=xn.latLngBounds(),o=e.list_dtp,i=!1,r="#FF0000";if(jn(e,t),o.length){Number(e.year),Number(e.quarter);let a=t.years[e.year];a||(a=t.years[e.year]={}),t.years[e.year]=a;let c=a[e.quarter];e.quarter in a?c++:c=a[e.quarter]=1,a[e.quarter]=c;let p=t.str_icon_type[e.str_icon_type];p?p++:p=1,t.str_icon_type[e.str_icon_type]=p,t.iconType[e.str_icon_type]=l,l&&(i=l%2==0,1===l||2===l?r="#FFA500":3===l||4===l?r="#B8860B":5===l||6===l?r="#CD853F":7===l||8===l?r="#228B22":9===l||10===l?r="#FF8C00":11===l||12===l?r="#D2691E":13===l||14===l?r="#DEB887":15===l||16===l?r="#7B68EE":17!==l&&18!==l||(r="#2F4F4F"));let d=o.map(n=>{n.iconType;let l=n.coords||{lat:0,lon:0},o=xn.latLng(l.lat,l.lon),a=[];s.extend(o),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let c=t.dtps[n.id];return c?c[e.id]?c[e.id]++:c[e.id]=1:(c={},c[e.id]=1),t.dtps[n.id]=c,new v(xn.latLng(l.lat,l.lon),{cluster:e,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:i,fillColor:r}).bindPopup(Ln).on("popupopen",e=>{wn(e.target.options.props)}).on("popupclose",e=>{e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)})});e._bounds=xn.rectangle(s,{items:d,cluster:e,fill:!0,color:r,dashArray:"8 3 1"}).on("mouseover",e=>{let t=e.target;t._color=t.options.color,t.options.color="red",t._renderer._updateStyle(t)}).on("mouseout",e=>{let t=e.target;t.options.color=t._color,t._renderer._updateStyle(t)}).on("click",t=>{xn.DomEvent.stopPropagation(t);let n,l=1e3,s=t.target,o=t.latlng;t.originalEvent.ctrlKey&&s.bringToBack(),s.options.items.forEach(e=>{let t=e._latlng.distanceTo(o);t<l&&(l=t,n=e)}),l<10?(wn(n.options.props),Ln.setLatLng(n._latlng).openOn(zn._map)):(!function(e){let t=xn.DomUtil.create("div");new kn({target:t,props:{prp:e}}),Cn.setContent(t)}(e),Cn.setLatLng(o).openOn(zn._map))}),n.push(e._bounds),n=n.concat(d)}}),zn._opt=t,zn._group=xn.layerGroup(n),Dn?zn.setFilter(Dn):zn.addLayer(zn._group),zn._refreshFilters()})})});const Tn=window.L,On=Tn.popup(),Fn=Tn.popup({minWidth:200});let $n;const En=function(e){let t=Tn.DomUtil.create("div");return new lt({target:t,props:{prp:e}}),On.setContent(t),t},Mn=Tn.featureGroup([]);Mn.setFilter=e=>{Mn.clearLayers(),$n=e;let t=[];Mn._group&&Mn._map&&(Mn._group.getLayers().forEach(e=>{let n=e.options.cluster,l=n.list_dtp||[],s=0;$n.forEach(e=>{if("quarter"===e.type)e.zn[n.year]&&e.zn[n.year][n.quarter]&&s++;else if("id_dtp"===e.type)l.filter(t=>t.id==e.zn||t.id_skpdi==e.zn||t.id_stat==e.zn).length&&s++;else if("year"===e.type)e.zn[n.year]&&s++;else if("str_icon_type"===e.type)e.zn.filter(e=>e===n.str_icon_type).length&&s++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&!n.count_stricken&&n.count_lost||2===t&&n.count_stricken&&!n.count_lost||3===t&&(n.count_stricken||n.count_lost)||4===t&&n.count_stricken&&n.count_lost)&&s++:s++}}),s===$n.length&&t.push(e)}),Mn.addLayer(Tn.layerGroup(t)))},Mn.on("remove",()=>{Mn.clearLayers()}).on("add",e=>{$n=[];let t={str_icon_type:{},iconType:{},years:{},dtps:{},stricken:{0:0}},n=[];Promise.all([2019,2020].map(e=>fetch("https://dtp.mvs.group/scripts/hearthstmp_dev/"+e+".txt",{}).then(e=>e.json()))).then(e=>{e.forEach(e=>{t.stricken[0]+=e.length,e.forEach(e=>{let l=e.icon_type||1,s=Tn.latLngBounds(),o=e.list_dtp,i=!1,r="#FF0000";if(jn(e,t),o.length){Number(e.year),Number(e.quarter);let a=t.years[e.year];a||(a=t.years[e.year]={}),t.years[e.year]=a;let c=a[e.quarter];e.quarter in a?c++:c=a[e.quarter]=1,a[e.quarter]=c;let p=t.str_icon_type[e.str_icon_type];p?p++:p=1,t.str_icon_type[e.str_icon_type]=p,t.iconType[e.str_icon_type]=l,l&&(i=l%2==0,1===l||2===l?r="#FFA500":3===l||4===l?r="#B8860B":5===l||6===l?r="#CD853F":7===l||8===l?r="#228B22":9===l||10===l?r="#FF8C00":11===l||12===l?r="#D2691E":13===l||14===l?r="#DEB887":15===l||16===l?r="#7B68EE":17!==l&&18!==l||(r="#2F4F4F"));let d=o.map(n=>{n.iconType;let l=n.coords||{lat:0,lon:0},o=Tn.latLng(l.lat,l.lon),a=[];s.extend(o),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let c=t.dtps[n.id];return c?c[e.id]?c[e.id]++:c[e.id]=1:(c={},c[e.id]=1),t.dtps[n.id]=c,new v(Tn.latLng(l.lat,l.lon),{cluster:e,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:i,fillColor:r}).bindPopup(On).on("popupopen",e=>{En(e.target.options.props)}).on("popupclose",e=>{e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)})});e._bounds=Tn.rectangle(s,{items:d,cluster:e,fill:!0,color:r,dashArray:"8 3 1"}).on("mouseover",e=>{let t=e.target;t._color=t.options.color,t.options.color="red",t._renderer._updateStyle(t)}).on("mouseout",e=>{let t=e.target;t.options.color=t._color,t._renderer._updateStyle(t)}).on("click",t=>{Tn.DomEvent.stopPropagation(t);let n,l=1e3,s=t.target,o=t.latlng;t.originalEvent.ctrlKey&&s.bringToBack(),s.options.items.forEach(e=>{let t=e._latlng.distanceTo(o);t<l&&(l=t,n=e)}),l<10?(En(n.options.props),On.setLatLng(n._latlng).openOn(Mn._map)):(!function(e){let t=Tn.DomUtil.create("div");new kn({target:t,props:{prp:e}}),Fn.setContent(t)}(e),Fn.setLatLng(o).openOn(Mn._map))}),n.push(e._bounds),n=n.concat(d)}}),Mn._opt=t,Mn._group=Tn.layerGroup(n),$n?Mn.setFilter($n):Mn.addLayer(Mn._group),Mn._refreshFilters()})})});const Hn=window.L,Pn=Hn.popup(),Sn=Hn.popup({minWidth:200});let qn;const Un=function(e){let t=Hn.DomUtil.create("div");return new lt({target:t,props:{prp:e}}),Pn.setContent(t),t},In=Hn.featureGroup([]);In.setFilter=e=>{In.clearLayers(),qn=e;let t=[];In._group&&In._map&&(In._group.getLayers().forEach(e=>{let n=e.options.cluster,l=n.list_dtp||[],s=0;qn.forEach(e=>{if("quarter"===e.type)e.zn[n.year]&&e.zn[n.year][n.quarter]&&s++;else if("id_dtp"===e.type)l.filter(t=>t.id==e.zn||t.id_skpdi==e.zn||t.id_stat==e.zn).length&&s++;else if("year"===e.type)e.zn[n.year]&&s++;else if("str_icon_type"===e.type)e.zn.filter(e=>e===n.str_icon_type).length&&s++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&!n.count_stricken&&n.count_lost||2===t&&n.count_stricken&&!n.count_lost||3===t&&(n.count_stricken||n.count_lost)||4===t&&n.count_stricken&&n.count_lost)&&s++:s++}}),s===qn.length&&t.push(e)}),In.addLayer(Hn.layerGroup(t)))},In.on("remove",()=>{In.clearLayers()}).on("add",e=>{qn=[];let t={str_icon_type:{},iconType:{},years:{},dtps:{},stricken:{0:0}},n=[];Promise.all([2019,2020].map(e=>fetch("https://dtp.mvs.group/scripts/hearthsstat_dev/"+e+".txt",{}).then(e=>e.json()))).then(e=>{e.forEach(e=>{t.stricken[0]+=e.length,e.forEach(e=>{let l=e.icon_type||1,s=Hn.latLngBounds(),o=e.list_dtp,i=!1,r="#FF0000";if(jn(e,t),o.length){Number(e.year),Number(e.quarter);let a=t.years[e.year];a||(a=t.years[e.year]={}),t.years[e.year]=a;let c=a[e.quarter];e.quarter in a?c++:c=a[e.quarter]=1,a[e.quarter]=c;let p=t.str_icon_type[e.str_icon_type];p?p++:p=1,t.str_icon_type[e.str_icon_type]=p,t.iconType[e.str_icon_type]=l,l&&(i=l%2==0,1===l||2===l?r="#FFA500":3===l||4===l?r="#B8860B":5===l||6===l?r="#CD853F":7===l||8===l?r="#228B22":9===l||10===l?r="#FF8C00":11===l||12===l?r="#D2691E":13===l||14===l?r="#DEB887":15===l||16===l?r="#7B68EE":17!==l&&18!==l||(r="#2F4F4F"));let d=o.map(n=>{n.iconType;let l=n.coords||{lat:0,lon:0},o=Hn.latLng(l.lat,l.lon),a=[];s.extend(o),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let c=t.dtps[n.id];return c?c[e.id]?c[e.id]++:c[e.id]=1:(c={},c[e.id]=1),t.dtps[n.id]=c,new v(Hn.latLng(l.lat,l.lon),{cluster:e,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:i,fillColor:r}).bindPopup(Pn).on("popupopen",e=>{Un(e.target.options.props)}).on("popupclose",e=>{e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)})});e._bounds=Hn.rectangle(s,{items:d,cluster:e,fill:!0,color:r,dashArray:"8 3 1"}).on("mouseover",e=>{let t=e.target;t._color=t.options.color,t.options.color="red",t._renderer._updateStyle(t)}).on("mouseout",e=>{let t=e.target;t.options.color=t._color,t._renderer._updateStyle(t)}).on("click",t=>{Hn.DomEvent.stopPropagation(t);let n,l=1e3,s=t.target,o=t.latlng,i=t.layerPoint;t.originalEvent.ctrlKey&&s.bringToBack(),s.options.items.forEach(e=>{let t=e._point.distanceTo(i);t<l&&(l=t,n=e)}),l<10?(Un(n.options.props),Pn.setLatLng(n._latlng).openOn(In._map)):(!function(e){let t=Hn.DomUtil.create("div");new kn({target:t,props:{prp:e}}),Sn.setContent(t)}(e),Sn.setLatLng(o).openOn(In._map))}),n.push(e._bounds),n=n.concat(d)}}),In._opt=t,In._group=Hn.layerGroup(n),qn?In.setFilter(qn):In.addLayer(In._group),In._refreshFilters()})})});const Nn=window.L;Nn.popup();let An;const Bn=Nn.featureGroup([]);Bn._needHeat={radius:19,blur:11.26,minOpacity:.34},Bn.checkZoom=e=>{Object.keys(Bn._layers).length?e<12&&Bn.setFilter(An):e>11&&Bn.setFilter(An)},Bn.setFilter=e=>{if(!Bn._map)return;Bn.clearLayers(),An=e||[],Bn._argFilters=An;let t=[],n=[];Bn._group&&(Bn._group.getLayers().forEach(e=>{let l=e.options.props,s=0;An.forEach(e=>{"collision_type"===e.type?(""===e.zn[0]||e.zn.filter(e=>e===l.collision_type).length)&&s++:"list_rub"===e.type?l.list_rub.length?e.zn.on&&s++:e.zn.off&&s++:"date"===e.type&&l.date>=e.zn[0]&&l.date<e.zn[1]&&s++}),s===An.length&&(t.push(e),n.push(e._latlng))}),Bn.addLayer(Nn.layerGroup(t)))},Bn.on("remove",e=>{Bn.clearLayers()}).on("add",e=>{fetch("https://dtp.mvs.group/static/proxy.php?url=https://graphql.dev.mvs.group/graphql",{body:'{"operationName":null,"variables":{},"query":"{\\n  allVMapLineInfos(filter: {lon: {isNull: false}, lat: {isNull: false}}) {\\n    totalCount\\n    nodes {\\n      lineSid: sid\\n      lineName: name\\n      lineAddress: address\\n      roadName\\n      stage\\n      lat\\n      lon\\n      yield\\n      complexes\\n      __typename\\n    }\\n    __typename\\n  }\\n}\\n"}',method:"POST",mode:"cors"}).then(e=>e.json()).then(e=>{console.log("json",e)})});const Gn=window.L,Rn=Gn.popup({maxWidth:848});let Zn,Yn=0;const Vn=Gn.featureGroup([]);Vn._needHeat={radius:19,blur:11.26,minOpacity:.34},Vn.checkZoom=e=>{Object.keys(Vn._layers).length?e<12&&Vn.setFilter(Zn):e>11&&Vn.setFilter(Zn)},Vn.setFilter=e=>{if(!Vn._map)return;Vn.clearLayers(),Zn=e||[],Vn._argFilters=Zn;let t=[],n=[];Vn._group&&(Vn._group.getLayers().forEach(e=>{let l=e.options.props,s=0;Zn.forEach(e=>{"collision_type"===e.type?(""===e.zn[0]||e.zn.filter(e=>e===l.collision_type).length)&&s++:"list_rub"===e.type?l.list_rub.length?e.zn.on&&s++:e.zn.off&&s++:"date"===e.type&&l.date>=e.zn[0]&&l.date<e.zn[1]&&s++}),s===Zn.length&&(t.push(e),n.push(e._latlng))}),Vn.addLayer(Gn.layerGroup(t)))},Vn.on("remove",e=>{Vn.clearLayers()}).on("add",e=>{fetch("./static/itc.geojson",{}).then(e=>e.json()).then(e=>{console.log("json",e);let t=e.map(e=>{e.iconType;e.lat&&e.lon||(console.log("_______",e),e.lat=e.lon=0);let t=Gn.latLng(e.lat,e.lon,.5);return new v(t,{props:e,radius:6,stroke:!1,fillColor:"#2F4F4F"}).bindPopup(Rn).on("popupopen",e=>{!function(e){let t,n=e.cams||[],l=Gn.DomUtil.create("div","contVideo"),s=Gn.DomUtil.create("div","list",l),o=Gn.DomUtil.create("div","videoCont",l),i=(e,t)=>{t&&(o.innerHTML=""),Yn=e;let l=n.length>Yn?n[Yn]:{},s=Gn.DomUtil.create("span","videoDiv"+(t?"":" small"),o),i=Gn.DomUtil.create("video","video",s);var r=l.video;dashjs.MediaPlayer().create().initialize(i,r,!0)};n.forEach((e,n)=>{let l=Gn.DomUtil.create("button","",s);n||(l.classList.add("active"),t=l),l.textContent=e.name||"Камера",Gn.DomEvent.on(l,"click",()=>{i(n,!0),t.classList.remove("active"),l.classList.add("active"),t=l}),i(n,!1)}),n.length>Yn||(l.innerHTML="Камеры отсутствуют!"),Rn.setContent(l)}(e.target.options.props)}).on("popupclose",e=>{e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)})});Vn._group=Gn.layerGroup(t),Zn?Vn.setFilter(Zn):Vn.addLayer(Vn._group)})});const Wn=window.L,Kn=Wn.map(document.body,{center:[55.758031,37.611694],minZoom:1,zoom:8,maxZoom:21,attributionControl:!1,trackResize:!0,fadeAnimation:!0,zoomAnimation:!0,distanceUnit:"auto",squareUnit:"auto"});var Qn=Kn._controlCorners,Jn=Kn._controlContainer,Xn="leaflet-top leaflet-bottom",el="leaflet-left leaflet-right",tl={bottom:"leaflet-bottom "+el,gmxbottomleft:"leaflet-bottom leaflet-left",gmxbottomcenter:"leaflet-bottom "+el,gmxbottomright:"leaflet-bottom leaflet-right",center:Xn+" "+el,right:"leaflet-right "+Xn,left:"leaflet-left "+Xn,top:"leaflet-top "+el};for(var nl in tl)Qn[nl]||(Qn[nl]=Wn.DomUtil.create("div",tl[nl],Jn));Kn.addControl(Wn.control.gmxCenter()).addControl(Wn.control.fitCenter());var ll=Wn.TileLayer.extend({options:{tilesCRS:Wn.CRS.EPSG3395},_getTiledPixelBounds:function(e){var t=Wn.TileLayer.prototype._getTiledPixelBounds.call(this,e);return this._shiftY=this._getShiftY(this._tileZoom),t.min.y+=this._shiftY,t.max.y+=this._shiftY,t},_tileOnError:function(e,t,n){var l=t.getAttribute("src"),s=l.indexOf("/mapcache/");if(s>-1){var o=new URL("http:"+l).searchParams,i=l.substr(s+1).split("/"),r=a[i[1]];t.src=Wn.Util.template(r.errorTileUrlPrefix+r.postfix,{z:o.get("z"),x:o.get("x"),y:o.get("y")})}e(n,t)},_getTilePos:function(e){return Wn.TileLayer.prototype._getTilePos.call(this,e).subtract([0,this._shiftY])},_getShiftY:function(e){var t=this._map,n=t.getCenter(),l=t.options.crs.project(n).y-this.options.tilesCRS.project(n).y;return Math.floor(Wn.CRS.scale(e)*l/40075016.685578495)}});Wn.TileLayer.Mercator=ll,Wn.tileLayer.Mercator=function(e,t){return new ll(e,t)};let sl={};c.b||(c.b="m2"),["m2","m3"].forEach(e=>{let t=a[e],n=Wn.tileLayer.Mercator(t.prefix+t.postfix,t.options);sl[t.title]=n,c.b===t.options.key&&n.addTo(Kn)}),sl.OpenStreetMap=Wn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:21,maxNativeZoom:18}),rt._arm={};let ol={"Камеры ИТС":Vn,TestGraphQl:Bn,"Очаги ГИБДД":In,"ДТП Сводный":rt,"ДТП ГИБДД":Se},il=c.o?c.o.split(",").reduce((e,t)=>(e[t]=!0,e),{}):{};["m1","m4","m5"].forEach(e=>{let t=a[e],n=Wn.tileLayer.Mercator(t.prefix+t.postfix,t.options);ol[t.title]=n,il[t.options.key]&&n.addTo(Kn)}),Wn.control.layers(sl,ol).addTo(Kn);let rl=Wn.control.gmxIcon({id:"filters",className:"leaflet-bar",togglable:!0,title:"Фильтры"}).on("statechange",(function(e){console.log({filtersIcon:e.target.options.isActive});let t=e.target,n=t._container,l=t._win;t.options.isActive?l||(l=t._win=Wn.DomUtil.create("div","win leaflet-control-layers",n),Wn.DomEvent.disableScrollPropagation(l),l._Filters=new hn({target:l,props:{control:t,DtpGibdd:Se,DtpSkpdi:Ke,DtpHearthsStat:In,DtpHearthsTmp:Mn,DtpHearths:zn,DtpVerifyed:rt}})):(t._win.parentNode.removeChild(t._win),t._win=null)})).addTo(Kn);const al=()=>{setTimeout(()=>{rl.options.isActive&&(rl.setActive(!1),rl._win=null,rl.setActive(!0))})};Se._refreshFilters=Ke._refreshFilters=rt._refreshFilters=zn._refreshFilters=In._refreshFilters=Mn._refreshFilters=al;return Se.on("remove",al),Ke.on("remove",al),rt.on("remove",al),zn.on("remove",al),Mn.on("remove",al),In.on("remove",al),Kn}();
//# sourceMappingURL=arm.js.map
