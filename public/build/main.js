var dtp=function(){"use strict";const e=window.L;e.Control.GmxIcon=e.Control.extend({includes:e.Evented?e.Evented.prototype:e.Mixin.Events,options:{position:"topleft",id:"defaultIcon",isActive:!1},setActive:function(t,n,l){var s=this.options,o=this._container;if(s.togglable||s.toggle){var r=s.isActive,i=this._prefix,a=i+"-"+s.id;s.isActive=t,this._img&&(t&&s.activeImageUrl?this._img.src=s.activeImageUrl:!t&&s.regularImageUrl&&(this._img.src=s.regularImageUrl)),t?(e.DomUtil.addClass(o,i+"-active"),e.DomUtil.addClass(o,a+"-active"),o.children.length&&e.DomUtil.addClass(o,i+"-externalImage-active"),s.styleActive&&this.setStyle(s.styleActive)):(e.DomUtil.removeClass(o,i+"-active"),e.DomUtil.removeClass(o,a+"-active"),o.children.length&&e.DomUtil.removeClass(o,i+"-externalImage-active"),s.style&&this.setStyle(s.style)),n||r===t||this.fire("statechange",l)}if(e.gmxUtil&&e.gmxUtil.isIEOrEdge){var c=o.getElementsByTagName("use");if(c.length){var p=c[0],d=p.getAttribute("href")||p.getAttribute("xlink:href");p.setAttribute("href",d)}}},onAdd:function(t){var n=null,l=this.options,s=l.svgSprite||t.options.svgSprite,o="leaflet-gmx-icon"+(!s||l.regularImageUrl||l.text?"":"Svg"),r=o+"-"+l.id;this._prefix=o;var i=e.DomUtil.create("div",o+" "+r);if(i._id=l.id,this._container=i,l.title&&(i.title=l.title),this.setStyle=function(e){for(var t in e)i.style[t]=e[t]},l.className&&e.DomUtil.addClass(i,l.className),l.regularImageUrl)(n=e.DomUtil.create("img","",i)).src=l.regularImageUrl,this._img=n,e.DomUtil.addClass(i,o+"-img"),e.DomUtil.addClass(i,o+"-externalImage");else if(l.text)e.DomUtil.addClass(i,o+"-text"),e.DomUtil.create("span","",i).innerHTML=l.text;else if(s){e.DomUtil.addClass(i,"svgIcon");var a="#"+l.id.toLowerCase();i.innerHTML='<svg role="img" class="svgIcon"><use xlink:href="'+a+'" href="'+a+'"></use></svg>'}else e.DomUtil.addClass(i,o+"-img "+o+"-sprite");l.style&&this.setStyle(l.style),this._iconClick=function(e){i.parentNode&&i===e.toElement&&(this.setActive(!this.options.isActive,!1,e),this.fire("click",e),this.options.stateChange&&this.options.stateChange(this,e))};var c=e.DomEvent.stopPropagation;e.DomEvent.preventDefault;return e.DomEvent.on(i,"mousemove",c).on(i,"touchstart",c).on(i,"mousedown",c).on(i,"dblclick",c).on(i,"click",c).on(i,"click",this._iconClick,this),l.onAdd&&l.onAdd(this),this.fire("controladd"),t.fire("controladd",this),l.notHide&&(i._notHide=!0),t.gmxControlsManager&&t.gmxControlsManager.add(this),i},onRemove:function(t){t.gmxControlsManager&&t.gmxControlsManager.remove(this),this.fire("controlremove"),t.fire("controlremove",this);var n=this._container,l=e.DomEvent.stopPropagation;e.DomEvent.off(n,"mousemove",l).off(n,"touchstart",l).off(n,"mousedown",l).off(n,"dblclick",l).off(n,"click",l).off(n,"click",this._iconClick,this)},addTo:function(t){return e.Control.prototype.addTo.call(this,t),this.options.addBefore&&this.addBefore(this.options.addBefore),this},addBefore:function(e){var t=this._parent&&this._parent._container;if(t||(t=this._map&&this._map._controlCorners[this.getPosition()]),t)for(var n=0,l=t.childNodes.length;n<l;n++){var s=t.childNodes[n];if(e===s._id){t.insertBefore(this._container,s);break}}else this.options.addBefore=e;return this}}),e.Control.gmxIcon=e.Control.GmxIcon,e.control.gmxIcon=function(t){return new e.Control.GmxIcon(t)};const t=window.L;t.Control.GmxCenter=t.Control.extend({options:{position:"center",id:"center",notHide:!0,color:"red"},onRemove:function(e){e.gmxControlsManager&&e.gmxControlsManager.remove(this),e.fire("controlremove",this)},onAdd:function(e){var n="http://www.w3.org/2000/svg",l=t.DomUtil.create("div","leaflet-gmx-center"),s=t.DomUtil.create("div","leaflet-gmx-center"),o=document.createElementNS(n,"svg"),r=document.createElementNS(n,"g"),i=document.createElementNS(n,"path");return this._container=l,l._id=this.options.id,this.options.notHide&&(l._notHide=!0),i.setAttribute("stroke-width",2),i.setAttribute("stroke-opacity",2),i.setAttribute("d","M9 0L9 18M0 9L18 9"),this._path=i,r.appendChild(i),o.appendChild(r),o.setAttribute("width",18),o.setAttribute("height",18),s.appendChild(o),l.appendChild(s),this.setColor(this.options.color),e.fire("controladd",this),e.gmxControlsManager&&e.gmxControlsManager.add(this),l},setColor:function(e){return this.options.color=e,this._map&&this._path.setAttribute("stroke",e),this}}),t.Control.gmxCenter=t.Control.GmxCenter,t.control.gmxCenter=function(e){return new t.Control.GmxCenter(e)};const n=window.L;n.Control.FitCenter=n.Control.extend({options:{position:"topright",id:"fitcenter",notHide:!0,color:"#216b9c"},onRemove:function(e){e.gmxControlsManager&&e.gmxControlsManager.remove(this),e.off("moveend",this._update,this).fire("controlremove",this)},onAdd:function(e){var t=this.options.id,l="leaflet-gmx-"+t,s=n.DomUtil.create("div",l),o=n.DomUtil.create("input","",s),r=n.DomUtil.create("button","",s),i=n.DomUtil.create("div","results",s);return r.title="Переместить центр карты",o.placeholder="Поиск по адресам, координатам",this._input=o,this._container=s,this._results=i,s._id=t,e.on("mousemove",e=>{this._results.style.display="none"},this),n.DomEvent.on(o,"input",this._getSuggestions,this),n.DomEvent.on(o,"contextmenu",n.DomEvent.stopPropagation,this),n.DomEvent.on(s,"mousemove",n.DomEvent.stop),n.DomEvent.on(s,"mouseover",e=>{"block"!==this._results.style.display&&(this._results.style.display="block")},this),n.DomEvent.on(r,"click",(function(){let t=o.value.match(/[+-]?([0-9]*[.])?[0-9]+/g);t&&t.length>1&&e.setView([Number(t[0]),Number(t[1])])})),n.DomEvent.disableClickPropagation(s),e.on("moveend",this._update,this).fire("controladd",this),e.gmxControlsManager&&e.gmxControlsManager.add(this),s},_parseSearch:function(e){if((e=e||[]).length){this._results;let t=document.createDocumentFragment();e.forEach(e=>{let l=e.display_name,s=e.boundingbox,o=n.DomUtil.create("div","",t);o.innerHTML=l,n.DomEvent.on(o,"click",e=>{this._map.fitBounds([[s[0],s[2]],[s[1],s[3]]])},this)}),this._results.innerText="",this._results.appendChild(t),this._results.classList.add("active")}},_getSuggestions:function(e){const t=e.target.value||"калужское шоссе",n=["format=json","limit=10","polygon_text=1","bounded=1","viewbox=34,53,41,57"].join("&"),l="&q="+encodeURI(t);fetch(`//nominatim.openstreetmap.org/search?${n}${l}`,{}).then(e=>e.json()).then(this._parseSearch.bind(this))},_update:function(e){this._map&&this.setCoords(this._map.getCenter())},_trunc:function(e){return(""+(Math.round(1e7*e)/1e7+1e-8)).substring(0,9)},setCoords:function(e){return this}}),n.control.fitCenter=function(e){return new n.Control.FitCenter(e)};const l='&copy; <a href="https://n.maps.yandex.ru/?oid=1900133#!/?z=18&ll=36.860478%2C55.429679&l=nk%23map">Yandex</a> contributors',s="//inv.mvs.group/mapcache/",o=new Date,r=o.getMonth()+1,i=o.getDate(),a=(o.getFullYear(),{m1:{title:"Дороги",prefix:s+"m1/",postfix:"?x={x}&y={y}&z={z}&l=mrcss",errorTileUrlPrefix:"//core-nmaps-mrc-browser.maps.yandex.ru/tiles",options:{key:"m1",minZoom:10,maxZoom:19,attribution:l}},m2:{title:"Карта(Яндекс)",prefix:s+"m2/tiles",postfix:"?l=map&v=18.01.10-2&x={x}&y={y}&z={z}&scale=1&lang=ru_RU",errorTileUrlPrefix:"//vec01.maps.yandex.net/tiles",options:{key:"m2",maxNativeZoom:19,maxZoom:21,attribution:l}},m3:{title:"Снимки(Яндекс)",prefix:s+"m3/tiles",postfix:"?l=sat&v=3.462.0&x={x}&y={y}&z={z}&lang=ru_RU",errorTileUrlPrefix:"//sat04.maps.yandex.net/tiles",options:{key:"m3",maxNativeZoom:19,maxZoom:21,attribution:l}},m4:{title:"Скорость(Народная карта)",prefix:s+"m4/",postfix:"?x={x}&y={y}&z={z}&l=mpskl&sl=104,301135,302526,302827,5300026,5400046,70300236,70300638",errorTileUrlPrefix:"//04.core-nmaps-renderer-nmaps.maps.yandex.net/tile",options:{key:"m4",minZoom:8,maxZoom:19,attribution:l}},m5:{title:"Светофоры",prefix:s+"m5",postfix:"?x={x}&y={y}&z={z}&l=mpskl&sl=301750",errorTileUrlPrefix:"//04.core-nmaps-renderer-nmaps.maps.yandex.net/tile",options:{key:"m4",minZoom:12,maxZoom:19,attribution:l}},m6:{title:"Дороги в стадии строительства",prefix:s+"m6",postfix:"?x={x}&y={y}&z={z}&l=mpskl&sl=301142,301135,70300289",errorTileUrlPrefix:"//03.core-nmaps-renderer-nmaps.maps.yandex.net/tile",options:{key:"m6",minZoom:10,maxZoom:19,attribution:l}}}),c={};window.URLSearchParams&&new URLSearchParams(window.location.search).forEach((e,t)=>{c[t]=e});const p=(e,t)=>{let n=e.count_lost,l=e.count_stricken;!l&&n&&(t.stricken[1]=1+(t.stricken[1]||0)),l&&!n&&(t.stricken[2]=1+(t.stricken[2]||0)),(l||n)&&(t.stricken[3]=1+(t.stricken[3]||0)),l&&n&&(t.stricken[4]=1+(t.stricken[4]||0))},d=e=>{let t=0,n=(e=e||[])[0];return e.forEach(e=>{t+=((e,t)=>{for(var n=Math.PI/180,l={lon:n*e.lng,lat:n*e.lat},s={lon:n*t.lng,lat:n*t.lat},o=6378137,r=6356752.3142,i=1/298.257223563,a=s.lon-l.lon,c=Math.atan((1-i)*Math.tan(l.lat)),p=Math.atan((1-i)*Math.tan(s.lat)),d=Math.sin(c),u=Math.cos(c),_=Math.sin(p),h=Math.cos(p),v=a,f=2*Math.PI,m=20;Math.abs(v-f)>1e-12&&--m>0;){var g=Math.sin(v),y=Math.cos(v),b=Math.sqrt(h*g*(h*g)+(u*_-d*h*y)*(u*_-d*h*y));if(0===b)return 0;var k=d*_+u*h*y,x=Math.atan2(b,k),j=u*h*g/b,L=1-j*j,C=k-2*d*_/L;isNaN(C)&&(C=0);var w=i/16*L*(4+i*(4-3*L));f=v,v=a+(1-w)*i*j*(x+w*b*(C+w*k*(2*C*C-1)))}if(0===m)return NaN;var z=L*(o*o/(r*r)-1),D=z/1024*(256+z*(z*(74-47*z)-128));return r*(1+z/16384*(4096+z*(z*(320-175*z)-768)))*(x-D*b*(C+D/4*(k*(2*C*C-1)-D/6*C*(4*b*b-3)*(4*C*C-3))))})(e,n),n=e}),t},u=L.canvas(),_=window.L;_.canvas();const h=function(e,t){var n=_.Projection.Mercator.project(t),l=_.Projection.Mercator.unproject(new _.Point(n.x+40,n.y+30));return 156543.033928041*Math.pow(2,-e)*((e,t)=>{for(var n=Math.PI/180,l={lon:n*e.lng,lat:n*e.lat},s={lon:n*t.lng,lat:n*t.lat},o=6378137,r=6356752.3142,i=1/298.257223563,a=s.lon-l.lon,c=Math.atan((1-i)*Math.tan(l.lat)),p=Math.atan((1-i)*Math.tan(s.lat)),d=Math.sin(c),u=Math.cos(c),_=Math.sin(p),h=Math.cos(p),v=a,f=2*Math.PI,m=20;Math.abs(v-f)>1e-12&&--m>0;){var g=Math.sin(v),y=Math.cos(v),b=Math.sqrt(h*g*(h*g)+(u*_-d*h*y)*(u*_-d*h*y));if(0===b)return 0;var k=d*_+u*h*y,x=Math.atan2(b,k),j=u*h*g/b,L=1-j*j,C=k-2*d*_/L;isNaN(C)&&(C=0);var w=i/16*L*(4+i*(4-3*L));f=v,v=a+(1-w)*i*j*(x+w*b*(C+w*k*(2*C*C-1)))}if(0===m)return NaN;var z=L*(o*o/(r*r)-1),D=z/1024*(256+z*(z*(74-47*z)-128));return r*(1+z/16384*(4096+z*(z*(320-175*z)-768)))*(x-D*b*(C+D/4*(k*(2*C*C-1)-D/6*C*(4*b*b-3)*(4*C*C-3))))})(t,l)/50},v=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix(),f=(e,t,n,l)=>{l=l||20/832;let s=new Path2D(e),o=new Path2D;return o.addPath(s,v.translate(t,n).rotate(180).scale(-l,-l)),o},m={measures:f("M 10.5 9 C 10.132813 9 9.578125 9.167969 9.1875 9.5 C 8.796875 9.832031 8.488281 10.273438 8.0625 10.96875 C 7.738281 11.496094 7.21875 12.621094 6.4375 14.28125 C 5.65625 15.941406 4.6875 18.015625 3.75 20.0625 C 1.875 24.152344 0.09375 28.09375 0.09375 28.09375 C -0.0820313 28.390625 -0.09375 28.753906 0.0625 29.0625 C 0.0703125 29.082031 0.0820313 29.105469 0.09375 29.125 C 0.148438 29.308594 0.210938 29.46875 0.3125 29.59375 C 0.496094 29.816406 0.695313 29.921875 0.84375 30 C 1.144531 30.160156 1.355469 30.226563 1.5 30.3125 C 1.789063 30.488281 2 30.527344 2 31.6875 C 2 34.023438 2.664063 36.609375 4.46875 38.625 C 6.273438 40.640625 9.199219 42 13.40625 42 C 16.816406 42 19.355469 40.886719 20.90625 38.875 C 22.457031 36.863281 23 34.121094 23 31 L 23 28.5625 C 23.351563 28.339844 23.972656 28 25 28 C 26.027344 28 26.648438 28.339844 27 28.5625 L 27 31 C 27 34.121094 27.542969 36.863281 29.09375 38.875 C 30.644531 40.886719 33.183594 42 36.59375 42 C 40.800781 42 43.726563 40.65625 45.53125 38.65625 C 47.335938 36.65625 48 34.101563 48 31.8125 C 48 30.59375 48.226563 30.53125 48.5 30.375 C 48.636719 30.296875 48.824219 30.242188 49.125 30.09375 C 49.277344 30.019531 49.460938 29.910156 49.65625 29.6875 C 49.804688 29.515625 49.917969 29.273438 49.96875 29.03125 C 50.105469 28.726563 50.082031 28.375 49.90625 28.09375 C 49.90625 28.09375 48.125 24.152344 46.25 20.0625 C 45.3125 18.015625 44.34375 15.941406 43.5625 14.28125 C 42.78125 12.621094 42.261719 11.496094 41.9375 10.96875 C 41.511719 10.273438 41.203125 9.832031 40.8125 9.5 C 40.421875 9.167969 39.867188 9 39.5 9 C 39.050781 9 38.546875 9.210938 38.1875 9.53125 C 37.828125 9.851563 37.53125 10.285156 37.15625 10.875 C 36.566406 11.859375 36.15625 12.4375 36.15625 12.4375 C 35.84375 12.902344 35.972656 13.53125 36.4375 13.84375 C 36.902344 14.15625 37.53125 14.027344 37.84375 13.5625 C 37.84375 13.5625 38.246094 12.929688 38.84375 11.9375 C 38.851563 11.921875 38.835938 11.921875 38.84375 11.90625 C 39.144531 11.433594 39.382813 11.175781 39.5 11.0625 C 39.613281 11.160156 39.882813 11.4375 40.25 12.03125 C 40.324219 12.152344 41.003906 13.476563 41.78125 15.125 C 42.558594 16.773438 43.5 18.863281 44.4375 20.90625 C 45.820313 23.917969 46.519531 25.488281 47.125 26.8125 C 46.839844 26.75 46.585938 26.683594 46.25 26.625 C 44.132813 26.257813 40.941406 26 36.40625 26 C 33.464844 26 30.472656 26.660156 28.1875 26.96875 C 27.71875 26.640625 26.699219 26 25 26 C 23.300781 26 22.28125 26.640625 21.8125 26.96875 C 19.527344 26.660156 16.535156 26 13.59375 26 C 9.058594 26 5.863281 26.242188 3.75 26.59375 C 3.414063 26.648438 3.15625 26.71875 2.875 26.78125 C 3.484375 25.449219 4.1875 23.90625 5.5625 20.90625 C 6.5 18.863281 7.441406 16.773438 8.21875 15.125 C 8.996094 13.476563 9.675781 12.152344 9.75 12.03125 L 9.75 12 C 10.105469 11.429688 10.390625 11.160156 10.5 11.0625 C 10.617188 11.175781 10.855469 11.433594 11.15625 11.90625 C 11.164063 11.921875 11.148438 11.921875 11.15625 11.9375 C 11.753906 12.929688 12.15625 13.5625 12.15625 13.5625 C 12.46875 14.027344 13.097656 14.15625 13.5625 13.84375 C 14.027344 13.53125 14.15625 12.902344 13.84375 12.4375 C 13.84375 12.4375 13.433594 11.859375 12.84375 10.875 C 12.46875 10.285156 12.171875 9.851563 11.8125 9.53125 C 11.453125 9.210938 10.949219 9 10.5 9 Z M 13.59375 28 C 16.042969 28 18.679688 28.570313 21 28.90625 L 21 31 C 21 33.878906 20.460938 36.136719 19.3125 37.625 C 18.164063 39.113281 16.398438 40 13.40625 40 C 9.613281 40 7.332031 38.839844 5.9375 37.28125 C 4.542969 35.722656 4 33.652344 4 31.6875 C 4 30.265625 3.398438 29.386719 2.78125 28.875 C 3.160156 28.769531 3.46875 28.667969 4.09375 28.5625 C 6.03125 28.238281 9.128906 28 13.59375 28 Z M 36.40625 28 C 40.871094 28 43.972656 28.261719 45.90625 28.59375 C 46.554688 28.707031 46.871094 28.820313 47.25 28.9375 C 46.613281 29.441406 46 30.34375 46 31.8125 C 46 33.722656 45.457031 35.765625 44.0625 37.3125 C 42.667969 38.859375 40.386719 40 36.59375 40 C 33.601563 40 31.835938 39.113281 30.6875 37.625 C 29.539063 36.136719 29 33.878906 29 31 L 29 28.90625 C 31.320313 28.570313 33.957031 28 36.40625 28 Z",-12,-13,.5),camera:f("M864 260H728l-32.4-90.8a32.07 32.07 0 0 0-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 260H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V340c0-44.2-35.8-80-80-80zM512 716c-88.4 0-160-71.6-160-160s71.6-160 160-160 160 71.6 160 160-71.6 160-160 160zm-96-160a96 96 0 1 0 192 0 96 96 0 1 0-192 0z",-12,-13)};_.Canvas.include({_updateMarkerPoint:function(e){if(!(!this._drawing||e._empty()||e.feature&&e.feature.properties._isHidden)){var t=e._point,n=e.options._radiusM,l=e.options.image,s=e._map,o=this._ctx,r=e.options.iconName||"border";if(s){if(l){let n=e.options.w||20,s=e.options.h||20;return void o.drawImage(l,t.x-n/2,t.y-s/2,n,s)}let i=s._zoom;n&&!s._rpx&&s._needRound&&(s._rpx=s._needRound*n/h(i,s.getCenter())),s._rpx>20&&s._needRound&&(o.save(),o.beginPath(),o.globalAlpha=.2,o.fillStyle="gray",o.arc(t.x,t.y,s._rpx,0,2*Math.PI),o.fill(),o.stroke(),o.closePath(),o.restore()),i>12&&(o.save(),o.beginPath(),o.globalAlpha=1,o.fillStyle="white",o.arc(t.x,t.y,14,0,2*Math.PI),o.fill(),o.closePath(),o.restore()),o.save(),o.beginPath(),o.translate(t.x-0,t.y-0),this._fillStroke(o,e),o.stroke(iconPaths[r].path),o.globalAlpha=e.options.fillOpacity,o.fill(iconPaths[r].path),o.closePath(),o.restore()}}},_updateCirclePoint:function(e){if(this._drawing&&!e._empty()){var t=e._point,n=e.options,l=n.radius||14,s=2*l,o=(e._map,this._ctx);if(o.save(),o.beginPath(),o.globalAlpha=1,o.fillStyle=n.fillColor||"red",n.triangle)o.moveTo(t.x,t.y+l),o.lineTo(t.x+l,t.y-l),o.lineTo(t.x-l,t.y-l),o.lineTo(t.x,t.y+l);else if(n.rhomb)o.moveTo(t.x+l,t.y),o.lineTo(t.x,t.y+l),o.lineTo(t.x-l,t.y),o.lineTo(t.x,t.y-l),o.lineTo(t.x+l,t.y);else if(n.box)o.fillRect(t.x-l,t.y-l,s,s);else if(n.path){let e=m[n.path];o.translate(t.x,t.y),o.fill(e),o.stroke(e)}else o.arc(t.x,t.y,l,0,2*Math.PI);o.fill(),n.stroke&&(o.stroke(),n.triangle?(o.moveTo(t.x,t.y+l),o.lineTo(t.x+l,t.y-l),o.lineTo(t.x-l,t.y-l),o.lineTo(t.x,t.y+l)):n.box?o.strokeRect(t.x-l,t.y-l,s,s):o.arc(t.x,t.y,l,0,2*Math.PI)),o.closePath(),o.restore()}}});_.CircleMarker.extend({_updatePath:function(){this._renderer._updateMarkerPoint(this)}});const g=_.CircleMarker.extend({options:{renderer:u},_updatePath:function(){this._renderer._updateCirclePoint(this)}});_.Rectangle.extend({options:{renderer:u}});function y(){}function b(e){return e()}function k(){return Object.create(null)}function x(e){e.forEach(b)}function j(e){return"function"==typeof e}function C(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function w(e){return null==e?"":e}function z(e,t){e.appendChild(t)}function D(e,t,n){e.insertBefore(t,n||null)}function F(e){e.parentNode.removeChild(e)}function T(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function E(e){return document.createElement(e)}function O(e){return document.createTextNode(e)}function M(){return O(" ")}function q(){return O("")}function $(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function P(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function H(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function S(e){return""===e?void 0:+e}function N(e,t){t=""+t,e.data!==t&&(e.data=t)}function B(e,t){(null!=t||e.value)&&(e.value=t)}function G(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t)return void(l.selected=!0)}}function I(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];l.selected=~t.indexOf(l.__value)}}function U(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function A(e){return[].map.call(e.querySelectorAll(":checked"),e=>e.__value)}let R;function Z(e){R=e}function Y(){if(!R)throw new Error("Function called outside component initialization");return R}function V(e){Y().$$.after_update.push(e)}function W(){const e=Y();return(t,n)=>{const l=e.$$.callbacks[t];if(l){const s=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);l.slice().forEach(t=>{t.call(e,s)})}}}const K=[],J=[],X=[],Q=[],ee=Promise.resolve();let te=!1;function ne(e){X.push(e)}let le=!1;const se=new Set;function oe(){if(!le){le=!0;do{for(let e=0;e<K.length;e+=1){const t=K[e];Z(t),re(t.$$)}for(K.length=0;J.length;)J.pop()();for(let e=0;e<X.length;e+=1){const t=X[e];se.has(t)||(se.add(t),t())}X.length=0}while(K.length);for(;Q.length;)Q.pop()();te=!1,le=!1,se.clear()}}function re(e){if(null!==e.fragment){e.update(),x(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ne)}}const ie=new Set;let ae;function ce(){ae={r:0,c:[],p:ae}}function pe(){ae.r||x(ae.c),ae=ae.p}function de(e,t){e&&e.i&&(ie.delete(e),e.i(t))}function ue(e,t,n,l){if(e&&e.o){if(ie.has(e))return;ie.add(e),ae.c.push(()=>{ie.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}}function _e(e){e&&e.c()}function he(e,t,n){const{fragment:l,on_mount:s,on_destroy:o,after_update:r}=e.$$;l&&l.m(t,n),ne(()=>{const t=s.map(b).filter(j);o?o.push(...t):x(t),e.$$.on_mount=[]}),r.forEach(ne)}function ve(e,t){const n=e.$$;null!==n.fragment&&(x(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function fe(e,t){-1===e.$$.dirty[0]&&(K.push(e),te||(te=!0,ee.then(oe)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function me(e,t,n,l,s,o,r=[-1]){const i=R;Z(e);const a=t.props||{},c=e.$$={fragment:null,ctx:null,props:o,update:y,not_equal:s,bound:k(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(i?i.$$.context:[]),callbacks:k(),dirty:r};let p=!1;if(c.ctx=n?n(e,a,(t,n,...l)=>{const o=l.length?l[0]:n;return c.ctx&&s(c.ctx[t],c.ctx[t]=o)&&(c.bound[t]&&c.bound[t](o),p&&fe(e,t)),n}):[],c.update(),p=!0,x(c.before_update),c.fragment=!!l&&l(c.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);c.fragment&&c.fragment.l(e),e.forEach(F)}else c.fragment&&c.fragment.c();t.intro&&de(e.$$.fragment),he(e,t.target,t.anchor),oe()}Z(i)}class ge{$destroy(){ve(this,1),this.$destroy=y}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function ye(e,t,n){const l=e.slice();return l[7]=t[n],l[9]=n,l}function be(e){let t,n,l,s,o;function r(...t){return e[6](e[9],...t)}return{c(){t=E("li"),H(t,"class",n="dot"+(e[9]===e[1]?" selected":"")+" svelte-jjp3es"),t.value=l=e[9],H(t,"role","button"),H(t,"tabindex","0"),H(t,"aria-label",s="slide item "+e[9])},m(e,n,l){D(e,t,n),l&&o(),o=$(t,"click",P(r))},p(l,s){e=l,2&s&&n!==(n="dot"+(e[9]===e[1]?" selected":"")+" svelte-jjp3es")&&H(t,"class",n)},d(e){e&&F(t),o()}}}function ke(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,b,k,j,L,C,w,q,S,B,G,I,U,A=(e[0][e[1]].kindName||"Фото и схемы ДТП")+"",R=e[1]+1+"",Z=e[0].length+"",Y=e[0],V=[];for(let t=0;t<Y.length;t+=1)V[t]=be(ye(e,Y,t));return{c(){t=E("div"),n=M(),l=E("div"),s=E("div"),o=M(),r=E("div"),i=E("div"),a=E("div"),c=O(A),p=M(),d=E("div"),u=E("div"),_=E("div"),h=E("button"),v=M(),f=E("div"),m=E("a"),g=E("img"),j=M(),L=E("button"),C=M(),w=E("ul");for(let e=0;e<V.length;e+=1)V[e].c();q=M(),S=E("p"),B=O(R),G=O(" из "),I=O(Z),H(t,"class","modal-background svelte-jjp3es"),H(s,"title","Закрыть"),H(s,"class","ant-modal-close svelte-jjp3es"),H(a,"class","ant-modal-title"),H(a,"id","rcDialogTitle1"),H(i,"class","ant-modal-header svelte-jjp3es"),H(h,"type","button"),H(h,"aria-label","previous slide / item"),H(h,"class","control-arrow control-prev svelte-jjp3es"),g.src!==(b=""+(xe+e[0][e[1]].guid))&&H(g,"src",b),H(g,"alt",""),H(g,"class","svelte-jjp3es"),H(m,"target","_blank"),H(m,"href",k=""+(xe+e[0][e[1]].guid)),H(m,"title","Открыть на весь экран"),H(m,"class","svelte-jjp3es"),H(f,"class","slider-wrapper axis-horizontal svelte-jjp3es"),H(L,"type","button"),H(L,"aria-label","next slide / item"),H(L,"class","control-arrow control-next svelte-jjp3es"),H(w,"class","control-dots svelte-jjp3es"),H(S,"class","carousel-status svelte-jjp3es"),H(_,"class","carousel carousel-slider svelte-jjp3es"),function(e,t,n,l){e.style.setProperty(t,n,l?"important":"")}(_,"width","100%"),H(d,"class","ant-modal-body svelte-jjp3es"),H(r,"class","ant-modal-content svelte-jjp3es"),H(l,"class","modal svelte-jjp3es"),H(l,"role","dialog"),H(l,"aria-modal","true")},m(y,b,k){D(y,t,b),D(y,n,b),D(y,l,b),z(l,s),z(l,o),z(l,r),z(r,i),z(i,a),z(a,c),z(r,p),z(r,d),z(d,u),z(u,_),z(_,h),z(_,v),z(_,f),z(f,m),z(m,g),z(_,j),z(_,L),z(_,C),z(_,w);for(let e=0;e<V.length;e+=1)V[e].m(w,null);z(_,q),z(_,S),z(S,B),z(S,G),z(S,I),k&&x(U),U=[$(t,"click",P(e[2])),$(s,"click",P(e[2])),$(h,"click",P(e[3])),$(L,"click",P(e[4])),$(l,"click",P(je))]},p(e,[t]){if(3&t&&A!==(A=(e[0][e[1]].kindName||"Фото и схемы ДТП")+"")&&N(c,A),3&t&&g.src!==(b=""+(xe+e[0][e[1]].guid))&&H(g,"src",b),3&t&&k!==(k=""+(xe+e[0][e[1]].guid))&&H(m,"href",k),3&t){let n;for(Y=e[0],n=0;n<Y.length;n+=1){const l=ye(e,Y,n);V[n]?V[n].p(l,t):(V[n]=be(l),V[n].c(),V[n].m(w,null))}for(;n<V.length;n+=1)V[n].d(1);V.length=Y.length}2&t&&R!==(R=e[1]+1+"")&&N(B,R),1&t&&Z!==(Z=e[0].length+"")&&N(I,Z)},i:y,o:y,d(e){e&&F(t),e&&F(n),e&&F(l),T(V,e),x(U)}}}const xe="//map.mvs.group/skpdi/proxy.php?guid=",je=()=>{};function Le(e,t,n){const l=W();let{data:s}=t,o=0;return e.$set=e=>{"data"in e&&n(0,s=e.data)},[s,o,()=>{l("close")},()=>{o&&n(1,o--,o)},()=>{o<s.length-1&&n(1,o++,o)},l,e=>{n(1,o=e)}]}class Ce extends ge{constructor(e){super(),me(this,e,Le,ke,C,{data:0})}}function we(e){let t,n,l,s,o,r,i,a,c,p=e[0].title+"",d=e[0].address+"",u=e[0].contact+"";return{c(){t=E("div"),n=E("div"),l=O(p),s=E("br"),o=M(),r=E("div"),i=O(d),a=E("br"),c=O(u),H(n,"class","pLine"),H(r,"class","address svelte-1ve8gqw"),H(t,"class","mvsPopup svelte-1ve8gqw")},m(e,p){D(e,t,p),z(t,n),z(n,l),z(t,s),z(t,o),z(t,r),z(r,i),z(r,a),z(r,c)},p(e,[t]){1&t&&p!==(p=e[0].title+"")&&N(l,p),1&t&&d!==(d=e[0].address+"")&&N(i,d),1&t&&u!==(u=e[0].contact+"")&&N(c,u)},i:y,o:y,d(e){e&&F(t)}}}function ze(e,t,n){let{prp:l={}}=t;return e.$set=e=>{"prp"in e&&n(0,l=e.prp)},[l]}class De extends ge{constructor(e){super(),me(this,e,ze,we,C,{prp:0})}}function Fe(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,b,k,x,j,L,C,w,T,q,P,S,B,G,I,U,A,R,Z,Y,V,W,K,J,X,Q,ee,te,ne,le,se,oe,re,ie,ae,ce,pe,de,ue,_e,he,ve,fe,me,ge,ye,be=(e[0].kind||"")+"",ke=(e[0].type||"")+"",xe=(e[0].id||"")+"",je=(e[0].status||"")+"",Le=e[3](e[0].date_created)+"",Ce=e[3](e[0].date_finish_fact)+"",we=e[2].lat+"",ze=e[2].lon+"",De=(e[0].id_dtp||"")+"",Fe=(e[0].description||"")+"";return{c(){t=E("div"),n=E("div"),l=O("Мероприятие"),s=E("br"),o=O("("),r=O(be),i=O(")"),a=M(),c=E("div"),p=E("table"),d=E("tbody"),u=E("tr"),_=E("td"),_.textContent="Тип мероприятия:",h=M(),v=E("td"),f=O(ke),m=M(),g=E("tr"),b=E("td"),b.textContent="ID:",k=M(),x=E("td"),j=O(xe),L=M(),C=E("tr"),w=E("td"),w.textContent="Статус:",T=M(),q=E("td"),P=O(je),S=M(),B=E("tr"),G=E("td"),G.textContent="Дата добавления:",I=M(),U=E("td"),A=O(Le),R=M(),Z=E("tr"),Y=E("td"),Y.textContent="Дата завершения:",V=M(),W=E("td"),K=O(Ce),J=M(),X=E("tr"),Q=E("td"),Q.textContent="Координаты:",ee=M(),te=E("td"),ne=O(we),le=M(),se=O(ze),oe=M(),re=E("span"),ie=M(),ae=E("tr"),ce=E("td"),ce.textContent="ID ДТП СКПДИ:",pe=M(),de=E("td"),ue=O(De),_e=M(),he=E("tr"),ve=E("td"),ve.textContent="Описание:",fe=M(),me=E("td"),ge=O(Fe),H(n,"class","pLine"),H(_,"class","first svelte-1ve8gqw"),H(b,"class","first svelte-1ve8gqw"),H(w,"class","first svelte-1ve8gqw"),H(G,"class","first svelte-1ve8gqw"),H(Y,"class","first svelte-1ve8gqw"),H(Q,"class","first svelte-1ve8gqw"),H(re,"title","Скопировать в буфер обмена"),H(re,"class","leaflet-gmx-icon-copy"),H(ce,"class","first svelte-1ve8gqw"),H(ve,"class","first svelte-1ve8gqw"),H(p,"class","table svelte-1ve8gqw"),H(c,"class","featureCont"),H(t,"class","mvsPopup svelte-1ve8gqw")},m(y,F,E){D(y,t,F),z(t,n),z(n,l),z(n,s),z(n,o),z(n,r),z(n,i),z(t,a),z(t,c),z(c,p),z(p,d),z(d,u),z(u,_),z(u,h),z(u,v),z(v,f),z(d,m),z(d,g),z(g,b),z(g,k),z(g,x),z(x,j),z(d,L),z(d,C),z(C,w),z(C,T),z(C,q),z(q,P),z(d,S),z(d,B),z(B,G),z(B,I),z(B,U),z(U,A),z(d,R),z(d,Z),z(Z,Y),z(Z,V),z(Z,W),z(W,K),z(d,J),z(d,X),z(X,Q),z(X,ee),z(X,te),z(te,ne),z(te,le),z(te,se),z(te,oe),z(te,re),z(d,ie),z(d,ae),z(ae,ce),z(ae,pe),z(ae,de),z(de,ue),z(d,_e),z(d,he),z(he,ve),z(he,fe),z(he,me),z(me,ge),E&&ye(),ye=$(re,"click",e[1])},p(e,[t]){1&t&&be!==(be=(e[0].kind||"")+"")&&N(r,be),1&t&&ke!==(ke=(e[0].type||"")+"")&&N(f,ke),1&t&&xe!==(xe=(e[0].id||"")+"")&&N(j,xe),1&t&&je!==(je=(e[0].status||"")+"")&&N(P,je),1&t&&Le!==(Le=e[3](e[0].date_created)+"")&&N(A,Le),1&t&&Ce!==(Ce=e[3](e[0].date_finish_fact)+"")&&N(K,Ce),1&t&&De!==(De=(e[0].id_dtp||"")+"")&&N(ue,De),1&t&&Fe!==(Fe=(e[0].description||"")+"")&&N(ge,Fe)},i:y,o:y,d(e){e&&F(t),ye()}}}function Te(e,t,n){let{prp:l}=t;let s=l.coords[0]||{lat:l.lat,lon:l.lon};return e.$set=e=>{"prp"in e&&n(0,l=e.prp)},[l,e=>{navigator.clipboard.writeText(e.target.parentNode.textContent).catch(e=>{console.log("Something went wrong",e)})},s,e=>{if(!e)return"";let t=new Date(1e3*e);return t.toLocaleDateString()+" "+t.toLocaleTimeString()}]}class Ee extends ge{constructor(e){super(),me(this,e,Te,Fe,C,{prp:0})}}function Oe(e,t,n){const l=e.slice();return l[12]=t[n],l}function Me(e,t,n){const l=e.slice();return l[12]=t[n],l}function qe(e,t,n){const l=e.slice();return l[12]=t[n],l}function $e(e,t,n){const l=e.slice();return l[17]=t[n],l}function Pe(e){let t,n,l,s=e[12].k_uch&&(e[12].npdd||e[12].sop_npdd)&&function(e){let t,n,l=e[12].k_uch+"";return{c(){t=E("li"),n=O(l)},m(e,l){D(e,t,l),z(t,n)},p:y,d(e){e&&F(t)}}}(e),o=e[12].npdd&&function(e){let t,n,l=e[12].npdd+"";return{c(){t=E("li"),n=O(l)},m(e,l){D(e,t,l),z(t,n)},p:y,d(e){e&&F(t)}}}(e),r=e[12].sop_npdd&&function(e){let t,n,l=e[12].sop_npdd+"";return{c(){t=E("li"),n=O(l)},m(e,l){D(e,t,l),z(t,n)},p:y,d(e){e&&F(t)}}}(e);return{c(){s&&s.c(),t=M(),o&&o.c(),n=M(),r&&r.c(),l=q()},m(e,i){s&&s.m(e,i),D(e,t,i),o&&o.m(e,i),D(e,n,i),r&&r.m(e,i),D(e,l,i)},p(e,t){e[12].k_uch&&(e[12].npdd||e[12].sop_npdd)&&s.p(e,t),e[12].npdd&&o.p(e,t),e[12].sop_npdd&&r.p(e,t)},d(e){s&&s.d(e),e&&F(t),o&&o.d(e),e&&F(n),r&&r.d(e),e&&F(l)}}}function He(e){let t,n,l=e[17].ts&&function(e){let t,n,l=e[17].ts+"";return{c(){t=E("li"),n=O(l)},m(e,l){D(e,t,l),z(t,n)},p:y,d(e){e&&F(t)}}}(e),s=e[17].arr,o=[];for(let t=0;t<s.length;t+=1)o[t]=Pe(qe(e,s,t));return{c(){l&&l.c(),t=M();for(let e=0;e<o.length;e+=1)o[e].c();n=q()},m(e,s){l&&l.m(e,s),D(e,t,s);for(let t=0;t<o.length;t+=1)o[t].m(e,s);D(e,n,s)},p(e,t){if(e[17].ts&&l.p(e,t),64&t){let l;for(s=e[17].arr,l=0;l<s.length;l+=1){const r=qe(e,s,l);o[l]?o[l].p(r,t):(o[l]=Pe(r),o[l].c(),o[l].m(n.parentNode,n))}for(;l<o.length;l+=1)o[l].d(1);o.length=s.length}},d(e){l&&l.d(e),e&&F(t),T(o,e),e&&F(n)}}}function Se(e){let t,n,l,s,o,r=e[0].spog+"";return{c(){t=E("div"),n=E("div"),n.textContent="Погода:",l=M(),s=E("div"),o=O(r),H(n,"class","stitle"),H(s,"class","sval")},m(e,r){D(e,t,r),z(t,n),z(t,l),z(t,s),z(s,o)},p(e,t){1&t&&r!==(r=e[0].spog+"")&&N(o,r)},d(e){e&&F(t)}}}function Ne(e){let t,n,l,s,o,r=e[0].s_pch+"";return{c(){t=E("div"),n=E("div"),n.textContent="Покрытие:",l=M(),s=E("div"),o=O(r),H(n,"class","stitle"),H(s,"class","sval")},m(e,r){D(e,t,r),z(t,n),z(t,l),z(t,s),z(s,o)},p(e,t){1&t&&r!==(r=e[0].s_pch+"")&&N(o,r)},d(e){e&&F(t)}}}function Be(e){let t,n,l,s,o,r=e[0].osv+"";return{c(){t=E("div"),n=E("div"),n.textContent="Освещенность:",l=M(),s=E("div"),o=O(r),H(n,"class","stitle"),H(s,"class","sval")},m(e,r){D(e,t,r),z(t,n),z(t,l),z(t,s),z(s,o)},p(e,t){1&t&&r!==(r=e[0].osv+"")&&N(o,r)},d(e){e&&F(t)}}}function Ge(e){let t,n,l,s,o,r=e[0].ndu+"";return{c(){t=E("div"),n=E("div"),n.textContent="Иные условия:",l=M(),s=E("div"),o=O(r),H(n,"class","stitle"),H(s,"class","sval")},m(e,r){D(e,t,r),z(t,n),z(t,l),z(t,s),z(s,o)},p(e,t){1&t&&r!==(r=e[0].ndu+"")&&N(o,r)},d(e){e&&F(t)}}}function Ie(e){let t,n,l,s;return{c(){t=E("li"),n=O("батальон ДПС"),H(t,"class","link svelte-23a49a"),t.value=l=e[12]},m(l,o,r){D(l,t,o),z(t,n),r&&s(),s=$(t,"click",e[4])},p(e,n){1&n&&l!==(l=e[12])&&(t.value=l)},d(e){e&&F(t),s()}}}function Ue(e){let t,n,l,s;return{c(){t=E("li"),n=O("Мероприятие"),H(t,"class","link svelte-23a49a"),t.value=l=e[12]},m(l,o,r){D(l,t,o),z(t,n),r&&s(),s=$(t,"click",e[3])},p(e,n){1&n&&l!==(l=e[12])&&(t.value=l)},d(e){e&&F(t),s()}}}function Ae(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,b,k,x,j,L,C,w,q,P,S,B,G,I,U,A,R,Z,Y,V,W,K,J,X,Q,ee,te,ne,le,se,oe,re,ie,ae,ce,pe,de,ue,_e,he,ve,fe,me,ge,ye,be,ke,xe,je,Le,Ce,we,ze,De,Fe,Te,Ee,qe,Pe,Ae,Re,Ze,Ye,Ve,We,Ke,Je,Xe,Qe,et,tt,nt,lt,st,ot,rt,it,at,ct,pt,dt,ut,_t,ht=(e[0].name||e[0].dtvp||"")+"",vt=(e[0].sid||e[0].id_stat||e[0].id_skpdi||"")+"",ft=(e[0].district||"")+"",mt=(e[0].dor||"")+"",gt=(e[0].name_city||"вне населенного пункта")+"",yt=(e[0].km||0)+"",bt=(e[0].m||0)+"",kt=e[0].lat+"",xt=e[0].lon+"",jt=(e[0].collision_date||e[0].dtp_date||"")+"",Lt=(e[0].dtvp||"")+"",Ct=e[0].pog+"",wt=e[0].ran+"",zt=e[6],Dt=[];for(let t=0;t<zt.length;t+=1)Dt[t]=He($e(e,zt,t));let Ft=e[0].spog&&Se(e),Tt=e[0].s_pch&&Ne(e),Et=e[0].osv&&Be(e),Ot=e[0].ndu&&Ge(e),Mt=e[0].dps_plk||[],qt=[];for(let t=0;t<Mt.length;t+=1)qt[t]=Ie(Me(e,Mt,t));let $t=e[0].event_list||[],Pt=[];for(let t=0;t<$t.length;t+=1)Pt[t]=Ue(Oe(e,$t,t));return{c(){t=E("div"),n=E("div"),l=E("b"),s=O(ht),o=M(),r=E("div"),i=E("table"),a=E("tbody"),c=E("tr"),p=E("td"),p.textContent="ID:",d=M(),u=E("td"),_=O(vt),h=M(),v=E("tr"),f=E("td"),f.textContent="Адрес:",m=M(),g=E("td"),b=O(ft),k=M(),x=E("tr"),j=E("td"),j.textContent="Дорога:",L=M(),C=E("td"),w=O(mt),q=M(),P=E("tr"),S=E("td"),S.textContent="Населенный пункт:",B=M(),G=E("td"),I=O(gt),U=M(),A=E("tr"),R=E("td"),R.textContent="Пикетаж:",Z=M(),Y=E("td"),V=E("b"),W=O(yt),K=O(" км. "),J=E("b"),X=O(bt),Q=O(" м."),ee=M(),te=E("tr"),ne=E("td"),ne.textContent="Координаты:",le=M(),se=E("td"),oe=O(kt),re=M(),ie=O(xt),ae=M(),ce=E("span"),pe=M(),de=E("tr"),ue=E("td"),ue.textContent="Дата/время:",_e=M(),he=E("td"),ve=O(jt),fe=M(),me=E("tr"),ge=E("td"),ge.textContent="Вид ДТП:",ye=M(),be=E("td"),ke=O(Lt),xe=M(),je=E("tr"),Le=E("td"),Le.textContent="Нарушения:",Ce=M(),we=E("td"),ze=E("ul");for(let e=0;e<Dt.length;e+=1)Dt[e].c();De=M(),Fe=E("tr"),Te=E("td"),Te.textContent="Условия:",Ee=M(),qe=E("td"),Ft&&Ft.c(),Pe=M(),Tt&&Tt.c(),Ae=M(),Et&&Et.c(),Re=M(),Ot&&Ot.c(),Ze=M(),Ye=E("tr"),Ve=E("td"),Ve.textContent="Количество погибших/раненых:",We=M(),Ke=E("td"),Je=E("b"),Xe=O(Ct),Qe=O("/"),et=O(wt),tt=M(),nt=E("tr"),lt=E("td"),st=E("div"),ot=M(),rt=E("ul");for(let e=0;e<qt.length;e+=1)qt[e].c();it=M(),at=E("tr"),ct=E("td"),pt=E("div"),dt=M(),ut=E("ul");for(let e=0;e<Pt.length;e+=1)Pt[e].c();H(n,"class","pLine"),H(p,"class","first svelte-23a49a"),H(f,"class","first svelte-23a49a"),H(j,"class","first svelte-23a49a"),H(S,"class","first svelte-23a49a"),H(R,"class","first svelte-23a49a"),H(ne,"class","first svelte-23a49a"),H(ce,"title","Скопировать в буфер обмена"),H(ce,"class","leaflet-gmx-icon-copy"),H(ue,"class","first svelte-23a49a"),H(ge,"class","first svelte-23a49a"),H(Le,"class","first svelte-23a49a"),H(Te,"class","first svelte-23a49a"),H(Ve,"class","first svelte-23a49a"),H(st,"class","win leaflet-popup-content-wrapper hidden svelte-23a49a"),H(lt,"class","first svelte-23a49a"),H(lt,"colspan","2"),H(pt,"class","win leaflet-popup-content-wrapper hidden svelte-23a49a"),H(ct,"class","first svelte-23a49a"),H(ct,"colspan","2"),H(i,"class","table"),H(r,"class","featureCont"),H(t,"class","mvsPopup svelte-23a49a")},m(y,F,T){D(y,t,F),z(t,n),z(n,l),z(l,s),z(t,o),z(t,r),z(r,i),z(i,a),z(a,c),z(c,p),z(c,d),z(c,u),z(u,_),z(a,h),z(a,v),z(v,f),z(v,m),z(v,g),z(g,b),z(a,k),z(a,x),z(x,j),z(x,L),z(x,C),z(C,w),z(a,q),z(a,P),z(P,S),z(P,B),z(P,G),z(G,I),z(a,U),z(a,A),z(A,R),z(A,Z),z(A,Y),z(Y,V),z(V,W),z(Y,K),z(Y,J),z(J,X),z(Y,Q),z(a,ee),z(a,te),z(te,ne),z(te,le),z(te,se),z(se,oe),z(se,re),z(se,ie),z(se,ae),z(se,ce),z(a,pe),z(a,de),z(de,ue),z(de,_e),z(de,he),z(he,ve),z(a,fe),z(a,me),z(me,ge),z(me,ye),z(me,be),z(be,ke),z(a,xe),z(a,je),z(je,Le),z(je,Ce),z(je,we),z(we,ze);for(let e=0;e<Dt.length;e+=1)Dt[e].m(ze,null);z(a,De),z(a,Fe),z(Fe,Te),z(Fe,Ee),z(Fe,qe),Ft&&Ft.m(qe,null),z(qe,Pe),Tt&&Tt.m(qe,null),z(qe,Ae),Et&&Et.m(qe,null),z(qe,Re),Ot&&Ot.m(qe,null),z(a,Ze),z(a,Ye),z(Ye,Ve),z(Ye,We),z(Ye,Ke),z(Ke,Je),z(Je,Xe),z(Je,Qe),z(Je,et),z(a,tt),z(a,nt),z(nt,lt),z(lt,st),e[10](st),z(lt,ot),z(lt,rt);for(let e=0;e<qt.length;e+=1)qt[e].m(rt,null);z(a,it),z(a,at),z(at,ct),z(ct,pt),e[11](pt),z(ct,dt),z(ct,ut);for(let e=0;e<Pt.length;e+=1)Pt[e].m(ut,null);T&&_t(),_t=$(ce,"click",e[5])},p(e,[t]){if(1&t&&ht!==(ht=(e[0].name||e[0].dtvp||"")+"")&&N(s,ht),1&t&&vt!==(vt=(e[0].sid||e[0].id_stat||e[0].id_skpdi||"")+"")&&N(_,vt),1&t&&ft!==(ft=(e[0].district||"")+"")&&N(b,ft),1&t&&mt!==(mt=(e[0].dor||"")+"")&&N(w,mt),1&t&&gt!==(gt=(e[0].name_city||"вне населенного пункта")+"")&&N(I,gt),1&t&&yt!==(yt=(e[0].km||0)+"")&&N(W,yt),1&t&&bt!==(bt=(e[0].m||0)+"")&&N(X,bt),1&t&&kt!==(kt=e[0].lat+"")&&N(oe,kt),1&t&&xt!==(xt=e[0].lon+"")&&N(ie,xt),1&t&&jt!==(jt=(e[0].collision_date||e[0].dtp_date||"")+"")&&N(ve,jt),1&t&&Lt!==(Lt=(e[0].dtvp||"")+"")&&N(ke,Lt),64&t){let n;for(zt=e[6],n=0;n<zt.length;n+=1){const l=$e(e,zt,n);Dt[n]?Dt[n].p(l,t):(Dt[n]=He(l),Dt[n].c(),Dt[n].m(ze,null))}for(;n<Dt.length;n+=1)Dt[n].d(1);Dt.length=zt.length}if(e[0].spog?Ft?Ft.p(e,t):(Ft=Se(e),Ft.c(),Ft.m(qe,Pe)):Ft&&(Ft.d(1),Ft=null),e[0].s_pch?Tt?Tt.p(e,t):(Tt=Ne(e),Tt.c(),Tt.m(qe,Ae)):Tt&&(Tt.d(1),Tt=null),e[0].osv?Et?Et.p(e,t):(Et=Be(e),Et.c(),Et.m(qe,Re)):Et&&(Et.d(1),Et=null),e[0].ndu?Ot?Ot.p(e,t):(Ot=Ge(e),Ot.c(),Ot.m(qe,null)):Ot&&(Ot.d(1),Ot=null),1&t&&Ct!==(Ct=e[0].pog+"")&&N(Xe,Ct),1&t&&wt!==(wt=e[0].ran+"")&&N(et,wt),17&t){let n;for(Mt=e[0].dps_plk||[],n=0;n<Mt.length;n+=1){const l=Me(e,Mt,n);qt[n]?qt[n].p(l,t):(qt[n]=Ie(l),qt[n].c(),qt[n].m(rt,null))}for(;n<qt.length;n+=1)qt[n].d(1);qt.length=Mt.length}if(9&t){let n;for($t=e[0].event_list||[],n=0;n<$t.length;n+=1){const l=Oe(e,$t,n);Pt[n]?Pt[n].p(l,t):(Pt[n]=Ue(l),Pt[n].c(),Pt[n].m(ut,null))}for(;n<Pt.length;n+=1)Pt[n].d(1);Pt.length=$t.length}},i:y,o:y,d(n){n&&F(t),T(Dt,n),Ft&&Ft.d(),Tt&&Tt.d(),Et&&Et.d(),Ot&&Ot.d(),e[10](null),T(qt,n),e[11](null),T(Pt,n),_t()}}}function Re(e,t,n){let l,s,o,{showModal:r=!1}=t,{prp:i}=t,a=i.skpdiFiles?"":"disabled";V(()=>{r&&(l=new Ce({target:document.body,props:{data:i.skpdiFiles}}),l.$on("close",e=>{l.$destroy(),n(7,r=!1)}))});const c=(i.tsInfo||[]).map(e=>{let t=e.ts_uch||[];return{ts:"Осталось на месте ДТП"!==e.ts?e.ts:"",arr:t.map(e=>({k_uch:e.k_uch||"",npdd:"Нет нарушений"!==e.npdd?e.npdd:"",sop_npdd:"Нет нарушений"!==e.sop_npdd?e.sop_npdd:""}))}});return e.$set=e=>{"showModal"in e&&n(7,r=e.showModal),"prp"in e&&n(0,i=e.prp)},[i,s,o,e=>{let t=e.target.value;n(2,o.innerHTML="",o),fetch("https://dtp.mvs.group/scripts/events_dev/get_event_id_"+t+".txt",{}).then(e=>e.json()).then(e=>{new Ee({target:o,props:{prp:e[0]}})})},e=>{let t=e.target.value;console.log("showBat",e.target.value),n(1,s.innerHTML="",s),fetch("https://dtp.mvs.group/scripts/regiments_dev/get_plk_id"+t+".txt",{}).then(e=>e.json()).then(e=>{new De({target:s,props:{prp:e[0]}})})},e=>{navigator.clipboard.writeText(e.target.parentNode.textContent).catch(e=>{console.log("Something went wrong",e)})},c,r,l,a,function(e){J[e?"unshift":"push"](()=>{n(1,s=e)})},function(e){J[e?"unshift":"push"](()=>{n(2,o=e)})}]}class Ze extends ge{constructor(e){super(),me(this,e,Re,Ae,C,{showModal:7,prp:0})}}const Ye=window.L,Ve=Ye.popup();let We;const Ke=Ye.featureGroup([]);function Je(e,t,n){const l=e.slice();return l[9]=t[n],l}function Xe(e,t,n){const l=e.slice();return l[12]=t[n],l}function Qe(e,t,n){const l=e.slice();return l[12]=t[n],l}function et(e){let t,n=e[1].collisionTypes,l=[];for(let t=0;t<n.length;t+=1)l[t]=tt(Qe(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=q()},m(e,n){for(let t=0;t<l.length;t+=1)l[t].m(e,n);D(e,t,n)},p(e,s){if(2&s){let o;for(n=e[1].collisionTypes,o=0;o<n.length;o+=1){const r=Qe(e,n,o);l[o]?l[o].p(r,s):(l[o]=tt(r),l[o].c(),l[o].m(t.parentNode,t))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(e){T(l,e),e&&F(t)}}}function tt(e){let t,n,l=(e[12].collisionType||"")+"";return{c(){t=E("li"),n=O(l)},m(e,l){D(e,t,l),z(t,n)},p(e,t){2&t&&l!==(l=(e[12].collisionType||"")+"")&&N(n,l)},d(e){e&&F(t)}}}function nt(e){let t,n=e[1].uchs,l=[];for(let t=0;t<n.length;t+=1)l[t]=lt(Xe(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=q()},m(e,n){for(let t=0;t<l.length;t+=1)l[t].m(e,n);D(e,t,n)},p(e,s){if(2&s){let o;for(n=e[1].uchs,o=0;o<n.length;o+=1){const r=Xe(e,n,o);l[o]?l[o].p(r,s):(l[o]=lt(r),l[o].c(),l[o].m(t.parentNode,t))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(e){T(l,e),e&&F(t)}}}function lt(e){let t,n,l,s,o,r,i,a,c=(e[12].collisionPartyCategory||"")+"",p=(e[12].collisionPartyCond||"")+"";return{c(){t=E("li"),n=O(c),l=M(),s=E("b"),o=E("i"),r=O("("),i=O(p),a=O(")")},m(e,c){D(e,t,c),z(t,n),z(t,l),z(t,s),z(s,o),z(o,r),z(o,i),z(o,a)},p(e,t){2&t&&c!==(c=(e[12].collisionPartyCategory||"")+"")&&N(n,c),2&t&&p!==(p=(e[12].collisionPartyCond||"")+"")&&N(i,p)},d(e){e&&F(t)}}}function st(e){let t,n,l,s;return{c(){t=E("li"),n=O("Мероприятие"),H(t,"class","link svelte-vdxfpj"),t.value=l=e[9]},m(l,o,r){D(l,t,o),z(t,n),r&&s(),s=$(t,"click",e[4])},p(e,n){2&n&&l!==(l=e[9])&&(t.value=l)},d(e){e&&F(t),s()}}}function ot(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,b,k,j,L,C,w,q,P,S,B,G,I,U,A,R,Z,Y,V,W,K,J,X,Q,ee,te,ne,le,se,oe,re,ie,ae,ce,pe,de,ue,_e,he,ve,fe,me,ge,ye,be,ke,xe,je,Le,Ce,we,ze,De,Fe,Te,Ee,Oe,Me,qe,$e,Pe=(e[1].name||e[1].dtvp||"")+"",He=(e[1].id||e[1].id_stat||e[1].id_skpdi||"")+"",Se=(e[1].km||0)+"",Ne=(e[1].m||0)+"",Be=(e[1].name_city||"вне населенного пункта")+"",Ge=e[1].lat+"",Ie=e[1].lon+"",Ue=(e[1].collision_date||e[1].dtp_date||"")+"",Ae=(e[1].collision_context||e[1].dtp_date||"")+"",Re=e[1].collisionTypes&&e[1].collisionTypes.length&&et(e),Ze=e[1].uchs&&e[1].uchs.length&&nt(e),Ye=e[1].event_list||[],Ve=[];for(let t=0;t<Ye.length;t+=1)Ve[t]=st(Je(e,Ye,t));return{c(){t=E("div"),n=E("div"),l=E("b"),s=O(Pe),o=M(),r=E("div"),i=E("table"),a=E("tbody"),c=E("tr"),p=E("td"),p.textContent="ID:",d=M(),u=E("td"),_=O(He),h=M(),v=E("tr"),f=E("td"),f.textContent="Пикетаж:",m=M(),g=E("td"),b=E("b"),k=O(Se),j=O(" км. "),L=E("b"),C=O(Ne),w=O(" м."),q=M(),P=E("tr"),S=E("td"),S.textContent="Населенный пункт:",B=M(),G=E("td"),I=O(Be),U=M(),A=E("tr"),R=E("td"),R.textContent="Координаты:",Z=M(),Y=E("td"),V=O(Ge),W=M(),K=O(Ie),J=M(),X=E("span"),Q=M(),ee=E("tr"),te=E("td"),te.textContent="Дата/время:",ne=M(),le=E("td"),se=O(Ue),oe=M(),re=E("tr"),ie=E("td"),ae=E("div"),ae.textContent="Условия ДТП:",ce=M(),pe=E("div"),de=O(Ae),ue=M(),_e=E("tr"),he=E("td"),he.textContent="Нарушения:",ve=M(),fe=E("td"),me=E("ul"),Re&&Re.c(),ge=M(),ye=E("tr"),be=E("td"),be.textContent="Участники:",ke=M(),xe=E("td"),je=E("ul"),Ze&&Ze.c(),Le=M(),Ce=E("tr"),we=E("td"),ze=E("div"),De=M(),Fe=E("ul");for(let e=0;e<Ve.length;e+=1)Ve[e].c();Te=M(),Ee=E("tr"),Oe=E("td"),Me=E("button"),qe=O("Фото и схемы"),H(n,"class","pLine"),H(p,"class","first"),H(f,"class","first"),H(S,"class","first"),H(R,"class","first"),H(X,"title","Скопировать в буфер обмена"),H(X,"class","leaflet-gmx-icon-copy"),H(te,"class","first"),H(ae,"class","first"),H(ie,"colspan","2"),H(he,"class","first"),H(be,"class","first"),H(ze,"class","win leaflet-popup-content-wrapper  svelte-vdxfpj"),H(we,"class","first"),H(we,"colspan","2"),H(Me,"class","primary svelte-vdxfpj"),Me.disabled=e[2],H(Oe,"class","center"),H(Oe,"colspan","2"),H(i,"class","table"),H(r,"class","featureCont"),H(t,"class","mvsPopup")},m(y,F,T){D(y,t,F),z(t,n),z(n,l),z(l,s),z(t,o),z(t,r),z(r,i),z(i,a),z(a,c),z(c,p),z(c,d),z(c,u),z(u,_),z(a,h),z(a,v),z(v,f),z(v,m),z(v,g),z(g,b),z(b,k),z(g,j),z(g,L),z(L,C),z(g,w),z(a,q),z(a,P),z(P,S),z(P,B),z(P,G),z(G,I),z(a,U),z(a,A),z(A,R),z(A,Z),z(A,Y),z(Y,V),z(Y,W),z(Y,K),z(Y,J),z(Y,X),z(a,Q),z(a,ee),z(ee,te),z(ee,ne),z(ee,le),z(le,se),z(a,oe),z(a,re),z(re,ie),z(ie,ae),z(ie,ce),z(ie,pe),z(pe,de),z(a,ue),z(a,_e),z(_e,he),z(_e,ve),z(_e,fe),z(fe,me),Re&&Re.m(me,null),z(a,ge),z(a,ye),z(ye,be),z(ye,ke),z(ye,xe),z(xe,je),Ze&&Ze.m(je,null),z(a,Le),z(a,Ce),z(Ce,we),z(we,ze),e[7](ze),z(we,De),z(we,Fe);for(let e=0;e<Ve.length;e+=1)Ve[e].m(Fe,null);z(a,Te),z(a,Ee),z(Ee,Oe),z(Oe,Me),z(Me,qe),T&&x($e),$e=[$(X,"click",e[5]),$(Me,"click",e[8])]},p(e,[t]){if(2&t&&Pe!==(Pe=(e[1].name||e[1].dtvp||"")+"")&&N(s,Pe),2&t&&He!==(He=(e[1].id||e[1].id_stat||e[1].id_skpdi||"")+"")&&N(_,He),2&t&&Se!==(Se=(e[1].km||0)+"")&&N(k,Se),2&t&&Ne!==(Ne=(e[1].m||0)+"")&&N(C,Ne),2&t&&Be!==(Be=(e[1].name_city||"вне населенного пункта")+"")&&N(I,Be),2&t&&Ge!==(Ge=e[1].lat+"")&&N(V,Ge),2&t&&Ie!==(Ie=e[1].lon+"")&&N(K,Ie),2&t&&Ue!==(Ue=(e[1].collision_date||e[1].dtp_date||"")+"")&&N(se,Ue),2&t&&Ae!==(Ae=(e[1].collision_context||e[1].dtp_date||"")+"")&&N(de,Ae),e[1].collisionTypes&&e[1].collisionTypes.length?Re?Re.p(e,t):(Re=et(e),Re.c(),Re.m(me,null)):Re&&(Re.d(1),Re=null),e[1].uchs&&e[1].uchs.length?Ze?Ze.p(e,t):(Ze=nt(e),Ze.c(),Ze.m(je,null)):Ze&&(Ze.d(1),Ze=null),18&t){let n;for(Ye=e[1].event_list||[],n=0;n<Ye.length;n+=1){const l=Je(e,Ye,n);Ve[n]?Ve[n].p(l,t):(Ve[n]=st(l),Ve[n].c(),Ve[n].m(Fe,null))}for(;n<Ve.length;n+=1)Ve[n].d(1);Ve.length=Ye.length}4&t&&(Me.disabled=e[2])},i:y,o:y,d(n){n&&F(t),Re&&Re.d(),Ze&&Ze.d(),e[7](null),T(Ve,n),x($e)}}}function rt(e,t,n){let l,s,{showModal:o=!1}=t,{prp:r}=t,i=r.files&&r.files.length?"":"disabled";V(()=>{n(2,i=r.files&&r.files.length?"":"disabled"),o&&(l=new Ce({target:document.body,props:{data:r.files}}),l.$on("close",e=>{l.$destroy(),n(0,o=!1)}))});return e.$set=e=>{"showModal"in e&&n(0,o=e.showModal),"prp"in e&&n(1,r=e.prp)},[o,r,i,s,e=>{let t=e.target.value;n(3,s.innerHTML="",s),fetch("https://dtp.mvs.group/scripts/events_dev/get_event_id_"+t+".txt",{}).then(e=>e.json()).then(e=>{new Ee({target:s,props:{prp:e[0]}})})},e=>{navigator.clipboard.writeText(e.target.parentNode.textContent).catch(e=>{console.log("Something went wrong",e)})},l,function(e){J[e?"unshift":"push"](()=>{n(3,s=e)})},()=>n(0,o=!0)]}Ke._needHeat={radius:19,blur:11.26,minOpacity:.34},Ke.checkZoom=e=>{Object.keys(Ke._layers).length?e<12&&Ke.setFilter(We):e>11&&Ke.setFilter(We)},Ke.setFilter=e=>{if(!Ke._map)return;Ke.clearLayers(),We=e||[];let t=[],n=[];Ke._group&&Ke._map&&(Ke._group.getLayers().forEach(e=>{let l=e.options.props,s=0;We.forEach(e=>{"collision_type"===e.type?(""===e.zn[0]||e.zn.filter(e=>e===l.collision_type).length)&&s++:"evnt"===e.type?l.event?e.zn.ev1&&s++:e.zn.ev0&&s++:"dps"===e.type?l.dps?e.zn.Dps1&&s++:e.zn.Dps0&&s++:"id_dtp"===e.type?l.id==e.zn&&s++:"date"===e.type&&l.date>=e.zn[0]&&l.date<e.zn[1]&&s++}),s===We.length&&(t.push(e),n.push(e._latlng))}),Ke._needHeat?(Ke._map.addLayer(Ke._heat),Ke._heat.setLatLngs(n),Ke._heat.setOptions(Ke._needHeat),Ke._map._zoom>11&&Ke.addLayer(Ye.layerGroup(t))):(Ke.addLayer(Ye.layerGroup(t)),Ke._map.removeLayer(Ke._heat)))},Ke.on("remove",e=>{Ke._map.removeLayer(Ke._heat),Ke.clearLayers()}).on("add",e=>{Ke._heat=Ye.heatLayer([],{gradient:{.1:"blue",.4:"lime",1:"red"}}),We=[],fetch("https://dtp.mvs.group/scripts/index_dev.php?request=get_stat_gipdd",{}).then(e=>e.json()).then(e=>{let t={collision_type:{},iconType:{},event:{}},n=[],l=e.map(e=>{let l=e.iconType||0,s=!1,o="#2F4F4F";l&&(s=l%2==0,l>=1&&l<=6?o="#8B4513":7===l||8===l?o="#228B22":l>=9&&l<=14?o="#8B4513":15===l||16===l?o="#7B68EE":17!==l&&18!==l||(o="#2F4F4F")),220457693==e.id&&(e.dps=1),e.lat&&e.lon||(console.log("_______",e),e.lat=e.lon=0);let r=t.event[e.event];r?r++:r=1,t.event[e.event]=r;let i=t.collision_type[e.collision_type];i?i++:i=1,t.collision_type[e.collision_type]=i,t.iconType[e.collision_type]=l;let a=Ye.latLng(e.lat,e.lon,s?1:.5);return n.push(a),new g(a,{props:e,radius:6,stroke:s,fillColor:o}).bindPopup(Ve).on("popupopen",e=>{var t;t=e.target.options.props.id,fetch("https://dtp.mvs.group/scripts/dtp_dev/get_stat_gipdd_"+t+".txt",{}).then(e=>e.json()).then(e=>{let t=Ye.DomUtil.create("div");const n=new Ze({target:t,props:{prp:e}});Ve._svObj=n,Ve.setContent(t)}),e.target.bringToBack()}).on("popupclose",e=>{e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)})});Ke.addLayer(Ke._heat),Ke._heat.setLatLngs(n),Ke._heat.setOptions(Ke._needHeat),Ke._opt=t,Ke._group=Ye.layerGroup(l),We?Ke.setFilter(We):Ke._map._zoom>11&&Ke.addLayer(Ke._group),Ke._refreshFilters()})});class it extends ge{constructor(e){super(),me(this,e,rt,ot,C,{showModal:0,prp:1})}}const at=window.L,ct=at.popup();let pt;const dt=at.featureGroup([]);function ut(e,t,n){const l=e.slice();return l[6]=t[n],l[8]=n,l}function _t(e){let t,n,l,s,o,r="gibdd"===e[6].type?"ГИБДД":"СКПДИ";return{c(){t=E("button"),n=O(r),H(t,"class",l=w(e[2]===e[8]?"current":"")+" svelte-txaali"),t.value=s=e[8]},m(l,s,r){D(l,t,s),z(t,n),r&&o(),o=$(t,"click",e[4])},p(e,s){1&s&&r!==(r="gibdd"===e[6].type?"ГИБДД":"СКПДИ")&&N(n,r),4&s&&l!==(l=w(e[2]===e[8]?"current":"")+" svelte-txaali")&&H(t,"class",l)},d(e){e&&F(t),o()}}}function ht(e){let t;const n=new it({props:{prp:e[3]}});return{c(){_e(n.$$.fragment)},m(e,l){he(n,e,l),t=!0},p(e,t){const l={};8&t&&(l.prp=e[3]),n.$set(l)},i(e){t||(de(n.$$.fragment,e),t=!0)},o(e){ue(n.$$.fragment,e),t=!1},d(e){ve(n,e)}}}function vt(e){let t;const n=new Ze({props:{prp:e[3]}});return{c(){_e(n.$$.fragment)},m(e,l){he(n,e,l),t=!0},p(e,t){const l={};8&t&&(l.prp=e[3]),n.$set(l)},i(e){t||(de(n.$$.fragment,e),t=!0)},o(e){ue(n.$$.fragment,e),t=!1},d(e){ve(n,e)}}}function ft(e){let t,n,l,s,o,r,i,a,c,p,d=e[0]._cur,u=[];for(let t=0;t<d.length;t+=1)u[t]=_t(ut(e,d,t));const _=[vt,ht],h=[];function v(e,t){return"gibdd"===e[0]._cur[e[2]].type?0:1}return i=v(e),a=h[i]=_[i](e),{c(){t=E("div"),n=E("div"),l=E("a"),l.textContent="×",s=M(),o=E("div");for(let e=0;e<u.length;e+=1)u[e].c();r=M(),a.c(),H(l,"class","leaflet-popup-close-button"),H(l,"href","#close"),H(n,"class","close"),H(o,"class","pLine"),H(t,"class","mvsPopup")},m(a,d,_){D(a,t,d),z(t,n),z(n,l),z(t,s),z(t,o);for(let e=0;e<u.length;e+=1)u[e].m(o,null);var v;z(t,r),h[i].m(t,null),c=!0,_&&p(),p=$(l,"click",(v=function(){j(e[1])&&e[1].apply(this,arguments)},function(e){return e.preventDefault(),v.call(this,e)}))},p(n,[l]){if(e=n,21&l){let t;for(d=e[0]._cur,t=0;t<d.length;t+=1){const n=ut(e,d,t);u[t]?u[t].p(n,l):(u[t]=_t(n),u[t].c(),u[t].m(o,null))}for(;t<u.length;t+=1)u[t].d(1);u.length=d.length}let s=i;i=v(e),i===s?h[i].p(e,l):(ce(),ue(h[s],1,1,()=>{h[s]=null}),pe(),a=h[i],a||(a=h[i]=_[i](e),a.c()),de(a,1),a.m(t,null))},i(e){c||(de(a),c=!0)},o(e){ue(a),c=!1},d(e){e&&F(t),T(u,e),h[i].d(),p()}}}function mt(e,t,n){let{prp:l}=t,{closeMe:s=(()=>{})}=t,o=0,r={};const i=e=>{let t=l._cur[e],s=t.type,o="https://dtp.mvs.group/scripts/index_dev.php?request=get_dtp_id&id="+t.id+"&type="+s;fetch(o,{}).then(e=>e.json()).then(e=>{n(3,r=e)})};return i(o),e.$set=e=>{"prp"in e&&n(0,l=e.prp),"closeMe"in e&&n(1,s=e.closeMe)},[l,s,o,r,e=>{let t=e.target,l=Number(t.value);o!==l&&(n(2,o=l),i(o))}]}dt._needHeat={radius:19,blur:11.26,minOpacity:.34},dt.checkZoom=e=>{Object.keys(dt._layers).length?e<12&&dt.setFilter(pt):e>11&&dt.setFilter(pt)},dt.setFilter=e=>{if(!dt._map)return;dt.clearLayers(),pt=e||[];let t=[],n=[];dt._group&&dt._map&&(dt._group.getLayers().forEach(e=>{let l=e.options.props,s=0;pt.forEach(e=>{"collision_type"===e.type?(""===e.zn[0]||e.zn.filter(e=>e===l.collision_type).length)&&s++:"evnt"===e.type?l.event?e.zn.ev1&&s++:e.zn.ev0&&s++:"id_dtp"===e.type?l.id==e.zn&&s++:"date"===e.type&&l.date>=e.zn[0]&&l.date<e.zn[1]&&s++}),s===pt.length&&(t.push(e),n.push(e._latlng))}),dt._needHeat?(dt._map.addLayer(dt._heat),dt._heat.setLatLngs(n),dt._heat.setOptions(dt._needHeat),dt._map._zoom>11&&dt.addLayer(at.layerGroup(t))):(dt.addLayer(at.layerGroup(t)),dt._map.removeLayer(dt._heat)))},dt.on("remove",()=>{dt._map.removeLayer(dt._heat),dt.clearLayers()}).on("add",e=>{dt._heat=at.heatLayer([]),pt=[],fetch("https://dtp.mvs.group/scripts/index_dev.php?request=get_skpdi",{}).then(e=>e.json()).then(e=>{let t={collision_type:{},iconType:{},event:{}},n=[],l=e.map(e=>{let l=e.iconType||0,s=!1,o="#2F4F4F";l&&(s=l%2==0,l>=1&&l<=6?o="#8B4513":7===l||8===l?o="#228B22":l>=9&&l<=14?o="#8B4513":15===l||16===l?o="#7B68EE":17!==l&&18!==l||(o="#2F4F4F")),e.lat&&e.lon||(console.log("_______",e),e.lat=e.lon=0);let r=t.event[e.event];r?r++:r=1,t.event[e.event]=r;let i=t.collision_type[e.collision_type];i?i++:i=1,t.collision_type[e.collision_type]=i,t.iconType[e.collision_type]=l;let a=at.latLng(e.lat,e.lon,s?1:.5);return n.push(a),new g(a,{props:e,radius:6,box:!0,stroke:s,fillColor:o}).bindPopup(ct).on("popupopen",e=>{var t;t=e.target.options.props.id,fetch("https://dtp.mvs.group/scripts/index_dev.php?request=get_dtp_id&id="+t+"&type=skpdi",{}).then(e=>e.json()).then(e=>{let t=at.DomUtil.create("div");const n=new it({target:t,props:{prp:e}});ct._svObj=n,ct.setContent(t)}),e.target.bringToBack()}).on("popupclose",e=>{console.log("popupclose",e),e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)})});dt.addLayer(dt._heat),dt._heat.setLatLngs(n),dt._heat.setOptions(dt._needHeat),dt._opt=t,dt._group=at.layerGroup(l),pt?dt.setFilter(pt):dt.addLayer(dt._group),dt.checkZoom(dt._map._zoom),dt._refreshFilters()})});class gt extends ge{constructor(e){super(),me(this,e,mt,ft,C,{prp:0,closeMe:1})}}const yt=window.L,bt=yt.popup();let kt;const xt=yt.featureGroup([]);function jt(e,t,n){const l=e.slice();return l[212]=t[n],l}function Lt(e,t,n){const l=e.slice();return l[212]=t[n],l}function Ct(e,t,n){const l=e.slice();return l[212]=t[n],l}function wt(e,t,n){const l=e.slice();return l[212]=t[n],l}function zt(e,t,n){const l=e.slice();return l[212]=t[n],l}function Dt(e,t,n){const l=e.slice();return l[212]=t[n],l}function Ft(e,t,n){const l=e.slice();return l[212]=t[n],l}function Tt(e,t,n){const l=e.slice();return l[212]=t[n],l}function Et(e,t,n){const l=e.slice();return l[231]=t[n],l}function Ot(e,t,n){const l=e.slice();return l[212]=t[n],l}function Mt(e,t,n){const l=e.slice();return l[212]=t[n],l}function qt(e,t,n){const l=e.slice();return l[212]=t[n],l}function $t(e,t,n){const l=e.slice();return l[231]=t[n],l}function Pt(e,t,n){const l=e.slice();return l[212]=t[n],l}function Ht(e,t,n){const l=e.slice();return l[212]=t[n],l}function St(e,t,n){const l=e.slice();return l[212]=t[n],l}function Nt(e,t,n){const l=e.slice();return l[231]=t[n],l}function Bt(e,t,n){const l=e.slice();return l[212]=t[n],l}function Gt(e,t,n){const l=e.slice();return l[212]=t[n],l}function It(e,t,n){const l=e.slice();return l[212]=t[n],l}function Ut(e,t,n){const l=e.slice();return l[212]=t[n],l}function At(e,t,n){const l=e.slice();return l[212]=t[n],l}function Rt(e,t,n){const l=e.slice();return l[212]=t[n],l}function Zt(e,t,n){const l=e.slice();return l[212]=t[n],l}function Yt(e,t,n){const l=e.slice();return l[212]=t[n],l}function Vt(e,t,n){const l=e.slice();return l[212]=t[n],l}function Wt(e,t,n){const l=e.slice();return l[212]=t[n],l}function Kt(e,t,n){const l=e.slice();return l[212]=t[n],l}function Jt(e,t,n){const l=e.slice();return l[212]=t[n],l}function Xt(e,t,n){const l=e.slice();return l[212]=t[n],l}function Qt(e,t,n){const l=e.slice();return l[212]=t[n],l}function en(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,j,L,C,w,q,P,S,N,B,G,U=Object.keys(e[11]._opt.years).sort(),A=[];for(let t=0;t<U.length;t+=1)A[t]=tn(Qt(e,U,t));let R=e[78],Z=[];for(let t=0;t<R.length;t+=1)Z[t]=nn(Xt(e,R,t));return{c(){t=E("div"),t.innerHTML="Фильтры - <b>Очаги по пикетажу Ленинградская область</b>",n=M(),l=E("div"),s=E("div"),o=O("ID Очага: "),r=E("input"),i=M(),a=E("div"),c=O("ID ДТП: "),p=E("input"),d=M(),u=E("div"),_=E("fieldset"),h=E("legend"),h.textContent="Фильтрация по годам:",v=M(),f=E("div"),m=E("div");for(let e=0;e<A.length;e+=1)A[e].c();g=M(),y=E("div"),b=E("input"),j=E("label"),j.textContent="одного типа",L=M(),C=E("input"),q=E("label"),q.textContent="разного типа",P=M(),S=E("div"),N=E("select"),B=E("option"),B.textContent=`\n\t\t\t\t\t\tВсе дороги (${e[78].reduce(e[154],0)})\n\t\t\t\t\t`;for(let e=0;e<Z.length;e+=1)Z[e].c();H(t,"class","pLine svelte-1jsovbn"),H(r,"type","text"),r.value=e[24],H(r,"class","svelte-1jsovbn"),H(s,"class","pLine svelte-1jsovbn"),H(p,"type","text"),p.value=e[19],H(p,"class","svelte-1jsovbn"),H(a,"class","pLine svelte-1jsovbn"),H(m,"class","pLine margin svelte-1jsovbn"),H(f,"class","pLine type svelte-1jsovbn"),H(u,"class","pLine nowrap svelte-1jsovbn"),H(b,"type","checkbox"),H(b,"id","ht_3"),b.checked=k=e[23].hearth3,H(b,"name","hearth3"),H(b,"class","svelte-1jsovbn"),H(j,"for","ht_3"),H(j,"class","svelte-1jsovbn"),H(C,"type","checkbox"),H(C,"id","ht_5"),C.checked=w=e[23].hearth5,H(C,"name","hearth5"),H(C,"class","svelte-1jsovbn"),H(q,"for","ht_5"),H(q,"class","svelte-1jsovbn"),H(y,"class","pLine svelte-1jsovbn"),B.__value="",B.value=B.__value,H(B,"class","svelte-1jsovbn"),H(N,"class","multiple_icon_typeTmp svelte-1jsovbn"),N.multiple=!0,void 0===e[22]&&ne(()=>e[155].call(N)),H(S,"class","pLine svelte-1jsovbn"),H(l,"class","filtersCont svelte-1jsovbn")},m(k,w,F){D(k,t,w),D(k,n,w),D(k,l,w),z(l,s),z(s,o),z(s,r),z(l,i),z(l,a),z(a,c),z(a,p),z(l,d),z(l,u),z(u,_),z(_,h),z(_,v),z(_,f),z(f,m);for(let e=0;e<A.length;e+=1)A[e].m(m,null);z(l,g),z(l,y),z(y,b),z(y,j),z(y,L),z(y,C),z(y,q),z(l,P),z(l,S),z(S,N),z(N,B);for(let e=0;e<Z.length;e+=1)Z[e].m(N,null);I(N,e[22]),F&&x(G),G=[$(r,"input",e[109]),$(p,"input",e[108]),$(b,"change",e[110]),$(C,"change",e[110]),$(N,"change",e[155]),$(N,"change",e[104])]},p(e,t){if(16777216&t[0]&&r.value!==e[24]&&(r.value=e[24]),524288&t[0]&&p.value!==e[19]&&(p.value=e[19]),2048&t[0]|128&t[1]|2048&t[3]){let n;for(U=Object.keys(e[11]._opt.years).sort(),n=0;n<U.length;n+=1){const l=Qt(e,U,n);A[n]?A[n].p(l,t):(A[n]=tn(l),A[n].c(),A[n].m(m,null))}for(;n<A.length;n+=1)A[n].d(1);A.length=U.length}if(8388608&t[0]&&k!==(k=e[23].hearth3)&&(b.checked=k),8388608&t[0]&&w!==(w=e[23].hearth5)&&(C.checked=w),98304&t[2]){let n;for(R=e[78],n=0;n<R.length;n+=1){const l=Xt(e,R,n);Z[n]?Z[n].p(l,t):(Z[n]=nn(l),Z[n].c(),Z[n].m(N,null))}for(;n<Z.length;n+=1)Z[n].d(1);Z.length=R.length}4194304&t[0]&&I(N,e[22])},d(e){e&&F(t),e&&F(n),e&&F(l),T(A,e),T(Z,e),x(G)}}}function tn(e){let t,n,l,s,o,r,i=e[212]+"";return{c(){t=E("input"),s=E("label"),o=O(i),H(t,"type","checkbox"),H(t,"id","hearths_year_Lo"),t.checked=n=e[38][e[212]],H(t,"name",l=e[212]),H(t,"class","svelte-1jsovbn"),H(s,"for","hearths_year_Lo"),H(s,"class","svelte-1jsovbn")},m(n,l,i){D(n,t,l),D(n,s,l),z(s,o),i&&r(),r=$(t,"change",e[104])},p(e,s){2048&s[0]|128&s[1]&&n!==(n=e[38][e[212]])&&(t.checked=n),2048&s[0]&&l!==(l=e[212])&&H(t,"name",l),2048&s[0]&&i!==(i=e[212]+"")&&N(o,i)},d(e){e&&F(t),e&&F(s),r()}}}function nn(e){let t,n,l,s,o,r,i,a,c=e[77].road[e[212]]+"",p=e[212]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[212],t.value=t.__value,H(t,"class",a="road_"+e[212]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function ln(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,j,L,C,w,q,P,S,N,B,U,A,R,Z,Y,V,W,K,J,X,Q,ee,te,le,se=Object.keys(e[0]._opt.years).sort(),oe=[];for(let t=0;t<se.length;t+=1)oe[t]=sn(Jt(e,se,t));let re=e[96],ie=[];for(let t=0;t<re.length;t+=1)ie[t]=on(Kt(e,re,t));return{c(){t=E("div"),t.innerHTML="Фильтры - <b>Предочаги по пикетажу</b>",n=M(),l=E("div"),s=E("div"),o=O("ID Очага: "),r=E("input"),i=M(),a=E("div"),c=O("ID ДТП: "),p=E("input"),d=M(),u=E("div"),_=E("fieldset"),h=E("legend"),h.textContent="Фильтрация по периодам:",v=M(),f=E("div"),m=E("input"),b=E("label"),b.textContent="Фильтрация по годам",k=M(),j=E("div");for(let e=0;e<oe.length;e+=1)oe[e].c();L=M(),C=E("div"),w=E("input"),P=E("label"),P.textContent="одного типа",S=M(),N=E("input"),U=E("label"),U.textContent="разного типа",A=M(),R=E("div"),Z=E("select"),Y=E("option"),Y.textContent=`\n\t\t\t\t\t\tВсе дороги (${e[96].reduce(e[158],0)})\n\t\t\t\t\t`;for(let e=0;e<ie.length;e+=1)ie[e].c();V=M(),W=E("div"),K=E("select"),J=E("option"),J.textContent=`(${e[95].stricken[0]||0}) Очаги все`,X=E("option"),X.textContent=`(${e[95].stricken[1]||0}) Только с погибшими`,Q=E("option"),Q.textContent=`(${e[95].stricken[2]||0}) Только с пострадавшими`,ee=E("option"),ee.textContent=`(${e[95].stricken[3]||0}) С пострадавшими или погибшими`,te=E("option"),te.textContent=`(${e[95].stricken[4]||0}) С пострадавшими и погибшими`,H(t,"class","pLine svelte-1jsovbn"),H(r,"type","text"),r.value=e[24],H(r,"class","svelte-1jsovbn"),H(s,"class","pLine svelte-1jsovbn"),H(p,"type","text"),p.value=e[19],H(p,"class","svelte-1jsovbn"),H(a,"class","pLine svelte-1jsovbn"),H(m,"type","radio"),m.__value=g=1,m.value=m.__value,m.checked=y=1===e[54],H(m,"id","hearths_period_type_Stat1"),H(m,"name","hearths_period_type_Stat"),H(m,"class","svelte-1jsovbn"),e[157][2].push(m),H(b,"for","hearths_period_type_Stat1"),H(b,"class","svelte-1jsovbn"),H(j,"class","pLine margin svelte-1jsovbn"),H(f,"class","pLine type svelte-1jsovbn"),H(u,"class","pLine nowrap svelte-1jsovbn"),H(w,"type","checkbox"),H(w,"id","ht_3"),w.checked=q=e[23].hearth3,H(w,"name","hearth3"),H(w,"class","svelte-1jsovbn"),H(P,"for","ht_3"),H(P,"class","svelte-1jsovbn"),H(N,"type","checkbox"),H(N,"id","ht_5"),N.checked=B=e[23].hearth5,H(N,"name","hearth5"),H(N,"class","svelte-1jsovbn"),H(U,"for","ht_5"),H(U,"class","svelte-1jsovbn"),H(C,"class","pLine svelte-1jsovbn"),Y.__value="",Y.value=Y.__value,H(Y,"class","svelte-1jsovbn"),H(Z,"class","multiple_icon_typeTmp svelte-1jsovbn"),Z.multiple=!0,void 0===e[22]&&ne(()=>e[159].call(Z)),H(R,"class","pLine svelte-1jsovbn"),J.__value="",J.value=J.__value,X.__value="1",X.value=X.__value,Q.__value="2",Q.value=Q.__value,ee.__value="3",ee.value=ee.__value,te.__value="4",te.value=te.__value,H(K,"name","stricken"),H(K,"class","svelte-1jsovbn"),void 0===e[40]&&ne(()=>e[160].call(K)),H(W,"class","pLine svelte-1jsovbn"),H(l,"class","filtersCont svelte-1jsovbn")},m(g,y,F){D(g,t,y),D(g,n,y),D(g,l,y),z(l,s),z(s,o),z(s,r),z(l,i),z(l,a),z(a,c),z(a,p),z(l,d),z(l,u),z(u,_),z(_,h),z(_,v),z(_,f),z(f,m),m.checked=m.__value===e[54],z(f,b),z(f,k),z(f,j);for(let e=0;e<oe.length;e+=1)oe[e].m(j,null);z(l,L),z(l,C),z(C,w),z(C,P),z(C,S),z(C,N),z(C,U),z(l,A),z(l,R),z(R,Z),z(Z,Y);for(let e=0;e<ie.length;e+=1)ie[e].m(Z,null);I(Z,e[22]),z(l,V),z(l,W),z(W,K),z(K,J),z(K,X),z(K,Q),z(K,ee),z(K,te),G(K,e[40]),F&&x(le),le=[$(r,"input",e[109]),$(p,"input",e[108]),$(m,"change",e[106]),$(m,"change",e[156]),$(w,"change",e[110]),$(N,"change",e[110]),$(Z,"change",e[159]),$(Z,"change",e[106]),$(K,"change",e[160]),$(K,"change",e[106])]},p(e,t){if(16777216&t[0]&&r.value!==e[24]&&(r.value=e[24]),524288&t[0]&&p.value!==e[19]&&(p.value=e[19]),8388608&t[1]&&y!==(y=1===e[54])&&(m.checked=y),8388608&t[1]&&(m.checked=m.__value===e[54]),1&t[0]|8389632&t[1]|8192&t[3]){let n;for(se=Object.keys(e[0]._opt.years).sort(),n=0;n<se.length;n+=1){const l=Jt(e,se,n);oe[n]?oe[n].p(l,t):(oe[n]=sn(l),oe[n].c(),oe[n].m(j,null))}for(;n<oe.length;n+=1)oe[n].d(1);oe.length=se.length}if(8388608&t[0]&&q!==(q=e[23].hearth3)&&(w.checked=q),8388608&t[0]&&B!==(B=e[23].hearth5)&&(N.checked=B),12&t[3]){let n;for(re=e[96],n=0;n<re.length;n+=1){const l=Kt(e,re,n);ie[n]?ie[n].p(l,t):(ie[n]=on(l),ie[n].c(),ie[n].m(Z,null))}for(;n<ie.length;n+=1)ie[n].d(1);ie.length=re.length}4194304&t[0]&&I(Z,e[22]),512&t[1]&&G(K,e[40])},d(s){s&&F(t),s&&F(n),s&&F(l),e[157][2].splice(e[157][2].indexOf(m),1),T(oe,s),T(ie,s),x(le)}}}function sn(e){let t,n,l,s,o,r,i,a=e[212]+"";return{c(){t=E("input"),o=E("label"),r=O(a),H(t,"type","checkbox"),H(t,"id","hearths_year_Picket4"),t.checked=n=e[41][e[212]],t.disabled=l=2===e[54],H(t,"name",s=e[212]),H(t,"class","svelte-1jsovbn"),H(o,"for","hearths_year_Picket4"),H(o,"class","svelte-1jsovbn")},m(n,l,s){D(n,t,l),D(n,o,l),z(o,r),s&&i(),i=$(t,"change",e[106])},p(e,o){1&o[0]|1024&o[1]&&n!==(n=e[41][e[212]])&&(t.checked=n),8388608&o[1]&&l!==(l=2===e[54])&&(t.disabled=l),1&o[0]&&s!==(s=e[212])&&H(t,"name",s),1&o[0]&&a!==(a=e[212]+"")&&N(r,a)},d(e){e&&F(t),e&&F(o),i()}}}function on(e){let t,n,l,s,o,r,i,a,c=e[95].road[e[212]]+"",p=e[212]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[212],t.value=t.__value,H(t,"class",a="road_"+e[212]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function rn(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,j,L,C,w,q,P,S,N,B,G,U,A,R,Z,Y,V,W,K,J,X,Q,ee,te,le,se,oe,re,ie,ae,ce=Object.keys(e[1]._opt.years).sort(),pe=[];for(let t=0;t<ce.length;t+=1)pe[t]=an(Wt(e,ce,t));let de=e[92],ue=[];for(let t=0;t<de.length;t+=1)ue[t]=cn(Vt(e,de,t));return{c(){t=E("div"),t.innerHTML="Фильтры - <b>Очаги с привязкой к городам</b>",n=M(),l=E("div"),s=E("div"),o=O("ID Очага: "),r=E("input"),i=M(),a=E("div"),c=O("ID ДТП: "),p=E("input"),d=M(),u=E("div"),_=E("fieldset"),h=E("legend"),h.textContent="Расположение очага:",v=M(),f=E("div"),m=E("div"),g=E("input"),b=E("label"),b.textContent="в населенном пункте",k=M(),j=E("input"),C=E("label"),C.textContent="вне населенного пункта",w=E("br"),q=M(),P=E("input"),N=E("label"),N.textContent="на границе населенного пункта",B=M(),G=E("div"),U=E("fieldset"),A=E("legend"),A.textContent="Фильтрация по годам:",R=M(),Z=E("div"),Y=E("div");for(let e=0;e<pe.length;e+=1)pe[e].c();V=M(),W=E("div"),K=E("input"),X=E("label"),X.textContent="одного типа",Q=M(),ee=E("input"),le=E("label"),le.textContent="разного типа",se=M(),oe=E("div"),re=E("select"),ie=E("option"),ie.textContent=`\n\t\t\t\t\t\tВсе дороги (${e[92].reduce(e[161],0)})\n\t\t\t\t\t`;for(let e=0;e<ue.length;e+=1)ue[e].c();H(t,"class","pLine svelte-1jsovbn"),H(r,"type","text"),r.value=e[24],H(r,"class","svelte-1jsovbn"),H(s,"class","pLine svelte-1jsovbn"),H(p,"type","text"),p.value=e[19],H(p,"class","svelte-1jsovbn"),H(a,"class","pLine svelte-1jsovbn"),H(g,"type","checkbox"),H(g,"id","city_1"),g.checked=y=e[37][1],H(g,"name","1"),H(g,"class","svelte-1jsovbn"),H(b,"for","city_1"),H(b,"class","svelte-1jsovbn"),H(j,"type","checkbox"),H(j,"id","city_0"),j.checked=L=e[37][0],H(j,"name","0"),H(j,"class","svelte-1jsovbn"),H(C,"for","city_0"),H(C,"class","svelte-1jsovbn"),H(P,"type","checkbox"),H(P,"id","city_2"),P.checked=S=e[37][2],H(P,"name","2"),H(P,"class","svelte-1jsovbn"),H(N,"for","city_2"),H(N,"class","svelte-1jsovbn"),H(m,"class","pLine margin svelte-1jsovbn"),H(f,"class","pLine type svelte-1jsovbn"),H(u,"class","pLine svelte-1jsovbn"),H(Y,"class","pLine margin svelte-1jsovbn"),H(Z,"class","pLine type svelte-1jsovbn"),H(G,"class","pLine nowrap svelte-1jsovbn"),H(K,"type","checkbox"),H(K,"id","ht_3"),K.checked=J=e[23].hearth3,H(K,"name","hearth3"),H(K,"class","svelte-1jsovbn"),H(X,"for","ht_3"),H(X,"class","svelte-1jsovbn"),H(ee,"type","checkbox"),H(ee,"id","ht_5"),ee.checked=te=e[23].hearth5,H(ee,"name","hearth5"),H(ee,"class","svelte-1jsovbn"),H(le,"for","ht_5"),H(le,"class","svelte-1jsovbn"),H(W,"class","pLine svelte-1jsovbn"),ie.__value="",ie.value=ie.__value,H(ie,"class","svelte-1jsovbn"),H(re,"class","multiple_icon_typeTmp svelte-1jsovbn"),re.multiple=!0,void 0===e[22]&&ne(()=>e[162].call(re)),H(oe,"class","pLine svelte-1jsovbn"),H(l,"class","filtersCont svelte-1jsovbn")},m(y,L,F){D(y,t,L),D(y,n,L),D(y,l,L),z(l,s),z(s,o),z(s,r),z(l,i),z(l,a),z(a,c),z(a,p),z(l,d),z(l,u),z(u,_),z(_,h),z(_,v),z(_,f),z(f,m),z(m,g),z(m,b),z(m,k),z(m,j),z(m,C),z(m,w),z(m,q),z(m,P),z(m,N),z(l,B),z(l,G),z(G,U),z(U,A),z(U,R),z(U,Z),z(Z,Y);for(let e=0;e<pe.length;e+=1)pe[e].m(Y,null);z(l,V),z(l,W),z(W,K),z(W,X),z(W,Q),z(W,ee),z(W,le),z(l,se),z(l,oe),z(oe,re),z(re,ie);for(let e=0;e<ue.length;e+=1)ue[e].m(re,null);I(re,e[22]),F&&x(ae),ae=[$(r,"input",e[109]),$(p,"input",e[108]),$(g,"change",e[107]),$(j,"change",e[107]),$(P,"change",e[107]),$(K,"change",e[110]),$(ee,"change",e[110]),$(re,"change",e[162]),$(re,"change",e[103])]},p(e,t){if(16777216&t[0]&&r.value!==e[24]&&(r.value=e[24]),524288&t[0]&&p.value!==e[19]&&(p.value=e[19]),64&t[1]&&y!==(y=e[37][1])&&(g.checked=y),64&t[1]&&L!==(L=e[37][0])&&(j.checked=L),64&t[1]&&S!==(S=e[37][2])&&(P.checked=S),2&t[0]|32&t[1]|1024&t[3]){let n;for(ce=Object.keys(e[1]._opt.years).sort(),n=0;n<ce.length;n+=1){const l=Wt(e,ce,n);pe[n]?pe[n].p(l,t):(pe[n]=an(l),pe[n].c(),pe[n].m(Y,null))}for(;n<pe.length;n+=1)pe[n].d(1);pe.length=ce.length}if(8388608&t[0]&&J!==(J=e[23].hearth3)&&(K.checked=J),8388608&t[0]&&te!==(te=e[23].hearth5)&&(ee.checked=te),1610612736&t[2]){let n;for(de=e[92],n=0;n<de.length;n+=1){const l=Vt(e,de,n);ue[n]?ue[n].p(l,t):(ue[n]=cn(l),ue[n].c(),ue[n].m(re,null))}for(;n<ue.length;n+=1)ue[n].d(1);ue.length=de.length}4194304&t[0]&&I(re,e[22])},d(e){e&&F(t),e&&F(n),e&&F(l),T(pe,e),T(ue,e),x(ae)}}}function an(e){let t,n,l,s,o,r,i=e[212]+"";return{c(){t=E("input"),s=E("label"),o=O(i),H(t,"type","checkbox"),H(t,"id","hearths_year_Settlements"),t.checked=n=e[36][e[212]],H(t,"name",l=e[212]),H(t,"class","svelte-1jsovbn"),H(s,"for","hearths_year_Settlements"),H(s,"class","svelte-1jsovbn")},m(n,l,i){D(n,t,l),D(n,s,l),z(s,o),i&&r(),r=$(t,"change",e[103])},p(e,s){2&s[0]|32&s[1]&&n!==(n=e[36][e[212]])&&(t.checked=n),2&s[0]&&l!==(l=e[212])&&H(t,"name",l),2&s[0]&&i!==(i=e[212]+"")&&N(o,i)},d(e){e&&F(t),e&&F(s),r()}}}function cn(e){let t,n,l,s,o,r,i,a,c=e[91].road[e[212]]+"",p=e[212]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[212],t.value=t.__value,H(t,"class",a="road_"+e[212]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function pn(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,j,L,C,w,q,P,S,N,B,G,U=Object.keys(e[2]._opt.years).sort(),A=[];for(let t=0;t<U.length;t+=1)A[t]=dn(Yt(e,U,t));let R=e[94],Z=[];for(let t=0;t<R.length;t+=1)Z[t]=un(Zt(e,R,t));return{c(){t=E("div"),t.innerHTML="Фильтры - <b>ДТП Очаги(Picket)</b>",n=M(),l=E("div"),s=E("div"),o=O("ID Очага: "),r=E("input"),i=M(),a=E("div"),c=O("ID ДТП: "),p=E("input"),d=M(),u=E("div"),_=E("fieldset"),h=E("legend"),h.textContent="Фильтрация по годам:",v=M(),f=E("div"),m=E("div");for(let e=0;e<A.length;e+=1)A[e].c();g=M(),y=E("div"),b=E("input"),j=E("label"),j.textContent="одного типа",L=M(),C=E("input"),q=E("label"),q.textContent="разного типа",P=M(),S=E("div"),N=E("select"),B=E("option"),B.textContent=`\n\t\t\t\t\t\tВсе дороги (${e[94].reduce(e[163],0)})\n\t\t\t\t\t`;for(let e=0;e<Z.length;e+=1)Z[e].c();H(t,"class","pLine svelte-1jsovbn"),H(r,"type","text"),r.value=e[24],H(r,"class","svelte-1jsovbn"),H(s,"class","pLine svelte-1jsovbn"),H(p,"type","text"),p.value=e[19],H(p,"class","svelte-1jsovbn"),H(a,"class","pLine svelte-1jsovbn"),H(m,"class","pLine margin svelte-1jsovbn"),H(f,"class","pLine type svelte-1jsovbn"),H(u,"class","pLine nowrap svelte-1jsovbn"),H(b,"type","checkbox"),H(b,"id","ht_3"),b.checked=k=e[23].hearth3,H(b,"name","hearth3"),H(b,"class","svelte-1jsovbn"),H(j,"for","ht_3"),H(j,"class","svelte-1jsovbn"),H(C,"type","checkbox"),H(C,"id","ht_5"),C.checked=w=e[23].hearth5,H(C,"name","hearth5"),H(C,"class","svelte-1jsovbn"),H(q,"for","ht_5"),H(q,"class","svelte-1jsovbn"),H(y,"class","pLine svelte-1jsovbn"),B.__value="",B.value=B.__value,H(B,"class","svelte-1jsovbn"),H(N,"class","multiple_icon_typeTmp svelte-1jsovbn"),N.multiple=!0,void 0===e[22]&&ne(()=>e[164].call(N)),H(S,"class","pLine svelte-1jsovbn"),H(l,"class","filtersCont svelte-1jsovbn")},m(k,w,F){D(k,t,w),D(k,n,w),D(k,l,w),z(l,s),z(s,o),z(s,r),z(l,i),z(l,a),z(a,c),z(a,p),z(l,d),z(l,u),z(u,_),z(_,h),z(_,v),z(_,f),z(f,m);for(let e=0;e<A.length;e+=1)A[e].m(m,null);z(l,g),z(l,y),z(y,b),z(y,j),z(y,L),z(y,C),z(y,q),z(l,P),z(l,S),z(S,N),z(N,B);for(let e=0;e<Z.length;e+=1)Z[e].m(N,null);I(N,e[22]),F&&x(G),G=[$(r,"input",e[109]),$(p,"input",e[108]),$(b,"change",e[110]),$(C,"change",e[110]),$(N,"change",e[164]),$(N,"change",e[105])]},p(e,t){if(16777216&t[0]&&r.value!==e[24]&&(r.value=e[24]),524288&t[0]&&p.value!==e[19]&&(p.value=e[19]),4&t[0]|256&t[1]|4096&t[3]){let n;for(U=Object.keys(e[2]._opt.years).sort(),n=0;n<U.length;n+=1){const l=Yt(e,U,n);A[n]?A[n].p(l,t):(A[n]=dn(l),A[n].c(),A[n].m(m,null))}for(;n<A.length;n+=1)A[n].d(1);A.length=U.length}if(8388608&t[0]&&k!==(k=e[23].hearth3)&&(b.checked=k),8388608&t[0]&&w!==(w=e[23].hearth5)&&(C.checked=w),3&t[3]){let n;for(R=e[94],n=0;n<R.length;n+=1){const l=Zt(e,R,n);Z[n]?Z[n].p(l,t):(Z[n]=un(l),Z[n].c(),Z[n].m(N,null))}for(;n<Z.length;n+=1)Z[n].d(1);Z.length=R.length}4194304&t[0]&&I(N,e[22])},d(e){e&&F(t),e&&F(n),e&&F(l),T(A,e),T(Z,e),x(G)}}}function dn(e){let t,n,l,s,o,r,i=e[212]+"";return{c(){t=E("input"),s=E("label"),o=O(i),H(t,"type","checkbox"),H(t,"id","hearths_year_Picket"),t.checked=n=e[39][e[212]],H(t,"name",l=e[212]),H(t,"class","svelte-1jsovbn"),H(s,"for","hearths_year_Picket"),H(s,"class","svelte-1jsovbn")},m(n,l,i){D(n,t,l),D(n,s,l),z(s,o),i&&r(),r=$(t,"change",e[105])},p(e,s){4&s[0]|256&s[1]&&n!==(n=e[39][e[212]])&&(t.checked=n),4&s[0]&&l!==(l=e[212])&&H(t,"name",l),4&s[0]&&i!==(i=e[212]+"")&&N(o,i)},d(e){e&&F(t),e&&F(s),r()}}}function un(e){let t,n,l,s,o,r,i,a,c=e[93].road[e[212]]+"",p=e[212]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[212],t.value=t.__value,H(t,"class",a="road_"+e[212]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function _n(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,j,L,C,w,q,P,S,N,B,U,A=Object.keys(e[3]._opt.years).sort(),R=[];for(let t=0;t<A.length;t+=1)R[t]=hn(Rt(e,A,t));let Z=e[90],Y=[];for(let t=0;t<Z.length;t+=1)Y[t]=vn(At(e,Z,t));return{c(){t=E("div"),t.innerHTML="Фильтры - <b>ДТП Очаги (5)</b>",n=M(),l=E("div"),s=E("div"),o=O("ID ДТП: "),r=E("input"),i=M(),a=E("div"),c=E("fieldset"),p=E("legend"),p.textContent="Фильтрация по периодам:",d=M(),u=E("div"),_=E("input"),f=E("label"),f.textContent="Фильтрация по годам",m=M(),g=E("div");for(let e=0;e<R.length;e+=1)R[e].c();y=M(),b=E("div"),k=E("select"),j=E("option"),j.textContent=`\n\t\t\t\t\t\tВсе типы (${e[90].reduce(e[166],0)})\n\t\t\t\t\t`;for(let e=0;e<Y.length;e+=1)Y[e].c();L=M(),C=E("div"),w=E("select"),q=E("option"),q.textContent=`(${e[89].stricken[0]||0}) Очаги все`,P=E("option"),P.textContent=`(${e[89].stricken[1]||0}) Только с погибшими`,S=E("option"),S.textContent=`(${e[89].stricken[2]||0}) Только с пострадавшими`,N=E("option"),N.textContent=`(${e[89].stricken[3]||0}) С пострадавшими или погибшими`,B=E("option"),B.textContent=`(${e[89].stricken[4]||0}) С пострадавшими и погибшими`,H(t,"class","pLine svelte-1jsovbn"),H(r,"type","text"),r.value=e[19],H(r,"class","svelte-1jsovbn"),H(s,"class","pLine svelte-1jsovbn"),H(_,"type","radio"),_.__value=h=1,_.value=_.__value,_.checked=v=1===e[46],H(_,"id","hearths_period_type_51"),H(_,"name","hearths_period_type_5"),H(_,"class","svelte-1jsovbn"),e[157][4].push(_),H(f,"for","hearths_period_type_51"),H(f,"class","svelte-1jsovbn"),H(g,"class","pLine margin svelte-1jsovbn"),H(u,"class","pLine type svelte-1jsovbn"),H(a,"class","pLine nowrap svelte-1jsovbn"),j.__value="",j.value=j.__value,H(j,"class","svelte-1jsovbn"),H(k,"class","multiple_icon_typeTmp svelte-1jsovbn"),k.multiple=!0,void 0===e[45]&&ne(()=>e[167].call(k)),H(b,"class","pLine svelte-1jsovbn"),q.__value="",q.value=q.__value,P.__value="1",P.value=P.__value,S.__value="2",S.value=S.__value,N.__value="3",N.value=N.__value,B.__value="4",B.value=B.__value,H(w,"class","svelte-1jsovbn"),void 0===e[44]&&ne(()=>e[168].call(w)),H(C,"class","pLine svelte-1jsovbn"),H(l,"class","filtersCont svelte-1jsovbn")},m(h,v,F){D(h,t,v),D(h,n,v),D(h,l,v),z(l,s),z(s,o),z(s,r),z(l,i),z(l,a),z(a,c),z(c,p),z(c,d),z(c,u),z(u,_),_.checked=_.__value===e[46],z(u,f),z(u,m),z(u,g);for(let e=0;e<R.length;e+=1)R[e].m(g,null);z(l,y),z(l,b),z(b,k),z(k,j);for(let e=0;e<Y.length;e+=1)Y[e].m(k,null);I(k,e[45]),z(l,L),z(l,C),z(C,w),z(w,q),z(w,P),z(w,S),z(w,N),z(w,B),G(w,e[44]),F&&x(U),U=[$(r,"input",e[108]),$(_,"change",e[124]),$(_,"change",e[165]),$(k,"change",e[167]),$(k,"change",e[124]),$(w,"change",e[168]),$(w,"change",e[124])]},p(e,t){if(524288&t[0]&&r.value!==e[19]&&(r.value=e[19]),32768&t[1]&&v!==(v=1===e[46])&&(_.checked=v),32768&t[1]&&(_.checked=_.__value===e[46]),8&t[0]|98304&t[1]|1&t[4]){let n;for(A=Object.keys(e[3]._opt.years).sort(),n=0;n<A.length;n+=1){const l=Rt(e,A,n);R[n]?R[n].p(l,t):(R[n]=hn(l),R[n].c(),R[n].m(g,null))}for(;n<R.length;n+=1)R[n].d(1);R.length=A.length}if(402653184&t[2]){let n;for(Z=e[90],n=0;n<Z.length;n+=1){const l=At(e,Z,n);Y[n]?Y[n].p(l,t):(Y[n]=vn(l),Y[n].c(),Y[n].m(k,null))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=Z.length}16384&t[1]&&I(k,e[45]),8192&t[1]&&G(w,e[44])},d(s){s&&F(t),s&&F(n),s&&F(l),e[157][4].splice(e[157][4].indexOf(_),1),T(R,s),T(Y,s),x(U)}}}function hn(e){let t,n,l,s,o,r,i,a=e[212]+"";return{c(){t=E("input"),o=E("label"),r=O(a),H(t,"type","checkbox"),H(t,"id","hearths_year_5"),t.checked=n=e[47][e[212]],t.disabled=l=2===e[46],H(t,"name",s=e[212]),H(t,"class","svelte-1jsovbn"),H(o,"for","hearths_year_5"),H(o,"class","svelte-1jsovbn")},m(n,l,s){D(n,t,l),D(n,o,l),z(o,r),s&&i(),i=$(t,"change",e[124])},p(e,o){8&o[0]|65536&o[1]&&n!==(n=e[47][e[212]])&&(t.checked=n),32768&o[1]&&l!==(l=2===e[46])&&(t.disabled=l),8&o[0]&&s!==(s=e[212])&&H(t,"name",s),8&o[0]&&a!==(a=e[212]+"")&&N(r,a)},d(e){e&&F(t),e&&F(o),i()}}}function vn(e){let t,n,l,s,o,r,i,a,c=e[89].str_icon_type[e[212]]+"",p=e[212]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[212],t.value=t.__value,H(t,"class",a="icon_type_"+e[89].iconType[e[212]]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function fn(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,j,L,C,w,q,P,S,N,B,U,A=Object.keys(e[4]._opt.years).sort(),R=[];for(let t=0;t<A.length;t+=1)R[t]=mn(Ut(e,A,t));let Z=e[88],Y=[];for(let t=0;t<Z.length;t+=1)Y[t]=gn(It(e,Z,t));return{c(){t=E("div"),t.innerHTML="Фильтры - <b>ДТП Очаги (3)</b>",n=M(),l=E("div"),s=E("div"),o=O("ID ДТП: "),r=E("input"),i=M(),a=E("div"),c=E("fieldset"),p=E("legend"),p.textContent="Фильтрация по периодам:",d=M(),u=E("div"),_=E("input"),f=E("label"),f.textContent="Фильтрация по годам",m=M(),g=E("div");for(let e=0;e<R.length;e+=1)R[e].c();y=M(),b=E("div"),k=E("select"),j=E("option"),j.textContent=`\n\t\t\t\t\t\tВсе типы (${e[88].reduce(e[170],0)})\n\t\t\t\t\t`;for(let e=0;e<Y.length;e+=1)Y[e].c();L=M(),C=E("div"),w=E("select"),q=E("option"),q.textContent=`(${e[87].stricken[0]||0}) Очаги все`,P=E("option"),P.textContent=`(${e[87].stricken[1]||0}) Только с погибшими`,S=E("option"),S.textContent=`(${e[87].stricken[2]||0}) Только с пострадавшими`,N=E("option"),N.textContent=`(${e[87].stricken[3]||0}) С пострадавшими или погибшими`,B=E("option"),B.textContent=`(${e[87].stricken[4]||0}) С пострадавшими и погибшими`,H(t,"class","pLine svelte-1jsovbn"),H(r,"type","text"),r.value=e[19],H(r,"class","svelte-1jsovbn"),H(s,"class","pLine svelte-1jsovbn"),H(_,"type","radio"),_.__value=h=1,_.value=_.__value,_.checked=v=1===e[50],H(_,"id","hearths_period_type_31"),H(_,"name","hearths_period_type_3"),H(_,"class","svelte-1jsovbn"),e[157][3].push(_),H(f,"for","hearths_period_type_31"),H(f,"class","svelte-1jsovbn"),H(g,"class","pLine margin svelte-1jsovbn"),H(u,"class","pLine type svelte-1jsovbn"),H(a,"class","pLine nowrap svelte-1jsovbn"),j.__value="",j.value=j.__value,H(j,"class","svelte-1jsovbn"),H(k,"class","multiple_icon_typeTmp svelte-1jsovbn"),k.multiple=!0,void 0===e[49]&&ne(()=>e[171].call(k)),H(b,"class","pLine svelte-1jsovbn"),q.__value="",q.value=q.__value,P.__value="1",P.value=P.__value,S.__value="2",S.value=S.__value,N.__value="3",N.value=N.__value,B.__value="4",B.value=B.__value,H(w,"class","svelte-1jsovbn"),void 0===e[48]&&ne(()=>e[172].call(w)),H(C,"class","pLine svelte-1jsovbn"),H(l,"class","filtersCont svelte-1jsovbn")},m(h,v,F){D(h,t,v),D(h,n,v),D(h,l,v),z(l,s),z(s,o),z(s,r),z(l,i),z(l,a),z(a,c),z(c,p),z(c,d),z(c,u),z(u,_),_.checked=_.__value===e[50],z(u,f),z(u,m),z(u,g);for(let e=0;e<R.length;e+=1)R[e].m(g,null);z(l,y),z(l,b),z(b,k),z(k,j);for(let e=0;e<Y.length;e+=1)Y[e].m(k,null);I(k,e[49]),z(l,L),z(l,C),z(C,w),z(w,q),z(w,P),z(w,S),z(w,N),z(w,B),G(w,e[48]),F&&x(U),U=[$(r,"input",e[108]),$(_,"change",e[125]),$(_,"change",e[169]),$(k,"change",e[171]),$(k,"change",e[125]),$(w,"change",e[172]),$(w,"change",e[125])]},p(e,t){if(524288&t[0]&&r.value!==e[19]&&(r.value=e[19]),524288&t[1]&&v!==(v=1===e[50])&&(_.checked=v),524288&t[1]&&(_.checked=_.__value===e[50]),16&t[0]|1572864&t[1]|2&t[4]){let n;for(A=Object.keys(e[4]._opt.years).sort(),n=0;n<A.length;n+=1){const l=Ut(e,A,n);R[n]?R[n].p(l,t):(R[n]=mn(l),R[n].c(),R[n].m(g,null))}for(;n<R.length;n+=1)R[n].d(1);R.length=A.length}if(100663296&t[2]){let n;for(Z=e[88],n=0;n<Z.length;n+=1){const l=It(e,Z,n);Y[n]?Y[n].p(l,t):(Y[n]=gn(l),Y[n].c(),Y[n].m(k,null))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=Z.length}262144&t[1]&&I(k,e[49]),131072&t[1]&&G(w,e[48])},d(s){s&&F(t),s&&F(n),s&&F(l),e[157][3].splice(e[157][3].indexOf(_),1),T(R,s),T(Y,s),x(U)}}}function mn(e){let t,n,l,s,o,r,i,a=e[212]+"";return{c(){t=E("input"),o=E("label"),r=O(a),H(t,"type","checkbox"),H(t,"id","hearths_year_3"),t.checked=n=e[51][e[212]],t.disabled=l=2===e[50],H(t,"name",s=e[212]),H(t,"class","svelte-1jsovbn"),H(o,"for","hearths_year_3"),H(o,"class","svelte-1jsovbn")},m(n,l,s){D(n,t,l),D(n,o,l),z(o,r),s&&i(),i=$(t,"change",e[125])},p(e,o){16&o[0]|1048576&o[1]&&n!==(n=e[51][e[212]])&&(t.checked=n),524288&o[1]&&l!==(l=2===e[50])&&(t.disabled=l),16&o[0]&&s!==(s=e[212])&&H(t,"name",s),16&o[0]&&a!==(a=e[212]+"")&&N(r,a)},d(e){e&&F(t),e&&F(o),i()}}}function gn(e){let t,n,l,s,o,r,i,a,c=e[87].str_icon_type[e[212]]+"",p=e[212]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[212],t.value=t.__value,H(t,"class",a="icon_type_"+e[87].iconType[e[212]]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function yn(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,j,L,C,w,q,P,S,N,B,U,A,R,Z,Y,V,W,K,J=Object.keys(e[14]._opt.years).sort(),X=[];for(let t=0;t<J.length;t+=1)X[t]=bn(Gt(e,J,t));let Q=Object.keys(e[14]._opt.years).sort(),ee=[];for(let t=0;t<Q.length;t+=1)ee[t]=xn(Bt(e,Q,t));let te=e[86],le=[];for(let t=0;t<te.length;t+=1)le[t]=jn(St(e,te,t));return{c(){t=E("div"),t.innerHTML="Фильтры - <b>ДТП Очаги (Stat)</b>",n=M(),l=E("div"),s=E("div"),o=O("ID ДТП: "),r=E("input"),i=M(),a=E("div"),c=E("fieldset"),p=E("legend"),p.textContent="Фильтрация по периодам:",d=M(),u=E("div"),_=E("input"),f=E("label"),f.textContent="Фильтрация по годам",m=M(),g=E("div");for(let e=0;e<X.length;e+=1)X[e].c();y=M(),b=E("div"),k=E("input"),L=E("label"),L.textContent="Фильтрация по кварталам",C=M(),w=E("div");for(let e=0;e<ee.length;e+=1)ee[e].c();q=M(),P=E("div"),S=E("select"),N=E("option"),N.textContent=`\n\t\t\t\t\t\tВсе типы (${e[86].reduce(e[175],0)})\n\t\t\t\t\t`;for(let e=0;e<le.length;e+=1)le[e].c();B=M(),U=E("div"),A=E("select"),R=E("option"),R.textContent=`(${e[85].stricken[0]||0}) Очаги все`,Z=E("option"),Z.textContent=`(${e[85].stricken[1]||0}) Только с погибшими`,Y=E("option"),Y.textContent=`(${e[85].stricken[2]||0}) Только с пострадавшими`,V=E("option"),V.textContent=`(${e[85].stricken[3]||0}) С пострадавшими или погибшими`,W=E("option"),W.textContent=`(${e[85].stricken[4]||0}) С пострадавшими и погибшими`,H(t,"class","pLine svelte-1jsovbn"),H(r,"type","text"),r.value=e[19],H(r,"class","svelte-1jsovbn"),H(s,"class","pLine svelte-1jsovbn"),H(_,"type","radio"),_.__value=h=1,_.value=_.__value,_.checked=v=1===e[54],H(_,"id","hearths_period_type_Stat1"),H(_,"name","hearths_period_type_Stat"),H(_,"class","svelte-1jsovbn"),e[157][2].push(_),H(f,"for","hearths_period_type_Stat1"),H(f,"class","svelte-1jsovbn"),H(g,"class","pLine margin svelte-1jsovbn"),H(u,"class","pLine type svelte-1jsovbn"),H(k,"type","radio"),k.__value=j=2,k.value=k.__value,H(k,"id","hearths_period_type_Stat2"),H(k,"name","hearths_period_type_Stat"),H(k,"class","svelte-1jsovbn"),e[157][2].push(k),H(L,"for","hearths_period_type_Stat2"),H(L,"class","svelte-1jsovbn"),H(w,"class","pLine margin svelte-1jsovbn"),H(b,"class","pLine type svelte-1jsovbn"),H(a,"class","pLine nowrap svelte-1jsovbn"),N.__value="",N.value=N.__value,H(N,"class","svelte-1jsovbn"),H(S,"class","multiple_icon_typeTmp svelte-1jsovbn"),S.multiple=!0,void 0===e[53]&&ne(()=>e[176].call(S)),H(P,"class","pLine svelte-1jsovbn"),R.__value="",R.value=R.__value,Z.__value="1",Z.value=Z.__value,Y.__value="2",Y.value=Y.__value,V.__value="3",V.value=V.__value,W.__value="4",W.value=W.__value,H(A,"class","svelte-1jsovbn"),void 0===e[52]&&ne(()=>e[177].call(A)),H(U,"class","pLine svelte-1jsovbn"),H(l,"class","filtersCont svelte-1jsovbn")},m(h,v,j){D(h,t,v),D(h,n,v),D(h,l,v),z(l,s),z(s,o),z(s,r),z(l,i),z(l,a),z(a,c),z(c,p),z(c,d),z(c,u),z(u,_),_.checked=_.__value===e[54],z(u,f),z(u,m),z(u,g);for(let e=0;e<X.length;e+=1)X[e].m(g,null);z(c,y),z(c,b),z(b,k),k.checked=k.__value===e[54],z(b,L),z(b,C),z(b,w);for(let e=0;e<ee.length;e+=1)ee[e].m(w,null);z(l,q),z(l,P),z(P,S),z(S,N);for(let e=0;e<le.length;e+=1)le[e].m(S,null);I(S,e[53]),z(l,B),z(l,U),z(U,A),z(A,R),z(A,Z),z(A,Y),z(A,V),z(A,W),G(A,e[52]),j&&x(K),K=[$(r,"input",e[108]),$(_,"change",e[126]),$(_,"change",e[173]),$(k,"change",e[126]),$(k,"change",e[174]),$(S,"change",e[176]),$(S,"change",e[126]),$(A,"change",e[177]),$(A,"change",e[126])]},p(e,t){if(524288&t[0]&&r.value!==e[19]&&(r.value=e[19]),8388608&t[1]&&v!==(v=1===e[54])&&(_.checked=v),8388608&t[1]&&(_.checked=_.__value===e[54]),16384&t[0]|25165824&t[1]|4&t[4]){let n;for(J=Object.keys(e[14]._opt.years).sort(),n=0;n<J.length;n+=1){const l=Gt(e,J,n);X[n]?X[n].p(l,t):(X[n]=bn(l),X[n].c(),X[n].m(g,null))}for(;n<X.length;n+=1)X[n].d(1);X.length=J.length}if(8388608&t[1]&&(k.checked=k.__value===e[54]),16384&t[0]|41943040&t[1]|4&t[4]){let n;for(Q=Object.keys(e[14]._opt.years).sort(),n=0;n<Q.length;n+=1){const l=Bt(e,Q,n);ee[n]?ee[n].p(l,t):(ee[n]=xn(l),ee[n].c(),ee[n].m(w,null))}for(;n<ee.length;n+=1)ee[n].d(1);ee.length=Q.length}if(25165824&t[2]){let n;for(te=e[86],n=0;n<te.length;n+=1){const l=St(e,te,n);le[n]?le[n].p(l,t):(le[n]=jn(l),le[n].c(),le[n].m(S,null))}for(;n<le.length;n+=1)le[n].d(1);le.length=te.length}4194304&t[1]&&I(S,e[53]),2097152&t[1]&&G(A,e[52])},d(s){s&&F(t),s&&F(n),s&&F(l),e[157][2].splice(e[157][2].indexOf(_),1),T(X,s),e[157][2].splice(e[157][2].indexOf(k),1),T(ee,s),T(le,s),x(K)}}}function bn(e){let t,n,l,s,o,r,i,a=e[212]+"";return{c(){t=E("input"),o=E("label"),r=O(a),H(t,"type","checkbox"),H(t,"id","hearths_year_Stat"),t.checked=n=e[55][e[212]],t.disabled=l=2===e[54],H(t,"name",s=e[212]),H(t,"class","svelte-1jsovbn"),H(o,"for","hearths_year_Stat"),H(o,"class","svelte-1jsovbn")},m(n,l,s){D(n,t,l),D(n,o,l),z(o,r),s&&i(),i=$(t,"change",e[126])},p(e,o){16384&o[0]|16777216&o[1]&&n!==(n=e[55][e[212]])&&(t.checked=n),8388608&o[1]&&l!==(l=2===e[54])&&(t.disabled=l),16384&o[0]&&s!==(s=e[212])&&H(t,"name",s),16384&o[0]&&a!==(a=e[212]+"")&&N(r,a)},d(e){e&&F(t),e&&F(o),i()}}}function kn(e){let t,n,l,s,o,r,i,a,c,p,d=e[231]+"",u=e[212]+"";return{c(){t=E("input"),o=E("label"),r=O(d),i=O(" кв. "),a=O(u),H(t,"type","checkbox"),H(t,"id","hearths_quarter_Stat"),t.checked=n=e[56][e[212]]&&e[56][e[212]][e[231]],t.disabled=l=1===e[54],H(t,"name",s=e[212]+"_"+e[231]),H(t,"class","svelte-1jsovbn"),H(o,"for",c="hearths_quarter_Stat_"+e[212]+"_"+e[231]),H(o,"class","svelte-1jsovbn")},m(n,l,s){D(n,t,l),D(n,o,l),z(o,r),z(o,i),z(o,a),s&&p(),p=$(t,"change",e[126])},p(e,i){16384&i[0]|33554432&i[1]&&n!==(n=e[56][e[212]]&&e[56][e[212]][e[231]])&&(t.checked=n),8388608&i[1]&&l!==(l=1===e[54])&&(t.disabled=l),16384&i[0]&&s!==(s=e[212]+"_"+e[231])&&H(t,"name",s),16384&i[0]&&d!==(d=e[231]+"")&&N(r,d),16384&i[0]&&u!==(u=e[212]+"")&&N(a,u),16384&i[0]&&c!==(c="hearths_quarter_Stat_"+e[212]+"_"+e[231])&&H(o,"for",c)},d(e){e&&F(t),e&&F(o),p()}}}function xn(e){let t,n,l=Object.keys(e[14]._opt.years[e[212]]).sort(),s=[];for(let t=0;t<l.length;t+=1)s[t]=kn(Nt(e,l,t));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=M(),n=E("br")},m(e,l){for(let t=0;t<s.length;t+=1)s[t].m(e,l);D(e,t,l),D(e,n,l)},p(e,n){if(16384&n[0]|41943040&n[1]|4&n[4]){let o;for(l=Object.keys(e[14]._opt.years[e[212]]).sort(),o=0;o<l.length;o+=1){const r=Nt(e,l,o);s[o]?s[o].p(r,n):(s[o]=kn(r),s[o].c(),s[o].m(t.parentNode,t))}for(;o<s.length;o+=1)s[o].d(1);s.length=l.length}},d(e){T(s,e),e&&F(t),e&&F(n)}}}function jn(e){let t,n,l,s,o,r,i,a,c=e[85].str_icon_type[e[212]]+"",p=e[212]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[212],t.value=t.__value,H(t,"class",a="icon_type_"+e[85].iconType[e[212]]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function Ln(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,j,L,C,w,q,P,S,N,B,U,A,R,Z,Y,V,W,K,J=Object.keys(e[15]._opt.years).sort(),X=[];for(let t=0;t<J.length;t+=1)X[t]=Cn(Ht(e,J,t));let Q=Object.keys(e[15]._opt.years).sort(),ee=[];for(let t=0;t<Q.length;t+=1)ee[t]=zn(Pt(e,Q,t));let te=e[84],le=[];for(let t=0;t<te.length;t+=1)le[t]=Dn(qt(e,te,t));return{c(){t=E("div"),t.innerHTML="Фильтры - <b>ДТП Очаги (TMP)</b>",n=M(),l=E("div"),s=E("div"),o=O("ID ДТП: "),r=E("input"),i=M(),a=E("div"),c=E("fieldset"),p=E("legend"),p.textContent="Фильтрация по периодам:",d=M(),u=E("div"),_=E("input"),f=E("label"),f.textContent="Фильтрация по годам",m=M(),g=E("div");for(let e=0;e<X.length;e+=1)X[e].c();y=M(),b=E("div"),k=E("input"),L=E("label"),L.textContent="Фильтрация по кварталам",C=M(),w=E("div");for(let e=0;e<ee.length;e+=1)ee[e].c();q=M(),P=E("div"),S=E("select"),N=E("option"),N.textContent=`\n\t\t\t\t\t\tВсе типы (${e[84].reduce(e[180],0)})\n\t\t\t\t\t`;for(let e=0;e<le.length;e+=1)le[e].c();B=M(),U=E("div"),A=E("select"),R=E("option"),R.textContent=`(${e[83].stricken[0]||0}) Очаги все`,Z=E("option"),Z.textContent=`(${e[83].stricken[1]||0}) Только с погибшими`,Y=E("option"),Y.textContent=`(${e[83].stricken[2]||0}) Только с пострадавшими`,V=E("option"),V.textContent=`(${e[83].stricken[3]||0}) С пострадавшими или погибшими`,W=E("option"),W.textContent=`(${e[83].stricken[4]||0}) С пострадавшими и погибшими`,H(t,"class","pLine svelte-1jsovbn"),H(r,"type","text"),r.value=e[19],H(r,"class","svelte-1jsovbn"),H(s,"class","pLine svelte-1jsovbn"),H(_,"type","radio"),_.__value=h=1,_.value=_.__value,_.checked=v=1===e[59],H(_,"id","hearths_period_type_tmp1"),H(_,"name","hearths_period_type_tmp"),H(_,"class","svelte-1jsovbn"),e[157][1].push(_),H(f,"for","hearths_period_type_tmp1"),H(f,"class","svelte-1jsovbn"),H(g,"class","pLine margin svelte-1jsovbn"),H(u,"class","pLine type svelte-1jsovbn"),H(k,"type","radio"),k.__value=j=2,k.value=k.__value,H(k,"id","hearths_period_type_tmp2"),H(k,"name","hearths_period_type_tmp"),H(k,"class","svelte-1jsovbn"),e[157][1].push(k),H(L,"for","hearths_period_type_tmp2"),H(L,"class","svelte-1jsovbn"),H(w,"class","pLine margin svelte-1jsovbn"),H(b,"class","pLine type svelte-1jsovbn"),H(a,"class","pLine nowrap svelte-1jsovbn"),N.__value="",N.value=N.__value,H(N,"class","svelte-1jsovbn"),H(S,"class","multiple_icon_typeTmp svelte-1jsovbn"),S.multiple=!0,void 0===e[58]&&ne(()=>e[181].call(S)),H(P,"class","pLine svelte-1jsovbn"),R.__value="",R.value=R.__value,Z.__value="1",Z.value=Z.__value,Y.__value="2",Y.value=Y.__value,V.__value="3",V.value=V.__value,W.__value="4",W.value=W.__value,H(A,"class","svelte-1jsovbn"),void 0===e[57]&&ne(()=>e[182].call(A)),H(U,"class","pLine svelte-1jsovbn"),H(l,"class","filtersCont svelte-1jsovbn")},m(h,v,j){D(h,t,v),D(h,n,v),D(h,l,v),z(l,s),z(s,o),z(s,r),z(l,i),z(l,a),z(a,c),z(c,p),z(c,d),z(c,u),z(u,_),_.checked=_.__value===e[59],z(u,f),z(u,m),z(u,g);for(let e=0;e<X.length;e+=1)X[e].m(g,null);z(c,y),z(c,b),z(b,k),k.checked=k.__value===e[59],z(b,L),z(b,C),z(b,w);for(let e=0;e<ee.length;e+=1)ee[e].m(w,null);z(l,q),z(l,P),z(P,S),z(S,N);for(let e=0;e<le.length;e+=1)le[e].m(S,null);I(S,e[58]),z(l,B),z(l,U),z(U,A),z(A,R),z(A,Z),z(A,Y),z(A,V),z(A,W),G(A,e[57]),j&&x(K),K=[$(r,"input",e[108]),$(_,"change",e[127]),$(_,"change",e[178]),$(k,"change",e[127]),$(k,"change",e[179]),$(S,"change",e[181]),$(S,"change",e[127]),$(A,"change",e[182]),$(A,"change",e[127])]},p(e,t){if(524288&t[0]&&r.value!==e[19]&&(r.value=e[19]),268435456&t[1]&&v!==(v=1===e[59])&&(_.checked=v),268435456&t[1]&&(_.checked=_.__value===e[59]),32768&t[0]|805306368&t[1]|8&t[4]){let n;for(J=Object.keys(e[15]._opt.years).sort(),n=0;n<J.length;n+=1){const l=Ht(e,J,n);X[n]?X[n].p(l,t):(X[n]=Cn(l),X[n].c(),X[n].m(g,null))}for(;n<X.length;n+=1)X[n].d(1);X.length=J.length}if(268435456&t[1]&&(k.checked=k.__value===e[59]),32768&t[0]|1342177280&t[1]|8&t[4]){let n;for(Q=Object.keys(e[15]._opt.years).sort(),n=0;n<Q.length;n+=1){const l=Pt(e,Q,n);ee[n]?ee[n].p(l,t):(ee[n]=zn(l),ee[n].c(),ee[n].m(w,null))}for(;n<ee.length;n+=1)ee[n].d(1);ee.length=Q.length}if(6291456&t[2]){let n;for(te=e[84],n=0;n<te.length;n+=1){const l=qt(e,te,n);le[n]?le[n].p(l,t):(le[n]=Dn(l),le[n].c(),le[n].m(S,null))}for(;n<le.length;n+=1)le[n].d(1);le.length=te.length}134217728&t[1]&&I(S,e[58]),67108864&t[1]&&G(A,e[57])},d(s){s&&F(t),s&&F(n),s&&F(l),e[157][1].splice(e[157][1].indexOf(_),1),T(X,s),e[157][1].splice(e[157][1].indexOf(k),1),T(ee,s),T(le,s),x(K)}}}function Cn(e){let t,n,l,s,o,r,i,a=e[212]+"";return{c(){t=E("input"),o=E("label"),r=O(a),H(t,"type","checkbox"),H(t,"id","hearths_year_tmp"),t.checked=n=e[60][e[212]],t.disabled=l=2===e[59],H(t,"name",s=e[212]),H(t,"class","svelte-1jsovbn"),H(o,"for","hearths_year_tmp"),H(o,"class","svelte-1jsovbn")},m(n,l,s){D(n,t,l),D(n,o,l),z(o,r),s&&i(),i=$(t,"change",e[127])},p(e,o){32768&o[0]|536870912&o[1]&&n!==(n=e[60][e[212]])&&(t.checked=n),268435456&o[1]&&l!==(l=2===e[59])&&(t.disabled=l),32768&o[0]&&s!==(s=e[212])&&H(t,"name",s),32768&o[0]&&a!==(a=e[212]+"")&&N(r,a)},d(e){e&&F(t),e&&F(o),i()}}}function wn(e){let t,n,l,s,o,r,i,a,c,p,d=e[231]+"",u=e[212]+"";return{c(){t=E("input"),o=E("label"),r=O(d),i=O(" кв. "),a=O(u),H(t,"type","checkbox"),H(t,"id","hearths_quarter_tmp"),t.checked=n=e[61][e[212]]&&e[61][e[212]][e[231]],t.disabled=l=1===e[59],H(t,"name",s=e[212]+"_"+e[231]),H(t,"class","svelte-1jsovbn"),H(o,"for",c="hearths_quarter_tmp_"+e[212]+"_"+e[231]),H(o,"class","svelte-1jsovbn")},m(n,l,s){D(n,t,l),D(n,o,l),z(o,r),z(o,i),z(o,a),s&&p(),p=$(t,"change",e[127])},p(e,i){32768&i[0]|1073741824&i[1]&&n!==(n=e[61][e[212]]&&e[61][e[212]][e[231]])&&(t.checked=n),268435456&i[1]&&l!==(l=1===e[59])&&(t.disabled=l),32768&i[0]&&s!==(s=e[212]+"_"+e[231])&&H(t,"name",s),32768&i[0]&&d!==(d=e[231]+"")&&N(r,d),32768&i[0]&&u!==(u=e[212]+"")&&N(a,u),32768&i[0]&&c!==(c="hearths_quarter_tmp_"+e[212]+"_"+e[231])&&H(o,"for",c)},d(e){e&&F(t),e&&F(o),p()}}}function zn(e){let t,n,l=Object.keys(e[15]._opt.years[e[212]]).sort(),s=[];for(let t=0;t<l.length;t+=1)s[t]=wn($t(e,l,t));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=M(),n=E("br")},m(e,l){for(let t=0;t<s.length;t+=1)s[t].m(e,l);D(e,t,l),D(e,n,l)},p(e,n){if(32768&n[0]|1342177280&n[1]|8&n[4]){let o;for(l=Object.keys(e[15]._opt.years[e[212]]).sort(),o=0;o<l.length;o+=1){const r=$t(e,l,o);s[o]?s[o].p(r,n):(s[o]=wn(r),s[o].c(),s[o].m(t.parentNode,t))}for(;o<s.length;o+=1)s[o].d(1);s.length=l.length}},d(e){T(s,e),e&&F(t),e&&F(n)}}}function Dn(e){let t,n,l,s,o,r,i,a,c=e[83].str_icon_type[e[212]]+"",p=e[212]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[212],t.value=t.__value,H(t,"class",a="icon_type_"+e[83].iconType[e[212]]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function Fn(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,j,L,C,w,q,P,S,N,B,U,A,R,Z,Y,V,W,K,J,X,Q=Object.keys(e[16]._opt.years).sort(),ee=[];for(let t=0;t<Q.length;t+=1)ee[t]=Tn(Mt(e,Q,t));let te=Object.keys(e[16]._opt.years).sort(),le=[];for(let t=0;t<te.length;t+=1)le[t]=On(Ot(e,te,t));let se=e[82],oe=[];for(let t=0;t<se.length;t+=1)oe[t]=Mn(Tt(e,se,t));return{c(){t=E("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=M(),l=E("div"),l.innerHTML="Фильтры - <b>ДТП Очаги</b>",s=M(),o=E("div"),r=E("div"),i=O("ID ДТП: "),a=E("input"),c=M(),p=E("div"),d=E("fieldset"),u=E("legend"),u.textContent="Фильтрация по периодам:",_=M(),h=E("div"),v=E("input"),g=E("label"),g.textContent="Фильтрация по годам",y=M(),b=E("div");for(let e=0;e<ee.length;e+=1)ee[e].c();k=M(),j=E("div"),L=E("input"),w=E("label"),w.textContent="Фильтрация по кварталам",q=M(),P=E("div");for(let e=0;e<le.length;e+=1)le[e].c();S=M(),N=E("div"),B=E("select"),U=E("option"),U.textContent=`\n\t\t\t\t\t\tВсе типы (${e[82].reduce(e[185],0)})\n\t\t\t\t\t`;for(let e=0;e<oe.length;e+=1)oe[e].c();A=M(),R=E("div"),Z=E("select"),Y=E("option"),Y.textContent=`(${e[81].stricken[0]||0}) Очаги все`,V=E("option"),V.textContent=`(${e[81].stricken[1]||0}) Только с погибшими`,W=E("option"),W.textContent=`(${e[81].stricken[2]||0}) Только с пострадавшими`,K=E("option"),K.textContent=`(${e[81].stricken[3]||0}) С пострадавшими или погибшими`,J=E("option"),J.textContent=`(${e[81].stricken[4]||0}) С пострадавшими и погибшими`,H(t,"class","pLine svelte-1jsovbn"),H(l,"class","pLine svelte-1jsovbn"),H(a,"type","text"),a.value=e[19],H(a,"class","svelte-1jsovbn"),H(r,"class","pLine svelte-1jsovbn"),H(v,"type","radio"),v.__value=f=1,v.value=v.__value,v.checked=m=1===e[64],H(v,"id","hearths_period_type1"),H(v,"name","hearths_period_type"),H(v,"class","svelte-1jsovbn"),e[157][0].push(v),H(g,"for","hearths_period_type1"),H(g,"class","svelte-1jsovbn"),H(b,"class","pLine margin svelte-1jsovbn"),H(h,"class","pLine type svelte-1jsovbn"),H(L,"type","radio"),L.__value=C=2,L.value=L.__value,H(L,"id","hearths_period_type2"),H(L,"name","hearths_period_type"),H(L,"class","svelte-1jsovbn"),e[157][0].push(L),H(w,"for","hearths_period_type2"),H(w,"class","svelte-1jsovbn"),H(P,"class","pLine margin svelte-1jsovbn"),H(j,"class","pLine type svelte-1jsovbn"),H(p,"class","pLine nowrap svelte-1jsovbn"),U.__value="",U.value=U.__value,H(U,"class","svelte-1jsovbn"),H(B,"class","multiple_icon_typeTmp svelte-1jsovbn"),B.multiple=!0,void 0===e[63]&&ne(()=>e[186].call(B)),H(N,"class","pLine svelte-1jsovbn"),Y.__value="",Y.value=Y.__value,V.__value="1",V.value=V.__value,W.__value="2",W.value=W.__value,K.__value="3",K.value=K.__value,J.__value="4",J.value=J.__value,H(Z,"class","svelte-1jsovbn"),void 0===e[62]&&ne(()=>e[187].call(Z)),H(R,"class","pLine svelte-1jsovbn"),H(o,"class","filtersCont svelte-1jsovbn")},m(f,m,C){D(f,t,m),D(f,n,m),D(f,l,m),D(f,s,m),D(f,o,m),z(o,r),z(r,i),z(r,a),z(o,c),z(o,p),z(p,d),z(d,u),z(d,_),z(d,h),z(h,v),v.checked=v.__value===e[64],z(h,g),z(h,y),z(h,b);for(let e=0;e<ee.length;e+=1)ee[e].m(b,null);z(d,k),z(d,j),z(j,L),L.checked=L.__value===e[64],z(j,w),z(j,q),z(j,P);for(let e=0;e<le.length;e+=1)le[e].m(P,null);z(o,S),z(o,N),z(N,B),z(B,U);for(let e=0;e<oe.length;e+=1)oe[e].m(B,null);I(B,e[63]),z(o,A),z(o,R),z(R,Z),z(Z,Y),z(Z,V),z(Z,W),z(Z,K),z(Z,J),G(Z,e[62]),C&&x(X),X=[$(a,"input",e[108]),$(v,"change",e[128]),$(v,"change",e[183]),$(L,"change",e[128]),$(L,"change",e[184]),$(B,"change",e[186]),$(B,"change",e[128]),$(Z,"change",e[187]),$(Z,"change",e[128])]},p(e,t){if(524288&t[0]&&a.value!==e[19]&&(a.value=e[19]),4&t[2]&&m!==(m=1===e[64])&&(v.checked=m),4&t[2]&&(v.checked=v.__value===e[64]),65536&t[0]|12&t[2]|16&t[4]){let n;for(Q=Object.keys(e[16]._opt.years).sort(),n=0;n<Q.length;n+=1){const l=Mt(e,Q,n);ee[n]?ee[n].p(l,t):(ee[n]=Tn(l),ee[n].c(),ee[n].m(b,null))}for(;n<ee.length;n+=1)ee[n].d(1);ee.length=Q.length}if(4&t[2]&&(L.checked=L.__value===e[64]),65536&t[0]|20&t[2]|16&t[4]){let n;for(te=Object.keys(e[16]._opt.years).sort(),n=0;n<te.length;n+=1){const l=Ot(e,te,n);le[n]?le[n].p(l,t):(le[n]=On(l),le[n].c(),le[n].m(P,null))}for(;n<le.length;n+=1)le[n].d(1);le.length=te.length}if(1572864&t[2]){let n;for(se=e[82],n=0;n<se.length;n+=1){const l=Tt(e,se,n);oe[n]?oe[n].p(l,t):(oe[n]=Mn(l),oe[n].c(),oe[n].m(B,null))}for(;n<oe.length;n+=1)oe[n].d(1);oe.length=se.length}2&t[2]&&I(B,e[63]),1&t[2]&&G(Z,e[62])},d(r){r&&F(t),r&&F(n),r&&F(l),r&&F(s),r&&F(o),e[157][0].splice(e[157][0].indexOf(v),1),T(ee,r),e[157][0].splice(e[157][0].indexOf(L),1),T(le,r),T(oe,r),x(X)}}}function Tn(e){let t,n,l,s,o,r,i,a,c=e[212]+"";return{c(){t=E("input"),o=E("label"),r=O(c),H(t,"type","checkbox"),H(t,"id","hearths_year"),t.checked=n=e[65][e[212]],t.disabled=l=2===e[64],H(t,"name",s=e[212]),H(t,"class","svelte-1jsovbn"),H(o,"for",i="hearths_year"+e[212]),H(o,"class","svelte-1jsovbn")},m(n,l,s){D(n,t,l),D(n,o,l),z(o,r),s&&a(),a=$(t,"change",e[128])},p(e,a){65536&a[0]|8&a[2]&&n!==(n=e[65][e[212]])&&(t.checked=n),4&a[2]&&l!==(l=2===e[64])&&(t.disabled=l),65536&a[0]&&s!==(s=e[212])&&H(t,"name",s),65536&a[0]&&c!==(c=e[212]+"")&&N(r,c),65536&a[0]&&i!==(i="hearths_year"+e[212])&&H(o,"for",i)},d(e){e&&F(t),e&&F(o),a()}}}function En(e){let t,n,l,s,o,r,i,a,c,p,d=e[231]+"",u=e[212]+"";return{c(){t=E("input"),o=E("label"),r=O(d),i=O(" кв. "),a=O(u),H(t,"type","checkbox"),H(t,"id","hearths_quarter"),t.checked=n=e[66][e[212]]&&e[66][e[212]][e[231]],t.disabled=l=1===e[64],H(t,"name",s=e[212]+"_"+e[231]),H(t,"class","svelte-1jsovbn"),H(o,"for",c="hearths_quarter_"+e[212]+"_"+e[231]),H(o,"class","svelte-1jsovbn")},m(n,l,s){D(n,t,l),D(n,o,l),z(o,r),z(o,i),z(o,a),s&&p(),p=$(t,"change",e[128])},p(e,i){65536&i[0]|16&i[2]&&n!==(n=e[66][e[212]]&&e[66][e[212]][e[231]])&&(t.checked=n),4&i[2]&&l!==(l=1===e[64])&&(t.disabled=l),65536&i[0]&&s!==(s=e[212]+"_"+e[231])&&H(t,"name",s),65536&i[0]&&d!==(d=e[231]+"")&&N(r,d),65536&i[0]&&u!==(u=e[212]+"")&&N(a,u),65536&i[0]&&c!==(c="hearths_quarter_"+e[212]+"_"+e[231])&&H(o,"for",c)},d(e){e&&F(t),e&&F(o),p()}}}function On(e){let t,n,l=Object.keys(e[16]._opt.years[e[212]]).sort(),s=[];for(let t=0;t<l.length;t+=1)s[t]=En(Et(e,l,t));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=M(),n=E("br")},m(e,l){for(let t=0;t<s.length;t+=1)s[t].m(e,l);D(e,t,l),D(e,n,l)},p(e,n){if(65536&n[0]|20&n[2]|16&n[4]){let o;for(l=Object.keys(e[16]._opt.years[e[212]]).sort(),o=0;o<l.length;o+=1){const r=Et(e,l,o);s[o]?s[o].p(r,n):(s[o]=En(r),s[o].c(),s[o].m(t.parentNode,t))}for(;o<s.length;o+=1)s[o].d(1);s.length=l.length}},d(e){T(s,e),e&&F(t),e&&F(n)}}}function Mn(e){let t,n,l,s,o,r,i,a,c=e[81].str_icon_type[e[212]]+"",p=e[212]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[212],t.value=t.__value,H(t,"class",a="icon_type_"+e[81].iconType[e[212]]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function qn(e){let t;return{c(){t=E("div"),t.textContent="Нет включенных слоев",H(t,"class","pLine svelte-1jsovbn")},m(e,n){D(e,t,n)},p:y,d(e){e&&F(t)}}}function $n(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h=(e[5]._map||e[6]._map||e[7]._map||e[10]._map||e[9]._map||e[8]._map)&&Pn(e);return{c(){t=E("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=M(),l=E("div"),s=E("button"),o=M(),r=E("input"),i=M(),a=E("input"),c=M(),p=E("button"),d=M(),h&&h.c(),u=q(),H(t,"class","pLine svelte-1jsovbn"),H(s,"class","pika-prev"),H(r,"type","text"),H(r,"class","begDate svelte-1jsovbn"),H(a,"type","text"),H(a,"class","endDate svelte-1jsovbn"),H(p,"class","pika-next"),H(l,"class","pikaday pLine svelte-1jsovbn")},m(v,f,m){D(v,t,f),D(v,n,f),D(v,l,f),z(l,s),z(l,o),z(l,r),e[188](r),z(l,i),z(l,a),e[189](a),z(l,c),z(l,p),D(v,d,f),h&&h.m(v,f),D(v,u,f),m&&x(_),_=[$(s,"click",e[122]),$(p,"click",e[123])]},p(e,t){e[5]._map||e[6]._map||e[7]._map||e[10]._map||e[9]._map||e[8]._map?h?h.p(e,t):(h=Pn(e),h.c(),h.m(u.parentNode,u)):h&&(h.d(1),h=null)},d(s){s&&F(t),s&&F(n),s&&F(l),e[188](null),e[189](null),s&&F(d),h&&h.d(s),s&&F(u),x(_)}}}function Pn(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,j,L,C,w,T,q,P,S,G,I,U,A,R,Z;return{c(){t=E("div"),n=E("br"),l=M(),s=E("label"),o=E("input"),i=E("span"),a=O("Мин.яркость ("),c=O(e[31]),p=O(")"),d=M(),u=E("br"),_=M(),h=E("label"),v=E("input"),m=E("span"),g=O("Радиус ("),y=O(e[29]),b=O(")"),k=M(),j=E("br"),L=M(),C=E("label"),w=E("input"),q=E("span"),P=O("Размытие ("),S=O(e[30]),G=O(")"),I=M(),U=E("div"),A=E("input"),R=E("label"),R.textContent="- тепловая карта",H(o,"type","range"),H(o,"min","0.05"),H(o,"max","1"),H(o,"step","0.01"),o.disabled=r=!e[99],H(o,"class","svelte-1jsovbn"),H(s,"class","svelte-1jsovbn"),H(v,"type","range"),H(v,"min","0"),H(v,"max","100"),H(v,"step","1"),v.disabled=f=!e[99],H(v,"class","svelte-1jsovbn"),H(h,"class","svelte-1jsovbn"),H(w,"type","range"),H(w,"min","0"),H(w,"max","15"),H(w,"step","0.01"),w.disabled=T=!e[99],H(w,"class","svelte-1jsovbn"),H(C,"class","svelte-1jsovbn"),H(t,"class","pLine svelte-1jsovbn"),H(A,"type","checkbox"),A.checked=e[100],H(A,"name","heat"),H(A,"class","svelte-1jsovbn"),H(R,"for","heat"),H(R,"class","svelte-1jsovbn"),H(U,"class","pLine svelte-1jsovbn")},m(r,f,F){D(r,t,f),z(t,n),z(t,l),z(t,s),z(s,o),B(o,e[31]),z(s,i),z(i,a),z(i,c),z(i,p),z(t,d),z(t,u),z(t,_),z(t,h),z(h,v),B(v,e[29]),z(h,m),z(m,g),z(m,y),z(m,b),z(t,k),z(t,j),z(t,L),z(t,C),z(C,w),B(w,e[30]),z(C,q),z(q,P),z(q,S),z(q,G),D(r,I,f),D(r,U,f),z(U,A),e[193](A),z(U,R),F&&x(Z),Z=[$(o,"change",e[190]),$(o,"input",e[190]),$(o,"input",e[114]),$(v,"change",e[191]),$(v,"input",e[191]),$(v,"input",e[114]),$(w,"change",e[192]),$(w,"input",e[192]),$(w,"input",e[114]),$(A,"change",e[113])]},p(e,t){1&t[1]&&B(o,e[31]),1&t[1]&&N(c,e[31]),536870912&t[0]&&B(v,e[29]),536870912&t[0]&&N(y,e[29]),1073741824&t[0]&&B(w,e[30]),1073741824&t[0]&&N(S,e[30])},d(n){n&&F(t),n&&F(I),n&&F(U),e[193](null),x(Z)}}}function Hn(e){let t,n,l,s,o,r=e[97].type&&function(e){let t,n,l,s,o=e[98],r=[];for(let t=0;t<o.length;t+=1)r[t]=Sn(Ft(e,o,t));return{c(){t=E("div"),n=E("select"),l=E("option"),l.textContent=`\n\t\t\t\t\t\tВсе типы (${e[98].reduce(e[194],0)})\n\t\t\t\t\t`;for(let e=0;e<r.length;e+=1)r[e].c();l.__value="",l.value=l.__value,H(n,"class","multiple_type svelte-1jsovbn"),n.multiple=!0,void 0===e[35]&&ne(()=>e[195].call(n)),H(t,"class","pLine svelte-1jsovbn")},m(o,i,a){D(o,t,i),z(t,n),z(n,l);for(let e=0;e<r.length;e+=1)r[e].m(n,null);I(n,e[35]),a&&x(s),s=[$(n,"change",e[195]),$(n,"change",e[101])]},p(e,t){if(48&t[3]){let l;for(o=e[98],l=0;l<o.length;l+=1){const s=Ft(e,o,l);r[l]?r[l].p(s,t):(r[l]=Sn(s),r[l].c(),r[l].m(n,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=o.length}16&t[1]&&I(n,e[35])},d(e){e&&F(t),T(r,e),x(s)}}}(e);return{c(){t=E("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=M(),l=E("div"),l.innerHTML="Фильтры - <b>Мероприятий</b>",s=M(),o=E("div"),r&&r.c(),H(t,"class","pLine svelte-1jsovbn"),H(l,"class","pLine svelte-1jsovbn"),H(o,"class","filtersCont svelte-1jsovbn")},m(e,i){D(e,t,i),D(e,n,i),D(e,l,i),D(e,s,i),D(e,o,i),r&&r.m(o,null)},p(e,t){e[97].type&&r.p(e,t)},d(e){e&&F(t),e&&F(n),e&&F(l),e&&F(s),e&&F(o),r&&r.d()}}}function Sn(e){let t,n,l,s,o,r,i,a,c=e[97].type[e[212]]+"",p=e[212]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[212],t.value=t.__value,H(t,"class",a="type_"+e[97].type[e[212]]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function Nn(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,j,L,C,w,q,P,S;function N(e,t){return e[5]._arm?Gn:Bn}let B=N(e),G=B(e),U=e[67].collision_type&&function(e){let t,n,l,s,o=e[68],r=[];for(let t=0;t<o.length;t+=1)r[t]=In(Dt(e,o,t));return{c(){t=E("div"),n=E("select"),l=E("option"),l.textContent=`\n\t\t\t\t\t\tВсе типы (${e[68].reduce(e[196],0)})\n\t\t\t\t\t`;for(let e=0;e<r.length;e+=1)r[e].c();l.__value="",l.value=l.__value,H(l,"class","svelte-1jsovbn"),H(n,"class","multiple_icon_type svelte-1jsovbn"),n.multiple=!0,void 0===e[25]&&ne(()=>e[197].call(n)),H(t,"class","pLine svelte-1jsovbn")},m(o,i,a){D(o,t,i),z(t,n),z(n,l);for(let e=0;e<r.length;e+=1)r[e].m(n,null);I(n,e[25]),a&&x(s),s=[$(n,"change",e[197]),$(n,"change",e[115])]},p(e,t){if(96&t[2]){let l;for(o=e[68],l=0;l<o.length;l+=1){const s=Dt(e,o,l);r[l]?r[l].p(s,t):(r[l]=In(s),r[l].c(),r[l].m(n,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=o.length}33554432&t[0]&&I(n,e[25])},d(e){e&&F(t),T(r,e),x(s)}}}(e);return{c(){t=E("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=M(),l=E("div"),l.innerHTML="Фильтры - <b>ДТП Сводный</b>",s=M(),o=E("div"),r=E("div"),i=O("ID ДТП: "),a=E("input"),c=M(),p=E("div"),d=E("input"),u=E("label"),u.textContent="Все",_=M(),G.c(),h=M(),v=E("div"),f=E("input"),m=E("label"),m.textContent="Только ГИБДД",g=M(),y=E("div"),b=E("input"),j=E("label"),j.textContent="- с мероприятиями",L=M(),C=E("input"),q=E("label"),q.textContent="- без мероприятий",P=M(),U&&U.c(),H(t,"class","pLine svelte-1jsovbn"),H(l,"class","pLine svelte-1jsovbn"),H(a,"type","text"),a.value=e[19],H(a,"class","svelte-1jsovbn"),H(r,"class","pLine svelte-1jsovbn"),H(d,"type","radio"),H(d,"id","d0"),H(d,"name","drone"),d.value="0",d.checked=!0,H(d,"class","svelte-1jsovbn"),H(u,"for","d0"),H(u,"class","svelte-1jsovbn"),H(p,"class","pLine svelte-1jsovbn"),H(f,"type","radio"),H(f,"id","d3"),H(f,"name","drone"),f.value="3",H(f,"class","svelte-1jsovbn"),H(m,"for","d3"),H(m,"class","svelte-1jsovbn"),H(v,"class","pLine svelte-1jsovbn"),H(b,"type","checkbox"),H(b,"id","ev1"),b.checked=k=e[21].ev1,H(b,"name","ev1"),H(b,"class","svelte-1jsovbn"),H(j,"for","ev1"),H(j,"class","svelte-1jsovbn"),H(C,"type","checkbox"),H(C,"id","ev0"),C.checked=w=e[21].ev0,H(C,"name","ev0"),H(C,"class","svelte-1jsovbn"),H(q,"for","ev0"),H(q,"class","svelte-1jsovbn"),H(y,"class","pLine svelte-1jsovbn"),H(o,"class","filtersCont svelte-1jsovbn")},m(k,w,F){D(k,t,w),D(k,n,w),D(k,l,w),D(k,s,w),D(k,o,w),z(o,r),z(r,i),z(r,a),z(o,c),z(o,p),z(p,d),z(p,u),z(o,_),G.m(o,null),z(o,h),z(o,v),z(v,f),z(v,m),z(o,g),z(o,y),z(y,b),z(y,j),z(y,L),z(y,C),z(y,q),z(o,P),U&&U.m(o,null),F&&x(S),S=[$(a,"input",e[108]),$(d,"click",e[121]),$(f,"click",e[121]),$(b,"change",e[112]),$(C,"change",e[112])]},p(e,t){524288&t[0]&&a.value!==e[19]&&(a.value=e[19]),B===(B=N(e))&&G?G.p(e,t):(G.d(1),G=B(e),G&&(G.c(),G.m(o,h))),2097152&t[0]&&k!==(k=e[21].ev1)&&(b.checked=k),2097152&t[0]&&w!==(w=e[21].ev0)&&(C.checked=w),e[67].collision_type&&U.p(e,t)},d(e){e&&F(t),e&&F(n),e&&F(l),e&&F(s),e&&F(o),G.d(),U&&U.d(),x(S)}}}function Bn(e){let t,n,l,s,o,r,i,a;return{c(){t=E("div"),n=E("input"),l=E("label"),l.textContent="Только Пересечения",s=M(),o=E("div"),r=E("input"),i=E("label"),i.textContent="Только СКПДИ",H(n,"type","radio"),H(n,"id","d1"),H(n,"name","drone"),n.value="1",H(n,"class","svelte-1jsovbn"),H(l,"for","d1"),H(l,"class","svelte-1jsovbn"),H(t,"class","pLine svelte-1jsovbn"),H(r,"type","radio"),H(r,"id","d2"),H(r,"name","drone"),r.value="2",H(r,"class","svelte-1jsovbn"),H(i,"for","d2"),H(i,"class","svelte-1jsovbn"),H(o,"class","pLine svelte-1jsovbn")},m(c,p,d){D(c,t,p),z(t,n),z(t,l),D(c,s,p),D(c,o,p),z(o,r),z(o,i),d&&x(a),a=[$(n,"click",e[121]),$(r,"click",e[121])]},p:y,d(e){e&&F(t),e&&F(s),e&&F(o),x(a)}}}function Gn(e){let t,n,l,s;return{c(){t=E("div"),n=E("input"),l=E("label"),l.textContent="Только Пересечения ГИБДД и СКПДИ",H(n,"type","radio"),H(n,"id","d1"),H(n,"name","drone"),n.value="1",H(n,"class","svelte-1jsovbn"),H(l,"for","d1"),H(l,"class","svelte-1jsovbn"),H(t,"class","pLine svelte-1jsovbn")},m(o,r,i){D(o,t,r),z(t,n),z(t,l),i&&s(),s=$(n,"click",e[121])},p:y,d(e){e&&F(t),s()}}}function In(e){let t,n,l,s,o,r,i,a,c=e[67].collision_type[e[212]]+"",p=e[212]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[212],t.value=t.__value,H(t,"class",a="icon_type_"+e[67].iconType[e[212]]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function Un(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b=e[69].collision_type&&function(e){let t,n,l,s,o=e[70],r=[];for(let t=0;t<o.length;t+=1)r[t]=An(zt(e,o,t));return{c(){t=E("div"),n=E("select"),l=E("option"),l.textContent=`\n\t\t\t\t\t\tВсе типы (${e[70].reduce(e[198],0)})\n\t\t\t\t\t`;for(let e=0;e<r.length;e+=1)r[e].c();l.__value="",l.value=l.__value,H(l,"class","svelte-1jsovbn"),H(n,"class","multiple_icon_type svelte-1jsovbn"),n.multiple=!0,void 0===e[26]&&ne(()=>e[199].call(n)),H(t,"class","pLine svelte-1jsovbn")},m(o,i,a){D(o,t,i),z(t,n),z(n,l);for(let e=0;e<r.length;e+=1)r[e].m(n,null);I(n,e[26]),a&&x(s),s=[$(n,"change",e[199]),$(n,"change",e[120])]},p(e,t){if(384&t[2]){let l;for(o=e[70],l=0;l<o.length;l+=1){const s=zt(e,o,l);r[l]?r[l].p(s,t):(r[l]=An(s),r[l].c(),r[l].m(n,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=o.length}67108864&t[0]&&I(n,e[26])},d(e){e&&F(t),T(r,e),x(s)}}}(e);return{c(){t=E("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=M(),l=E("div"),l.innerHTML="Фильтры - <b>ДТП СКПДИ</b>",s=M(),o=E("div"),r=E("div"),i=O("ID ДТП: "),a=E("input"),c=M(),p=E("div"),d=E("input"),_=E("label"),_.textContent="- с мероприятиями",h=M(),v=E("input"),m=E("label"),m.textContent="- без мероприятий",g=M(),b&&b.c(),H(t,"class","pLine svelte-1jsovbn"),H(l,"class","pLine svelte-1jsovbn"),H(a,"type","text"),a.value=e[19],H(a,"class","svelte-1jsovbn"),H(r,"class","pLine svelte-1jsovbn"),H(d,"type","checkbox"),H(d,"id","ev1"),d.checked=u=e[21].ev1,H(d,"name","ev1"),H(d,"class","svelte-1jsovbn"),H(_,"for","ev1"),H(_,"class","svelte-1jsovbn"),H(v,"type","checkbox"),H(v,"id","ev0"),v.checked=f=e[21].ev0,H(v,"name","ev0"),H(v,"class","svelte-1jsovbn"),H(m,"for","ev0"),H(m,"class","svelte-1jsovbn"),H(p,"class","pLine svelte-1jsovbn"),H(o,"class","filtersCont svelte-1jsovbn")},m(u,f,k){D(u,t,f),D(u,n,f),D(u,l,f),D(u,s,f),D(u,o,f),z(o,r),z(r,i),z(r,a),z(o,c),z(o,p),z(p,d),z(p,_),z(p,h),z(p,v),z(p,m),z(o,g),b&&b.m(o,null),k&&x(y),y=[$(a,"input",e[108]),$(d,"change",e[112]),$(v,"change",e[112])]},p(e,t){524288&t[0]&&a.value!==e[19]&&(a.value=e[19]),2097152&t[0]&&u!==(u=e[21].ev1)&&(d.checked=u),2097152&t[0]&&f!==(f=e[21].ev0)&&(v.checked=f),e[69].collision_type&&b.p(e,t)},d(e){e&&F(t),e&&F(n),e&&F(l),e&&F(s),e&&F(o),b&&b.d(),x(y)}}}function An(e){let t,n,l,s,o,r,i,a,c=e[69].collision_type[e[212]]+"",p=e[212]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[212],t.value=t.__value,H(t,"class",a="icon_type_"+e[69].iconType[e[212]]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function Rn(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,j,L,C,w,q,P,S,N=e[71].collision_type&&function(e){let t,n,l,s,o=e[72],r=[];for(let t=0;t<o.length;t+=1)r[t]=Zn(wt(e,o,t));return{c(){t=E("div"),n=E("select"),l=E("option"),l.textContent=`\n\t\t\t\t\t\tВсе типы (${e[72].reduce(e[200],0)})\n\t\t\t\t\t`;for(let e=0;e<r.length;e+=1)r[e].c();l.__value="",l.value=l.__value,H(l,"class","svelte-1jsovbn"),H(n,"class","multiple_icon_type svelte-1jsovbn"),n.multiple=!0,void 0===e[27]&&ne(()=>e[201].call(n)),H(t,"class","pLine svelte-1jsovbn")},m(o,i,a){D(o,t,i),z(t,n),z(n,l);for(let e=0;e<r.length;e+=1)r[e].m(n,null);I(n,e[27]),a&&x(s),s=[$(n,"change",e[201]),$(n,"change",e[117])]},p(e,t){if(1536&t[2]){let l;for(o=e[72],l=0;l<o.length;l+=1){const s=wt(e,o,l);r[l]?r[l].p(s,t):(r[l]=Zn(s),r[l].c(),r[l].m(n,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=o.length}134217728&t[0]&&I(n,e[27])},d(e){e&&F(t),T(r,e),x(s)}}}(e);return{c(){t=E("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=M(),l=E("div"),l.innerHTML="Фильтры - <b>ДТП ГИБДД</b>",s=M(),o=E("div"),r=E("div"),i=O("ID ДТП: "),a=E("input"),c=M(),p=E("div"),d=E("input"),_=E("label"),_.textContent="- с батальонами ДПС",h=M(),v=E("input"),m=E("label"),m.textContent="- без батальонов ДПС",g=M(),y=E("div"),b=E("input"),j=E("label"),j.textContent="- с мероприятиями",L=M(),C=E("input"),q=E("label"),q.textContent="- без мероприятий",P=M(),N&&N.c(),H(t,"class","pLine svelte-1jsovbn"),H(l,"class","pLine svelte-1jsovbn"),H(a,"type","text"),a.value=e[19],H(a,"class","svelte-1jsovbn"),H(r,"class","pLine svelte-1jsovbn"),H(d,"type","checkbox"),H(d,"id","Dps1"),d.checked=u=e[20].Dps1,H(d,"name","Dps1"),H(d,"class","svelte-1jsovbn"),H(_,"for","Dps1"),H(_,"class","svelte-1jsovbn"),H(v,"type","checkbox"),H(v,"id","Dps0"),v.checked=f=e[20].Dps0,H(v,"name","Dps0"),H(v,"class","svelte-1jsovbn"),H(m,"for","Dps0"),H(m,"class","svelte-1jsovbn"),H(p,"class","pLine svelte-1jsovbn"),H(b,"type","checkbox"),H(b,"id","ev1"),b.checked=k=e[21].ev1,H(b,"name","ev1"),H(b,"class","svelte-1jsovbn"),H(j,"for","ev1"),H(j,"class","svelte-1jsovbn"),H(C,"type","checkbox"),H(C,"id","ev0"),C.checked=w=e[21].ev0,H(C,"name","ev0"),H(C,"class","svelte-1jsovbn"),H(q,"for","ev0"),H(q,"class","svelte-1jsovbn"),H(y,"class","pLine svelte-1jsovbn"),H(o,"class","filtersCont svelte-1jsovbn")},m(u,f,k){D(u,t,f),D(u,n,f),D(u,l,f),D(u,s,f),D(u,o,f),z(o,r),z(r,i),z(r,a),z(o,c),z(o,p),z(p,d),z(p,_),z(p,h),z(p,v),z(p,m),z(o,g),z(o,y),z(y,b),z(y,j),z(y,L),z(y,C),z(y,q),z(o,P),N&&N.m(o,null),k&&x(S),S=[$(a,"input",e[108]),$(d,"change",e[111]),$(v,"change",e[111]),$(b,"change",e[112]),$(C,"change",e[112])]},p(e,t){524288&t[0]&&a.value!==e[19]&&(a.value=e[19]),1048576&t[0]&&u!==(u=e[20].Dps1)&&(d.checked=u),1048576&t[0]&&f!==(f=e[20].Dps0)&&(v.checked=f),2097152&t[0]&&k!==(k=e[21].ev1)&&(b.checked=k),2097152&t[0]&&w!==(w=e[21].ev0)&&(C.checked=w),e[71].collision_type&&N.p(e,t)},d(e){e&&F(t),e&&F(n),e&&F(l),e&&F(s),e&&F(o),N&&N.d(),x(S)}}}function Zn(e){let t,n,l,s,o,r,i,a,c=e[71].collision_type[e[212]]+"",p=e[212]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[212],t.value=t.__value,H(t,"class",a="icon_type_"+e[71].iconType[e[212]]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function Yn(e){let t,n,l,s,o,r,i,a,c,p,d=e[75].collision_type&&function(e){let t,n,l,s,o=e[76],r=[];for(let t=0;t<o.length;t+=1)r[t]=Vn(Ct(e,o,t));return{c(){t=E("div"),n=E("select"),l=E("option"),l.textContent=`\n\t\t\t\t\t\tВсе типы (${e[76].reduce(e[202],0)})\n\t\t\t\t\t`;for(let e=0;e<r.length;e+=1)r[e].c();l.__value="",l.value=l.__value,H(l,"class","svelte-1jsovbn"),H(n,"class","multiple_icon_type svelte-1jsovbn"),n.multiple=!0,void 0===e[27]&&ne(()=>e[203].call(n)),H(t,"class","pLine svelte-1jsovbn")},m(o,i,a){D(o,t,i),z(t,n),z(n,l);for(let e=0;e<r.length;e+=1)r[e].m(n,null);I(n,e[27]),a&&x(s),s=[$(n,"change",e[203]),$(n,"change",e[118])]},p(e,t){if(24576&t[2]){let l;for(o=e[76],l=0;l<o.length;l+=1){const s=Ct(e,o,l);r[l]?r[l].p(s,t):(r[l]=Vn(s),r[l].c(),r[l].m(n,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=o.length}134217728&t[0]&&I(n,e[27])},d(e){e&&F(t),T(r,e),x(s)}}}(e);return{c(){t=E("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=M(),l=E("div"),l.innerHTML="Фильтры - <b>ДТП ГИБДД (Ленинградская область)</b>",s=M(),o=E("div"),r=E("div"),i=O("ID ДТП: "),a=E("input"),c=M(),d&&d.c(),H(t,"class","pLine svelte-1jsovbn"),H(l,"class","pLine svelte-1jsovbn"),H(a,"type","text"),a.value=e[19],H(a,"class","svelte-1jsovbn"),H(r,"class","pLine svelte-1jsovbn"),H(o,"class","filtersCont svelte-1jsovbn")},m(u,_,h){D(u,t,_),D(u,n,_),D(u,l,_),D(u,s,_),D(u,o,_),z(o,r),z(r,i),z(r,a),z(o,c),d&&d.m(o,null),h&&p(),p=$(a,"input",e[108])},p(e,t){524288&t[0]&&a.value!==e[19]&&(a.value=e[19]),e[75].collision_type&&d.p(e,t)},d(e){e&&F(t),e&&F(n),e&&F(l),e&&F(s),e&&F(o),d&&d.d(),p()}}}function Vn(e){let t,n,l,s,o,r,i,a,c=e[75].collision_type[e[212]]+"",p=e[212]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[212],t.value=t.__value,H(t,"class",a="icon_type_"+e[75].iconType[e[212]]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function Wn(e){let t,n,l,s,o,r,i,a,c,p,d=e[73].collision_type&&function(e){let t,n,l,s,o=e[74],r=[];for(let t=0;t<o.length;t+=1)r[t]=Kn(Lt(e,o,t));return{c(){t=E("div"),n=E("select"),l=E("option"),l.textContent=`\n\t\t\t\t\t\tВсе типы (${e[74].reduce(e[204],0)})\n\t\t\t\t\t`;for(let e=0;e<r.length;e+=1)r[e].c();l.__value="",l.value=l.__value,H(l,"class","svelte-1jsovbn"),H(n,"class","multiple_icon_type svelte-1jsovbn"),n.multiple=!0,void 0===e[27]&&ne(()=>e[205].call(n)),H(t,"class","pLine svelte-1jsovbn")},m(o,i,a){D(o,t,i),z(t,n),z(n,l);for(let e=0;e<r.length;e+=1)r[e].m(n,null);I(n,e[27]),a&&x(s),s=[$(n,"change",e[205]),$(n,"change",e[119])]},p(e,t){if(6144&t[2]){let l;for(o=e[74],l=0;l<o.length;l+=1){const s=Lt(e,o,l);r[l]?r[l].p(s,t):(r[l]=Kn(s),r[l].c(),r[l].m(n,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=o.length}134217728&t[0]&&I(n,e[27])},d(e){e&&F(t),T(r,e),x(s)}}}(e);return{c(){t=E("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=M(),l=E("div"),l.innerHTML="Фильтры - <b>ДТП ГИБДД (Санкт-Петербург)</b>",s=M(),o=E("div"),r=E("div"),i=O("ID ДТП: "),a=E("input"),c=M(),d&&d.c(),H(t,"class","pLine svelte-1jsovbn"),H(l,"class","pLine svelte-1jsovbn"),H(a,"type","text"),a.value=e[19],H(a,"class","svelte-1jsovbn"),H(r,"class","pLine svelte-1jsovbn"),H(o,"class","filtersCont svelte-1jsovbn")},m(u,_,h){D(u,t,_),D(u,n,_),D(u,l,_),D(u,s,_),D(u,o,_),z(o,r),z(r,i),z(r,a),z(o,c),d&&d.m(o,null),h&&p(),p=$(a,"input",e[108])},p(e,t){524288&t[0]&&a.value!==e[19]&&(a.value=e[19]),e[73].collision_type&&d.p(e,t)},d(e){e&&F(t),e&&F(n),e&&F(l),e&&F(s),e&&F(o),d&&d.d(),p()}}}function Kn(e){let t,n,l,s,o,r,i,a,c=e[73].collision_type[e[212]]+"",p=e[212]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[212],t.value=t.__value,H(t,"class",a="icon_type_"+e[73].iconType[e[212]]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function Jn(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g=e[79].collision_type&&function(e){let t,n,l,s,o=e[80],r=[];for(let t=0;t<o.length;t+=1)r[t]=Xn(jt(e,o,t));return{c(){t=E("div"),n=E("select"),l=E("option"),l.textContent=`\n\t\t\t\t\t\tВсе типы (${e[80].reduce(e[208],0)})\n\t\t\t\t\t`;for(let e=0;e<r.length;e+=1)r[e].c();l.__value="",l.value=l.__value,H(l,"class","svelte-1jsovbn"),H(n,"class","multiple_icon_type svelte-1jsovbn"),n.multiple=!0,void 0===e[28]&&ne(()=>e[209].call(n)),H(t,"class","pLine svelte-1jsovbn")},m(o,i,a){D(o,t,i),z(t,n),z(n,l);for(let e=0;e<r.length;e+=1)r[e].m(n,null);I(n,e[28]),a&&x(s),s=[$(n,"change",e[209]),$(n,"change",e[116])]},p(e,t){if(393216&t[2]){let l;for(o=e[80],l=0;l<o.length;l+=1){const s=jt(e,o,l);r[l]?r[l].p(s,t):(r[l]=Xn(s),r[l].c(),r[l].m(n,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=o.length}268435456&t[0]&&I(n,e[28])},d(e){e&&F(t),T(r,e),x(s)}}}(e);return{c(){t=E("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=M(),l=E("div"),l.innerHTML="Фильтры - <b>ДТП ГИБДД + Рубежи</b>",s=M(),o=E("div"),r=O("ID ДТП: "),i=E("input"),a=M(),c=E("div"),p=E("input"),d=E("label"),d.textContent="- с рубежами",u=M(),_=E("input"),h=E("label"),h.textContent="- без рубежей",v=M(),f=E("div"),g&&g.c(),H(t,"class","pLine svelte-1jsovbn"),H(l,"class","pLine svelte-1jsovbn"),H(i,"type","text"),i.value=e[19],H(i,"class","svelte-1jsovbn"),H(o,"class","pLine svelte-1jsovbn"),H(p,"type","checkbox"),H(p,"name","list_rubOn"),H(p,"class","svelte-1jsovbn"),H(d,"for","list_rubOn"),H(d,"class","svelte-1jsovbn"),H(_,"type","checkbox"),H(_,"name","list_rubOff"),H(_,"class","svelte-1jsovbn"),H(h,"for","list_rubOff"),H(h,"class","svelte-1jsovbn"),H(c,"class","pLine svelte-1jsovbn"),H(f,"class","filtersCont svelte-1jsovbn")},m(y,b,k){D(y,t,b),D(y,n,b),D(y,l,b),D(y,s,b),D(y,o,b),z(o,r),z(o,i),D(y,a,b),D(y,c,b),z(c,p),p.checked=e[42],z(c,d),z(c,u),z(c,_),_.checked=e[43],z(c,h),D(y,v,b),D(y,f,b),g&&g.m(f,null),k&&x(m),m=[$(i,"input",e[108]),$(p,"change",e[206]),$(p,"change",e[116]),$(_,"change",e[207]),$(_,"change",e[116])]},p(e,t){524288&t[0]&&i.value!==e[19]&&(i.value=e[19]),2048&t[1]&&(p.checked=e[42]),4096&t[1]&&(_.checked=e[43]),e[79].collision_type&&g.p(e,t)},d(e){e&&F(t),e&&F(n),e&&F(l),e&&F(s),e&&F(o),e&&F(a),e&&F(c),e&&F(v),e&&F(f),g&&g.d(),x(m)}}}function Xn(e){let t,n,l,s,o,r,i,a,c=e[79].collision_type[e[212]]+"",p=e[212]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[212],t.value=t.__value,H(t,"class",a="icon_type_"+e[79].iconType[e[212]]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function Qn(e){let t,n,l,s,o,r,i,a,c,p,d,u;return{c(){t=E("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=M(),l=E("div"),l.innerHTML="Фильтры - <b>Рубежей</b>",s=M(),o=E("div"),r=E("div"),i=E("input"),a=E("label"),a.textContent="- есть комплексы",c=M(),p=E("input"),d=E("label"),d.textContent="-  нет комплексов",H(t,"class","pLine svelte-1jsovbn"),H(l,"class","pLine svelte-1jsovbn"),H(i,"type","checkbox"),H(i,"name","comp1"),H(i,"class","svelte-1jsovbn"),H(a,"for","comp1"),H(a,"class","svelte-1jsovbn"),H(p,"type","checkbox"),H(p,"name","comp"),H(p,"class","svelte-1jsovbn"),H(d,"for","comp"),H(d,"class","svelte-1jsovbn"),H(r,"class","pLine svelte-1jsovbn"),H(o,"class","filtersCont")},m(_,h,v){D(_,t,h),D(_,n,h),D(_,l,h),D(_,s,h),D(_,o,h),z(o,r),z(r,i),i.checked=e[33],z(r,a),z(r,c),z(r,p),p.checked=e[34],z(r,d),v&&x(u),u=[$(i,"change",e[210]),$(i,"change",e[102]),$(p,"change",e[211]),$(p,"change",e[102])]},p(e,t){4&t[1]&&(i.checked=e[33]),8&t[1]&&(p.checked=e[34])},d(e){e&&F(t),e&&F(n),e&&F(l),e&&F(s),e&&F(o),x(u)}}}function el(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,b=e[11]._map&&e[11]._opt&&e[11]._opt.years&&en(e),k=e[0]._map&&e[0]._opt&&e[0]._opt.years&&ln(e),x=e[1]._map&&e[1]._opt&&e[1]._opt.years&&rn(e),j=e[2]._map&&e[2]._opt&&e[2]._opt.years&&pn(e),L=e[3]._map&&e[3]._opt&&e[3]._opt.years&&_n(e),C=e[4]._map&&e[4]._opt&&e[4]._opt.years&&fn(e),w=e[14]._map&&e[14]._opt&&e[14]._opt.years&&yn(e),T=e[15]._map&&e[15]._opt&&e[15]._opt.years&&Ln(e),O=e[16]._map&&e[16]._opt&&e[16]._opt.years&&Fn(e);function q(e,t){return e[5]._map||e[6]._map||e[10]._map||e[9]._map||e[7]._map||e[8]._map||e[13]._map?$n:e[13]._map||e[1]._map||e[16]._map||e[14]._map||e[15]._map||e[0]._map||e[2]._map||e[4]._map||e[3]._map||e[12]._map?void 0:qn}let $=q(e),P=$&&$(e),S=e[13]._map&&Hn(e),N=e[5]._map&&Nn(e),B=e[6]._map&&Un(e),G=e[7]._map&&Rn(e),I=e[10]._map&&Yn(e),U=e[9]._map&&Wn(e),A=e[8]._map&&Jn(e),R=e[12]._map&&Qn(e);return{c(){t=E("div"),b&&b.c(),n=M(),k&&k.c(),l=M(),x&&x.c(),s=M(),j&&j.c(),o=M(),L&&L.c(),r=M(),C&&C.c(),i=M(),w&&w.c(),a=M(),T&&T.c(),c=M(),O&&O.c(),p=M(),P&&P.c(),d=M(),S&&S.c(),u=M(),N&&N.c(),_=M(),B&&B.c(),h=M(),G&&G.c(),v=M(),I&&I.c(),f=M(),U&&U.c(),m=M(),A&&A.c(),g=M(),R&&R.c(),H(t,"class","mvsFilters")},m(e,y){D(e,t,y),b&&b.m(t,null),z(t,n),k&&k.m(t,null),z(t,l),x&&x.m(t,null),z(t,s),j&&j.m(t,null),z(t,o),L&&L.m(t,null),z(t,r),C&&C.m(t,null),z(t,i),w&&w.m(t,null),z(t,a),T&&T.m(t,null),z(t,c),O&&O.m(t,null),z(t,p),P&&P.m(t,null),z(t,d),S&&S.m(t,null),z(t,u),N&&N.m(t,null),z(t,_),B&&B.m(t,null),z(t,h),G&&G.m(t,null),z(t,v),I&&I.m(t,null),z(t,f),U&&U.m(t,null),z(t,m),A&&A.m(t,null),z(t,g),R&&R.m(t,null)},p(e,y){e[11]._map&&e[11]._opt&&e[11]._opt.years?b?b.p(e,y):(b=en(e),b.c(),b.m(t,n)):b&&(b.d(1),b=null),e[0]._map&&e[0]._opt&&e[0]._opt.years?k?k.p(e,y):(k=ln(e),k.c(),k.m(t,l)):k&&(k.d(1),k=null),e[1]._map&&e[1]._opt&&e[1]._opt.years?x?x.p(e,y):(x=rn(e),x.c(),x.m(t,s)):x&&(x.d(1),x=null),e[2]._map&&e[2]._opt&&e[2]._opt.years?j?j.p(e,y):(j=pn(e),j.c(),j.m(t,o)):j&&(j.d(1),j=null),e[3]._map&&e[3]._opt&&e[3]._opt.years?L?L.p(e,y):(L=_n(e),L.c(),L.m(t,r)):L&&(L.d(1),L=null),e[4]._map&&e[4]._opt&&e[4]._opt.years?C?C.p(e,y):(C=fn(e),C.c(),C.m(t,i)):C&&(C.d(1),C=null),e[14]._map&&e[14]._opt&&e[14]._opt.years?w?w.p(e,y):(w=yn(e),w.c(),w.m(t,a)):w&&(w.d(1),w=null),e[15]._map&&e[15]._opt&&e[15]._opt.years?T?T.p(e,y):(T=Ln(e),T.c(),T.m(t,c)):T&&(T.d(1),T=null),e[16]._map&&e[16]._opt&&e[16]._opt.years?O?O.p(e,y):(O=Fn(e),O.c(),O.m(t,p)):O&&(O.d(1),O=null),$===($=q(e))&&P?P.p(e,y):(P&&P.d(1),P=$&&$(e),P&&(P.c(),P.m(t,d))),e[13]._map?S?S.p(e,y):(S=Hn(e),S.c(),S.m(t,u)):S&&(S.d(1),S=null),e[5]._map?N?N.p(e,y):(N=Nn(e),N.c(),N.m(t,_)):N&&(N.d(1),N=null),e[6]._map?B?B.p(e,y):(B=Un(e),B.c(),B.m(t,h)):B&&(B.d(1),B=null),e[7]._map?G?G.p(e,y):(G=Rn(e),G.c(),G.m(t,v)):G&&(G.d(1),G=null),e[10]._map?I?I.p(e,y):(I=Yn(e),I.c(),I.m(t,f)):I&&(I.d(1),I=null),e[9]._map?U?U.p(e,y):(U=Wn(e),U.c(),U.m(t,m)):U&&(U.d(1),U=null),e[8]._map?A?A.p(e,y):(A=Jn(e),A.c(),A.m(t,g)):A&&(A.d(1),A=null),e[12]._map?R?R.p(e,y):(R=Qn(e),R.c(),R.m(t,null)):R&&(R.d(1),R=null)},i:y,o:y,d(e){e&&F(t),b&&b.d(),k&&k.d(),x&&x.d(),j&&j.d(),L&&L.d(),C&&C.d(),w&&w.d(),T&&T.d(),O&&O.d(),P&&P.d(),S&&S.d(),N&&N.d(),B&&B.d(),G&&G.d(),I&&I.d(),U&&U.d(),A&&A.d(),R&&R.d()}}}function tl(e,t,n){let{DtpHearthsPicket4:l}=t,{DtpHearthsSettlements:s}=t,{DtpHearthsPicket:o}=t,{DtpHearths5:r}=t,{DtpHearths3:i}=t,{DtpHearthsStat:a}=t,{DtpHearthsTmp:c}=t,{DtpHearths:p}=t,{DtpVerifyed:d}=t,{DtpSkpdi:u}=t,{DtpGibdd:_}=t,{DtpGibddRub:h}=t,{DtpGibddSpt:v}=t,{DtpGibddLo:f}=t,{DtpHearthsLo:m}=t,{Rub:g}=t,{Measures:y}=t,{control:b}=t;y||(y={}),g||(g={}),h||(h={}),l||(l={}),o||(o={}),s||(s={}),r||(r={}),i||(i={}),m||(m={}),f||(f={}),v||(v={});let k,x,j=0;const C=new Date,w=new Date(new Date(C.getFullYear(),C.getMonth(),C.getDate()).getTime()),z=C,D=new Date(2019,0,1);let F,T,E,O=b._id_dtp||null,M=b._dateInterval||[D.getTime()/1e3,z.getTime()/1e3],q=d._opt||{},$=q.collision_type?Object.keys(q.collision_type).sort((e,t)=>q.collision_type[t]-q.collision_type[e]):[],P=u._opt||{},H=P.collision_type?Object.keys(P.collision_type).sort((e,t)=>P.collision_type[t]-P.collision_type[e]):[],N=_._opt||{},B=N.collision_type?Object.keys(N.collision_type).sort((e,t)=>N.collision_type[t]-N.collision_type[e]):[],G=v._opt||{},I=G.collision_type?Object.keys(G.collision_type).sort((e,t)=>G.collision_type[t]-G.collision_type[e]):[],R=f._opt||{},Z=R.collision_type?Object.keys(R.collision_type).sort((e,t)=>R.collision_type[t]-R.collision_type[e]):[],V=(m||{})._opt||{},W=V.road?Object.keys(V.road).sort((e,t)=>V.road[t]-V.road[e]):[],K={Dps1:!0,Dps0:!0},X={ev1:!0,ev0:!0},Q=(h||{})._opt||{},ee=Q.collision_type?Object.keys(Q.collision_type).sort((e,t)=>Q.collision_type[t]-Q.collision_type[e]):[],te=(p||{})._opt||{},ne=te.str_icon_type?Object.keys(te.str_icon_type).sort((e,t)=>te.str_icon_type[t]-te.str_icon_type[e]):[],le=(c||{})._opt||{},se=le.str_icon_type?Object.keys(le.str_icon_type).sort((e,t)=>le.str_icon_type[t]-le.str_icon_type[e]):[],oe=(a||{})._opt||{},re=oe.str_icon_type?Object.keys(oe.str_icon_type).sort((e,t)=>oe.str_icon_type[t]-oe.str_icon_type[e]):[],ie=(i||{})._opt||{},ae=ie.str_icon_type?Object.keys(ie.str_icon_type).sort((e,t)=>ie.str_icon_type[t]-ie.str_icon_type[e]):[],ce=(r||{})._opt||{},pe=ce.str_icon_type?Object.keys(ce.str_icon_type).sort((e,t)=>ce.str_icon_type[t]-ce.str_icon_type[e]):[],de=(s||{})._opt||{},ue=de.road?Object.keys(de.road).sort((e,t)=>de.road[t]-de.road[e]):[],_e=(o||{})._opt||{},he=_e.road?Object.keys(_e.road).sort((e,t)=>_e.road[t]-_e.road[e]):[],ve=(l||{})._opt||{},fe=ve.road?Object.keys(ve.road).sort((e,t)=>ve.road[t]-ve.road[e]):[],me=y._opt||{},ge=me.type?Object.keys(me.type).sort((e,t)=>me.type[t]-me.type[e]):[],ye=[""],be={hearth3:!0,hearth5:!0},ke=null,xe=[""],je=[""],Le=[""],Ce=[""],we={radius:19,blur:11.26,minOpacity:.34},ze=we.radius,De=11.26,Fe=.34,Te=h._map&&h._needHeat||d._map&&d._needHeat||u._map&&u._needHeat||_._map&&_._needHeat||v&&v._map&&v._needHeat||f&&f._map&&f._needHeat,Ee=g&&g._argFilters?g._argFilters[0]:{type:"comp",zn:{on:!0,off:!0}},Oe=Ee.zn.on,Me=Ee.zn.off,qe=[];const $e=()=>{if(y._map){let e=[];qe.length&&e.push({type:"measures_type",zn:qe}),M&&e.push({type:"date",zn:M}),y.setFilter(e)}};let Pe={};Object.keys(de.years||{}).sort().forEach(e=>{n(36,Pe[e]=!0,Pe)});let He={0:!0,1:!0,2:!0};const Se=e=>{if(s._map){if(e){let t=e.target||{},l=t.checked,s=t.id,o=t.name;"stricken"!==s&&n(36,Pe[o]=l,Pe)}let t=[{type:"year",zn:Pe}];He&&t.push({type:"city",zn:He}),O&&t.push({type:"id_dtp",zn:O}),ke&&t.push({type:"id_hearth",zn:ke}),ye&&t.push({type:"roads",zn:ye}),t.push({type:"ht",zn:be}),s.setFilter(t)}};let Ne={};Object.keys(V.years||{}).sort().forEach(e=>{n(38,Ne[e]=!0,Ne)});const Be=e=>{if(m._map){if(e){let t=e.target||{},l=t.checked,s=t.id,o=t.name;"stricken"!==s&&n(38,Ne[o]=l,Ne)}let t=[{type:"year",zn:Ne}];O&&t.push({type:"id_dtp",zn:O}),ke&&t.push({type:"id_hearth",zn:ke}),ye&&t.push({type:"roads",zn:ye}),t.push({type:"ht",zn:be}),m.setFilter(t)}};let Ge={};Object.keys(_e.years||{}).sort().forEach(e=>{n(39,Ge[e]=!0,Ge)});const Ie=e=>{if(o._map){if(e){let t=e.target||{},l=t.checked,s=t.id,o=t.name;"stricken"!==s&&n(39,Ge[o]=l,Ge)}let t=[{type:"year",zn:Ge}];O&&t.push({type:"id_dtp",zn:O}),ke&&t.push({type:"id_hearth",zn:ke}),ye&&t.push({type:"roads",zn:ye}),t.push({type:"ht",zn:be}),o.setFilter(t)}};let Ue,Ae={};Object.keys(ve.years||{}).sort().forEach(e=>{n(41,Ae[e]=!0,Ae)});const Re=e=>{if(l._map){if(e){let t=e.target||{},l=t.checked,s=t.id,o=t.name;"stricken"!==s&&n(41,Ae[o]=l,Ae)}let t=[];O&&t.push({type:"id_dtp",zn:O}),Ue&&t.push({type:"stricken",zn:Number(Ue)}),1===bt&&t.push({type:"year",zn:Ae}),ke&&t.push({type:"id_hearth",zn:ke}),ye&&t.push({type:"roads",zn:ye}),t.push({type:"ht",zn:be}),l.setFilter(t)}},Ze=()=>{Be(),Re(),Se(),Ie(),ct({}),ft({}),Ht({}),Tt({}),jt({}),tt(),Xe(),et(),Qe(),Je(),$e(),Ye()},Ye=()=>{if(d._map){let e=[{type:"evnt",zn:X},{type:"itemType",zn:j}];O&&e.push({type:"id_dtp",zn:O}),M&&(n(129,b._dateInterval=M,b),e.push({type:"date",zn:M})),xe&&e.push({type:"collision_type",zn:xe}),d.setFilter(e)}};let Ve=h._argFilters&&h._argFilters.length?h._argFilters[0]:{type:"list_rub",zn:{on:!0,off:!0}},We=Ve.zn.on,Ke=Ve.zn.off;const Je=()=>{if(h._map){let e=[{type:"list_rub",zn:{on:We,off:Ke}}];O&&e.push({type:"id_dtp",zn:O}),M&&e.push({type:"date",zn:M}),Ce&&e.push({type:"collision_type",zn:Ce}),h.setFilter(e)}},Xe=()=>{if(_._map){let e=[{type:"dps",zn:K},{type:"evnt",zn:X}];O&&e.push({type:"id_dtp",zn:O}),M&&e.push({type:"date",zn:M}),Le&&e.push({type:"collision_type",zn:Le}),_.setFilter(e)}},Qe=()=>{if(f._map){let e=[];O&&e.push({type:"id_dtp",zn:O}),M&&e.push({type:"date",zn:M}),Le&&e.push({type:"collision_type",zn:Le}),f.setFilter(e)}},et=()=>{if(v._map){let e=[];O&&e.push({type:"id_dtp",zn:O}),M&&e.push({type:"date",zn:M}),Le&&e.push({type:"collision_type",zn:Le}),v.setFilter(e)}},tt=()=>{if(u._map){let e=[{type:"evnt",zn:X}];O&&e.push({type:"id_dtp",zn:O}),M&&e.push({type:"date",zn:M}),je&&e.push({type:"collision_type",zn:je}),u.setFilter(e)}};var nt;nt=()=>{let e={onSelect(e){this._o.field.value=this.toString(),M[this._o._dint]=this.getDate().getTime()/1e3+24*this._o._dint*60*60,Ye(),tt(),Xe(),Qe(),et(),$e(),Je()},toString(e,t){let n=e.getDate();n<10&&(n="0"+n);let l=e.getMonth()+1;return l<10&&(l="0"+l),`${n}.${l}.${e.getFullYear()}`},parse(e,t){const n=e.split("."),l=parseInt(n[0],10),s=parseInt(n[1],10)-1,o=parseInt(n[2],10);return new Date(o,s,l)},i18n:{previousMonth:"Предыдущий месяц",nextMonth:"Следующий месяц",months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],weekdays:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],weekdaysShort:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]},format:"DD.MM.YYYY",setDefaultDate:!0,yearRange:20,blurFieldOnSelect:!1};F=new Pikaday(L.extend({},e,{_dint:0,field:k,defaultDate:new Date(1e3*M[0])})),T=new Pikaday(L.extend({},e,{_dint:1,field:x,defaultDate:new Date(1e3*M[1])})),Ze()},Y().$$.on_mount.push(nt);let lt,st,ot=[""],rt=1,it={},at={};Object.keys(ce.years||{}).sort().forEach(e=>{n(47,it[e]=!0,it),Object.keys(ce.years[e]).sort().forEach(t=>{st={},st[e]={},st[e][t]=!0})}),at=st||{};const ct=e=>{if(r._map){let t=[],l=e.target||{},s=l.checked,o=l.id,i=l.name;if("hearths_period_type_52"===o)n(46,rt=2);else if("hearths_period_type_51"===o)n(46,rt=1);else if("hearths_year_5"===o)s?n(47,it[i]=!0,it):delete it[i];else if("hearths_quarter_5"===o){let e=i.split("_");s?(at[e[0]]||(at[e[0]]={}),at[e[0]][e[1]]=!0):(at[e[0]]&&delete at[e[0]][e[1]],0===Object.keys(at[e[0]]).length&&delete at[e[0]])}1===rt?t.push({type:"year",zn:it}):2===rt&&t.push({type:"quarter",zn:at}),lt&&t.push({type:"stricken",zn:Number(lt)}),ot.length>0&&ot[0]&&t.push({type:"str_icon_type",zn:ot}),O&&t.push({type:"id_dtp",zn:O}),r.setFilter(t)}};let pt,dt,ut=[""],_t=1,ht={},vt={};Object.keys(ie.years||{}).sort().forEach(e=>{n(51,ht[e]=!0,ht),Object.keys(ie.years[e]).sort().forEach(t=>{dt={},dt[e]={},dt[e][t]=!0})}),vt=dt||{};const ft=e=>{if(i._map){let t=[],l=e.target||{},s=l.checked,o=l.id,r=l.name;if("hearths_period_type_32"===o)n(50,_t=2);else if("hearths_period_type_31"===o)n(50,_t=1);else if("hearths_year_3"===o)s?n(51,ht[r]=!0,ht):delete ht[r];else if("hearths_quarter_3"===o){let e=r.split("_");s?(vt[e[0]]||(vt[e[0]]={}),vt[e[0]][e[1]]=!0):(vt[e[0]]&&delete vt[e[0]][e[1]],0===Object.keys(vt[e[0]]).length&&delete vt[e[0]])}1===_t?t.push({type:"year",zn:ht}):2===_t&&t.push({type:"quarter",zn:vt}),pt&&t.push({type:"stricken",zn:Number(pt)}),ut.length>0&&ut[0]&&t.push({type:"str_icon_type",zn:ut}),O&&t.push({type:"id_dtp",zn:O}),i.setFilter(t)}};let mt,gt,yt=[""],bt=1,kt={},xt={};Object.keys(oe.years||{}).sort().forEach(e=>{n(55,kt[e]=!0,kt),Object.keys(oe.years[e]).sort().forEach(t=>{gt={},gt[e]={},gt[e][t]=!0})}),xt=gt||{};const jt=e=>{if(a._map){let t=[],l=e.target||{},s=l.checked,o=l.id,r=l.name;if("hearths_period_type_Stat2"===o)n(54,bt=2);else if("hearths_period_type_Stat1"===o)n(54,bt=1);else if("hearths_year_Stat"===o)s?n(55,kt[r]=!0,kt):delete kt[r];else if("hearths_quarter_Stat"===o){let e=r.split("_");s?(xt[e[0]]||n(56,xt[e[0]]={},xt),n(56,xt[e[0]][e[1]]=!0,xt)):(xt[e[0]]&&delete xt[e[0]][e[1]],0===Object.keys(xt[e[0]]).length&&delete xt[e[0]])}1===bt?t.push({type:"year",zn:kt}):2===bt&&t.push({type:"quarter",zn:xt}),mt&&t.push({type:"stricken",zn:Number(mt)}),yt.length>0&&yt[0]&&t.push({type:"str_icon_type",zn:yt}),O&&t.push({type:"id_dtp",zn:O}),a.setFilter(t)}};let Lt,Ct,wt=[""],zt=1,Dt={},Ft={};Object.keys(le.years||{}).sort().forEach(e=>{n(60,Dt[e]=!0,Dt),Object.keys(le.years[e]).sort().forEach(t=>{Ct={},Ct[e]={},Ct[e][t]=!0})}),Ft=Ct||{};const Tt=e=>{if(c._map){let t=[],l=e.target||{},s=l.checked,o=l.id,r=l.name;if("hearths_period_type_tmp2"===o)n(59,zt=2);else if("hearths_period_type_tmp1"===o)n(59,zt=1);else if("hearths_year_tmp"===o)s?n(60,Dt[r]=!0,Dt):delete Dt[r];else if("hearths_quarter_tmp"===o){let e=r.split("_");s?(Ft[e[0]]||n(61,Ft[e[0]]={},Ft),n(61,Ft[e[0]][e[1]]=!0,Ft)):(Ft[e[0]]&&delete Ft[e[0]][e[1]],0===Object.keys(Ft[e[0]]).length&&delete Ft[e[0]])}1===zt?t.push({type:"year",zn:Dt}):2===zt&&t.push({type:"quarter",zn:Ft}),Lt&&t.push({type:"stricken",zn:Number(Lt)}),wt.length>0&&wt[0]&&t.push({type:"str_icon_type",zn:wt}),O&&t.push({type:"id_dtp",zn:O}),c.setFilter(t)}};let Et,Ot,Mt=[""],qt=1,$t={},Pt={};Object.keys(te.years||{}).sort().forEach(e=>{n(65,$t[e]=!0,$t),Object.keys(te.years[e]).sort().forEach(t=>{Ot={},Ot[e]={},Ot[e][t]=!0})}),Pt=Ot||{};const Ht=e=>{if(p._map){let t=[],l=e.target||{},s=l.checked,o=l.id,r=l.name;if("hearths_period_type2"===o)n(64,qt=2);else if("hearths_period_type1"===o)n(64,qt=1);else if("hearths_year"===o)s?n(65,$t[r]=!0,$t):delete $t[r];else if("hearths_quarter"===o){let e=r.split("_");s?(Pt[e[0]]||n(66,Pt[e[0]]={},Pt),n(66,Pt[e[0]][e[1]]=!0,Pt)):(Pt[e[0]]&&delete Pt[e[0]][e[1]],0===Object.keys(Pt[e[0]]).length&&delete Pt[e[0]])}1===qt?t.push({type:"year",zn:$t}):2===qt&&t.push({type:"quarter",zn:Pt}),Et&&t.push({type:"stricken",zn:Number(Et)}),Mt.length>0&&Mt[0]&&t.push({type:"str_icon_type",zn:Mt}),O&&t.push({type:"id_dtp",zn:O}),p.setFilter(t)}};return e.$set=e=>{"DtpHearthsPicket4"in e&&n(0,l=e.DtpHearthsPicket4),"DtpHearthsSettlements"in e&&n(1,s=e.DtpHearthsSettlements),"DtpHearthsPicket"in e&&n(2,o=e.DtpHearthsPicket),"DtpHearths5"in e&&n(3,r=e.DtpHearths5),"DtpHearths3"in e&&n(4,i=e.DtpHearths3),"DtpHearthsStat"in e&&n(14,a=e.DtpHearthsStat),"DtpHearthsTmp"in e&&n(15,c=e.DtpHearthsTmp),"DtpHearths"in e&&n(16,p=e.DtpHearths),"DtpVerifyed"in e&&n(5,d=e.DtpVerifyed),"DtpSkpdi"in e&&n(6,u=e.DtpSkpdi),"DtpGibdd"in e&&n(7,_=e.DtpGibdd),"DtpGibddRub"in e&&n(8,h=e.DtpGibddRub),"DtpGibddSpt"in e&&n(9,v=e.DtpGibddSpt),"DtpGibddLo"in e&&n(10,f=e.DtpGibddLo),"DtpHearthsLo"in e&&n(11,m=e.DtpHearthsLo),"Rub"in e&&n(12,g=e.Rub),"Measures"in e&&n(13,y=e.Measures),"control"in e&&n(129,b=e.control)},[l,s,o,r,i,d,u,_,h,v,f,m,g,y,a,c,p,k,x,O,K,X,ye,be,ke,xe,je,Le,Ce,ze,De,Fe,E,Oe,Me,qe,Pe,He,Ne,Ge,Ue,Ae,We,Ke,lt,ot,rt,it,pt,ut,_t,ht,mt,yt,bt,kt,xt,Lt,wt,zt,Dt,Ft,Et,Mt,qt,$t,Pt,q,$,P,H,N,B,G,I,R,Z,V,W,Q,ee,te,ne,le,se,oe,re,ie,ae,ce,pe,de,ue,_e,he,ve,fe,me,ge,we,Te,$e,e=>{let t=[{type:"comp",zn:{on:Oe,off:Me}}];g.setFilter(t)},Se,Be,Ie,Re,e=>{let t=e.target,l=t.name;n(37,He[l]=t.checked,He),n(129,b.city=He,b),Ze()},e=>{let t=e.target.value;n(19,O=t||null),n(129,b._id_dtp=O,b),Ze()},e=>{let t=e.target.value;n(24,ke=t||null),Be(),Se(),Ie(),Re()},e=>{let t=e.target;n(23,be[t.name]=t.checked,be),Be(),Se(),Ie(),Re()},e=>{let t=e.target;n(20,K[t.name]=t.checked,K),Xe()},e=>{let t=e.target;n(21,X[t.name]=t.checked,X),Xe(),tt(),Ye()},e=>{let t=e.target;n(8,h._needHeat=n(10,f._needHeat=n(9,v._needHeat=n(7,_._needHeat=n(6,u._needHeat=n(5,d._needHeat=!!t.checked&&we,d),u),_),v),f),h),Je(),Xe(),tt(),et(),Qe(),Ye()},()=>{let e={radius:ze,blur:De,minOpacity:Fe};f._heat&&f._heat.setOptions(e),v._heat&&v._heat.setOptions(e),_._heat&&_._heat.setOptions(e),u._heat&&u._heat.setOptions(e),d._heat&&d._heat.setOptions(e)},Ye,Je,Xe,Qe,et,tt,e=>{let t=e.target;j=Number(t.value),Ye()},()=>{let e=T.getDate(),t=F.getDate(),n=e-t;0===n&&(n=864e5),F.setDate(new Date(t.getTime()-n)),T.setDate(new Date(e.getTime()-n)),M=[F.getDate().getTime()/1e3,86400+T.getDate().getTime()/1e3],Ye(),tt(),Xe(),Qe(),et(),Je()},()=>{let e=T.getDate(),t=F.getDate(),n=e-t;0===n&&(n=864e5),F.setDate(new Date(t.getTime()+n)),T.setDate(new Date(e.getTime()+n)),M=[F.getDate().getTime()/1e3,86400+T.getDate().getTime()/1e3],Ye(),tt(),Xe(),Qe(),et(),Je()},ct,ft,jt,Tt,Ht,b,j,M,F,T,at,st,vt,dt,gt,Ct,Ot,C,w,z,D,void 0,void 0,void 0,void 0,void 0,void 0,Ee,Ze,Ve,(e,t)=>e+=V.road[t],function(){ye=A(this),n(22,ye),n(78,W)},function(){bt=this.__value,n(54,bt)},[[],[],[],[],[]],(e,t)=>e+=ve.road[t],function(){ye=A(this),n(22,ye),n(78,W)},function(){Ue=U(this),n(40,Ue)},(e,t)=>e+=de.road[t],function(){ye=A(this),n(22,ye),n(78,W)},(e,t)=>e+=_e.road[t],function(){ye=A(this),n(22,ye),n(78,W)},function(){rt=this.__value,n(46,rt)},(e,t)=>e+=ce.str_icon_type[t],function(){ot=A(this),n(45,ot),n(90,pe)},function(){lt=U(this),n(44,lt)},function(){_t=this.__value,n(50,_t)},(e,t)=>e+=ie.str_icon_type[t],function(){ut=A(this),n(49,ut),n(88,ae)},function(){pt=U(this),n(48,pt)},function(){bt=this.__value,n(54,bt)},function(){bt=this.__value,n(54,bt)},(e,t)=>e+=oe.str_icon_type[t],function(){yt=A(this),n(53,yt),n(86,re)},function(){mt=U(this),n(52,mt)},function(){zt=this.__value,n(59,zt)},function(){zt=this.__value,n(59,zt)},(e,t)=>e+=le.str_icon_type[t],function(){wt=A(this),n(58,wt),n(84,se)},function(){Lt=U(this),n(57,Lt)},function(){qt=this.__value,n(64,qt)},function(){qt=this.__value,n(64,qt)},(e,t)=>e+=te.str_icon_type[t],function(){Mt=A(this),n(63,Mt),n(82,ne)},function(){Et=U(this),n(62,Et)},function(e){J[e?"unshift":"push"](()=>{n(17,k=e)})},function(e){J[e?"unshift":"push"](()=>{n(18,x=e)})},function(){Fe=S(this.value),n(31,Fe)},function(){ze=S(this.value),n(29,ze)},function(){De=S(this.value),n(30,De)},function(e){J[e?"unshift":"push"](()=>{n(32,E=e)})},(e,t)=>e+=me.type[t],function(){qe=A(this),n(35,qe),n(98,ge)},(e,t)=>e+=q.collision_type[t],function(){xe=A(this),n(25,xe),n(68,$)},(e,t)=>e+=P.collision_type[t],function(){je=A(this),n(26,je),n(70,H)},(e,t)=>e+=N.collision_type[t],function(){Le=A(this),n(27,Le),n(72,B)},(e,t)=>e+=R.collision_type[t],function(){Le=A(this),n(27,Le),n(72,B)},(e,t)=>e+=G.collision_type[t],function(){Le=A(this),n(27,Le),n(72,B)},function(){We=this.checked,n(42,We)},function(){Ke=this.checked,n(43,Ke)},(e,t)=>e+=Q.collision_type[t],function(){Ce=A(this),n(28,Ce),n(80,ee)},function(){Oe=this.checked,n(33,Oe)},function(){Me=this.checked,n(34,Me)}]}xt._needHeat={radius:19,blur:11.26,minOpacity:.34},xt.checkZoom=e=>{Object.keys(xt._layers).length?e<12&&xt.setFilter(kt):e>11&&xt.setFilter(kt)},xt.setFilter=e=>{if(!xt._map)return;xt.clearLayers(),kt=e||[];let t=[],n=[];xt._group&&xt._map&&(xt._group.getLayers().forEach(e=>{let l=e.options.props,s=0;kt.forEach(e=>{"itemType"===e.type?(0===e.zn||1===e.zn&&l.id_stat&&l.id_skpdi||2===e.zn&&l.id_skpdi&&!l.id_stat||3===e.zn&&l.id_stat&&!l.id_skpdi)&&s++:"evnt"===e.type?l.event?e.zn.ev1&&s++:e.zn.ev0&&s++:"id_dtp"===e.type?l.id_skpdi!=e.zn&&l.id_stat!=e.zn||s++:"collision_type"===e.type?(""===e.zn[0]||e.zn.filter(e=>e===l.collision_type).length)&&s++:"date"===e.type&&l.date>=e.zn[0]&&l.date<e.zn[1]&&s++}),s===kt.length&&(t.push(e),n.push(e._latlng))}),xt._needHeat?(xt._map.addLayer(xt._heat),xt._heat.setLatLngs(n),xt._heat.setOptions(xt._needHeat),xt._map._zoom>11&&xt.addLayer(yt.layerGroup(t))):(xt.addLayer(yt.layerGroup(t)),xt._map.removeLayer(xt._heat)))},xt.on("remove",()=>{xt._map.removeLayer(xt._heat),xt.clearLayers()}).on("add",e=>{kt=[],xt._heat=yt.heatLayer([],{interactive:!1}),fetch("https://dtp.mvs.group/scripts/index_dev.php?request=get_collision",{}).then(e=>e.json()).then(e=>{let t={collision_type:{},iconType:{},event:{}},n=[],l=e.map(e=>{let l=e.iconType||0,s=[],o=!1,r="#2F4F4F";l&&(o=l%2==0,l>=1&&l<=6?r="#8B4513":7===l||8===l?r="#228B22":l>=9&&l<=14?r="#8B4513":15===l||16===l?r="#7B68EE":17!==l&&18!==l||(r="#2F4F4F")),e.id_skpdi&&s.push({type:"skpdi",id:e.id_skpdi}),e.id_stat&&s.push({type:"gibdd",id:e.id_stat}),e._cur=s,e.lat&&e.lon||(console.log("_______",e),e.lat=e.lon=0);let i=t.event[e.event];i?i++:i=1,t.event[e.event]=i;let a=t.collision_type[e.collision_type];a?a++:a=1,t.collision_type[e.collision_type]=a,t.iconType[e.collision_type]=l;let c=yt.latLng(e.lat,e.lon,o?1:.5);return n.push(c),new g(c,{props:e,radius:6,triangle:s.length>1,box:!!e.id_skpdi,stroke:o,fillColor:r}).bindPopup(bt).on("popupopen",e=>{!function(e){let t=yt.DomUtil.create("div");new gt({target:t,props:{prp:e}}),bt.setContent(t)}(e.target.options.props),e.target.bringToBack()}).on("popupclose",e=>{e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)})});xt.addLayer(xt._heat),xt._heat.setLatLngs(n),xt._heat.setOptions(xt._needHeat),xt._opt=t,xt._group=yt.layerGroup(l),kt?xt.setFilter(kt):xt.addLayer(xt._group),xt.checkZoom(xt._map._zoom),xt._refreshFilters()})});class nl extends ge{constructor(e){super(),me(this,e,tl,el,C,{DtpHearthsPicket4:0,DtpHearthsSettlements:1,DtpHearthsPicket:2,DtpHearths5:3,DtpHearths3:4,DtpHearthsStat:14,DtpHearthsTmp:15,DtpHearths:16,DtpVerifyed:5,DtpSkpdi:6,DtpGibdd:7,DtpGibddRub:8,DtpGibddSpt:9,DtpGibddLo:10,DtpHearthsLo:11,Rub:12,Measures:13,control:129},[-1,-1,-1,-1,-1,-1,-1,-1,-1])}}function ll(e,t,n){const l=e.slice();return l[14]=t[n],l}function sl(e,t,n){const l=e.slice();return l[14]=t[n],l}function ol(e,t,n){const l=e.slice();return l[14]=t[n],l[20]=n,l}function rl(e){let t,n,l,s,o,r,i,a,c,p,d,u=(e[0].piketaj_start_km||0)+"",_=(e[0].piketaj_finish_km||0)+"";return{c(){t=E("tr"),n=E("td"),n.textContent="Пикетаж:",l=M(),s=E("td"),o=O("От: "),r=E("b"),i=O(u),a=O(" км. до: "),c=E("b"),p=O(_),d=O(" км."),H(n,"class","first svelte-mnr9l0")},m(e,u){D(e,t,u),z(t,n),z(t,l),z(t,s),z(s,o),z(s,r),z(r,i),z(s,a),z(s,c),z(c,p),z(s,d)},p(e,t){1&t&&u!==(u=(e[0].piketaj_start_km||0)+"")&&N(i,u),1&t&&_!==(_=(e[0].piketaj_finish_km||0)+"")&&N(p,_)},d(e){e&&F(t)}}}function il(e){let t,n,l,s,o,r=(e[0].str_icon_type||"")+"";return{c(){t=E("tr"),n=E("td"),n.textContent="Тип ДТП:",l=M(),s=E("td"),o=O(r),H(n,"class","first svelte-mnr9l0")},m(e,r){D(e,t,r),z(t,n),z(t,l),z(t,s),z(s,o)},p(e,t){1&t&&r!==(r=(e[0].str_icon_type||"")+"")&&N(o,r)},d(e){e&&F(t)}}}function al(e){let t,n;const l=new gt({props:{prp:e[14],closeMe:e[12]}});return{c(){t=E("div"),_e(l.$$.fragment),H(t,"class","win leaflet-popup-content-wrapper  svelte-mnr9l0")},m(e,s){D(e,t,s),he(l,t,null),n=!0},p(e,t){const n={};1&t&&(n.prp=e[14]),4&t&&(n.closeMe=e[12]),l.$set(n)},i(e){n||(de(l.$$.fragment,e),n=!0)},o(e){ue(l.$$.fragment,e),n=!1},d(e){e&&F(t),ve(l)}}}function cl(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,j,L,C,w,T,q,P,S=Math.floor(e[14].piketaj_m/1e3)+"",B=e[14].piketaj_m%1e3+"",G=new Date(1e3*e[14].date).toLocaleDateString()+"",I=e[14].lost+"",U=e[14].stricken+"",A=e[14].address+"";function R(...t){return e[10](e[20],...t)}function Z(...t){return e[11](e[20],...t)}let Y=e[2]===e[20]&&al(e);return{c(){t=E("tr"),n=E("td"),l=E("ul"),s=E("li"),o=O("Пикетаж: "),r=O(S),i=O(" км. "),a=O(B),c=O(" м."),p=M(),d=E("li"),u=O(G),_=O(" погибших "),h=O(I),v=O(", раненых "),f=O(U),g=M(),y=E("tr"),b=E("td"),b.textContent="Адрес:",k=M(),j=E("td"),L=O(A),C=E("br"),w=E("span"),w.textContent="подробнее",T=M(),Y&&Y.c(),H(s,"class","svelte-mnr9l0"),H(d,"title",m="id: "+e[14].id),H(d,"class","svelte-mnr9l0"),H(n,"class","first svelte-mnr9l0"),H(n,"colspan","2"),H(b,"class","first svelte-mnr9l0"),H(w,"class","link svelte-mnr9l0")},m(e,m,F){D(e,t,m),z(t,n),z(n,l),z(l,s),z(s,o),z(s,r),z(s,i),z(s,a),z(s,c),z(l,p),z(l,d),z(d,u),z(d,_),z(d,h),z(d,v),z(d,f),D(e,g,m),D(e,y,m),z(y,b),z(y,k),z(y,j),z(j,L),z(j,C),z(j,w),z(j,T),Y&&Y.m(j,null),q=!0,F&&x(P),P=[$(d,"click",R),$(w,"click",Z)]},p(t,n){e=t,(!q||1&n)&&S!==(S=Math.floor(e[14].piketaj_m/1e3)+"")&&N(r,S),(!q||1&n)&&B!==(B=e[14].piketaj_m%1e3+"")&&N(a,B),(!q||1&n)&&G!==(G=new Date(1e3*e[14].date).toLocaleDateString()+"")&&N(u,G),(!q||1&n)&&I!==(I=e[14].lost+"")&&N(h,I),(!q||1&n)&&U!==(U=e[14].stricken+"")&&N(f,U),(!q||1&n&&m!==(m="id: "+e[14].id))&&H(d,"title",m),(!q||1&n)&&A!==(A=e[14].address+"")&&N(L,A),e[2]===e[20]?Y?(Y.p(e,n),de(Y,1)):(Y=al(e),Y.c(),de(Y,1),Y.m(j,null)):Y&&(ce(),ue(Y,1,1,()=>{Y=null}),pe())},i(e){q||(de(Y),q=!0)},o(e){ue(Y),q=!1},d(e){e&&F(t),e&&F(g),e&&F(y),Y&&Y.d(),x(P)}}}function pl(e){let t,n,l,s;return{c(){t=E("li"),n=O("Мероприятие"),H(t,"class","link svelte-mnr9l0"),H(t,"data",l=e[14].id_event)},m(l,o,r){D(l,t,o),z(t,n),r&&s(),s=$(t,"click",e[5])},p:y,d(e){e&&F(t),s()}}}function dl(e){let t,n,l,s;return{c(){t=E("li"),n=O("Мероприятие"),H(t,"class","link svelte-mnr9l0"),H(t,"data",l=e[14].id_event)},m(l,o,r){D(l,t,o),z(t,n),r&&s(),s=$(t,"click",e[5])},p:y,d(e){e&&F(t),s()}}}function ul(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,x,j,L,C,w,q,$,P,S,B,G,I,U,A,R,Z,Y,V,W,K,J,X,Q,ee,te=e[1]?"Предочаг":"Очаг",ne=(e[0].id||e[0].id_hearth)+"",le=e[0].quarter?e[0].quarter+" кв.":"",se=e[0].year+"",oe=e[0].list_dtp.length+"",re=e[0].count_lost+"",ie=e[0].count_stricken+"",ae=e[0].piketaj_start_km&&rl(e),_e=e[0].str_icon_type&&il(e),he=e[0].list_dtp,ve=[];for(let t=0;t<he.length;t+=1)ve[t]=cl(ol(e,he,t));const fe=e=>ue(ve[e],1,1,()=>{ve[e]=null});let me=e[7]&&function(e){let t,n,l,s,o=e[7],r=[];for(let t=0;t<o.length;t+=1)r[t]=pl(sl(e,o,t));return{c(){t=E("div"),n=E("div"),n.textContent="Привязанные мероприятия",l=M(),s=E("ol");for(let e=0;e<r.length;e+=1)r[e].c();H(n,"class","title"),H(s,"start","1"),H(t,"class","event_h")},m(e,o){D(e,t,o),z(t,n),z(t,l),z(t,s);for(let e=0;e<r.length;e+=1)r[e].m(s,null)},p(e,t){if(160&t){let n;for(o=e[7],n=0;n<o.length;n+=1){const l=sl(e,o,n);r[n]?r[n].p(l,t):(r[n]=pl(l),r[n].c(),r[n].m(s,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=o.length}},d(e){e&&F(t),T(r,e)}}}(e),ge=e[8]&&function(e){let t,n,l,s,o=e[8],r=[];for(let t=0;t<o.length;t+=1)r[t]=dl(ll(e,o,t));return{c(){t=E("div"),n=E("div"),n.textContent="Мероприятия в районе очага",l=M(),s=E("ol");for(let e=0;e<r.length;e+=1)r[e].c();H(n,"class","title"),H(s,"start","1"),H(t,"class","event_lo")},m(e,o){D(e,t,o),z(t,n),z(t,l),z(t,s);for(let e=0;e<r.length;e+=1)r[e].m(s,null)},p(e,t){if(288&t){let n;for(o=e[8],n=0;n<o.length;n+=1){const l=ll(e,o,n);r[n]?r[n].p(l,t):(r[n]=dl(l),r[n].c(),r[n].m(s,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=o.length}},d(e){e&&F(t),T(r,e)}}}(e);return{c(){t=E("div"),n=E("div"),l=O(te),s=O(" ДТП (id: "),o=O(ne),r=O(")"),i=O(e[6]),a=M(),c=E("div"),p=O(le),d=M(),u=O(se),_=O("г."),h=M(),v=E("div"),f=E("table"),m=E("tbody"),ae&&ae.c(),g=M(),_e&&_e.c(),y=M(),b=E("tr"),k=E("td"),k.textContent="Всего ДТП:",x=M(),j=E("td"),L=O(oe),C=M(),w=E("tr"),q=E("td"),q.textContent="Погибших:",$=M(),P=E("td"),S=O(re),B=M(),G=E("tr"),I=E("td"),I.textContent="Раненых:",U=M(),A=E("td"),R=O(ie),Z=M();for(let e=0;e<ve.length;e+=1)ve[e].c();Y=M(),V=E("tr"),W=E("td"),K=E("div"),J=M(),X=E("div"),me&&me.c(),Q=M(),ge&&ge.c(),H(n,"class","pLine"),H(c,"class","pLine"),H(k,"class","first svelte-mnr9l0"),H(q,"class","first svelte-mnr9l0"),H(I,"class","first svelte-mnr9l0"),H(K,"class","win leaflet-popup-content-wrapper hidden svelte-mnr9l0"),H(W,"class","first svelte-mnr9l0"),H(W,"colspan","2"),H(f,"class","table svelte-mnr9l0"),H(v,"class","featureCont"),H(X,"class","events"),H(t,"class","mvsPopup svelte-mnr9l0")},m(F,T){D(F,t,T),z(t,n),z(n,l),z(n,s),z(n,o),z(n,r),z(n,i),z(t,a),z(t,c),z(c,p),z(c,d),z(c,u),z(c,_),z(t,h),z(t,v),z(v,f),z(f,m),ae&&ae.m(m,null),z(m,g),_e&&_e.m(m,null),z(m,y),z(m,b),z(b,k),z(b,x),z(b,j),z(j,L),z(m,C),z(m,w),z(w,q),z(w,$),z(w,P),z(P,S),z(m,B),z(m,G),z(G,I),z(G,U),z(G,A),z(A,R),z(m,Z);for(let e=0;e<ve.length;e+=1)ve[e].m(m,null);z(m,Y),z(m,V),z(V,W),z(W,K),e[13](K),z(t,J),z(t,X),me&&me.m(X,null),z(X,Q),ge&&ge.m(X,null),ee=!0},p(e,[t]){if((!ee||2&t)&&te!==(te=e[1]?"Предочаг":"Очаг")&&N(l,te),(!ee||1&t)&&ne!==(ne=(e[0].id||e[0].id_hearth)+"")&&N(o,ne),(!ee||1&t)&&le!==(le=e[0].quarter?e[0].quarter+" кв.":"")&&N(p,le),(!ee||1&t)&&se!==(se=e[0].year+"")&&N(u,se),e[0].piketaj_start_km?ae?ae.p(e,t):(ae=rl(e),ae.c(),ae.m(m,g)):ae&&(ae.d(1),ae=null),e[0].str_icon_type?_e?_e.p(e,t):(_e=il(e),_e.c(),_e.m(m,y)):_e&&(_e.d(1),_e=null),(!ee||1&t)&&oe!==(oe=e[0].list_dtp.length+"")&&N(L,oe),(!ee||1&t)&&re!==(re=e[0].count_lost+"")&&N(S,re),(!ee||1&t)&&ie!==(ie=e[0].count_stricken+"")&&N(R,ie),21&t){let n;for(he=e[0].list_dtp,n=0;n<he.length;n+=1){const l=ol(e,he,n);ve[n]?(ve[n].p(l,t),de(ve[n],1)):(ve[n]=cl(l),ve[n].c(),de(ve[n],1),ve[n].m(m,Y))}for(ce(),n=he.length;n<ve.length;n+=1)fe(n);pe()}e[7]&&me.p(e,t),e[8]&&ge.p(e,t)},i(e){if(!ee){for(let e=0;e<he.length;e+=1)de(ve[e]);ee=!0}},o(e){ve=ve.filter(Boolean);for(let e=0;e<ve.length;e+=1)ue(ve[e]);ee=!1},d(n){n&&F(t),ae&&ae.d(),_e&&_e.d(),T(ve,n),e[13](null),me&&me.d(),ge&&ge.d()}}}function _l(e,t,n){let l,{prp:s}=t,{predochag:o}=t;const r=e=>{let t=s._bounds.options.items[e];t&&t._map&&t._map.panTo(t._latlng)};let i;let a="city"in s?" (city: "+s.city+")":"",c=s.event_h&&s.event_h.length>1?s.event_h:null,p=s.event_lo&&s.event_lo.length>1?s.event_lo:null;return e.$set=e=>{"prp"in e&&n(0,s=e.prp),"predochag"in e&&n(1,o=e.predochag)},[s,o,l,i,r,e=>{let t=e.target.getAttribute("data");n(3,i.innerHTML="",i),fetch("https://dtp.mvs.group/scripts/events_dev/get_event_id_"+t+".txt",{}).then(e=>e.json()).then(e=>{i.classList.remove("hidden");new Ee({target:i,props:{prp:e[0]}})})},a,c,p,e=>{console.log("showDtpInfo ",e)},e=>{r(e)},e=>{n(2,l=e)},()=>{n(2,l=null)},function(e){J[e?"unshift":"push"](()=>{n(3,i=e)})}]}class hl extends ge{constructor(e){super(),me(this,e,_l,ul,C,{prp:0,predochag:1})}}const vl=window.L,fl=(vl.popup(),vl.popup({minWidth:200}));let ml;const gl=vl.featureGroup([]);gl.setFilter=e=>{gl.clearLayers(),ml=e;let t=[];gl._group&&gl._map&&(gl._group.getLayers().forEach(e=>{let n=e.options.cluster,l=n.list_dtp||[],s=0;ml.forEach(e=>{if("quarter"===e.type)e.zn[n.year]&&e.zn[n.year][n.quarter]&&s++;else if("id_dtp"===e.type)l.filter(t=>t.id==e.zn||t.id_skpdi==e.zn||t.id_stat==e.zn).length&&s++;else if("year"===e.type)e.zn[n.year]&&s++;else if("str_icon_type"===e.type)e.zn.filter(e=>e===n.str_icon_type).length&&s++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&!n.count_stricken&&n.count_lost||2===t&&n.count_stricken&&!n.count_lost||3===t&&(n.count_stricken||n.count_lost)||4===t&&n.count_stricken&&n.count_lost)&&s++:s++}}),s===ml.length&&t.push(e)}),gl.addLayer(vl.layerGroup(t)))},gl.on("remove",()=>{gl.clearLayers()}).on("add",e=>{ml=[];let t={str_icon_type:{},iconType:{},years:{},dtps:{},stricken:{0:0}},n=[];Promise.all([2019,2020].map(e=>fetch("https://dtp.mvs.group/scripts/hearths_dev/"+e+".txt",{}).then(e=>e.json()))).then(e=>{e.forEach(e=>{t.stricken[0]+=e.length,e.forEach(e=>{let l=e.icon_type||1,s=vl.latLngBounds(),o=e.list_dtp,r=!1,i="#FF0000";if(p(e,t),o.length){Number(e.year),Number(e.quarter);let a=t.years[e.year];a||(a=t.years[e.year]={}),t.years[e.year]=a;let c=a[e.quarter];e.quarter in a?c++:c=a[e.quarter]=1,a[e.quarter]=c;let p=t.str_icon_type[e.str_icon_type];p?p++:p=1,t.str_icon_type[e.str_icon_type]=p,t.iconType[e.str_icon_type]=l,l&&(r=l%2==0,1===l||2===l?i="#FFA500":3===l||4===l?i="#B8860B":5===l||6===l?i="#CD853F":7===l||8===l?i="#228B22":9===l||10===l?i="#FF8C00":11===l||12===l?i="#D2691E":13===l||14===l?i="#DEB887":15===l||16===l?i="#7B68EE":17!==l&&18!==l||(i="#2F4F4F"));let d=o.map(n=>{n.iconType;let l=n.coords||{lat:0,lon:0},o=vl.latLng(l.lat,l.lon),a=[];s.extend(o),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let c=t.dtps[n.id];return c?c[e.id]?c[e.id]++:c[e.id]=1:(c={},c[e.id]=1),t.dtps[n.id]=c,new g(vl.latLng(l.lat,l.lon),{cluster:e,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:r,fillColor:i})});e._bounds=vl.rectangle(s,{items:d,cluster:e,fill:!0,color:i,dashArray:"8 3 1"}).on("mouseover",e=>{let t=e.target;t._color=t.options.color,t.options.color="red",t._renderer._updateStyle(t)}).on("mouseout",e=>{let t=e.target;t.options.color=t._color,t._renderer._updateStyle(t)}).on("click",t=>{vl.DomEvent.stopPropagation(t);let n=t.target,l=t.latlng;t.originalEvent.ctrlKey&&n.bringToBack(),function(e){let t=vl.DomUtil.create("div");new hl({target:t,props:{prp:e}}),fl.setContent(t)}(e),fl.setLatLng(l).openOn(gl._map)}),n.push(e._bounds),n=n.concat(d)}}),gl._opt=t,gl._group=vl.layerGroup(n),ml?gl.setFilter(ml):gl.addLayer(gl._group),gl._refreshFilters()})})});const yl=window.L,bl=(yl.popup(),yl.popup({minWidth:200}));let kl;const xl=yl.featureGroup([]);xl.setFilter=e=>{xl.clearLayers(),kl=e;let t=[];xl._group&&xl._map&&(xl._group.getLayers().forEach(e=>{let n=e.options.cluster,l=n.list_dtp||[],s=0;kl.forEach(e=>{if("quarter"===e.type)e.zn[n.year]&&e.zn[n.year][n.quarter]&&s++;else if("id_dtp"===e.type)l.filter(t=>t.id==e.zn||t.id_skpdi==e.zn||t.id_stat==e.zn).length&&s++;else if("year"===e.type)e.zn[n.year]&&s++;else if("str_icon_type"===e.type)e.zn.filter(e=>e===n.str_icon_type).length&&s++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&!n.count_stricken&&n.count_lost||2===t&&n.count_stricken&&!n.count_lost||3===t&&(n.count_stricken||n.count_lost)||4===t&&n.count_stricken&&n.count_lost)&&s++:s++}}),s===kl.length&&t.push(e)}),xl.addLayer(yl.layerGroup(t)))},xl.on("remove",()=>{xl.clearLayers()}).on("add",e=>{kl=[];let t={str_icon_type:{},iconType:{},years:{},dtps:{},stricken:{0:0}},n=[];Promise.all([2019,2020].map(e=>fetch("https://dtp.mvs.group/scripts/hearthstmp_dev/"+e+".txt",{}).then(e=>e.json()))).then(e=>{e.forEach(e=>{t.stricken[0]+=e.length,e.forEach(e=>{let l=e.icon_type||1,s=yl.latLngBounds(),o=e.list_dtp,r=!1,i="#FF0000";if(p(e,t),o.length){Number(e.year),Number(e.quarter);let a=t.years[e.year];a||(a=t.years[e.year]={}),t.years[e.year]=a;let c=a[e.quarter];e.quarter in a?c++:c=a[e.quarter]=1,a[e.quarter]=c;let p=t.str_icon_type[e.str_icon_type];p?p++:p=1,t.str_icon_type[e.str_icon_type]=p,t.iconType[e.str_icon_type]=l,l&&(r=l%2==0,1===l||2===l?i="#FFA500":3===l||4===l?i="#B8860B":5===l||6===l?i="#CD853F":7===l||8===l?i="#228B22":9===l||10===l?i="#FF8C00":11===l||12===l?i="#D2691E":13===l||14===l?i="#DEB887":15===l||16===l?i="#7B68EE":17!==l&&18!==l||(i="#2F4F4F"));let d=o.map(n=>{n.iconType;let l=n.coords||{lat:0,lon:0},o=yl.latLng(l.lat,l.lon),a=[];s.extend(o),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let c=t.dtps[n.id];return c?c[e.id]?c[e.id]++:c[e.id]=1:(c={},c[e.id]=1),t.dtps[n.id]=c,new g(yl.latLng(l.lat,l.lon),{cluster:e,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:r,fillColor:i})});e._bounds=yl.rectangle(s,{items:d,cluster:e,fill:!0,color:i,dashArray:"8 3 1"}).on("mouseover",e=>{let t=e.target;t._color=t.options.color,t.options.color="red",t._renderer._updateStyle(t)}).on("mouseout",e=>{let t=e.target;t.options.color=t._color,t._renderer._updateStyle(t)}).on("click",t=>{yl.DomEvent.stopPropagation(t);let n=t.target,l=t.latlng;t.originalEvent.ctrlKey&&n.bringToBack(),function(e){let t=yl.DomUtil.create("div");new hl({target:t,props:{prp:e}}),bl.setContent(t)}(e),bl.setLatLng(l).openOn(xl._map)}),n.push(e._bounds),n=n.concat(d)}}),xl._opt=t,xl._group=yl.layerGroup(n),kl?xl.setFilter(kl):xl.addLayer(xl._group),xl._refreshFilters()})})});const jl=window.L,Ll=(jl.popup(),jl.popup({minWidth:200}));let Cl;const wl=jl.featureGroup([]);wl.setFilter=e=>{wl.clearLayers(),Cl=e;let t=[];wl._group&&wl._map&&(wl._group.getLayers().forEach(e=>{let n=e.options.cluster,l=n.list_dtp||[],s=0;Cl.forEach(e=>{if("quarter"===e.type)e.zn[n.year]&&e.zn[n.year][n.quarter]&&s++;else if("id_dtp"===e.type)l.filter(t=>t.id==e.zn||t.id_skpdi==e.zn||t.id_stat==e.zn).length&&s++;else if("year"===e.type)e.zn[n.year]&&s++;else if("str_icon_type"===e.type)e.zn.filter(e=>e===n.str_icon_type).length&&s++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&!n.count_stricken&&n.count_lost||2===t&&n.count_stricken&&!n.count_lost||3===t&&(n.count_stricken||n.count_lost)||4===t&&n.count_stricken&&n.count_lost)&&s++:s++}}),s===Cl.length&&t.push(e)}),wl.addLayer(jl.layerGroup(t)))},wl.on("remove",()=>{wl.clearLayers()}).on("add",e=>{Cl=[];let t={str_icon_type:{},iconType:{},years:{},dtps:{},stricken:{0:0}},n=[];Promise.all([2019,2020].map(e=>fetch("https://dtp.mvs.group/scripts/hearthsstat_dev/"+e+".txt",{}).then(e=>e.json()))).then(e=>{e.forEach(e=>{t.stricken[0]+=e.length,e.forEach(e=>{let l=e.icon_type||1,s=jl.latLngBounds(),o=e.list_dtp,r=!1,i="#FF0000";if(p(e,t),o.length){Number(e.year),Number(e.quarter);let a=t.years[e.year];a||(a=t.years[e.year]={}),t.years[e.year]=a;let c=a[e.quarter];e.quarter in a?c++:c=a[e.quarter]=1,a[e.quarter]=c;let p=t.str_icon_type[e.str_icon_type];p?p++:p=1,t.str_icon_type[e.str_icon_type]=p,t.iconType[e.str_icon_type]=l,l&&(r=l%2==0,1===l||2===l?i="#FFA500":3===l||4===l?i="#B8860B":5===l||6===l?i="#CD853F":7===l||8===l?i="#228B22":9===l||10===l?i="#FF8C00":11===l||12===l?i="#D2691E":13===l||14===l?i="#DEB887":15===l||16===l?i="#7B68EE":17!==l&&18!==l||(i="#2F4F4F"));let d=o.map(n=>{n.iconType;let l=n.coords||{lat:0,lon:0},o=jl.latLng(l.lat,l.lon),a=[];s.extend(o),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let c=t.dtps[n.id];return c?c[e.id]?c[e.id]++:c[e.id]=1:(c={},c[e.id]=1),t.dtps[n.id]=c,new g(jl.latLng(l.lat,l.lon),{cluster:e,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:r,fillColor:i})});e._bounds=jl.rectangle(s,{items:d,cluster:e,fill:!0,color:i,dashArray:"8 3 1"}).on("mouseover",e=>{let t=e.target;t._color=t.options.color,t.options.color="red",t._renderer._updateStyle(t)}).on("mouseout",e=>{let t=e.target;t.options.color=t._color,t._renderer._updateStyle(t)}).on("click",t=>{jl.DomEvent.stopPropagation(t);let n=t.target,l=t.latlng;t.layerPoint;t.originalEvent.ctrlKey&&n.bringToBack(),function(e){let t=jl.DomUtil.create("div");new hl({target:t,props:{prp:e}}),Ll.setContent(t)}(e),Ll.setLatLng(l).openOn(wl._map)}),n.push(e._bounds),n=n.concat(d)}}),wl._opt=t,wl._group=jl.layerGroup(n),Cl?wl.setFilter(Cl):wl.addLayer(wl._group),wl._refreshFilters()})})});const zl=window.L,Dl=(zl.popup(),zl.popup({minWidth:200}));let Fl;const Tl=zl.featureGroup([]);Tl.setFilter=e=>{Tl.clearLayers(),Fl=e;let t=[];Tl._group&&Tl._map&&(Tl._group.getLayers().forEach(e=>{let n=e.options.cluster,l=n.list_dtp||[],s=0;Fl.forEach(e=>{if("quarter"===e.type)e.zn[n.year]&&e.zn[n.year][n.quarter]&&s++;else if("id_dtp"===e.type)l.filter(t=>t.id==e.zn||t.id_skpdi==e.zn||t.id_stat==e.zn).length&&s++;else if("year"===e.type)e.zn[n.year]&&s++;else if("str_icon_type"===e.type)e.zn.filter(e=>e===n.str_icon_type).length&&s++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&!n.count_stricken&&n.count_lost||2===t&&n.count_stricken&&!n.count_lost||3===t&&(n.count_stricken||n.count_lost)||4===t&&n.count_stricken&&n.count_lost)&&s++:s++}}),s===Fl.length&&t.push(e)}),Tl.addLayer(zl.layerGroup(t)))},Tl.on("remove",()=>{Tl.clearLayers()}).on("add",e=>{Fl=[];let t={str_icon_type:{},iconType:{},years:{},dtps:{},stricken:{0:0}},n=[];Promise.all([2019,2020].map(e=>fetch("https://dtp.mvs.group/scripts/hearths3_dev/"+e+".txt",{}).then(e=>e.json()))).then(e=>{e.forEach(e=>{t.stricken[0]+=e.length,e.forEach(e=>{let l=e.icon_type||1,s=zl.latLngBounds(),o=e.list_dtp,r=!1,i=(p(e,t),"#FF0000");if(o.length){Number(e.year),Number(e.quarter);let a=t.years[e.year];a||(a=t.years[e.year]={}),t.years[e.year]=a;let c=a[e.quarter];e.quarter in a?c++:c=a[e.quarter]=1,a[e.quarter]=c;let p,d=t.str_icon_type[e.str_icon_type];d?d++:d=1,t.str_icon_type[e.str_icon_type]=d,t.iconType[e.str_icon_type]=l,l&&(r=l%2==0,1===l||2===l?i="#FFA500":3===l||4===l?i="#B8860B":5===l||6===l?i="#CD853F":7===l||8===l?i="#228B22":9===l||10===l?i="#FF8C00":11===l||12===l?i="#D2691E":13===l||14===l?i="#DEB887":15===l||16===l?i="#7B68EE":17!==l&&18!==l||(i="#2F4F4F"));let u=o.map(n=>{n.iconType;let l=n.coords||{lat:0,lon:0},o=zl.latLng(l.lat,l.lon),a=[];s.extend(o),n.id===e.head&&(p=n),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let c=t.dtps[n.id];return c?c[e.id]?c[e.id]++:c[e.id]=1:(c={},c[e.id]=1),t.dtps[n.id]=c,new g(zl.latLng(l.lat,l.lon),{cluster:e,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:r,fillColor:i})});e._bounds=p?zl.circle(zl.latLng(p.coords.lat,p.coords.lon),{radius:e.radius||500,items:u,cluster:e,color:i}):zl.rectangle(s,{items:u,cluster:e,fill:!0,color:i,dashArray:"8 3 1"}),e._bounds.on("mouseover",e=>{let t=e.target;t._color=t.options.color,t.options.color="red",t._renderer._updateStyle(t)}).on("mouseout",e=>{let t=e.target;t.options.color=t._color,t._renderer._updateStyle(t)}).on("click",t=>{zl.DomEvent.stopPropagation(t);let n=t.target,l=t.latlng;t.layerPoint;t.originalEvent.ctrlKey&&n.bringToBack(),function(e){let t=zl.DomUtil.create("div");new hl({target:t,props:{prp:e}}),Dl.setContent(t)}(e),Dl.setLatLng(l).openOn(Tl._map)}),n.push(e._bounds),n=n.concat(u)}}),Tl._opt=t,Tl._group=zl.layerGroup(n),Fl?Tl.setFilter(Fl):Tl.addLayer(Tl._group),Tl._refreshFilters()}),console.log("__DtpHearths3_____",e,Tl._opt)})});const El=window.L,Ol=(El.popup(),El.popup({minWidth:200}));let Ml;const ql=El.featureGroup([]);ql.setFilter=e=>{ql.clearLayers(),Ml=e;let t=[];ql._group&&ql._map&&(ql._group.getLayers().forEach(e=>{let n=e.options.cluster,l=n.list_dtp||[],s=0;Ml.forEach(e=>{if("quarter"===e.type)e.zn[n.year]&&e.zn[n.year][n.quarter]&&s++;else if("id_dtp"===e.type)l.filter(t=>t.id==e.zn||t.id_skpdi==e.zn||t.id_stat==e.zn).length&&s++;else if("year"===e.type)e.zn[n.year]&&s++;else if("str_icon_type"===e.type)e.zn.filter(e=>e===n.str_icon_type).length&&s++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&!n.count_stricken&&n.count_lost||2===t&&n.count_stricken&&!n.count_lost||3===t&&(n.count_stricken||n.count_lost)||4===t&&n.count_stricken&&n.count_lost)&&s++:s++}}),s===Ml.length&&t.push(e)}),ql.addLayer(El.layerGroup(t)))},ql.on("remove",()=>{ql.clearLayers()}).on("add",e=>{Ml=[];let t={str_icon_type:{},iconType:{},years:{},dtps:{},stricken:{0:0}},n=[];Promise.all([2019,2020].map(e=>fetch("https://dtp.mvs.group/scripts/hearths5_dev/"+e+".txt",{}).then(e=>e.json()))).then(e=>{e.forEach(e=>{t.stricken[0]+=e.length,e.forEach(e=>{let l=e.icon_type||1,s=El.latLngBounds(),o=e.list_dtp,r=!1,i="#FF0000";if(p(e,t),o.length){Number(e.year),Number(e.quarter);let a=t.years[e.year];a||(a=t.years[e.year]={}),t.years[e.year]=a;let c=a[e.quarter];e.quarter in a?c++:c=a[e.quarter]=1,a[e.quarter]=c;let p,d=t.str_icon_type[e.str_icon_type];d?d++:d=1,t.str_icon_type[e.str_icon_type]=d,t.iconType[e.str_icon_type]=l,l&&(r=l%2==0,1===l||2===l?i="#FFA500":3===l||4===l?i="#B8860B":5===l||6===l?i="#CD853F":7===l||8===l?i="#228B22":9===l||10===l?i="#FF8C00":11===l||12===l?i="#D2691E":13===l||14===l?i="#DEB887":15===l||16===l?i="#7B68EE":17!==l&&18!==l||(i="#2F4F4F"));let u=o.map(n=>{n.iconType;let l=n.coords||{lat:0,lon:0},o=El.latLng(l.lat,l.lon),a=[];s.extend(o),n.id===e.head&&(p=n),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let c=t.dtps[n.id];return c?c[e.id]?c[e.id]++:c[e.id]=1:(c={},c[e.id]=1),t.dtps[n.id]=c,new g(El.latLng(l.lat,l.lon),{cluster:e,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:r,fillColor:i})});e._bounds=p?El.circle(El.latLng(p.coords.lat,p.coords.lon),{radius:e.radius||500,items:u,cluster:e,color:i}):El.rectangle(s,{items:u,cluster:e,fill:!0,color:i,dashArray:"8 3 1"}),e._bounds.on("mouseover",e=>{let t=e.target;t._color=t.options.color,t.options.color="red",t._renderer._updateStyle(t)}).on("mouseout",e=>{let t=e.target;t.options.color=t._color,t._renderer._updateStyle(t)}).on("click",t=>{El.DomEvent.stopPropagation(t);let n=t.target,l=t.latlng;t.layerPoint;t.originalEvent.ctrlKey&&n.bringToBack(),function(e){let t=El.DomUtil.create("div");new hl({target:t,props:{prp:e}}),Ol.setContent(t)}(e),Ol.setLatLng(l).openOn(ql._map)}),n.push(e._bounds),n=n.concat(u)}}),ql._opt=t,ql._group=El.layerGroup(n),Ml?ql.setFilter(Ml):ql.addLayer(ql._group),ql._refreshFilters()})})});const $l=window.L,Pl=($l.popup(),$l.popup({minWidth:200}));let Hl=[];const Sl=$l.featureGroup([]);Sl.setFilter=e=>{if(!Sl._map)return;Sl.clearLayers(),Hl=e.length?e:[];let t=Hl.length,n=[];Sl._group&&(Sl._group.getLayers().forEach(e=>{let l=e.options.cluster,s=0;Hl.forEach(e=>{if("ht"===e.type)e.zn[l.ht]&&s++;else if("roads"===e.type)(e.zn.filter(e=>e===l.road).length||1===e.zn.length&&""===e.zn[0])&&s++;else if("id_dtp"===e.type)!l.list_dtp.filter(t=>t.id==e.zn).length&&e.zn.length||s++;else if("id_hearth"===e.type)e.zn==l.id_hearth&&s++;else if("year"===e.type)e.zn[l.year]&&s++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&!l.count_stricken&&l.count_lost||2===t&&l.count_stricken&&!l.count_lost||3===t&&(l.count_stricken||l.count_lost)||4===t&&l.count_stricken&&l.count_lost)&&s++:s++}}),s===t&&n.push(e)}),Sl.addLayer($l.layerGroup(n)))},Sl.on("remove",()=>{Sl.clearLayers()}).on("add",e=>{let t={road:{},str_icon_type:{},iconType:{},years:{},dtps:{}},n=[],l=(e,l)=>{let s=e.icon_type||1,o=$l.latLngBounds(),r=[],i=e.list_dtp,a=!1,c="#FF0000";if(e.ht=l,i.length){Number(e.year),Number(e.quarter);let l=t.years[e.year];l||(l=t.years[e.year]={}),t.years[e.year]=l;let p=l[e.quarter];e.quarter in l?p++:p=l[e.quarter]=1,l[e.quarter]=p;let d,u=t.str_icon_type[e.str_icon_type];u?u++:u=1,t.str_icon_type[e.str_icon_type]=u,t.iconType[e.str_icon_type]=s,e.road in t.road?t.road[e.road]++:t.road[e.road]=1,s&&(a=s%2==0,1===s||2===s?c="#FFA500":3===s||4===s?c="#B8860B":5===s||6===s?c="#CD853F":7===s||8===s?c="#228B22":9===s||10===s?c="#FF8C00":11===s||12===s?c="#D2691E":13===s||14===s?c="#DEB887":15===s||16===s?c="#7B68EE":17!==s&&18!==s||(c="#2F4F4F"));let _=i.map(n=>{n.iconType;let l=n.coords||{lat:0,lon:0},s=$l.latLng(l.lat,l.lon),i=[];o.extend(s),r.push(s),n.id===e.head&&(d=n),n.id_skpdi&&i.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&i.push({type:"gibdd",id:n.id_stat}),n._cur=i;let p=t.dtps[n.id]||{},u=e.id||e.id_hearth;return p?p[u]?p[u]++:p[u]=1:(p={},p[u]=1),t.dtps[n.id]=p,new g($l.latLng(l.lat,l.lon),{cluster:e,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:a,fillColor:c})});d?e._bounds=$l.circle($l.latLng(d.coords.lat,d.coords.lon),{radius:e.radius||500,items:_,cluster:e,color:c}):r.length?e._bounds=$l.polyline(r,{items:_,cluster:e,color:c,weight:4}):e._bounds=$l.rectangle(o,{items:_,cluster:e,fill:!0,color:c,dashArray:"8 3 1"}),e._bounds.on("mouseover",e=>{let t=e.target;t._weight=t.options.weight,t._color=t.options.color,t.options.weight=8,t.options.color="red",t._renderer._updateStyle(t)}).on("mouseout",e=>{let t=e.target;t.options.weight=t._weight,t.options.color=t._color,t._renderer._updateStyle(t)}).on("click",t=>{$l.DomEvent.stopPropagation(t);let n=t.target,l=t.latlng;t.layerPoint;t.originalEvent.ctrlKey&&n.bringToBack(),function(e){let t=$l.DomUtil.create("div");new hl({target:t,props:{prp:e}}),Pl.setContent(t)}(e),Pl.setLatLng(l).openOn(Sl._map)}),n.push(e._bounds),n=n.concat(_)}};Promise.all([2019,2020].map(e=>fetch("https://dtp.mvs.group/scripts/hearths_picket_dev/"+e+".txt",{}).then(e=>e.json()))).then(e=>{e.forEach(e=>{e.forEach(e=>{(e.hearth3||[]).forEach(e=>{l(e,"hearth3")}),(e.hearth5||[]).forEach(e=>{l(e,"hearth5")})}),Sl._opt=t,Sl._group=$l.layerGroup(n),Hl?Sl.setFilter(Hl):Sl.addLayer(Sl._group),Sl._refreshFilters()}),console.log("__allJson_____",e,Sl._opt)})});const Nl=window.L,Bl=(Nl.popup(),Nl.popup({minWidth:200}));let Gl=[];const Il=function(e){let t=Nl.DomUtil.create("div");return new hl({target:t,props:{prp:e}}),Bl.setContent(t),t},Ul=Nl.featureGroup([],{renderer:u});function Al(e,t,n){const l=e.slice();return l[4]=t[n],l[6]=n,l}function Rl(e,t,n){const l=e.slice();return l[4]=t[n],l[6]=n,l}function Zl(e){let t,n,l,s,o=e[4].complexName+"";return{c(){t=E("button"),n=O(o),H(t,"class",l="tab "+e[6]+" "+(0===e[6]?"active":"")+" svelte-h8luxq")},m(l,o,r){D(l,t,o),z(t,n),r&&s(),s=$(t,"click",e[2])},p:y,d(e){e&&F(t),s()}}}function Yl(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,x,j,L,C,w,T,q,$,P,S,B,G,I,U,A=e[4].complexName+"",R=e[4].complexSid+"",Z=e[4].complexModelName+"",Y=e[4].complexTypeName+"",V=e[4].complexStageName+"",W=(e[4].kvfStatus||"")+"",K=(e[4].roadName||e[0].roadName||"")+"";return{c(){t=E("table"),n=E("tr"),l=E("td"),l.textContent="Комплекс:",s=E("td"),o=O(A),r=O(" (id: "),i=O(R),a=O(")"),c=M(),p=E("tr"),d=E("td"),d.textContent="Модель:",u=E("td"),_=O(Z),h=M(),v=E("tr"),f=E("td"),f.textContent="Тип:",m=E("td"),g=O(Y),y=M(),b=E("tr"),k=E("td"),k.textContent="Этап:",x=E("td"),j=O(V),L=M(),C=E("tr"),w=E("td"),w.textContent="Работоспособность:",T=E("td"),q=O(W),$=M(),P=E("tr"),S=E("td"),S.textContent="Дорога:",B=E("td"),G=O(K),I=M(),H(l,"class","first svelte-h8luxq"),H(d,"class","first svelte-h8luxq"),H(f,"class","first svelte-h8luxq"),H(k,"class","first svelte-h8luxq"),H(w,"class","first svelte-h8luxq"),H(S,"class","first svelte-h8luxq"),H(t,"class",U="tabCont "+e[6]+" "+(0===e[6]?"":"hidden")+" svelte-h8luxq")},m(e,F){D(e,t,F),z(t,n),z(n,l),z(n,s),z(s,o),z(s,r),z(s,i),z(s,a),z(t,c),z(t,p),z(p,d),z(p,u),z(u,_),z(t,h),z(t,v),z(v,f),z(v,m),z(m,g),z(t,y),z(t,b),z(b,k),z(b,x),z(x,j),z(t,L),z(t,C),z(C,w),z(C,T),z(T,q),z(t,$),z(t,P),z(P,S),z(P,B),z(B,G),z(t,I)},p(e,t){1&t&&K!==(K=(e[4].roadName||e[0].roadName||"")+"")&&N(G,K)},d(e){e&&F(t)}}}function Vl(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,b,k,x,j,L,C,w,q,P,S,B,G,I,U,A,R,Z,Y,V,W,K,J,X=(e[0].id||e[0].lineSid)+"",Q=(e[0].roadName||"")+"",ee=e[0].lat+"",te=e[0].lon+"",ne=(e[0].lineAddress||"")+"",le=e[3],se=[];for(let t=0;t<le.length;t+=1)se[t]=Zl(Rl(e,le,t));let oe=e[3],re=[];for(let t=0;t<oe.length;t+=1)re[t]=Yl(Al(e,oe,t));return{c(){t=E("div"),n=E("div"),l=O("Рубеж (id: "),s=O(X),o=O(")"),r=M(),i=E("div"),a=E("table"),c=E("tbody"),p=E("tr"),d=E("td"),d.textContent="Дорога:",u=M(),_=E("td"),h=O(Q),v=M(),f=E("tr"),m=E("td"),m.textContent="Координаты:",g=M(),b=E("td"),k=O(ee),x=M(),j=O(te),L=M(),C=E("span"),w=M(),q=E("tr"),P=E("td"),P.textContent="Адрес:",S=M(),B=E("td"),G=O(ne),I=M(),U=E("tr"),A=E("td"),A.textContent="Комплексов:",R=M(),Z=E("td"),Z.textContent=`${e[3].length}`,Y=M(),V=E("tr"),W=E("td");for(let e=0;e<se.length;e+=1)se[e].c();K=M();for(let e=0;e<re.length;e+=1)re[e].c();H(n,"class","pLine"),H(d,"class","first svelte-h8luxq"),H(m,"class","first svelte-h8luxq"),H(C,"title","Скопировать в буфер обмена"),H(C,"class","leaflet-gmx-icon-copy"),H(P,"class","first svelte-h8luxq"),H(A,"class","first svelte-h8luxq"),H(W,"class","tabs svelte-h8luxq"),H(W,"colspan","2"),H(a,"class","table svelte-h8luxq"),H(i,"class","featureCont"),H(t,"class","mvsPopup svelte-h8luxq")},m(y,F,T){D(y,t,F),z(t,n),z(n,l),z(n,s),z(n,o),z(t,r),z(t,i),z(i,a),z(a,c),z(c,p),z(p,d),z(p,u),z(p,_),z(_,h),z(c,v),z(c,f),z(f,m),z(f,g),z(f,b),z(b,k),z(b,x),z(b,j),z(b,L),z(b,C),z(c,w),z(c,q),z(q,P),z(q,S),z(q,B),z(B,G),z(c,I),z(c,U),z(U,A),z(U,R),z(U,Z),z(c,Y),z(c,V),z(V,W);for(let e=0;e<se.length;e+=1)se[e].m(W,null);z(W,K);for(let e=0;e<re.length;e+=1)re[e].m(W,null);T&&J(),J=$(C,"click",e[1])},p(e,[t]){if(1&t&&X!==(X=(e[0].id||e[0].lineSid)+"")&&N(s,X),1&t&&Q!==(Q=(e[0].roadName||"")+"")&&N(h,Q),1&t&&ee!==(ee=e[0].lat+"")&&N(k,ee),1&t&&te!==(te=e[0].lon+"")&&N(j,te),1&t&&ne!==(ne=(e[0].lineAddress||"")+"")&&N(G,ne),12&t){let n;for(le=e[3],n=0;n<le.length;n+=1){const l=Rl(e,le,n);se[n]?se[n].p(l,t):(se[n]=Zl(l),se[n].c(),se[n].m(W,K))}for(;n<se.length;n+=1)se[n].d(1);se.length=le.length}if(9&t){let n;for(oe=e[3],n=0;n<oe.length;n+=1){const l=Al(e,oe,n);re[n]?re[n].p(l,t):(re[n]=Yl(l),re[n].c(),re[n].m(W,null))}for(;n<re.length;n+=1)re[n].d(1);re.length=oe.length}},i:y,o:y,d(e){e&&F(t),T(se,e),T(re,e),J()}}}function Wl(e,t,n){let{prp:l}=t;let s=l&&l.complexes?l.complexes:[];return console.log("complexes ",s),e.$set=e=>{"prp"in e&&n(0,l=e.prp)},[l,e=>{navigator.clipboard.writeText(e.target.parentNode.textContent).catch(e=>{console.log("Something went wrong",e)})},e=>{let t=e.target,n=/tab (\d)/.exec(t.className),l=n&&2===n.length?n[1]:0,s=t.parentNode;for(let e=0,t=s.childNodes.length;e<t;e++){let t=s.childNodes[e];if(t.classList){let e=t.classList.contains(l);"BUTTON"===t.tagName?t.classList[e?"add":"remove"]("active"):"TABLE"===t.tagName&&t.classList[e?"remove":"add"]("hidden")}}},s]}Ul.setFilter=e=>{if(!Ul._map)return;Ul.clearLayers(),Gl=e.length?e:[];let t=Gl.length,n=[];Ul._group&&(Ul._group.getLayers().forEach(e=>{let l=e.options.cluster,s=0;Gl.forEach(e=>{if("ht"===e.type)e.zn[l.ht]&&s++;else if("roads"===e.type)(e.zn.filter(e=>e===l.road).length||1===e.zn.length&&""===e.zn[0])&&s++;else if("id_dtp"===e.type)!l.list_dtp.filter(t=>t.id==e.zn).length&&e.zn.length||s++;else if("city"===e.type)e.zn[l.city]&&s++;else if("id_hearth"===e.type)e.zn==l.id_hearth&&s++;else if("year"===e.type)e.zn[l.year]&&s++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&!l.count_stricken&&l.count_lost||2===t&&l.count_stricken&&!l.count_lost||3===t&&(l.count_stricken||l.count_lost)||4===t&&l.count_stricken&&l.count_lost)&&s++:s++}}),s===t&&n.push(e)}),Ul.addLayer(Nl.layerGroup(n)))},Ul.on("remove",()=>{Ul.clearLayers()}).on("add",e=>{let t={road:{},str_icon_type:{},iconType:{},id_city:{},city:{},years:{},dtps:{}},n=[],l=(e,l)=>{let s=e.icon_type||1,o=Nl.latLngBounds(),r=[],i=e.list_dtp,a=!1,c="#FF0000";if(e.ht=l,i.length){Number(e.year),Number(e.quarter);let l=t.years[e.year];l||(l=t.years[e.year]={}),t.years[e.year]=l;let p=l[e.quarter];e.quarter in l?p++:p=l[e.quarter]=1,l[e.quarter]=p;let d=t.str_icon_type[e.str_icon_type];d?d++:d=1,t.str_icon_type[e.str_icon_type]=d,t.iconType[e.str_icon_type]=s,e.road in t.road?t.road[e.road]++:t.road[e.road]=1;let _,h=e.city||0,v=t.city[h]||0;t.city[h]=v+1,s&&(a=s%2==0,1===s||2===s?c="#FFA500":3===s||4===s?c="#B8860B":5===s||6===s?c="#CD853F":7===s||8===s?c="#228B22":9===s||10===s?c="#FF8C00":11===s||12===s?c="#D2691E":13===s||14===s?c="#DEB887":15===s||16===s?c="#7B68EE":17!==s&&18!==s||(c="#2F4F4F"));let f=i.map(n=>{n.iconType;let l=n.coords||{lat:0,lon:0},s=Nl.latLng(l.lat,l.lon),i=[];o.extend(s),r.push(s),n.id===e.head&&(_=n),n.id_skpdi&&i.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&i.push({type:"gibdd",id:n.id_stat}),n._cur=i;let p=t.id_city[n.id_city]||0;t.id_city[n.id_city]=p+1;let d=t.dtps[n.id]||{},u=e.id||e.id_hearth;return d?d[u]?d[u]++:d[u]=1:(d={},d[u]=1),t.dtps[n.id]=d,new g(Nl.latLng(l.lat,l.lon),{cluster:e,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:a,fillColor:c}).on("click",t=>{Il(e),Bl.setLatLng(t.latlng).openOn(Ul._map)})});_?e._bounds=Nl.circle(Nl.latLng(_.coords.lat,_.coords.lon),{radius:e.radius||500,items:f,cluster:e,color:c}):r.length?e._bounds=Nl.polyline(r,{items:f,cluster:e,renderer:u,color:c,weight:4}):e._bounds=Nl.rectangle(o,{items:f,cluster:e,fill:!0,color:c,dashArray:"8 3 1"}),e._bounds.on("mouseover",e=>{let t=e.target;t._weight=t.options.weight,t._color=t.options.color,t.options.weight=8,t.options.color="red",t._renderer._updateStyle(t)}).on("mouseout",e=>{let t=e.target;t.options.weight=t._weight,t.options.color=t._color,t._renderer._updateStyle(t)}).on("click",t=>{Nl.DomEvent.stopPropagation(t);let n=t.target,l=t.latlng;t.layerPoint;t.originalEvent.ctrlKey&&n.bringToBack(),Il(e),Bl.setLatLng(l).openOn(Ul._map)}),n.push(e._bounds),n=n.concat(f)}};Promise.all([2019,2020].map(e=>fetch("https://dtp.mvs.group/scripts/hearthssettlements_dev/"+e+".txt",{}).then(e=>e.json()))).then(e=>{e.forEach(e=>{e.forEach(e=>{(e.hearth3||[]).forEach(e=>{l(e,"hearth3")}),(e.hearth5||[]).forEach(e=>{l(e,"hearth5")})}),Ul._opt=t,Ul._group=Nl.layerGroup(n),Gl?Ul.setFilter(Gl):Ul.addLayer(Ul._group),Ul._refreshFilters()}),console.log("__allJson_____",e,Ul._opt)})});class Kl extends ge{constructor(e){super(),me(this,e,Wl,Vl,C,{prp:0})}}const Jl=window.L,Xl=Jl.popup();Jl.popup({minWidth:200});let Ql;const es=Jl.featureGroup([]);function ts(e,t,n){const l=e.slice();return l[4]=t[n],l[6]=n,l}function ns(e,t,n){const l=e.slice();return l[4]=t[n],l[6]=n,l}function ls(e){let t,n,l,s,o=e[4].complex_name+"";return{c(){t=E("button"),n=O(o),H(t,"class",l="tab "+e[6]+" "+(0===e[6]?"active":"")+" svelte-h8luxq")},m(l,o,r){D(l,t,o),z(t,n),r&&s(),s=$(t,"click",e[2])},p:y,d(e){e&&F(t),s()}}}function ss(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,b,k,x,j,L,C,w,T=e[4].complex_name+"",q=e[4].complex_sid+"",$=e[4].complex_model_name+"",P=e[4].complex_type_name+"",S=(e[4].cafap_status||"")+"";return{c(){t=E("table"),n=E("tr"),l=E("td"),l.textContent="Комплекс:",s=E("td"),o=O(T),r=O(" (id: "),i=O(q),a=O(")"),c=M(),p=E("tr"),d=E("td"),d.textContent="Модель:",u=E("td"),_=O($),h=M(),v=E("tr"),f=E("td"),f.textContent="Тип:",m=E("td"),g=O(P),b=M(),k=E("tr"),x=E("td"),x.textContent="Работоспособность:",j=E("td"),L=O(S),C=M(),H(l,"class","first svelte-h8luxq"),H(d,"class","first svelte-h8luxq"),H(f,"class","first svelte-h8luxq"),H(x,"class","first svelte-h8luxq"),H(t,"class",w="tabCont "+e[6]+" "+(0===e[6]?"":"hidden")+" svelte-h8luxq")},m(e,y){D(e,t,y),z(t,n),z(n,l),z(n,s),z(s,o),z(s,r),z(s,i),z(s,a),z(t,c),z(t,p),z(p,d),z(p,u),z(u,_),z(t,h),z(t,v),z(v,f),z(v,m),z(m,g),z(t,b),z(t,k),z(k,x),z(k,j),z(j,L),z(t,C)},p:y,d(e){e&&F(t)}}}function os(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,b,k,x,j,L,C,w,q,P,S,B,G,I,U,A,R,Z,Y,V,W,K,J,X,Q,ee,te,ne,le,se=(e[0].id||e[0].line_id)+"",oe=(e[0].stage_name||"")+"",re=(e[0].road_name||"")+"",ie=e[0].lat+"",ae=e[0].lon+"",ce=(e[0].address||"")+"",pe=e[3],de=[];for(let t=0;t<pe.length;t+=1)de[t]=ls(ns(e,pe,t));let ue=e[3],_e=[];for(let t=0;t<ue.length;t+=1)_e[t]=ss(ts(e,ue,t));return{c(){t=E("div"),n=E("div"),l=O("Рубеж (id: "),s=O(se),o=O(")"),r=M(),i=E("div"),a=E("table"),c=E("tbody"),p=E("tr"),d=E("td"),d.textContent="Этап:",u=M(),_=E("td"),h=O(oe),v=M(),f=E("tr"),m=E("td"),m.textContent="Дорога:",g=M(),b=E("td"),k=O(re),x=M(),j=E("tr"),L=E("td"),L.textContent="Координаты:",C=M(),w=E("td"),q=O(ie),P=M(),S=O(ae),B=M(),G=E("span"),I=M(),U=E("tr"),A=E("td"),A.textContent="Адрес:",R=M(),Z=E("td"),Y=O(ce),V=M(),W=E("tr"),K=E("td"),K.textContent="Комплексов:",J=M(),X=E("td"),X.textContent=`${e[3].length}`,Q=M(),ee=E("tr"),te=E("td");for(let e=0;e<de.length;e+=1)de[e].c();ne=M();for(let e=0;e<_e.length;e+=1)_e[e].c();H(n,"class","pLine"),H(d,"class","first svelte-h8luxq"),H(m,"class","first svelte-h8luxq"),H(L,"class","first svelte-h8luxq"),H(G,"title","Скопировать в буфер обмена"),H(G,"class","leaflet-gmx-icon-copy"),H(A,"class","first svelte-h8luxq"),H(K,"class","first svelte-h8luxq"),H(te,"class","tabs svelte-h8luxq"),H(te,"colspan","2"),H(a,"class","table svelte-h8luxq"),H(i,"class","featureCont"),H(t,"class","mvsPopup svelte-h8luxq")},m(y,F,T){D(y,t,F),z(t,n),z(n,l),z(n,s),z(n,o),z(t,r),z(t,i),z(i,a),z(a,c),z(c,p),z(p,d),z(p,u),z(p,_),z(_,h),z(c,v),z(c,f),z(f,m),z(f,g),z(f,b),z(b,k),z(c,x),z(c,j),z(j,L),z(j,C),z(j,w),z(w,q),z(w,P),z(w,S),z(w,B),z(w,G),z(c,I),z(c,U),z(U,A),z(U,R),z(U,Z),z(Z,Y),z(c,V),z(c,W),z(W,K),z(W,J),z(W,X),z(c,Q),z(c,ee),z(ee,te);for(let e=0;e<de.length;e+=1)de[e].m(te,null);z(te,ne);for(let e=0;e<_e.length;e+=1)_e[e].m(te,null);T&&le(),le=$(G,"click",e[1])},p(e,[t]){if(1&t&&se!==(se=(e[0].id||e[0].line_id)+"")&&N(s,se),1&t&&oe!==(oe=(e[0].stage_name||"")+"")&&N(h,oe),1&t&&re!==(re=(e[0].road_name||"")+"")&&N(k,re),1&t&&ie!==(ie=e[0].lat+"")&&N(q,ie),1&t&&ae!==(ae=e[0].lon+"")&&N(S,ae),1&t&&ce!==(ce=(e[0].address||"")+"")&&N(Y,ce),12&t){let n;for(pe=e[3],n=0;n<pe.length;n+=1){const l=ns(e,pe,n);de[n]?de[n].p(l,t):(de[n]=ls(l),de[n].c(),de[n].m(te,ne))}for(;n<de.length;n+=1)de[n].d(1);de.length=pe.length}if(8&t){let n;for(ue=e[3],n=0;n<ue.length;n+=1){const l=ts(e,ue,n);_e[n]?_e[n].p(l,t):(_e[n]=ss(l),_e[n].c(),_e[n].m(te,null))}for(;n<_e.length;n+=1)_e[n].d(1);_e.length=ue.length}},i:y,o:y,d(e){e&&F(t),T(de,e),T(_e,e),le()}}}function rs(e,t,n){let{prp:l}=t;let s=l&&l.list_complex?l.list_complex:[];return console.log("complexes ",s),e.$set=e=>{"prp"in e&&n(0,l=e.prp)},[l,e=>{navigator.clipboard.writeText(e.target.parentNode.textContent).catch(e=>{console.log("Something went wrong",e)})},e=>{let t=e.target,n=/tab (\d)/.exec(t.className),l=n&&2===n.length?n[1]:0,s=t.parentNode;for(let e=0,t=s.childNodes.length;e<t;e++){let t=s.childNodes[e];if(t.classList){let e=t.classList.contains(l);"BUTTON"===t.tagName?t.classList[e?"add":"remove"]("active"):"TABLE"===t.tagName&&t.classList[e?"remove":"add"]("hidden")}}},s]}es.setFilter=e=>{if(!es._map)return;es.clearLayers(),Ql=e;let t=[];es._group&&(es._group.getLayers().forEach(e=>{let n=e.options.cluster,l=0;Ql.forEach(e=>{if("ht"===e.type)e.zn[n.ht]&&l++;else if("roads"===e.type)(e.zn.filter(e=>e===n.road).length||1===e.zn.length&&""===e.zn[0])&&l++;else if("id_dtp"===e.type)!n.list_dtp.filter(t=>t.id==e.zn).length&&e.zn.length||l++;else if("id_hearth"===e.type)e.zn==n.id_hearth&&l++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&!n.count_stricken&&n.count_lost||2===t&&n.count_stricken&&!n.count_lost||3===t&&(n.count_stricken||n.count_lost)||4===t&&n.count_stricken&&n.count_lost)&&l++:l++}}),l===Ql.length&&t.push(e)}),es.addLayer(Jl.layerGroup(t)))},es.on("remove",()=>{es.clearLayers()}).on("add",e=>{let t=e=>{let t=Jl.latLngBounds(),n="#FF0000";e.complexes&&(1===e.complexes.length?n="#FFA500":e.complexes.length>1&&(n="#0000FF"));let l=e.coords||{lat:e.lat,lon:e.lon},s=Jl.latLng(l.lat,l.lon);return t.extend(s),new g(Jl.latLng(l.lat,l.lon),{props:e,radius:6,zIndexOffset:5e4,stroke:!1,fillColor:n}).bindPopup(Xl).on("popupopen",e=>{!function(e){let t=Jl.DomUtil.create("div");new Kl({target:t,props:{prp:e}}),Xl.setContent(t)}(e.target.options.props)}).on("popupclose",e=>{e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)})};fetch("./static/rub.geojson",{}).then(e=>e.json()).then(e=>{let n=e.map(t);es._group=Jl.layerGroup(n),es.addLayer(es._group)})});class is extends ge{constructor(e){super(),me(this,e,rs,os,C,{prp:0})}}const as=window.L,cs=as.popup();as.popup({minWidth:200});let ps,ds="https://dtp.mvs.group/scripts/rubez_dev/";const us=as.featureGroup([]);function _s(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,b,k,x,j,L,C,w,T,q,P,S,B,G,I,U,A,R,Z,Y,V,W,K,J,X,Q,ee,te,ne,le,se,oe,re,ie,ae,ce,pe,de,ue,_e,he,ve,fe,me,ge,ye,be=(e[0].kind||"")+"",ke=(e[0].type||"")+"",xe=(e[0].id||"")+"",je=(e[0].status||"")+"",Le=e[3](e[0].date_created)+"",Ce=e[3](e[0].date_finish_fact)+"",we=e[2].lat+"",ze=e[2].lon+"",De=(e[0].id_dtp||"")+"",Fe=(e[0].description||"")+"";return{c(){t=E("div"),n=E("div"),l=O("Мероприятие"),s=E("br"),o=O("("),r=O(be),i=O(")"),a=M(),c=E("div"),p=E("table"),d=E("tbody"),u=E("tr"),_=E("td"),_.textContent="Тип мероприятия:",h=M(),v=E("td"),f=O(ke),m=M(),g=E("tr"),b=E("td"),b.textContent="ID:",k=M(),x=E("td"),j=O(xe),L=M(),C=E("tr"),w=E("td"),w.textContent="Статус:",T=M(),q=E("td"),P=O(je),S=M(),B=E("tr"),G=E("td"),G.textContent="Дата добавления:",I=M(),U=E("td"),A=O(Le),R=M(),Z=E("tr"),Y=E("td"),Y.textContent="Дата завершения:",V=M(),W=E("td"),K=O(Ce),J=M(),X=E("tr"),Q=E("td"),Q.textContent="Координаты:",ee=M(),te=E("td"),ne=O(we),le=M(),se=O(ze),oe=M(),re=E("span"),ie=M(),ae=E("tr"),ce=E("td"),ce.textContent="ID ДТП СКПДИ:",pe=M(),de=E("td"),ue=O(De),_e=M(),he=E("tr"),ve=E("td"),ve.textContent="Описание:",fe=M(),me=E("td"),ge=O(Fe),H(n,"class","pLine"),H(_,"class","first svelte-h8luxq"),H(b,"class","first svelte-h8luxq"),H(w,"class","first svelte-h8luxq"),H(G,"class","first svelte-h8luxq"),H(Y,"class","first svelte-h8luxq"),H(Q,"class","first svelte-h8luxq"),H(re,"title","Скопировать в буфер обмена"),H(re,"class","leaflet-gmx-icon-copy"),H(ce,"class","first svelte-h8luxq"),H(ve,"class","first svelte-h8luxq"),H(p,"class","table svelte-h8luxq"),H(c,"class","featureCont"),H(t,"class","mvsPopup svelte-h8luxq")},m(y,F,E){D(y,t,F),z(t,n),z(n,l),z(n,s),z(n,o),z(n,r),z(n,i),z(t,a),z(t,c),z(c,p),z(p,d),z(d,u),z(u,_),z(u,h),z(u,v),z(v,f),z(d,m),z(d,g),z(g,b),z(g,k),z(g,x),z(x,j),z(d,L),z(d,C),z(C,w),z(C,T),z(C,q),z(q,P),z(d,S),z(d,B),z(B,G),z(B,I),z(B,U),z(U,A),z(d,R),z(d,Z),z(Z,Y),z(Z,V),z(Z,W),z(W,K),z(d,J),z(d,X),z(X,Q),z(X,ee),z(X,te),z(te,ne),z(te,le),z(te,se),z(te,oe),z(te,re),z(d,ie),z(d,ae),z(ae,ce),z(ae,pe),z(ae,de),z(de,ue),z(d,_e),z(d,he),z(he,ve),z(he,fe),z(he,me),z(me,ge),E&&ye(),ye=$(re,"click",e[1])},p(e,[t]){1&t&&be!==(be=(e[0].kind||"")+"")&&N(r,be),1&t&&ke!==(ke=(e[0].type||"")+"")&&N(f,ke),1&t&&xe!==(xe=(e[0].id||"")+"")&&N(j,xe),1&t&&je!==(je=(e[0].status||"")+"")&&N(P,je),1&t&&Le!==(Le=e[3](e[0].date_created)+"")&&N(A,Le),1&t&&Ce!==(Ce=e[3](e[0].date_finish_fact)+"")&&N(K,Ce),1&t&&De!==(De=(e[0].id_dtp||"")+"")&&N(ue,De),1&t&&Fe!==(Fe=(e[0].description||"")+"")&&N(ge,Fe)},i:y,o:y,d(e){e&&F(t),ye()}}}function hs(e,t,n){let{prp:l}=t;let s=l.coords[0]||{lat:l.lat,lon:l.lon};return e.$set=e=>{"prp"in e&&n(0,l=e.prp)},[l,e=>{navigator.clipboard.writeText(e.target.parentNode.textContent).catch(e=>{console.log("Something went wrong",e)})},s,e=>{if(!e)return"";let t=new Date(1e3*e);return t.toLocaleDateString()+" "+t.toLocaleTimeString()}]}us.setFilter=e=>{if(!us._map)return;us.clearLayers(),ps=e,us._argFilters=ps;let t=[];us._group&&(us._group.getLayers().forEach(e=>{let n=e.options.props,l=0;ps.forEach(e=>{"comp"===e.type&&(n.rub_flag?e.zn.on&&l++:e.zn.off&&l++)}),l===ps.length&&t.push(e)}),us.addLayer(as.layerGroup(t)))},us.on("remove",()=>{us.clearLayers()}).on("add",e=>{let t={road:{},bad:[]},n=[],l={},s=e=>{let s=as.latLngBounds(),o="gray";if(e.rub_flag&&(o="#00FF00"),l[e.line_sid]?console.log("___Дубль____",e):l[e.line_sid]=e,!e.lat||!e.lon)return void t.bad.push(e);let r=e.coords||{lat:e.lat,lon:e.lon},i=as.latLng(r.lat,r.lon);s.extend(i),n.push(new g(as.latLng(r.lat,r.lon),{props:e,radius:6,zIndexOffset:5e4,path:"camera",stroke:!1,fillColor:o}).bindPopup(cs).on("popupopen",e=>{!function(e){let t=as.DomUtil.create("div"),n=e.line_sid;fetch(ds+"rubez-complex-"+n+".txt",{}).then(e=>e.json()).then(e=>{new is({target:t,props:{prp:e[0]}}),cs.setContent(t)}),cs.setContent(t)}(e.target.options.props),e.target.bringToBack()}).on("popupclose",e=>{e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)}))};fetch(ds+"rubez.txt",{}).then(e=>e.json()).then(e=>{e.forEach(s),us._group=as.layerGroup(n),us.addLayer(us._group),console.log("opt",t)})});class vs extends ge{constructor(e){super(),me(this,e,hs,_s,C,{prp:0})}}const fs=window.L,ms=fs.popup();let gs;const ys=fs.featureGroup([]);function bs(e,t,n){const l=e.slice();return l[9]=t[n],l[11]=n,l}function ks(e,t,n){const l=e.slice();return l[14]=t[n],l}function xs(e,t,n){const l=e.slice();return l[9]=t[n],l}function js(e){let t,n,l,s=e[14].k_uch&&(e[14].npdd||e[14].sop_npdd)&&function(e){let t,n,l=e[14].k_uch+"";return{c(){t=E("li"),n=O(l)},m(e,l){D(e,t,l),z(t,n)},p:y,d(e){e&&F(t)}}}(e),o=e[14].npdd&&function(e){let t,n,l=e[14].npdd+"";return{c(){t=E("li"),n=O(l)},m(e,l){D(e,t,l),z(t,n)},p:y,d(e){e&&F(t)}}}(e),r=e[14].sop_npdd&&function(e){let t,n,l=e[14].sop_npdd+"";return{c(){t=E("li"),n=O(l)},m(e,l){D(e,t,l),z(t,n)},p:y,d(e){e&&F(t)}}}(e);return{c(){s&&s.c(),t=M(),o&&o.c(),n=M(),r&&r.c(),l=q()},m(e,i){s&&s.m(e,i),D(e,t,i),o&&o.m(e,i),D(e,n,i),r&&r.m(e,i),D(e,l,i)},p(e,t){e[14].k_uch&&(e[14].npdd||e[14].sop_npdd)&&s.p(e,t),e[14].npdd&&o.p(e,t),e[14].sop_npdd&&r.p(e,t)},d(e){s&&s.d(e),e&&F(t),o&&o.d(e),e&&F(n),r&&r.d(e),e&&F(l)}}}function Ls(e){let t,n,l=e[9].ts&&function(e){let t,n,l=e[9].ts+"";return{c(){t=E("li"),n=O(l)},m(e,l){D(e,t,l),z(t,n)},p:y,d(e){e&&F(t)}}}(e),s=e[9].arr,o=[];for(let t=0;t<s.length;t+=1)o[t]=js(ks(e,s,t));return{c(){l&&l.c(),t=M();for(let e=0;e<o.length;e+=1)o[e].c();n=q()},m(e,s){l&&l.m(e,s),D(e,t,s);for(let t=0;t<o.length;t+=1)o[t].m(e,s);D(e,n,s)},p(e,t){if(e[9].ts&&l.p(e,t),16&t){let l;for(s=e[9].arr,l=0;l<s.length;l+=1){const r=ks(e,s,l);o[l]?o[l].p(r,t):(o[l]=js(r),o[l].c(),o[l].m(n.parentNode,n))}for(;l<o.length;l+=1)o[l].d(1);o.length=s.length}},d(e){l&&l.d(e),e&&F(t),T(o,e),e&&F(n)}}}function Cs(e){let t,n,l,s,o,r=e[0].spog+"";return{c(){t=E("div"),n=E("div"),n.textContent="Погода:",l=M(),s=E("div"),o=O(r),H(n,"class","stitle"),H(s,"class","sval")},m(e,r){D(e,t,r),z(t,n),z(t,l),z(t,s),z(s,o)},p(e,t){1&t&&r!==(r=e[0].spog+"")&&N(o,r)},d(e){e&&F(t)}}}function ws(e){let t,n,l,s,o,r=e[0].s_pch+"";return{c(){t=E("div"),n=E("div"),n.textContent="Покрытие:",l=M(),s=E("div"),o=O(r),H(n,"class","stitle"),H(s,"class","sval")},m(e,r){D(e,t,r),z(t,n),z(t,l),z(t,s),z(s,o)},p(e,t){1&t&&r!==(r=e[0].s_pch+"")&&N(o,r)},d(e){e&&F(t)}}}function zs(e){let t,n,l,s,o,r=e[0].osv+"";return{c(){t=E("div"),n=E("div"),n.textContent="Освещенность:",l=M(),s=E("div"),o=O(r),H(n,"class","stitle"),H(s,"class","sval")},m(e,r){D(e,t,r),z(t,n),z(t,l),z(t,s),z(s,o)},p(e,t){1&t&&r!==(r=e[0].osv+"")&&N(o,r)},d(e){e&&F(t)}}}function Ds(e){let t,n,l,s,o,r=e[0].ndu+"";return{c(){t=E("div"),n=E("div"),n.textContent="Иные условия:",l=M(),s=E("div"),o=O(r),H(n,"class","stitle"),H(s,"class","sval")},m(e,r){D(e,t,r),z(t,n),z(t,l),z(t,s),z(s,o)},p(e,t){1&t&&r!==(r=e[0].ndu+"")&&N(o,r)},d(e){e&&F(t)}}}function Fs(e){let t,n,l,s,o,r,i,a=e[9].line_id+"",c=e[9].range+"";return{c(){t=E("li"),n=O(a),l=O(" ("),s=O(c),o=O(" м.)"),H(t,"class","link svelte-vw4d3d"),t.value=r=e[9].line_id},m(r,a,c){D(r,t,a),z(t,n),z(t,l),z(t,s),z(t,o),c&&i(),i=$(t,"click",e[2])},p(e,l){1&l&&a!==(a=e[9].line_id+"")&&N(n,a),1&l&&c!==(c=e[9].range+"")&&N(s,c),1&l&&r!==(r=e[9].line_id)&&(t.value=r)},d(e){e&&F(t),i()}}}function Ts(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,b,k,x,j,L,C,w,q,P,S,B,G,I,U,A,R,Z,Y,V,W,K,J,X,Q,ee,te,ne,le,se,oe,re,ie,ae,ce,pe,de,ue,_e,he,ve,fe,me,ge,ye,be,ke,xe,je,Le,Ce,we,ze,De,Fe,Te,Ee,Oe,Me,qe,$e,Pe,He,Se,Ne,Be,Ge,Ie,Ue,Ae=(e[0].name||e[0].dtvp||"")+"",Re=(e[0].sid||e[0].id_stat||e[0].id_skpdi||"")+"",Ze=(e[0].district||"")+"",Ye=(e[0].dor||"")+"",Ve=(e[0].km||0)+"",We=(e[0].m||0)+"",Ke=e[0].lat+"",Je=e[0].lon+"",Xe=(e[0].collision_date||e[0].dtp_date||"")+"",Qe=(e[0].dtvp||"")+"",et=e[0].pog+"",tt=e[0].ran+"",nt=e[4],lt=[];for(let t=0;t<nt.length;t+=1)lt[t]=Ls(xs(e,nt,t));let st=e[0].spog&&Cs(e),ot=e[0].s_pch&&ws(e),rt=e[0].osv&&zs(e),it=e[0].ndu&&Ds(e),at=e[0].list_rub||[],ct=[];for(let t=0;t<at.length;t+=1)ct[t]=Fs(bs(e,at,t));return{c(){t=E("div"),n=E("div"),l=E("b"),s=O(Ae),o=M(),r=E("div"),i=E("table"),a=E("tbody"),c=E("tr"),p=E("td"),p.textContent="ID:",d=M(),u=E("td"),_=O(Re),h=M(),v=E("tr"),f=E("td"),f.textContent="Адрес:",m=M(),g=E("td"),b=O(Ze),k=M(),x=O(Ye),j=M(),L=E("tr"),C=E("td"),C.textContent="Пикетаж:",w=M(),q=E("td"),P=E("b"),S=O(Ve),B=O(" км. "),G=E("b"),I=O(We),U=O(" м."),A=M(),R=E("tr"),Z=E("td"),Z.textContent="Координаты:",Y=M(),V=E("td"),W=O(Ke),K=M(),J=O(Je),X=M(),Q=E("span"),ee=M(),te=E("tr"),ne=E("td"),ne.textContent="Дата/время:",le=M(),se=E("td"),oe=O(Xe),re=M(),ie=E("tr"),ae=E("td"),ae.textContent="Вид ДТП:",ce=M(),pe=E("td"),de=O(Qe),ue=M(),_e=E("tr"),he=E("td"),he.textContent="Нарушения:",ve=M(),fe=E("td"),me=E("ul");for(let e=0;e<lt.length;e+=1)lt[e].c();ge=M(),ye=E("tr"),be=E("td"),be.textContent="Условия:",ke=M(),xe=E("td"),st&&st.c(),je=M(),ot&&ot.c(),Le=M(),rt&&rt.c(),Ce=M(),it&&it.c(),we=M(),ze=E("tr"),De=E("td"),De.textContent="Количество погибших/раненых:",Fe=M(),Te=E("td"),Ee=E("b"),Oe=O(et),Me=O("/"),qe=O(tt),$e=M(),Pe=E("tr"),He=E("td"),He.textContent="Рубежи:",Se=M(),Ne=E("td"),Be=E("div"),Ge=M(),Ie=E("ul");for(let e=0;e<ct.length;e+=1)ct[e].c();H(n,"class","pLine"),H(p,"class","first svelte-vw4d3d"),H(f,"class","first svelte-vw4d3d"),H(C,"class","first svelte-vw4d3d"),H(Z,"class","first svelte-vw4d3d"),H(Q,"title","Скопировать в буфер обмена"),H(Q,"class","leaflet-gmx-icon-copy"),H(ne,"class","first svelte-vw4d3d"),H(ae,"class","first svelte-vw4d3d"),H(he,"class","first svelte-vw4d3d"),H(be,"class","first svelte-vw4d3d"),H(De,"class","first svelte-vw4d3d"),H(He,"class","first svelte-vw4d3d"),H(Be,"class","win leaflet-popup-content-wrapper  svelte-vw4d3d"),H(i,"class","table"),H(r,"class","featureCont"),H(t,"class","mvsPopup svelte-vw4d3d")},m(y,F,T){D(y,t,F),z(t,n),z(n,l),z(l,s),z(t,o),z(t,r),z(r,i),z(i,a),z(a,c),z(c,p),z(c,d),z(c,u),z(u,_),z(a,h),z(a,v),z(v,f),z(v,m),z(v,g),z(g,b),z(g,k),z(g,x),z(a,j),z(a,L),z(L,C),z(L,w),z(L,q),z(q,P),z(P,S),z(q,B),z(q,G),z(G,I),z(q,U),z(a,A),z(a,R),z(R,Z),z(R,Y),z(R,V),z(V,W),z(V,K),z(V,J),z(V,X),z(V,Q),z(a,ee),z(a,te),z(te,ne),z(te,le),z(te,se),z(se,oe),z(a,re),z(a,ie),z(ie,ae),z(ie,ce),z(ie,pe),z(pe,de),z(a,ue),z(a,_e),z(_e,he),z(_e,ve),z(_e,fe),z(fe,me);for(let e=0;e<lt.length;e+=1)lt[e].m(me,null);z(a,ge),z(a,ye),z(ye,be),z(ye,ke),z(ye,xe),st&&st.m(xe,null),z(xe,je),ot&&ot.m(xe,null),z(xe,Le),rt&&rt.m(xe,null),z(xe,Ce),it&&it.m(xe,null),z(a,we),z(a,ze),z(ze,De),z(ze,Fe),z(ze,Te),z(Te,Ee),z(Ee,Oe),z(Ee,Me),z(Ee,qe),z(a,$e),z(a,Pe),z(Pe,He),z(Pe,Se),z(Pe,Ne),z(Ne,Be),e[8](Be),z(Ne,Ge),z(Ne,Ie);for(let e=0;e<ct.length;e+=1)ct[e].m(Ie,null);T&&Ue(),Ue=$(Q,"click",e[3])},p(e,[t]){if(1&t&&Ae!==(Ae=(e[0].name||e[0].dtvp||"")+"")&&N(s,Ae),1&t&&Re!==(Re=(e[0].sid||e[0].id_stat||e[0].id_skpdi||"")+"")&&N(_,Re),1&t&&Ze!==(Ze=(e[0].district||"")+"")&&N(b,Ze),1&t&&Ye!==(Ye=(e[0].dor||"")+"")&&N(x,Ye),1&t&&Ve!==(Ve=(e[0].km||0)+"")&&N(S,Ve),1&t&&We!==(We=(e[0].m||0)+"")&&N(I,We),1&t&&Ke!==(Ke=e[0].lat+"")&&N(W,Ke),1&t&&Je!==(Je=e[0].lon+"")&&N(J,Je),1&t&&Xe!==(Xe=(e[0].collision_date||e[0].dtp_date||"")+"")&&N(oe,Xe),1&t&&Qe!==(Qe=(e[0].dtvp||"")+"")&&N(de,Qe),16&t){let n;for(nt=e[4],n=0;n<nt.length;n+=1){const l=xs(e,nt,n);lt[n]?lt[n].p(l,t):(lt[n]=Ls(l),lt[n].c(),lt[n].m(me,null))}for(;n<lt.length;n+=1)lt[n].d(1);lt.length=nt.length}if(e[0].spog?st?st.p(e,t):(st=Cs(e),st.c(),st.m(xe,je)):st&&(st.d(1),st=null),e[0].s_pch?ot?ot.p(e,t):(ot=ws(e),ot.c(),ot.m(xe,Le)):ot&&(ot.d(1),ot=null),e[0].osv?rt?rt.p(e,t):(rt=zs(e),rt.c(),rt.m(xe,Ce)):rt&&(rt.d(1),rt=null),e[0].ndu?it?it.p(e,t):(it=Ds(e),it.c(),it.m(xe,null)):it&&(it.d(1),it=null),1&t&&et!==(et=e[0].pog+"")&&N(Oe,et),1&t&&tt!==(tt=e[0].ran+"")&&N(qe,tt),5&t){let n;for(at=e[0].list_rub||[],n=0;n<at.length;n+=1){const l=bs(e,at,n);ct[n]?ct[n].p(l,t):(ct[n]=Fs(l),ct[n].c(),ct[n].m(Ie,null))}for(;n<ct.length;n+=1)ct[n].d(1);ct.length=at.length}},i:y,o:y,d(n){n&&F(t),T(lt,n),st&&st.d(),ot&&ot.d(),rt&&rt.d(),it&&it.d(),e[8](null),T(ct,n),Ue()}}}function Es(e,t,n){let l,s,{showModal:o=!1}=t,{prp:r}=t,i=r.skpdiFiles?"":"disabled";V(()=>{o&&(l=new Ce({target:document.body,props:{data:r.skpdiFiles}}),l.$on("close",e=>{l.$destroy(),n(5,o=!1)}))});const a=(r.tsInfo||[]).map(e=>{let t=e.ts_uch||[];return{ts:"Осталось на месте ДТП"!==e.ts?e.ts:"",arr:t.map(e=>({k_uch:e.k_uch||"",npdd:"Нет нарушений"!==e.npdd?e.npdd:"",sop_npdd:"Нет нарушений"!==e.sop_npdd?e.sop_npdd:""}))}});return console.log("ddddd",r),e.$set=e=>{"showModal"in e&&n(5,o=e.showModal),"prp"in e&&n(0,r=e.prp)},[r,s,e=>{let t=e.target.value;console.log("showRub",e.target.value),n(1,s.innerHTML="",s),fetch("https://dtp.mvs.group/scripts/rubez_dev/rubez-complex-"+t+".txt",{}).then(e=>e.json()).then(e=>{new is({target:s,props:{prp:e[0]}})})},e=>{navigator.clipboard.writeText(e.target.parentNode.textContent).catch(e=>{console.log("Something went wrong",e)})},a,o,l,i,function(e){J[e?"unshift":"push"](()=>{n(1,s=e)})}]}ys.setFilter=e=>{if(!ys._map)return;ys.clearLayers(),gs=e,ys._argFilters=gs;let t=[];ys._group&&(ys._group.getLayers().forEach(e=>{let n=e.options.props,l=0;gs.forEach(e=>{"measures_type"===e.type?(""===e.zn[0]||e.zn.filter(e=>e===n.type).length)&&l++:"id_dtp"===e.type?n.id_dtp==e.zn&&l++:"date"===e.type&&n.date_created>=e.zn[0]&&n.date_created<e.zn[1]&&l++}),l===gs.length&&t.push(e)}),ys.addLayer(fs.layerGroup(t)))},ys.on("remove",()=>{ys.clearLayers()}).on("add",e=>{let t={type:{},bad:[]},n=[],l={},s=e=>{fs.latLngBounds();let s="gray";e.rub_flag&&(s="#00FF00"),l[e.id]?console.log("___Дубль____",e):l[e.id]=e;let o=e.coords[0]||{lat:e.lat,lon:e.lon},r=fs.latLng(o.lat,o.lon);if(!o.lat||!o.lon||!e.id_dtp)return void t.bad.push(e);let i=e.type||" ";e.type=i;let a=t.type[i];a?a++:a=1,t.type[i]=a,n.push(new g(r,{props:e,radius:9,zIndexOffset:5e4,stroke:!1,fillColor:s}).bindPopup(ms).on("popupopen",e=>{!function(e){let t=fs.DomUtil.create("div");e.id;new vs({target:t,props:{prp:e}}),ms.setContent(t)}(e.target.options.props),e.target.bringToBack()}).on("popupclose",e=>{e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)}))};fetch("https://dtp.mvs.group/scripts/events_dev/get_event.txt",{}).then(e=>e.json()).then(e=>{e.forEach(s),ys._opt=t,ys._group=fs.layerGroup(n),ys.addLayer(ys._group),console.log("opt",t)})});class Os extends ge{constructor(e){super(),me(this,e,Es,Ts,C,{showModal:5,prp:0})}}const Ms=window.L,qs=Ms.popup();let $s;const Ps=Ms.featureGroup([]);Ps._needHeat={radius:19,blur:11.26,minOpacity:.34},Ps.checkZoom=e=>{Object.keys(Ps._layers).length?e<12&&Ps.setFilter($s):e>11&&Ps.setFilter($s)},Ps.setFilter=e=>{if(!Ps._map)return;Ps.clearLayers(),$s=e||[],Ps._argFilters=$s;let t=[],n=[];Ps._group&&Ps._map&&(Ps._group.getLayers().forEach(e=>{let l=e.options.props,s=0;$s.forEach(e=>{"collision_type"===e.type?(""===e.zn[0]||e.zn.filter(e=>e===l.collision_type).length)&&s++:"id_dtp"===e.type?l.id==e.zn&&s++:"list_rub"===e.type?l.list_rub.length?e.zn.on&&s++:e.zn.off&&s++:"date"===e.type&&l.date>=e.zn[0]&&l.date<e.zn[1]&&s++}),s===$s.length&&(t.push(e),n.push(e._latlng))}),Ps._needHeat?(Ps._map.addLayer(Ps._heat),Ps._heat.setLatLngs(n),Ps._heat.setOptions(Ps._needHeat),Ps._map._zoom>11&&Ps.addLayer(Ms.layerGroup(t))):(Ps.addLayer(Ms.layerGroup(t)),Ps._map.removeLayer(Ps._heat)))},Ps.on("remove",e=>{Ps._map.removeLayer(Ps._heat),Ps.clearLayers()}).on("add",e=>{Ps._heat=Ms.heatLayer([],{gradient:{.1:"blue",.4:"lime",1:"red"}}),$s=null,fetch("https://dtp.mvs.group/scripts/dtprubez_dev/get_stat_gipdd_with_rub.txt",{}).then(e=>e.json()).then(e=>{let t={collision_type:{},iconType:{}},n=[],l=e.map(e=>{let l=e.iconType||0,s=!1,o="#2F4F4F";l&&(s=l%2==0,l>=1&&l<=6?o="#8B4513":7===l||8===l?o="#228B22":l>=9&&l<=14?o="#8B4513":15===l||16===l?o="#7B68EE":17!==l&&18!==l||(o="#2F4F4F")),e.list_rub||(e.list_rub=[]),e.lat&&e.lon||(console.log("_______",e),e.lat=e.lon=0);let r=t.collision_type[e.collision_type];r?r++:r=1,t.collision_type[e.collision_type]=r,t.iconType[e.collision_type]=l;let i=Ms.latLng(e.lat,e.lon,s?1:.5);return n.push(i),new g(i,{props:e,radius:6,stroke:s,fillColor:o}).bindPopup(qs).on("popupopen",e=>{var t;t=e.target.options.props.id,fetch("https://dtp.mvs.group/scripts/dtprubez_dev/get_stat_gipdd_with_rub_"+t+".txt",{}).then(e=>e.json()).then(e=>{let t=Ms.DomUtil.create("div");const n=new Os({target:t,props:{prp:e}});qs._svObj=n,qs.setContent(t)}),e.target.bringToBack()}).on("popupclose",e=>{e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)})});Ps.addLayer(Ps._heat),Ps._heat.setLatLngs(n),Ps._heat.setOptions(Ps._needHeat),Ps._opt=t,Ps._group=Ms.layerGroup(l),Ps.setFilter(),Ps._map._zoom>11&&Ps.addLayer(Ps._group),Ps._refreshFilters()})});const Hs=window.L;Hs.popup();let Ss;const Ns=Hs.featureGroup([]);Ns._needHeat={radius:19,blur:11.26,minOpacity:.34},Ns.checkZoom=e=>{Object.keys(Ns._layers).length?e<12&&Ns.setFilter(Ss):e>11&&Ns.setFilter(Ss)},Ns.setFilter=e=>{if(!Ns._map)return;Ns.clearLayers(),Ss=e||[],Ns._argFilters=Ss;let t=[],n=[];Ns._group&&(Ns._group.getLayers().forEach(e=>{let l=e.options.props,s=0;Ss.forEach(e=>{"collision_type"===e.type?(""===e.zn[0]||e.zn.filter(e=>e===l.collision_type).length)&&s++:"list_rub"===e.type?l.list_rub.length?e.zn.on&&s++:e.zn.off&&s++:"date"===e.type&&l.date>=e.zn[0]&&l.date<e.zn[1]&&s++}),s===Ss.length&&(t.push(e),n.push(e._latlng))}),Ns.addLayer(Hs.layerGroup(t)))},Ns.on("remove",e=>{Ns.clearLayers()}).on("add",e=>{fetch("https://dtp.mvs.group/static/proxy.php?url=https://graphql.dev.mvs.group/graphql",{body:'{"operationName":null,"variables":{},"query":"{\\n  allVMapLineInfos(filter: {lon: {isNull: false}, lat: {isNull: false}}) {\\n    totalCount\\n    nodes {\\n      lineSid: sid\\n      lineName: name\\n      lineAddress: address\\n      roadName\\n      stage\\n      lat\\n      lon\\n      yield\\n      complexes\\n      __typename\\n    }\\n    __typename\\n  }\\n}\\n"}',method:"POST",mode:"cors"}).then(e=>e.json()).then(e=>{console.log("json",e)})});const Bs=window.L,Gs=(Bs.popup(),Bs.popup({minWidth:200}));let Is;const Us=Bs.featureGroup([]);Us.setFilter=e=>{if(!Us._map)return;Us.clearLayers(),Is=e;let t=[];Us._group&&(Us._group.getLayers().forEach(e=>{let n=e.options.cluster,l=0;Is.forEach(e=>{if("ht"===e.type)e.zn[n.ht]&&l++;else if("roads"===e.type)(e.zn.filter(e=>e===n.road).length||1===e.zn.length&&""===e.zn[0])&&l++;else if("id_dtp"===e.type)!n.list_dtp.filter(t=>t.id_skpdi==e.zn||t.id_stat==e.zn).length&&e.zn.length||l++;else if("id_hearth"===e.type)e.zn==n.id&&l++;else if("year"===e.type)e.zn[n.year]&&l++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&!n.count_stricken&&n.count_lost||2===t&&n.count_stricken&&!n.count_lost||3===t&&(n.count_stricken||n.count_lost)||4===t&&n.count_stricken&&n.count_lost)&&l++:l++}}),l===Is.length&&t.push(e)}),Us.addLayer(Bs.layerGroup(t)))},Us.on("remove",()=>{Us.clearLayers()}).on("add",e=>{let t={road:{},str_icon_type:{},lost:0,stricken:{0:0},iconType:{},years:{},dtps:{}},n=[],l=(e,l)=>{let s=e.icon_type||1,o=Bs.latLngBounds(),r=[],i=e.list_dtp,a=!1,c="#FF0000";if(p(e,t),e.ht=l<2?"hearth3":"hearth5",i.length){t.years[e.year]=!0;let l=t.str_icon_type[e.str_icon_type];l?l++:l=1,t.str_icon_type[e.str_icon_type]=l,t.iconType[e.str_icon_type]=s,e.road in t.road?t.road[e.road]++:t.road[e.road]=1,s&&(a=s%2==0,1===s||2===s?c="#FFA500":3===s||4===s?c="#B8860B":5===s||6===s?c="#CD853F":7===s||8===s?c="#228B22":9===s||10===s?c="#FF8C00":11===s||12===s?c="#D2691E":13===s||14===s?c="#DEB887":15===s||16===s?c="#7B68EE":17!==s&&18!==s||(c="#2F4F4F"));let p=i.map(n=>{n.iconType;let l=n.coords||{lat:0,lon:0},s=Bs.latLng(l.lat,l.lon),i=[];o.extend(s),r.push(s),n.id_skpdi&&i.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&i.push({type:"gibdd",id:n.id_stat}),n._cur=i;let p=n.id||n.id_stat||n.id_skpdi,d=t.dtps[p]||{},u=e.id||e.id_hearth;return d?d[u]?d[u]++:d[u]=1:(d={},d[u]=1),t.dtps[p]=d,a=!1,n.lost&&(t.lost++,a=!0),new g(Bs.latLng(l.lat,l.lon),{cluster:e,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:a,fillColor:c})});r.length?e._bounds=Bs.polyline(r,{items:p,cluster:e,color:c,weight:4}):e._bounds=Bs.rectangle(o,{items:p,cluster:e,fill:!0,color:c,dashArray:"8 3 1"}),e._bounds.on("mouseover",e=>{let t=e.target;t._weight=t.options.weight,t._color=t.options.color,t.options.weight=8,t.options.color="red",t._renderer._updateStyle(t)}).on("mouseout",e=>{let t=e.target;t.options.weight=t._weight,t.options.color=t._color,t._renderer._updateStyle(t)}).on("click",t=>{Bs.DomEvent.stopPropagation(t);let n=t.target,l=t.latlng;t.layerPoint;t.originalEvent.ctrlKey&&n.bringToBack(),function(e){let t=Bs.DomUtil.create("div");new hl({target:t,props:{predochag:1,prp:e}}),Gs.setContent(t)}(e),Gs.setLatLng(l).openOn(Us._map)}),n.push(e._bounds),n=n.concat(p)}};Promise.all(["https://dtp.mvs.group/scripts/prehearths2_dev/2019.txt","https://dtp.mvs.group/scripts/prehearths2_dev/2020.txt","https://dtp.mvs.group/scripts/prehearths4_dev/2019.txt","https://dtp.mvs.group/scripts/prehearths4_dev/2020.txt"].map(e=>fetch(e,{}).then(e=>e.json()))).then(e=>{e.forEach((e,s)=>{t.stricken[0]+=e.length,e.forEach(e=>{l(e,s)}),Us._opt=t,Us._group=Bs.layerGroup(n),Is?Us.setFilter(Is):Us.addLayer(Us._group),Us._refreshFilters()}),console.log("__allJson_____",e,Us._opt)})});const As=window.L;let Rs;As.canvas();const Zs=As.featureGroup([]);Zs.on("remove",e=>{Zs.clearLayers()}).on("add",e=>{Rs=Zs._map,fetch("static/m4.geojson",{}).then(e=>e.json()).then(e=>{let t,n=As.geoJson(e,{style:()=>({weight:6})}).on("mouseout",e=>{t&&t._map&&t._map.removeLayer(t)}).on("mousemove",e=>{t&&t._map&&t._map.removeLayer(t);let n,l=e.layer,s=Number.MAX_VALUE,o=e.layerPoint,r=e.latlng,i=l._rings[0];for(let e=0,t=i.length-1;e<t;e++){let t=As.LineUtil._sqClosestPointOnSegment(o,i[e],i[e+1],!0);t<s&&(s=t,n=e)}let a=l._latlngs.slice(0,n);a.push(r),t=As.polyline(a,{color:"red",weight:6,interactive:!1}).bindTooltip("").addTo(Rs),t.openTooltip(r);let c=Math.floor(d(a)),p=Math.floor(c/1e3),u=c-1e3*p;t.setTooltipContent(p+" км. "+u+" м.")});Zs.clearLayers(),Zs.addLayer(n)})});const Ys=window.L;let Vs;const Ws=Ys.featureGroup([]);Ws.on("remove",e=>{Ws.clearLayers()}).on("add",e=>{Vs=Ws._map,fetch("https://dtp.mvs.group/scripts/settlements_dev/0000.txt",{}).then(e=>e.json()).then(e=>{let t=Ys.geoJson(e,{renderer:u,style:e=>({weight:1})}).bindPopup((function(e){return e.bringToBack(),e.feature.properties.name}));Ws.clearLayers(),Ws.bringToBack(),Ws.addLayer(t)})});const Ks=window.L,Js=Ks.map(document.body,{center:[55.758031,37.611694],minZoom:1,zoom:8,maxZoom:21,attributionControl:!1,trackResize:!0,fadeAnimation:!0,zoomAnimation:!0,distanceUnit:"auto",squareUnit:"auto"});var Xs=Js._controlCorners,Qs=Js._controlContainer,eo="leaflet-top leaflet-bottom",to="leaflet-left leaflet-right",no={bottom:"leaflet-bottom "+to,gmxbottomleft:"leaflet-bottom leaflet-left",gmxbottomcenter:"leaflet-bottom "+to,gmxbottomright:"leaflet-bottom leaflet-right",center:eo+" "+to,right:"leaflet-right "+eo,left:"leaflet-left "+eo,top:"leaflet-top "+to};for(var lo in no)Xs[lo]||(Xs[lo]=Ks.DomUtil.create("div",no[lo],Qs));Js.addControl(Ks.control.gmxCenter()).addControl(Ks.control.fitCenter());var so=Ks.TileLayer.extend({options:{tilesCRS:Ks.CRS.EPSG3395},_getTiledPixelBounds:function(e){var t=Ks.TileLayer.prototype._getTiledPixelBounds.call(this,e);return this._shiftY=this._getShiftY(this._tileZoom),t.min.y+=this._shiftY,t.max.y+=this._shiftY,t},_tileOnError:function(e,t,n){var l=t.getAttribute("src"),s=l.indexOf("/mapcache/");if(s>-1){var o=new URL("http:"+l).searchParams,r=l.substr(s+1).split("/"),i=a[r[1]];t.src=Ks.Util.template(i.errorTileUrlPrefix+i.postfix,{z:o.get("z"),x:o.get("x"),y:o.get("y")})}e(n,t)},_getTilePos:function(e){return Ks.TileLayer.prototype._getTilePos.call(this,e).subtract([0,this._shiftY])},_getShiftY:function(e){var t=this._map,n=t.getCenter(),l=t.options.crs.project(n).y-this.options.tilesCRS.project(n).y;return Math.floor(Ks.CRS.scale(e)*l/40075016.685578495)}});Ks.TileLayer.Mercator=so,Ks.tileLayer.Mercator=function(e,t){return new so(e,t)};let oo={};c.b||(c.b="m2"),["m2","m3"].forEach(e=>{let t=a[e],n=Ks.tileLayer.Mercator(t.prefix+t.postfix,t.options);oo[t.title]=n,c.b===t.options.key&&n.addTo(Js)}),oo.OpenStreetMap=Ks.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:21,maxNativeZoom:18});let ro=e=>{const t=Ks.featureGroup([]);return t.on("add",n=>{0===t.getLayers().length&&fetch(e.file,{}).then(e=>e.json()).then(n=>{let l=Ks.geoJson(n,{renderer:u,style:()=>e.style||{weight:1}});t.clearLayers(),t.addLayer(l)})}),t},io={"Трассы":Zs,"Населенные пункты":Ws,"Мероприятия":ys,"Рубежи":us,"Очаги с привязкой к городам":Ul,"Предочаги по пикетажу":Us,"Очаги ГИБДД по пикетажу":Sl,"Очаги ГИБДД разные типы, геометрия":ql,"Очаги ГИБДД одного типа, геометрия":Tl,"ДТП Очаги(Stat)":wl,"ДТП Очаги(tmp)":xl,"Очаги ГИБДД+СКПДИ по кварталам геометрия":gl,"ДТП  ГИБДД+СКПДИ (объединение)":xt,"ДТП СКПДИ + тепловая карта":dt,"ДТП ГИБДД + тепловая карта":Ke,"ДТП ГИБДД + тепловая карта + Рубежи":Ps,"Москва":ro({file:"/static/moscow.geojson",style:{color:"purple",interactive:!1}}),"Московская область":ro({file:"/static/moscowObl.geojson",style:{color:"gray",fill:!1,interactive:!1}}),"А-108 Большая бетонка":ro({file:"/static/a108.geojson",style:{color:"green",fill:!1,interactive:!1}}),"А-107 Малая бетонка":ro({file:"/static/a107.geojson",style:{color:"blue",fill:!1,interactive:!1}}),"Санкт-Петербург":ro({file:"/static/sp.geojson",style:{color:"purple",interactive:!1}}),"Ленинградская область":ro({file:"/static/spobl.geojson",style:{color:"gray",fill:!1,interactive:!1}})};Ks.featureGroup([]);let ao=c.o?c.o.split(",").reduce((e,t)=>(e[t]=!0,e),{}):{};["m1","m4","m5"].forEach(e=>{let t=a[e],n=Ks.tileLayer.Mercator(t.prefix+t.postfix,t.options);io[t.title]=n,ao[t.options.key]&&n.addTo(Js)});Ks.control.layers(oo,io).addTo(Js);let co,po,uo=Ks.control.gmxIcon({id:"filters",className:"leaflet-bar",togglable:!0,title:"Фильтры"}).on("statechange",(function(e){let t=e.target,n=t._container,l=t._win;t.options.isActive?l||(l=t._win=Ks.DomUtil.create("div","win leaflet-control-layers",n),Ks.DomEvent.disableScrollPropagation(l),l._Filters=new nl({target:l,props:{control:t,DtpGibddRub:Ps,DtpGibdd:Ke,DtpSkpdi:dt,Measures:ys,Rub:us,DtpHearthsPicket4:Us,DtpHearthsSettlements:Ul,DtpHearthsPicket:Sl,DtpHearths5:ql,DtpHearths3:Tl,DtpHearthsStat:wl,DtpHearthsTmp:xl,DtpHearths:gl,DtpVerifyed:xt}})):(t._win.parentNode.removeChild(t._win),t._win=null)})).addTo(Js);Js.pm.setLang("customName",{tooltips:{finishLine:"Щелкните любой существующий маркер для завершения"}},"ru"),Js.pm.setLang("ru"),Js.on("pm:create",e=>{Js.removeLayer(e.layer),_o.setActive(!1)}).on("pm:drawstart",e=>{let t=e.workingLayer;if("Line"===e.shape){let n=Js.pm.Draw.Line._hintMarker;n&&n.on("move",(function(e){var l=t.getLatLngs();if(l.length){var s=d(l),o=distVincenty(l[l.length-1],e.latlng),r=(s+=o)>1e3?(s/1e3).toFixed(2)+" км":Math.ceil(s)+" м",i=o>1e3?(o/1e3).toFixed(2)+" км":Math.ceil(o)+" м";n._tooltip.setContent("Отрезок <b>("+i+")</b>участка <b>("+r+")</b>")}})),co&&e.target.pm.Toolbar.buttons.drawPolyline.buttonsDomNode&&(po=e.target.pm.Toolbar.buttons.drawPolyline.buttonsDomNode.children[1],po.style.display="none")}});let _o=Ks.control.gmxIcon({id:"measure",className:"leaflet-bar",togglable:!0,title:"Включить/Отключить режим измерения расстояний"}).on("statechange",(function(e){co=e.target.options.isActive,co?Js.pm.enableDraw("Line",{finishOn:"dblclick"}):(Js.pm.disableDraw("Line"),po&&(po.style.display=""))})).addTo(Js);const ho=()=>{setTimeout(()=>{uo.options.isActive&&(uo.setActive(!1),uo._win=null,uo.setActive(!0))})};Ps._refreshFilters=Ke._refreshFilters=dt._refreshFilters=ys._refreshFilters=xt._refreshFilters=gl._refreshFilters=wl._refreshFilters=Tl._refreshFilters=ql._refreshFilters=Sl._refreshFilters=Ul._refreshFilters=Us._refreshFilters=us._refreshFilters=xl._refreshFilters=ho;return Ps.on("remove",ho),Ke.on("remove",ho),dt.on("remove",ho),ys.on("remove",ho),xt.on("remove",ho),gl.on("remove",ho),xl.on("remove",ho),wl.on("remove",ho),Tl.on("remove",ho),ql.on("remove",ho),Sl.on("remove",ho),Ul.on("remove",ho),Us.on("remove",ho),us.on("remove",ho),Js.on("zoomend",e=>{Js._crpx=0,xt._map&&xt.checkZoom(Js._zoom),dt._map&&dt.checkZoom(Js._zoom),Ke._map&&Ke.checkZoom(Js._zoom)}),window._map=Js,Js}();
//# sourceMappingURL=main.js.map
