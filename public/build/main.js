var dtp=function(){"use strict";const t=window.L;t.Control.GmxIcon=t.Control.extend({includes:t.Evented?t.Evented.prototype:t.Mixin.Events,options:{position:"topleft",id:"defaultIcon",isActive:!1},setActive:function(e,o,n){var i=this.options,s=this._container;if(i.togglable||i.toggle){var r=i.isActive,l=this._prefix,a=l+"-"+i.id;i.isActive=e,this._img&&(e&&i.activeImageUrl?this._img.src=i.activeImageUrl:!e&&i.regularImageUrl&&(this._img.src=i.regularImageUrl)),e?(t.DomUtil.addClass(s,l+"-active"),t.DomUtil.addClass(s,a+"-active"),s.children.length&&t.DomUtil.addClass(s,l+"-externalImage-active"),i.styleActive&&this.setStyle(i.styleActive)):(t.DomUtil.removeClass(s,l+"-active"),t.DomUtil.removeClass(s,a+"-active"),s.children.length&&t.DomUtil.removeClass(s,l+"-externalImage-active"),i.style&&this.setStyle(i.style)),o||r===e||this.fire("statechange",n)}if(t.gmxUtil&&t.gmxUtil.isIEOrEdge){var c=s.getElementsByTagName("use");if(c.length){var d=c[0],p=d.getAttribute("href")||d.getAttribute("xlink:href");d.setAttribute("href",p)}}},onAdd:function(e){var o=null,n=this.options,i=n.svgSprite||e.options.svgSprite,s="leaflet-gmx-icon"+(!i||n.regularImageUrl||n.text?"":"Svg"),r=s+"-"+n.id;this._prefix=s;var l=t.DomUtil.create("div",s+" "+r);if(l._id=n.id,this._container=l,n.title&&(l.title=n.title),this.setStyle=function(t){for(var e in t)l.style[e]=t[e]},n.className&&t.DomUtil.addClass(l,n.className),n.regularImageUrl)(o=t.DomUtil.create("img","",l)).src=n.regularImageUrl,this._img=o,t.DomUtil.addClass(l,s+"-img"),t.DomUtil.addClass(l,s+"-externalImage");else if(n.text)t.DomUtil.addClass(l,s+"-text"),t.DomUtil.create("span","",l).innerHTML=n.text;else if(i){t.DomUtil.addClass(l,"svgIcon");var a="#"+n.id.toLowerCase();l.innerHTML='<svg role="img" class="svgIcon"><use xlink:href="'+a+'" href="'+a+'"></use></svg>'}else t.DomUtil.addClass(l,s+"-img "+s+"-sprite");n.style&&this.setStyle(n.style),this._iconClick=function(t){l.parentNode&&l===t.toElement&&(this.setActive(!this.options.isActive,!1,t),this.fire("click",t),this.options.stateChange&&this.options.stateChange(this,t))};var c=t.DomEvent.stopPropagation;return t.DomEvent.on(l,"mousemove",c).on(l,"touchstart",c).on(l,"mousedown",c).on(l,"dblclick",c).on(l,"click",this._iconClick,this),n.onAdd&&n.onAdd(this),this.fire("controladd"),e.fire("controladd",this),n.notHide&&(l._notHide=!0),e.gmxControlsManager&&e.gmxControlsManager.add(this),l},onRemove:function(e){e.gmxControlsManager&&e.gmxControlsManager.remove(this),this.fire("controlremove"),e.fire("controlremove",this);var o=this._container,n=t.DomEvent.stopPropagation;t.DomEvent.off(o,"mousemove",n).off(o,"touchstart",n).off(o,"mousedown",n).off(o,"dblclick",n).off(o,"click",n).off(o,"click",this._iconClick,this)},addTo:function(e){return t.Control.prototype.addTo.call(this,e),this.options.addBefore&&this.addBefore(this.options.addBefore),this},addBefore:function(t){var e=this._parent&&this._parent._container;if(e||(e=this._map&&this._map._controlCorners[this.getPosition()]),e)for(var o=0,n=e.childNodes.length;o<n;o++){var i=e.childNodes[o];if(t===i._id){e.insertBefore(this._container,i);break}}else this.options.addBefore=t;return this}}),t.Control.gmxIcon=t.Control.GmxIcon,t.control.gmxIcon=function(e){return new t.Control.GmxIcon(e)};const e=window.L;e.Control.GmxCenter=e.Control.extend({options:{position:"center",id:"center",notHide:!0,color:"red"},onRemove:function(t){t.gmxControlsManager&&t.gmxControlsManager.remove(this),t.fire("controlremove",this)},onAdd:function(t){var o="http://www.w3.org/2000/svg",n=e.DomUtil.create("div","leaflet-gmx-center"),i=e.DomUtil.create("div","leaflet-gmx-center"),s=document.createElementNS(o,"svg"),r=document.createElementNS(o,"g"),l=document.createElementNS(o,"path");return this._container=n,n._id=this.options.id,this.options.notHide&&(n._notHide=!0),l.setAttribute("stroke-width",2),l.setAttribute("stroke-opacity",2),l.setAttribute("d","M9 0L9 18M0 9L18 9"),this._path=l,r.appendChild(l),s.appendChild(r),s.setAttribute("width",18),s.setAttribute("height",18),i.appendChild(s),n.appendChild(i),this.setColor(this.options.color),t.fire("controladd",this),t.gmxControlsManager&&t.gmxControlsManager.add(this),n},setColor:function(t){return this.options.color=t,this._map&&this._path.setAttribute("stroke",t),this}}),e.Control.gmxCenter=e.Control.GmxCenter,e.control.gmxCenter=function(t){return new e.Control.GmxCenter(t)};const o=window.L;o.Control.FitCenter=o.Control.extend({options:{position:"topright",id:"fitcenter",notHide:!0,color:"#216b9c"},onRemove:function(t){t.gmxControlsManager&&t.gmxControlsManager.remove(this),t.off("moveend",this._update,this).fire("controlremove",this)},onAdd:function(t){var e=this.options.id,n="leaflet-gmx-"+e,i=o.DomUtil.create("div",n),s=o.DomUtil.create("input","",i),r=o.DomUtil.create("button","",i),l=o.DomUtil.create("div","results",i);return r.title="Переместить центр карты",s.placeholder="Поиск по адресам, координатам",this._input=s,this._container=i,this._results=l,i._id=e,t.on("mousemove",t=>{this._results.style.display="none"},this),o.DomEvent.on(s,"input",this._getSuggestions,this),o.DomEvent.on(s,"contextmenu",o.DomEvent.stopPropagation,this),o.DomEvent.on(i,"mousemove",o.DomEvent.stop),o.DomEvent.on(i,"mouseover",t=>{"block"!==this._results.style.display&&(this._results.style.display="block")},this),o.DomEvent.on(r,"click",(function(){let e=s.value.match(/[+-]?([0-9]*[.])?[0-9]+/g),o=Number(e[0]),n=Number(e[1]);o&&n&&t.setView([o,n])})),o.DomEvent.disableClickPropagation(i),t.on("moveend",this._update,this).fire("controladd",this),t.gmxControlsManager&&t.gmxControlsManager.add(this),i},_parseSearch:function(t){if((t=t||[]).length){this._results;let e=document.createDocumentFragment();t.forEach(t=>{let n=t.display_name,i=t.boundingbox,s=o.DomUtil.create("div","",e);s.innerHTML=n,o.DomEvent.on(s,"click",t=>{this._map.fitBounds([[i[0],i[2]],[i[1],i[3]]])},this)}),this._results.innerText="",this._results.appendChild(e),this._results.classList.add("active")}},_getSuggestions:function(t){const e=t.target.value||"калужское шоссе",o=["format=json","limit=10","polygon_text=1","bounded=1","viewbox=34,53,41,57"].join("&"),n="&q="+encodeURI(e);fetch(`//nominatim.openstreetmap.org/search?${o}${n}`,{}).then(t=>t.json()).then(this._parseSearch.bind(this))},_update:function(t){this._map&&this.setCoords(this._map.getCenter())},_trunc:function(t){return(""+(Math.round(1e7*t)/1e7+1e-8)).substring(0,9)},setCoords:function(t){return this}}),o.control.fitCenter=function(t){return new o.Control.FitCenter(t)};const n=window.L;let i=n.canvas();n.canvas({padding:.5});n.Canvas.include({_updateMarkerPoint:function(t){if(!(!this._drawing||t._empty()||t.feature&&t.feature.properties._isHidden)){var e=t._point,o=t.options._radiusM,n=t.options.image,i=t._map,s=this._ctx,r=t.options.iconName||"border";if(i){if(n){let o=t.options.w||20,i=t.options.h||20;return void s.drawImage(n,e.x-o/2,e.y-i/2,o,i)}let l=i._zoom;o&&!i._rpx&&i._needRound&&(i._rpx=i._needRound*o/getScaleBarDistance(l,i.getCenter())),i._rpx>20&&i._needRound&&(s.save(),s.beginPath(),s.globalAlpha=.2,s.fillStyle="gray",s.arc(e.x,e.y,i._rpx,0,2*Math.PI),s.fill(),s.stroke(),s.closePath(),s.restore()),l>12&&(s.save(),s.beginPath(),s.globalAlpha=1,s.fillStyle="white",s.arc(e.x,e.y,14,0,2*Math.PI),s.fill(),s.closePath(),s.restore()),s.save(),s.beginPath(),s.translate(e.x-0,e.y-0),this._fillStroke(s,t),s.stroke(iconPaths[r].path),s.globalAlpha=t.options.fillOpacity,s.fill(iconPaths[r].path),s.closePath(),s.restore()}}},_updateCirclePoint:function(t){if(this._drawing&&!t._empty()){var e=t._point,o=t.options,n=o.radius||14,i=2*n,s=this._ctx;s.save(),s.beginPath(),s.globalAlpha=1,s.fillStyle=o.fillColor||"red",o.box?s.fillRect(e.x-n,e.y-n,i,i):s.arc(e.x,e.y,n,0,2*Math.PI),s.fill(),o.stroke&&(s.stroke(),o.box&&s.strokeRect(e.x-n,e.y-n,i,i)),s.closePath(),s.restore()}}});n.CircleMarker.extend({_updatePath:function(){this._renderer._updateMarkerPoint(this)}});const s=n.CircleMarker.extend({options:{renderer:i},_updatePath:function(){this._renderer._updateCirclePoint(this)}});function r(){}function l(t){return t()}function a(){return Object.create(null)}function c(t){t.forEach(l)}function d(t){return"function"==typeof t}function p(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(t,e){t.appendChild(e)}function h(t,e,o){t.insertBefore(e,o||null)}function m(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function g(t){return document.createTextNode(t)}function v(){return g(" ")}function _(t,e,o,n){return t.addEventListener(e,o,n),()=>t.removeEventListener(e,o,n)}function C(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function x(t,e,o){null==o?t.removeAttribute(e):t.getAttribute(e)!==o&&t.setAttribute(e,o)}function b(t,e){e=""+e,t.data!==e&&(t.data=e)}let y;function k(t){y=t}function w(){if(!y)throw new Error("Function called outside component initialization");return y}function j(){const t=w();return(e,o)=>{const n=t.$$.callbacks[e];if(n){const i=function(t,e){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,!1,!1,e),o}(e,o);n.slice().forEach(e=>{e.call(t,i)})}}}const D=[],$=[],U=[],E=[],M=Promise.resolve();let A=!1;function P(t){U.push(t)}let I=!1;const L=new Set;function S(){if(!I){I=!0;do{for(let t=0;t<D.length;t+=1){const e=D[t];k(e),N(e.$$)}for(D.length=0;$.length;)$.pop()();for(let t=0;t<U.length;t+=1){const e=U[t];L.has(e)||(L.add(e),e())}U.length=0}while(D.length);for(;E.length;)E.pop()();A=!1,I=!1,L.clear()}}function N(t){if(null!==t.fragment){t.update(),c(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(P)}}const T=new Set;function F(t,e){-1===t.$$.dirty[0]&&(D.push(t),A||(A=!0,M.then(S)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function O(t,e,o,n,i,s,p=[-1]){const u=y;k(t);const h=e.props||{},f=t.$$={fragment:null,ctx:null,props:s,update:r,not_equal:i,bound:a(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:a(),dirty:p};let g=!1;if(f.ctx=o?o(t,h,(e,o,...n)=>{const s=n.length?n[0]:o;return f.ctx&&i(f.ctx[e],f.ctx[e]=s)&&(f.bound[e]&&f.bound[e](s),g&&F(t,e)),o}):[],f.update(),g=!0,c(f.before_update),f.fragment=!!n&&n(f.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);f.fragment&&f.fragment.l(t),t.forEach(m)}else f.fragment&&f.fragment.c();e.intro&&((v=t.$$.fragment)&&v.i&&(T.delete(v),v.i(_))),function(t,e,o){const{fragment:n,on_mount:i,on_destroy:s,after_update:r}=t.$$;n&&n.m(e,o),P(()=>{const e=i.map(l).filter(d);s?s.push(...e):c(e),t.$$.on_mount=[]}),r.forEach(P)}(t,e.target,e.anchor),S()}var v,_;k(u)}class H{$destroy(){!function(t,e){const o=t.$$;null!==o.fragment&&(c(o.on_destroy),o.fragment&&o.fragment.d(e),o.on_destroy=o.fragment=null,o.ctx=[])}(this,1),this.$destroy=r}$on(t,e){const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(e),()=>{const t=o.indexOf(e);-1!==t&&o.splice(t,1)}}$set(){}}function B(t,e,o){const n=t.slice();return n[7]=e[o],n[9]=o,n}function G(t){let e,o,n,i,s;function r(...e){return t[6](t[9],...e)}return{c(){e=f("li"),x(e,"class",o="dot"+(t[9]===t[1]?" selected":"")+" svelte-jjp3es"),e.value=n=t[9],x(e,"role","button"),x(e,"tabindex","0"),x(e,"aria-label",i="slide item "+t[9])},m(t,o,n){h(t,e,o),n&&s(),s=_(e,"click",C(r))},p(n,i){t=n,2&i&&o!==(o="dot"+(t[9]===t[1]?" selected":"")+" svelte-jjp3es")&&x(e,"class",o)},d(t){t&&m(e),s()}}}function R(t){let e,o,n,i,s,l,a,d,p,y,k,w,j,D,$,U,E,M,A,P,I,L,S,N,T,F,O,H,R,Z,V=(t[0][t[1]].kindName||"Фото и схемы ДТП")+"",J=t[1]+1+"",K=t[0].length+"",Q=t[0],W=[];for(let e=0;e<Q.length;e+=1)W[e]=G(B(t,Q,e));return{c(){e=f("div"),o=v(),n=f("div"),i=f("div"),s=v(),l=f("div"),a=f("div"),d=f("div"),p=g(V),y=v(),k=f("div"),w=f("div"),j=f("div"),D=f("button"),$=v(),U=f("div"),E=f("a"),M=f("img"),I=v(),L=f("button"),S=v(),N=f("ul");for(let t=0;t<W.length;t+=1)W[t].c();T=v(),F=f("p"),O=g(J),H=g(" из "),R=g(K),x(e,"class","modal-background svelte-jjp3es"),x(i,"title","Закрыть"),x(i,"class","ant-modal-close svelte-jjp3es"),x(d,"class","ant-modal-title"),x(d,"id","rcDialogTitle1"),x(a,"class","ant-modal-header svelte-jjp3es"),x(D,"type","button"),x(D,"aria-label","previous slide / item"),x(D,"class","control-arrow control-prev svelte-jjp3es"),M.src!==(A=""+(q+t[0][t[1]].guid))&&x(M,"src",A),x(M,"alt",""),x(M,"class","svelte-jjp3es"),x(E,"target","_blank"),x(E,"href",P=""+(q+t[0][t[1]].guid)),x(E,"title","Открыть на весь экран"),x(E,"class","svelte-jjp3es"),x(U,"class","slider-wrapper axis-horizontal svelte-jjp3es"),x(L,"type","button"),x(L,"aria-label","next slide / item"),x(L,"class","control-arrow control-next svelte-jjp3es"),x(N,"class","control-dots svelte-jjp3es"),x(F,"class","carousel-status svelte-jjp3es"),x(j,"class","carousel carousel-slider svelte-jjp3es"),function(t,e,o,n){t.style.setProperty(e,o,n?"important":"")}(j,"width","100%"),x(k,"class","ant-modal-body svelte-jjp3es"),x(l,"class","ant-modal-content svelte-jjp3es"),x(n,"class","modal svelte-jjp3es"),x(n,"role","dialog"),x(n,"aria-modal","true")},m(r,m,f){h(r,e,m),h(r,o,m),h(r,n,m),u(n,i),u(n,s),u(n,l),u(l,a),u(a,d),u(d,p),u(l,y),u(l,k),u(k,w),u(w,j),u(j,D),u(j,$),u(j,U),u(U,E),u(E,M),u(j,I),u(j,L),u(j,S),u(j,N);for(let t=0;t<W.length;t+=1)W[t].m(N,null);u(j,T),u(j,F),u(F,O),u(F,H),u(F,R),f&&c(Z),Z=[_(e,"click",C(t[2])),_(i,"click",C(t[2])),_(D,"click",C(t[3])),_(L,"click",C(t[4])),_(n,"click",C(z))]},p(t,[e]){if(3&e&&V!==(V=(t[0][t[1]].kindName||"Фото и схемы ДТП")+"")&&b(p,V),3&e&&M.src!==(A=""+(q+t[0][t[1]].guid))&&x(M,"src",A),3&e&&P!==(P=""+(q+t[0][t[1]].guid))&&x(E,"href",P),3&e){let o;for(Q=t[0],o=0;o<Q.length;o+=1){const n=B(t,Q,o);W[o]?W[o].p(n,e):(W[o]=G(n),W[o].c(),W[o].m(N,null))}for(;o<W.length;o+=1)W[o].d(1);W.length=Q.length}2&e&&J!==(J=t[1]+1+"")&&b(O,J),1&e&&K!==(K=t[0].length+"")&&b(R,K)},i:r,o:r,d(t){t&&m(e),t&&m(o),t&&m(n),function(t,e){for(let o=0;o<t.length;o+=1)t[o]&&t[o].d(e)}(W,t),c(Z)}}}const q="//map.mvs.group/skpdi/proxy.php?guid=",z=()=>{};function Z(t,e,o){const n=j();let{data:i}=e,s=0;return t.$set=t=>{"data"in t&&o(0,i=t.data)},[i,s,()=>{n("close")},()=>{s&&o(1,s--,s)},()=>{s<i.length-1&&o(1,s++,s)},n,t=>{o(1,s=t)}]}class V extends H{constructor(t){super(),O(this,t,Z,R,p,{data:0})}}function J(t){let e,o,n,i,s,l,a,c,d,p,C,y,k,w,j,D,$,U,E,M,A,P,I,L,S,N,T,F,O,H,B,G,R,q,z,Z,V,J,K=(t[1].name||t[1].dtvp||"")+"",Q=t[1].lat+"",W=t[1].lon+"",X=(t[1].collision_date||t[1].dtp_date||"")+"",Y=(t[1].collision_context||t[1].dtp_date||"")+"";return{c(){e=f("div"),o=f("div"),n=f("b"),i=g(K),s=v(),l=f("div"),a=f("table"),c=f("tbody"),d=f("tr"),p=f("td"),p.textContent="Координаты:",C=v(),y=f("td"),k=g(Q),w=v(),j=g(W),D=v(),$=f("tr"),U=f("td"),U.textContent="Дата/время:",E=v(),M=f("td"),A=g(X),P=v(),I=f("tr"),L=f("td"),S=f("div"),S.textContent="Условия ДТП:",N=v(),T=f("div"),F=g(Y),O=v(),H=f("tr"),H.innerHTML='<td class="first">Нарушения:</td> \n              <td></td>',B=v(),G=f("tr"),G.innerHTML='<td class="first">Участники:</td> \n              <td></td>',R=v(),q=f("tr"),z=f("td"),Z=f("button"),V=g("Фото и схемы"),x(o,"class","pLine"),x(p,"class","first"),x(U,"class","first"),x(S,"class","first"),x(L,"colspan","2"),x(Z,"class","primary svelte-1aipaym"),Z.disabled=t[2],x(z,"class","center"),x(z,"colspan","2"),x(a,"class","table"),x(l,"class","featureCont"),x(e,"class","mvsPopup")},m(r,m,f){h(r,e,m),u(e,o),u(o,n),u(n,i),u(e,s),u(e,l),u(l,a),u(a,c),u(c,d),u(d,p),u(d,C),u(d,y),u(y,k),u(y,w),u(y,j),u(c,D),u(c,$),u($,U),u($,E),u($,M),u(M,A),u(c,P),u(c,I),u(I,L),u(L,S),u(L,N),u(L,T),u(T,F),u(c,O),u(c,H),u(c,B),u(c,G),u(c,R),u(c,q),u(q,z),u(z,Z),u(Z,V),f&&J(),J=_(Z,"click",t[4])},p(t,[e]){2&e&&K!==(K=(t[1].name||t[1].dtvp||"")+"")&&b(i,K),2&e&&Q!==(Q=t[1].lat+"")&&b(k,Q),2&e&&W!==(W=t[1].lon+"")&&b(j,W),2&e&&X!==(X=(t[1].collision_date||t[1].dtp_date||"")+"")&&b(A,X),2&e&&Y!==(Y=(t[1].collision_context||t[1].dtp_date||"")+"")&&b(F,Y)},i:r,o:r,d(t){t&&m(e),J()}}}function K(t,e,o){let n,{showModal:i=!1}=e,{prp:s}=e,r=s.skpdiFiles?"":"disabled";var l;l=()=>{i&&(n=new V({target:document.body,props:{data:s.skpdiFiles}}),n.$on("close",t=>{n.$destroy(),o(0,i=!1)}))},w().$$.after_update.push(l);return t.$set=t=>{"showModal"in t&&o(0,i=t.showModal),"prp"in t&&o(1,s=t.prp)},[i,s,r,n,()=>o(0,i=!0)]}class Q extends H{constructor(t){super(),O(this,t,K,J,p,{showModal:0,prp:1})}}const W=window.L,X=W.popup(),Y=W.featureGroup([]);Y.on("remove",()=>{Y.clearLayers()}).on("add",t=>{console.log("/static/data/dtpskpdi.geojson",t),fetch("https://dtp.mvs.group/scripts/index.php?request=get_stat_gipdd",{}).then(t=>t.json()).then(t=>{let e=t.map(t=>{let e=t.iconType||0,o=!1,n="#FFCC66";return e&&(o=e%2==0,3===e||4===e?n="#99CCFF":5!==e&&6!==e||(n="#99CC99")),t.lat&&t.lon||(console.log("_______",t),t.lat=t.lon=0),new s(W.latLng(t.lat,t.lon),{props:t,radius:6,stroke:o,fillColor:n}).bindPopup(X).on("popupopen",t=>{var e;e=t.target.options.props.id,fetch("https://dtp.mvs.group/scripts/index.php?request=get_dtp_id&id="+e+"&type=gibdd",{}).then(t=>t.json()).then(t=>{let e=W.DomUtil.create("div");const o=new Q({target:e,props:{prp:t}});X._svObj=o,X.setContent(e)})}).on("popupclose",t=>{console.log("popupclose",t),t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})});Y.addLayer(W.layerGroup(e))})});const tt=window.L,et=tt.popup(),ot=tt.featureGroup([]);ot.on("remove",()=>{ot.clearLayers()}).on("add",t=>{console.log("/static/data/dtpskpdi.geojson",t),fetch("https://dtp.mvs.group/scripts/index.php?request=get_skpdi",{}).then(t=>t.json()).then(t=>{let e=t.map(t=>{let e=t.iconType||0,o=!1,n="#FFCC66";return e&&(o=e%2==0,3===e||4===e?n="#99CCFF":5!==e&&6!==e||(n="#99CC99")),t.lat&&t.lon||(console.log("_______",t),t.lat=t.lon=0),new s(tt.latLng(t.lat,t.lon),{props:t,radius:6,box:!0,stroke:o,fillColor:n}).bindPopup(et).on("popupopen",t=>{var e;e=t.target.options.props.id,fetch("https://dtp.mvs.group/scripts/index.php?request=get_dtp_id&id="+e+"&type=skpdi",{}).then(t=>t.json()).then(t=>{let e=tt.DomUtil.create("div");const o=new Q({target:e,props:{prp:t}});et._svObj=o,et.setContent(e)})}).on("popupclose",t=>{console.log("popupclose",t),t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})});ot.addLayer(tt.layerGroup(e))})});const nt=window.L,it=nt.map(document.body,{center:[55.758031,37.611694],minZoom:1,zoom:8,maxZoom:21,attributionControl:!1,trackResize:!0,fadeAnimation:!0,zoomAnimation:!0,distanceUnit:"auto",squareUnit:"auto"});var st=it._controlCorners,rt=it._controlContainer,lt="leaflet-top leaflet-bottom",at="leaflet-left leaflet-right",ct={bottom:"leaflet-bottom "+at,gmxbottomleft:"leaflet-bottom leaflet-left",gmxbottomcenter:"leaflet-bottom "+at,gmxbottomright:"leaflet-bottom leaflet-right",center:lt+" "+at,right:"leaflet-right "+lt,left:"leaflet-left "+lt,top:"leaflet-top "+at};for(var dt in ct)st[dt]||(st[dt]=nt.DomUtil.create("div",ct[dt],rt));it.addControl(nt.control.gmxCenter()).addControl(nt.control.fitCenter());let pt={OpenStreetMap:nt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(it)},ut={"ДТП СКПДИ":ot,"ДТП ГИБДД":Y};nt.control.layers(pt,ut).addTo(it);nt.control.gmxIcon({id:"filters",className:"leaflet-bar",togglable:!0,title:"Фильтры"}).on("statechange",(function(t){console.log({filtersIcon:t.target.options.isActive})})).addTo(it);return it}();
//# sourceMappingURL=main.js.map
