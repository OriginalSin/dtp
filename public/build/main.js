var dtp=function(){"use strict";const t=window.L;t.Control.GmxIcon=t.Control.extend({includes:t.Evented?t.Evented.prototype:t.Mixin.Events,options:{position:"topleft",id:"defaultIcon",isActive:!1},setActive:function(e,n,o){var l=this.options,s=this._container;if(l.togglable||l.toggle){var r=l.isActive,i=this._prefix,a=i+"-"+l.id;l.isActive=e,this._img&&(e&&l.activeImageUrl?this._img.src=l.activeImageUrl:!e&&l.regularImageUrl&&(this._img.src=l.regularImageUrl)),e?(t.DomUtil.addClass(s,i+"-active"),t.DomUtil.addClass(s,a+"-active"),s.children.length&&t.DomUtil.addClass(s,i+"-externalImage-active"),l.styleActive&&this.setStyle(l.styleActive)):(t.DomUtil.removeClass(s,i+"-active"),t.DomUtil.removeClass(s,a+"-active"),s.children.length&&t.DomUtil.removeClass(s,i+"-externalImage-active"),l.style&&this.setStyle(l.style)),n||r===e||this.fire("statechange",o)}if(t.gmxUtil&&t.gmxUtil.isIEOrEdge){var p=s.getElementsByTagName("use");if(p.length){var c=p[0],d=c.getAttribute("href")||c.getAttribute("xlink:href");c.setAttribute("href",d)}}},onAdd:function(e){var n=null,o=this.options,l=o.svgSprite||e.options.svgSprite,s="leaflet-gmx-icon"+(!l||o.regularImageUrl||o.text?"":"Svg"),r=s+"-"+o.id;this._prefix=s;var i=t.DomUtil.create("div",s+" "+r);if(i._id=o.id,this._container=i,o.title&&(i.title=o.title),this.setStyle=function(t){for(var e in t)i.style[e]=t[e]},o.className&&t.DomUtil.addClass(i,o.className),o.regularImageUrl)(n=t.DomUtil.create("img","",i)).src=o.regularImageUrl,this._img=n,t.DomUtil.addClass(i,s+"-img"),t.DomUtil.addClass(i,s+"-externalImage");else if(o.text)t.DomUtil.addClass(i,s+"-text"),t.DomUtil.create("span","",i).innerHTML=o.text;else if(l){t.DomUtil.addClass(i,"svgIcon");var a="#"+o.id.toLowerCase();i.innerHTML='<svg role="img" class="svgIcon"><use xlink:href="'+a+'" href="'+a+'"></use></svg>'}else t.DomUtil.addClass(i,s+"-img "+s+"-sprite");o.style&&this.setStyle(o.style),this._iconClick=function(t){i.parentNode&&i===t.toElement&&(this.setActive(!this.options.isActive,!1,t),this.fire("click",t),this.options.stateChange&&this.options.stateChange(this,t))};var p=t.DomEvent.stopPropagation;t.DomEvent.preventDefault;return t.DomEvent.on(i,"mousemove",p).on(i,"touchstart",p).on(i,"mousedown",p).on(i,"dblclick",p).on(i,"click",p).on(i,"click",this._iconClick,this),o.onAdd&&o.onAdd(this),this.fire("controladd"),e.fire("controladd",this),o.notHide&&(i._notHide=!0),e.gmxControlsManager&&e.gmxControlsManager.add(this),i},onRemove:function(e){e.gmxControlsManager&&e.gmxControlsManager.remove(this),this.fire("controlremove"),e.fire("controlremove",this);var n=this._container,o=t.DomEvent.stopPropagation;t.DomEvent.off(n,"mousemove",o).off(n,"touchstart",o).off(n,"mousedown",o).off(n,"dblclick",o).off(n,"click",o).off(n,"click",this._iconClick,this)},addTo:function(e){return t.Control.prototype.addTo.call(this,e),this.options.addBefore&&this.addBefore(this.options.addBefore),this},addBefore:function(t){var e=this._parent&&this._parent._container;if(e||(e=this._map&&this._map._controlCorners[this.getPosition()]),e)for(var n=0,o=e.childNodes.length;n<o;n++){var l=e.childNodes[n];if(t===l._id){e.insertBefore(this._container,l);break}}else this.options.addBefore=t;return this}}),t.Control.gmxIcon=t.Control.GmxIcon,t.control.gmxIcon=function(e){return new t.Control.GmxIcon(e)};const e=window.L;e.Control.GmxCenter=e.Control.extend({options:{position:"center",id:"center",notHide:!0,color:"red"},onRemove:function(t){t.gmxControlsManager&&t.gmxControlsManager.remove(this),t.fire("controlremove",this)},onAdd:function(t){var n="http://www.w3.org/2000/svg",o=e.DomUtil.create("div","leaflet-gmx-center"),l=e.DomUtil.create("div","leaflet-gmx-center"),s=document.createElementNS(n,"svg"),r=document.createElementNS(n,"g"),i=document.createElementNS(n,"path");return this._container=o,o._id=this.options.id,this.options.notHide&&(o._notHide=!0),i.setAttribute("stroke-width",2),i.setAttribute("stroke-opacity",2),i.setAttribute("d","M9 0L9 18M0 9L18 9"),this._path=i,r.appendChild(i),s.appendChild(r),s.setAttribute("width",18),s.setAttribute("height",18),l.appendChild(s),o.appendChild(l),this.setColor(this.options.color),t.fire("controladd",this),t.gmxControlsManager&&t.gmxControlsManager.add(this),o},setColor:function(t){return this.options.color=t,this._map&&this._path.setAttribute("stroke",t),this}}),e.Control.gmxCenter=e.Control.GmxCenter,e.control.gmxCenter=function(t){return new e.Control.GmxCenter(t)};const n=window.L;n.Control.FitCenter=n.Control.extend({options:{position:"topright",id:"fitcenter",notHide:!0,color:"#216b9c"},onRemove:function(t){t.gmxControlsManager&&t.gmxControlsManager.remove(this),t.off("moveend",this._update,this).fire("controlremove",this)},onAdd:function(t){var e=this.options.id,o="leaflet-gmx-"+e,l=n.DomUtil.create("div",o),s=n.DomUtil.create("input","",l),r=n.DomUtil.create("button","",l),i=n.DomUtil.create("div","results",l);return r.title="Переместить центр карты",s.placeholder="Поиск по адресам, координатам",this._input=s,this._container=l,this._results=i,l._id=e,t.on("mousemove",t=>{this._results.style.display="none"},this),n.DomEvent.on(s,"input",this._getSuggestions,this),n.DomEvent.on(s,"contextmenu",n.DomEvent.stopPropagation,this),n.DomEvent.on(l,"mousemove",n.DomEvent.stop),n.DomEvent.on(l,"mouseover",t=>{"block"!==this._results.style.display&&(this._results.style.display="block")},this),n.DomEvent.on(r,"click",(function(){let e=s.value.match(/[+-]?([0-9]*[.])?[0-9]+/g);e&&e.length>1&&t.setView([Number(e[0]),Number(e[1])])})),n.DomEvent.disableClickPropagation(l),t.on("moveend",this._update,this).fire("controladd",this),t.gmxControlsManager&&t.gmxControlsManager.add(this),l},_parseSearch:function(t){if((t=t||[]).length){this._results;let e=document.createDocumentFragment();t.forEach(t=>{let o=t.display_name,l=t.boundingbox,s=n.DomUtil.create("div","",e);s.innerHTML=o,n.DomEvent.on(s,"click",t=>{this._map.fitBounds([[l[0],l[2]],[l[1],l[3]]])},this)}),this._results.innerText="",this._results.appendChild(e),this._results.classList.add("active")}},_getSuggestions:function(t){const e=t.target.value||"калужское шоссе",n=["format=json","limit=10","polygon_text=1","bounded=1","viewbox=34,53,41,57"].join("&"),o="&q="+encodeURI(e);fetch(`//nominatim.openstreetmap.org/search?${n}${o}`,{}).then(t=>t.json()).then(this._parseSearch.bind(this))},_update:function(t){this._map&&this.setCoords(this._map.getCenter())},_trunc:function(t){return(""+(Math.round(1e7*t)/1e7+1e-8)).substring(0,9)},setCoords:function(t){return this}}),n.control.fitCenter=function(t){return new n.Control.FitCenter(t)};const o='&copy; <a href="https://n.maps.yandex.ru/?oid=1900133#!/?z=18&ll=36.860478%2C55.429679&l=nk%23map">Yandex</a> contributors',l="//inv.mvs.group/mapcache/",s=new Date,r=s.getMonth()+1,i=s.getDate(),a=(s.getFullYear(),{m1:{title:"Дороги",prefix:l+"m1/",postfix:"?x={x}&y={y}&z={z}&l=mrcss",errorTileUrlPrefix:"//core-nmaps-mrc-browser.maps.yandex.ru/tiles",options:{key:"m1",minZoom:10,maxZoom:19,attribution:o}},m2:{title:"Карта(Яндекс)",prefix:l+"m2/tiles",postfix:"?l=map&v=18.01.10-2&x={x}&y={y}&z={z}&scale=1&lang=ru_RU",errorTileUrlPrefix:"//vec01.maps.yandex.net/tiles",options:{key:"m2",maxNativeZoom:19,maxZoom:21,attribution:o}},m3:{title:"Снимки(Яндекс)",prefix:l+"m3/tiles",postfix:"?l=sat&v=3.462.0&x={x}&y={y}&z={z}&lang=ru_RU",errorTileUrlPrefix:"//sat04.maps.yandex.net/tiles",options:{key:"m3",maxNativeZoom:19,maxZoom:21,attribution:o}},m4:{title:"Скорость(Народная карта)",prefix:l+"m4/",postfix:"?x={x}&y={y}&z={z}&l=mpskl&sl=104,301135,302526,302827,5300026,5400046,70300236,70300638",errorTileUrlPrefix:"//04.core-nmaps-renderer-nmaps.maps.yandex.net/tile",options:{key:"m4",minZoom:8,maxZoom:19,attribution:o}},m5:{title:"Светофоры",prefix:l+"m5/",postfix:"?x={x}&y={y}&z={z}&l=mpskl&sl=301750",errorTileUrlPrefix:"//04.core-nmaps-renderer-nmaps.maps.yandex.net/tile",options:{key:"m4",minZoom:12,maxZoom:19,attribution:o}},m6:{title:"Дороги в стадии строительства",prefix:"//03.core-nmaps-renderer-nmaps.maps.yandex.net/",postfix:"?x={x}&y={y}&z={z}&l=mpskl&sl=70300289",errorTileUrlPrefix:"//03.core-nmaps-renderer-nmaps.maps.yandex.net/",options:{key:"m6",minZoom:10,maxZoom:19,attribution:o}}}),p={};window.URLSearchParams&&new URLSearchParams(window.location.search).forEach((t,e)=>{p[e]=t});const c=window.L;let d=c.canvas();const u=function(t,e){var n=c.Projection.Mercator.project(e),o=c.Projection.Mercator.unproject(new c.Point(n.x+40,n.y+30));return 156543.033928041*Math.pow(2,-t)*((t,e)=>{for(var n=Math.PI/180,o={lon:n*t.lng,lat:n*t.lat},l={lon:n*e.lng,lat:n*e.lat},s=6378137,r=6356752.3142,i=1/298.257223563,a=l.lon-o.lon,p=Math.atan((1-i)*Math.tan(o.lat)),c=Math.atan((1-i)*Math.tan(l.lat)),d=Math.sin(p),u=Math.cos(p),_=Math.sin(c),h=Math.cos(c),v=a,f=2*Math.PI,m=20;Math.abs(v-f)>1e-12&&--m>0;){var g=Math.sin(v),y=Math.cos(v),b=Math.sqrt(h*g*(h*g)+(u*_-d*h*y)*(u*_-d*h*y));if(0===b)return 0;var k=d*_+u*h*y,x=Math.atan2(b,k),j=u*h*g/b,L=1-j*j,C=k-2*d*_/L;isNaN(C)&&(C=0);var w=i/16*L*(4+i*(4-3*L));f=v,v=a+(1-w)*i*j*(x+w*b*(C+w*k*(2*C*C-1)))}if(0===m)return NaN;var D=L*(s*s/(r*r)-1),z=D/1024*(256+D*(D*(74-47*D)-128));return r*(1+D/16384*(4096+D*(D*(320-175*D)-768)))*(x-z*b*(C+z/4*(k*(2*C*C-1)-z/6*C*(4*b*b-3)*(4*C*C-3))))})(e,o)/50},_=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix(),h={camera:((t,e,n)=>{let o=new Path2D(t),l=new Path2D;return l.addPath(o,_.translate(e,n).rotate(180).scale(-20/832,-20/832)),l})("M864 260H728l-32.4-90.8a32.07 32.07 0 0 0-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 260H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V340c0-44.2-35.8-80-80-80zM512 716c-88.4 0-160-71.6-160-160s71.6-160 160-160 160 71.6 160 160-71.6 160-160 160zm-96-160a96 96 0 1 0 192 0 96 96 0 1 0-192 0z",-12,-13)};c.canvas({padding:.5});c.Canvas.include({_updateMarkerPoint:function(t){if(!(!this._drawing||t._empty()||t.feature&&t.feature.properties._isHidden)){var e=t._point,n=t.options._radiusM,o=t.options.image,l=t._map,s=this._ctx,r=t.options.iconName||"border";if(l){if(o){let n=t.options.w||20,l=t.options.h||20;return void s.drawImage(o,e.x-n/2,e.y-l/2,n,l)}let i=l._zoom;n&&!l._rpx&&l._needRound&&(l._rpx=l._needRound*n/u(i,l.getCenter())),l._rpx>20&&l._needRound&&(s.save(),s.beginPath(),s.globalAlpha=.2,s.fillStyle="gray",s.arc(e.x,e.y,l._rpx,0,2*Math.PI),s.fill(),s.stroke(),s.closePath(),s.restore()),i>12&&(s.save(),s.beginPath(),s.globalAlpha=1,s.fillStyle="white",s.arc(e.x,e.y,14,0,2*Math.PI),s.fill(),s.closePath(),s.restore()),s.save(),s.beginPath(),s.translate(e.x-0,e.y-0),this._fillStroke(s,t),s.stroke(iconPaths[r].path),s.globalAlpha=t.options.fillOpacity,s.fill(iconPaths[r].path),s.closePath(),s.restore()}}},_updateCirclePoint:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=t.options,o=n.radius||14,l=2*o,s=(t._map,this._ctx);if(s.save(),s.beginPath(),s.globalAlpha=1,s.fillStyle=n.fillColor||"red",n.triangle)s.moveTo(e.x,e.y+o),s.lineTo(e.x+o,e.y-o),s.lineTo(e.x-o,e.y-o),s.lineTo(e.x,e.y+o);else if(n.rhomb)s.moveTo(e.x+o,e.y),s.lineTo(e.x,e.y+o),s.lineTo(e.x-o,e.y),s.lineTo(e.x,e.y-o),s.lineTo(e.x+o,e.y);else if(n.box)s.fillRect(e.x-o,e.y-o,l,l);else if(n.path){let t=h[n.path];s.translate(e.x,e.y),s.fill(t),s.stroke(t)}else s.arc(e.x,e.y,o,0,2*Math.PI);s.fill(),n.stroke&&(s.stroke(),n.triangle?(s.moveTo(e.x,e.y+o),s.lineTo(e.x+o,e.y-o),s.lineTo(e.x-o,e.y-o),s.lineTo(e.x,e.y+o)):n.box?s.strokeRect(e.x-o,e.y-o,l,l):s.arc(e.x,e.y,o,0,2*Math.PI)),s.closePath(),s.restore()}}});c.CircleMarker.extend({_updatePath:function(){this._renderer._updateMarkerPoint(this)}});const v=c.CircleMarker.extend({options:{renderer:d},_updatePath:function(){this._renderer._updateCirclePoint(this)}});c.Rectangle.extend({options:{renderer:d}});function f(){}function m(t){return t()}function g(){return Object.create(null)}function y(t){t.forEach(m)}function b(t){return"function"==typeof t}function k(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function x(t){return null==t?"":t}function j(t,e){t.appendChild(e)}function C(t,e,n){t.insertBefore(e,n||null)}function w(t){t.parentNode.removeChild(t)}function D(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function z(t){return document.createElement(t)}function F(t){return document.createTextNode(t)}function T(){return F(" ")}function O(){return F("")}function E(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function $(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function M(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function q(t){return""===t?void 0:+t}function P(t,e){e=""+e,t.data!==e&&(t.data=e)}function S(t,e){(null!=e||t.value)&&(t.value=e)}function H(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}}function N(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];o.selected=~e.indexOf(o.__value)}}function B(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function U(t){return[].map.call(t.querySelectorAll(":checked"),t=>t.__value)}let I;function G(t){I=t}function A(){if(!I)throw new Error("Function called outside component initialization");return I}function R(t){A().$$.after_update.push(t)}function Z(){const t=A();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const l=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);o.slice().forEach(e=>{e.call(t,l)})}}}const Y=[],V=[],W=[],K=[],J=Promise.resolve();let Q=!1;function X(t){W.push(t)}let tt=!1;const et=new Set;function nt(){if(!tt){tt=!0;do{for(let t=0;t<Y.length;t+=1){const e=Y[t];G(e),ot(e.$$)}for(Y.length=0;V.length;)V.pop()();for(let t=0;t<W.length;t+=1){const e=W[t];et.has(e)||(et.add(e),e())}W.length=0}while(Y.length);for(;K.length;)K.pop()();Q=!1,tt=!1,et.clear()}}function ot(t){if(null!==t.fragment){t.update(),y(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(X)}}const lt=new Set;let st;function rt(){st={r:0,c:[],p:st}}function it(){st.r||y(st.c),st=st.p}function at(t,e){t&&t.i&&(lt.delete(t),t.i(e))}function pt(t,e,n,o){if(t&&t.o){if(lt.has(t))return;lt.add(t),st.c.push(()=>{lt.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function ct(t){t&&t.c()}function dt(t,e,n){const{fragment:o,on_mount:l,on_destroy:s,after_update:r}=t.$$;o&&o.m(e,n),X(()=>{const e=l.map(m).filter(b);s?s.push(...e):y(e),t.$$.on_mount=[]}),r.forEach(X)}function ut(t,e){const n=t.$$;null!==n.fragment&&(y(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function _t(t,e){-1===t.$$.dirty[0]&&(Y.push(t),Q||(Q=!0,J.then(nt)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ht(t,e,n,o,l,s,r=[-1]){const i=I;G(t);const a=e.props||{},p=t.$$={fragment:null,ctx:null,props:s,update:f,not_equal:l,bound:g(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(i?i.$$.context:[]),callbacks:g(),dirty:r};let c=!1;if(p.ctx=n?n(t,a,(e,n,...o)=>{const s=o.length?o[0]:n;return p.ctx&&l(p.ctx[e],p.ctx[e]=s)&&(p.bound[e]&&p.bound[e](s),c&&_t(t,e)),n}):[],p.update(),c=!0,y(p.before_update),p.fragment=!!o&&o(p.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);p.fragment&&p.fragment.l(t),t.forEach(w)}else p.fragment&&p.fragment.c();e.intro&&at(t.$$.fragment),dt(t,e.target,e.anchor),nt()}G(i)}class vt{$destroy(){ut(this,1),this.$destroy=f}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function ft(t,e,n){const o=t.slice();return o[7]=e[n],o[9]=n,o}function mt(t){let e,n,o,l,s;function r(...e){return t[6](t[9],...e)}return{c(){e=z("li"),M(e,"class",n="dot"+(t[9]===t[1]?" selected":"")+" svelte-jjp3es"),e.value=o=t[9],M(e,"role","button"),M(e,"tabindex","0"),M(e,"aria-label",l="slide item "+t[9])},m(t,n,o){C(t,e,n),o&&s(),s=E(e,"click",$(r))},p(o,l){t=o,2&l&&n!==(n="dot"+(t[9]===t[1]?" selected":"")+" svelte-jjp3es")&&M(e,"class",n)},d(t){t&&w(e),s()}}}function gt(t){let e,n,o,l,s,r,i,a,p,c,d,u,_,h,v,m,g,b,k,x,L,O,q,S,H,N,B,U,I,G,A=(t[0][t[1]].kindName||"Фото и схемы ДТП")+"",R=t[1]+1+"",Z=t[0].length+"",Y=t[0],V=[];for(let e=0;e<Y.length;e+=1)V[e]=mt(ft(t,Y,e));return{c(){e=z("div"),n=T(),o=z("div"),l=z("div"),s=T(),r=z("div"),i=z("div"),a=z("div"),p=F(A),c=T(),d=z("div"),u=z("div"),_=z("div"),h=z("button"),v=T(),m=z("div"),g=z("a"),b=z("img"),L=T(),O=z("button"),q=T(),S=z("ul");for(let t=0;t<V.length;t+=1)V[t].c();H=T(),N=z("p"),B=F(R),U=F(" из "),I=F(Z),M(e,"class","modal-background svelte-jjp3es"),M(l,"title","Закрыть"),M(l,"class","ant-modal-close svelte-jjp3es"),M(a,"class","ant-modal-title"),M(a,"id","rcDialogTitle1"),M(i,"class","ant-modal-header svelte-jjp3es"),M(h,"type","button"),M(h,"aria-label","previous slide / item"),M(h,"class","control-arrow control-prev svelte-jjp3es"),b.src!==(k=""+(yt+t[0][t[1]].guid))&&M(b,"src",k),M(b,"alt",""),M(b,"class","svelte-jjp3es"),M(g,"target","_blank"),M(g,"href",x=""+(yt+t[0][t[1]].guid)),M(g,"title","Открыть на весь экран"),M(g,"class","svelte-jjp3es"),M(m,"class","slider-wrapper axis-horizontal svelte-jjp3es"),M(O,"type","button"),M(O,"aria-label","next slide / item"),M(O,"class","control-arrow control-next svelte-jjp3es"),M(S,"class","control-dots svelte-jjp3es"),M(N,"class","carousel-status svelte-jjp3es"),M(_,"class","carousel carousel-slider svelte-jjp3es"),function(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}(_,"width","100%"),M(d,"class","ant-modal-body svelte-jjp3es"),M(r,"class","ant-modal-content svelte-jjp3es"),M(o,"class","modal svelte-jjp3es"),M(o,"role","dialog"),M(o,"aria-modal","true")},m(f,k,x){C(f,e,k),C(f,n,k),C(f,o,k),j(o,l),j(o,s),j(o,r),j(r,i),j(i,a),j(a,p),j(r,c),j(r,d),j(d,u),j(u,_),j(_,h),j(_,v),j(_,m),j(m,g),j(g,b),j(_,L),j(_,O),j(_,q),j(_,S);for(let t=0;t<V.length;t+=1)V[t].m(S,null);j(_,H),j(_,N),j(N,B),j(N,U),j(N,I),x&&y(G),G=[E(e,"click",$(t[2])),E(l,"click",$(t[2])),E(h,"click",$(t[3])),E(O,"click",$(t[4])),E(o,"click",$(bt))]},p(t,[e]){if(3&e&&A!==(A=(t[0][t[1]].kindName||"Фото и схемы ДТП")+"")&&P(p,A),3&e&&b.src!==(k=""+(yt+t[0][t[1]].guid))&&M(b,"src",k),3&e&&x!==(x=""+(yt+t[0][t[1]].guid))&&M(g,"href",x),3&e){let n;for(Y=t[0],n=0;n<Y.length;n+=1){const o=ft(t,Y,n);V[n]?V[n].p(o,e):(V[n]=mt(o),V[n].c(),V[n].m(S,null))}for(;n<V.length;n+=1)V[n].d(1);V.length=Y.length}2&e&&R!==(R=t[1]+1+"")&&P(B,R),1&e&&Z!==(Z=t[0].length+"")&&P(I,Z)},i:f,o:f,d(t){t&&w(e),t&&w(n),t&&w(o),D(V,t),y(G)}}}const yt="//map.mvs.group/skpdi/proxy.php?guid=",bt=()=>{};function kt(t,e,n){const o=Z();let{data:l}=e,s=0;return t.$set=t=>{"data"in t&&n(0,l=t.data)},[l,s,()=>{o("close")},()=>{s&&n(1,s--,s)},()=>{s<l.length-1&&n(1,s++,s)},o,t=>{n(1,s=t)}]}class xt extends vt{constructor(t){super(),ht(this,t,kt,gt,k,{data:0})}}function jt(t,e,n){const o=t.slice();return o[9]=e[n],o}function Lt(t,e,n){const o=t.slice();return o[6]=e[n],o}function Ct(t){let e,n,o,l=t[9].k_uch&&(t[9].npdd||t[9].sop_npdd)&&function(t){let e,n,o=t[9].k_uch+"";return{c(){e=z("li"),n=F(o)},m(t,o){C(t,e,o),j(e,n)},p:f,d(t){t&&w(e)}}}(t),s=t[9].npdd&&function(t){let e,n,o=t[9].npdd+"";return{c(){e=z("li"),n=F(o)},m(t,o){C(t,e,o),j(e,n)},p:f,d(t){t&&w(e)}}}(t),r=t[9].sop_npdd&&function(t){let e,n,o=t[9].sop_npdd+"";return{c(){e=z("li"),n=F(o)},m(t,o){C(t,e,o),j(e,n)},p:f,d(t){t&&w(e)}}}(t);return{c(){l&&l.c(),e=T(),s&&s.c(),n=T(),r&&r.c(),o=O()},m(t,i){l&&l.m(t,i),C(t,e,i),s&&s.m(t,i),C(t,n,i),r&&r.m(t,i),C(t,o,i)},p(t,e){t[9].k_uch&&(t[9].npdd||t[9].sop_npdd)&&l.p(t,e),t[9].npdd&&s.p(t,e),t[9].sop_npdd&&r.p(t,e)},d(t){l&&l.d(t),t&&w(e),s&&s.d(t),t&&w(n),r&&r.d(t),t&&w(o)}}}function wt(t){let e,n,o=t[6].ts&&function(t){let e,n,o=t[6].ts+"";return{c(){e=z("li"),n=F(o)},m(t,o){C(t,e,o),j(e,n)},p:f,d(t){t&&w(e)}}}(t),l=t[6].arr,s=[];for(let e=0;e<l.length;e+=1)s[e]=Ct(jt(t,l,e));return{c(){o&&o.c(),e=T();for(let t=0;t<s.length;t+=1)s[t].c();n=O()},m(t,l){o&&o.m(t,l),C(t,e,l);for(let e=0;e<s.length;e+=1)s[e].m(t,l);C(t,n,l)},p(t,e){if(t[6].ts&&o.p(t,e),4&e){let o;for(l=t[6].arr,o=0;o<l.length;o+=1){const r=jt(t,l,o);s[o]?s[o].p(r,e):(s[o]=Ct(r),s[o].c(),s[o].m(n.parentNode,n))}for(;o<s.length;o+=1)s[o].d(1);s.length=l.length}},d(t){o&&o.d(t),t&&w(e),D(s,t),t&&w(n)}}}function Dt(t){let e,n,o,l,s,r=t[0].spog+"";return{c(){e=z("div"),n=z("div"),n.textContent="Погода:",o=T(),l=z("div"),s=F(r),M(n,"class","stitle"),M(l,"class","sval")},m(t,r){C(t,e,r),j(e,n),j(e,o),j(e,l),j(l,s)},p(t,e){1&e&&r!==(r=t[0].spog+"")&&P(s,r)},d(t){t&&w(e)}}}function zt(t){let e,n,o,l,s,r=t[0].s_pch+"";return{c(){e=z("div"),n=z("div"),n.textContent="Покрытие:",o=T(),l=z("div"),s=F(r),M(n,"class","stitle"),M(l,"class","sval")},m(t,r){C(t,e,r),j(e,n),j(e,o),j(e,l),j(l,s)},p(t,e){1&e&&r!==(r=t[0].s_pch+"")&&P(s,r)},d(t){t&&w(e)}}}function Ft(t){let e,n,o,l,s,r=t[0].osv+"";return{c(){e=z("div"),n=z("div"),n.textContent="Освещенность:",o=T(),l=z("div"),s=F(r),M(n,"class","stitle"),M(l,"class","sval")},m(t,r){C(t,e,r),j(e,n),j(e,o),j(e,l),j(l,s)},p(t,e){1&e&&r!==(r=t[0].osv+"")&&P(s,r)},d(t){t&&w(e)}}}function Tt(t){let e,n,o,l,s,r=t[0].ndu+"";return{c(){e=z("div"),n=z("div"),n.textContent="Иные условия:",o=T(),l=z("div"),s=F(r),M(n,"class","stitle"),M(l,"class","sval")},m(t,r){C(t,e,r),j(e,n),j(e,o),j(e,l),j(l,s)},p(t,e){1&e&&r!==(r=t[0].ndu+"")&&P(s,r)},d(t){t&&w(e)}}}function Ot(t){let e,n,o,l,s,r,i,a,p,c,d,u,_,h,v,m,g,y,b,k,x,L,O,$,q,S,H,N,B,U,I,G,A,R,Z,Y,V,W,K,J,Q,X,tt,et,nt,ot,lt,st,rt,it,at,pt,ct,dt,ut,_t,ht,vt,ft,mt,gt,yt,bt,kt,xt,jt,Ct,Ot,Et,$t,Mt,qt,Pt,St,Ht,Nt,Bt,Ut,It=(t[0].name||t[0].dtvp||"")+"",Gt=(t[0].sid||t[0].id_stat||t[0].id_skpdi||"")+"",At=(t[0].district||"")+"",Rt=(t[0].dor||"")+"",Zt=(t[0].km||0)+"",Yt=(t[0].m||0)+"",Vt=t[0].lat+"",Wt=t[0].lon+"",Kt=(t[0].collision_date||t[0].dtp_date||"")+"",Jt=(t[0].dtvp||"")+"",Qt=t[0].pog+"",Xt=t[0].ran+"",te=t[2],ee=[];for(let e=0;e<te.length;e+=1)ee[e]=wt(Lt(t,te,e));let ne=t[0].spog&&Dt(t),oe=t[0].s_pch&&zt(t),le=t[0].osv&&Ft(t),se=t[0].ndu&&Tt(t);return{c(){e=z("div"),n=z("div"),o=z("b"),l=F(It),s=T(),r=z("div"),i=z("table"),a=z("tbody"),p=z("tr"),c=z("td"),c.textContent="ID:",d=T(),u=z("td"),_=F(Gt),h=T(),v=z("tr"),m=z("td"),m.textContent="Адрес:",g=T(),y=z("td"),b=F(At),k=T(),x=F(Rt),L=T(),O=z("tr"),$=z("td"),$.textContent="Пикетаж:",q=T(),S=z("td"),H=z("b"),N=F(Zt),B=F(" км. "),U=z("b"),I=F(Yt),G=F(" м."),A=T(),R=z("tr"),Z=z("td"),Z.textContent="Координаты:",Y=T(),V=z("td"),W=F(Vt),K=T(),J=F(Wt),Q=T(),X=z("span"),tt=T(),et=z("tr"),nt=z("td"),nt.textContent="Дата/время:",ot=T(),lt=z("td"),st=F(Kt),rt=T(),it=z("tr"),at=z("td"),at.textContent="Вид ДТП:",pt=T(),ct=z("td"),dt=F(Jt),ut=T(),_t=z("tr"),ht=z("td"),ht.textContent="Нарушения:",vt=T(),ft=z("td"),mt=z("ul");for(let t=0;t<ee.length;t+=1)ee[t].c();gt=T(),yt=z("tr"),bt=z("td"),bt.textContent="Условия:",kt=T(),xt=z("td"),ne&&ne.c(),jt=T(),oe&&oe.c(),Ct=T(),le&&le.c(),Ot=T(),se&&se.c(),Et=T(),$t=z("tr"),Mt=z("td"),Mt.textContent="Количество погибших/раненых:",qt=T(),Pt=z("td"),St=z("b"),Ht=F(Qt),Nt=F("/"),Bt=F(Xt),M(n,"class","pLine"),M(c,"class","first svelte-ipyqnf"),M(m,"class","first svelte-ipyqnf"),M($,"class","first svelte-ipyqnf"),M(Z,"class","first svelte-ipyqnf"),M(X,"title","Скопировать в буфер обмена"),M(X,"class","leaflet-gmx-icon-copy"),M(nt,"class","first svelte-ipyqnf"),M(at,"class","first svelte-ipyqnf"),M(ht,"class","first svelte-ipyqnf"),M(bt,"class","first svelte-ipyqnf"),M(Mt,"class","first svelte-ipyqnf"),M(i,"class","table"),M(r,"class","featureCont"),M(e,"class","mvsPopup svelte-ipyqnf")},m(f,w,D){C(f,e,w),j(e,n),j(n,o),j(o,l),j(e,s),j(e,r),j(r,i),j(i,a),j(a,p),j(p,c),j(p,d),j(p,u),j(u,_),j(a,h),j(a,v),j(v,m),j(v,g),j(v,y),j(y,b),j(y,k),j(y,x),j(a,L),j(a,O),j(O,$),j(O,q),j(O,S),j(S,H),j(H,N),j(S,B),j(S,U),j(U,I),j(S,G),j(a,A),j(a,R),j(R,Z),j(R,Y),j(R,V),j(V,W),j(V,K),j(V,J),j(V,Q),j(V,X),j(a,tt),j(a,et),j(et,nt),j(et,ot),j(et,lt),j(lt,st),j(a,rt),j(a,it),j(it,at),j(it,pt),j(it,ct),j(ct,dt),j(a,ut),j(a,_t),j(_t,ht),j(_t,vt),j(_t,ft),j(ft,mt);for(let t=0;t<ee.length;t+=1)ee[t].m(mt,null);j(a,gt),j(a,yt),j(yt,bt),j(yt,kt),j(yt,xt),ne&&ne.m(xt,null),j(xt,jt),oe&&oe.m(xt,null),j(xt,Ct),le&&le.m(xt,null),j(xt,Ot),se&&se.m(xt,null),j(a,Et),j(a,$t),j($t,Mt),j($t,qt),j($t,Pt),j(Pt,St),j(St,Ht),j(St,Nt),j(St,Bt),D&&Ut(),Ut=E(X,"click",t[1])},p(t,[e]){if(1&e&&It!==(It=(t[0].name||t[0].dtvp||"")+"")&&P(l,It),1&e&&Gt!==(Gt=(t[0].sid||t[0].id_stat||t[0].id_skpdi||"")+"")&&P(_,Gt),1&e&&At!==(At=(t[0].district||"")+"")&&P(b,At),1&e&&Rt!==(Rt=(t[0].dor||"")+"")&&P(x,Rt),1&e&&Zt!==(Zt=(t[0].km||0)+"")&&P(N,Zt),1&e&&Yt!==(Yt=(t[0].m||0)+"")&&P(I,Yt),1&e&&Vt!==(Vt=t[0].lat+"")&&P(W,Vt),1&e&&Wt!==(Wt=t[0].lon+"")&&P(J,Wt),1&e&&Kt!==(Kt=(t[0].collision_date||t[0].dtp_date||"")+"")&&P(st,Kt),1&e&&Jt!==(Jt=(t[0].dtvp||"")+"")&&P(dt,Jt),4&e){let n;for(te=t[2],n=0;n<te.length;n+=1){const o=Lt(t,te,n);ee[n]?ee[n].p(o,e):(ee[n]=wt(o),ee[n].c(),ee[n].m(mt,null))}for(;n<ee.length;n+=1)ee[n].d(1);ee.length=te.length}t[0].spog?ne?ne.p(t,e):(ne=Dt(t),ne.c(),ne.m(xt,jt)):ne&&(ne.d(1),ne=null),t[0].s_pch?oe?oe.p(t,e):(oe=zt(t),oe.c(),oe.m(xt,Ct)):oe&&(oe.d(1),oe=null),t[0].osv?le?le.p(t,e):(le=Ft(t),le.c(),le.m(xt,Ot)):le&&(le.d(1),le=null),t[0].ndu?se?se.p(t,e):(se=Tt(t),se.c(),se.m(xt,null)):se&&(se.d(1),se=null),1&e&&Qt!==(Qt=t[0].pog+"")&&P(Ht,Qt),1&e&&Xt!==(Xt=t[0].ran+"")&&P(Bt,Xt)},i:f,o:f,d(t){t&&w(e),D(ee,t),ne&&ne.d(),oe&&oe.d(),le&&le.d(),se&&se.d(),Ut()}}}function Et(t,e,n){let o,{showModal:l=!1}=e,{prp:s}=e;s.skpdiFiles;R(()=>{l&&(o=new xt({target:document.body,props:{data:s.skpdiFiles}}),o.$on("close",t=>{o.$destroy(),n(3,l=!1)}))});const r=(s.tsInfo||[]).map(t=>{let e=t.ts_uch||[];return{ts:"Осталось на месте ДТП"!==t.ts?t.ts:"",arr:e.map(t=>({k_uch:t.k_uch||"",npdd:"Нет нарушений"!==t.npdd?t.npdd:"",sop_npdd:"Нет нарушений"!==t.sop_npdd?t.sop_npdd:""}))}});return t.$set=t=>{"showModal"in t&&n(3,l=t.showModal),"prp"in t&&n(0,s=t.prp)},[s,t=>{navigator.clipboard.writeText(t.target.parentNode.textContent).catch(t=>{console.log("Something went wrong",t)})},r,l]}class $t extends vt{constructor(t){super(),ht(this,t,Et,Ot,k,{showModal:3,prp:0})}}const Mt=window.L,qt=Mt.popup();let Pt;const St=Mt.featureGroup([]);function Ht(t,e,n){const o=t.slice();return o[6]=e[n],o}function Nt(t,e,n){const o=t.slice();return o[6]=e[n],o}function Bt(t){let e,n=t[1].collisionTypes,o=[];for(let e=0;e<n.length;e+=1)o[e]=Ut(Nt(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=O()},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);C(t,e,n)},p(t,l){if(2&l){let s;for(n=t[1].collisionTypes,s=0;s<n.length;s+=1){const r=Nt(t,n,s);o[s]?o[s].p(r,l):(o[s]=Ut(r),o[s].c(),o[s].m(e.parentNode,e))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(t){D(o,t),t&&w(e)}}}function Ut(t){let e,n,o=(t[6].collisionType||"")+"";return{c(){e=z("li"),n=F(o)},m(t,o){C(t,e,o),j(e,n)},p(t,e){2&e&&o!==(o=(t[6].collisionType||"")+"")&&P(n,o)},d(t){t&&w(e)}}}function It(t){let e,n=t[1].uchs,o=[];for(let e=0;e<n.length;e+=1)o[e]=Gt(Ht(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=O()},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);C(t,e,n)},p(t,l){if(2&l){let s;for(n=t[1].uchs,s=0;s<n.length;s+=1){const r=Ht(t,n,s);o[s]?o[s].p(r,l):(o[s]=Gt(r),o[s].c(),o[s].m(e.parentNode,e))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(t){D(o,t),t&&w(e)}}}function Gt(t){let e,n,o,l,s,r,i,a,p=(t[6].collisionPartyCategory||"")+"",c=(t[6].collisionPartyCond||"")+"";return{c(){e=z("li"),n=F(p),o=T(),l=z("b"),s=z("i"),r=F("("),i=F(c),a=F(")")},m(t,p){C(t,e,p),j(e,n),j(e,o),j(e,l),j(l,s),j(s,r),j(s,i),j(s,a)},p(t,e){2&e&&p!==(p=(t[6].collisionPartyCategory||"")+"")&&P(n,p),2&e&&c!==(c=(t[6].collisionPartyCond||"")+"")&&P(i,c)},d(t){t&&w(e)}}}function At(t){let e,n,o,l,s,r,i,a,p,c,d,u,_,h,v,m,g,b,k,x,L,D,O,$,q,S,H,N,B,U,I,G,A,R,Z,Y,V,W,K,J,Q,X,tt,et,nt,ot,lt,st,rt,it,at,pt,ct,dt,ut,_t,ht,vt,ft,mt,gt,yt,bt,kt,xt,jt=(t[1].name||t[1].dtvp||"")+"",Lt=(t[1].id||t[1].id_stat||t[1].id_skpdi||"")+"",Ct=(t[1].km||0)+"",wt=(t[1].m||0)+"",Dt=t[1].lat+"",zt=t[1].lon+"",Ft=(t[1].collision_date||t[1].dtp_date||"")+"",Tt=(t[1].collision_context||t[1].dtp_date||"")+"",Ot=t[1].collisionTypes&&t[1].collisionTypes.length&&Bt(t),Et=t[1].uchs&&t[1].uchs.length&&It(t);return{c(){e=z("div"),n=z("div"),o=z("b"),l=F(jt),s=T(),r=z("div"),i=z("table"),a=z("tbody"),p=z("tr"),c=z("td"),c.textContent="ID:",d=T(),u=z("td"),_=F(Lt),h=T(),v=z("tr"),m=z("td"),m.textContent="Пикетаж:",g=T(),b=z("td"),k=z("b"),x=F(Ct),L=F(" км. "),D=z("b"),O=F(wt),$=F(" м."),q=T(),S=z("tr"),H=z("td"),H.textContent="Координаты:",N=T(),B=z("td"),U=F(Dt),I=T(),G=F(zt),A=T(),R=z("span"),Z=T(),Y=z("tr"),V=z("td"),V.textContent="Дата/время:",W=T(),K=z("td"),J=F(Ft),Q=T(),X=z("tr"),tt=z("td"),et=z("div"),et.textContent="Условия ДТП:",nt=T(),ot=z("div"),lt=F(Tt),st=T(),rt=z("tr"),it=z("td"),it.textContent="Нарушения:",at=T(),pt=z("td"),ct=z("ul"),Ot&&Ot.c(),dt=T(),ut=z("tr"),_t=z("td"),_t.textContent="Участники:",ht=T(),vt=z("td"),ft=z("ul"),Et&&Et.c(),mt=T(),gt=z("tr"),yt=z("td"),bt=z("button"),kt=F("Фото и схемы"),M(n,"class","pLine"),M(c,"class","first"),M(m,"class","first"),M(H,"class","first"),M(R,"title","Скопировать в буфер обмена"),M(R,"class","leaflet-gmx-icon-copy"),M(V,"class","first"),M(et,"class","first"),M(tt,"colspan","2"),M(it,"class","first"),M(_t,"class","first"),M(bt,"class","primary svelte-1aipaym"),bt.disabled=t[2],M(yt,"class","center"),M(yt,"colspan","2"),M(i,"class","table"),M(r,"class","featureCont"),M(e,"class","mvsPopup")},m(f,w,z){C(f,e,w),j(e,n),j(n,o),j(o,l),j(e,s),j(e,r),j(r,i),j(i,a),j(a,p),j(p,c),j(p,d),j(p,u),j(u,_),j(a,h),j(a,v),j(v,m),j(v,g),j(v,b),j(b,k),j(k,x),j(b,L),j(b,D),j(D,O),j(b,$),j(a,q),j(a,S),j(S,H),j(S,N),j(S,B),j(B,U),j(B,I),j(B,G),j(B,A),j(B,R),j(a,Z),j(a,Y),j(Y,V),j(Y,W),j(Y,K),j(K,J),j(a,Q),j(a,X),j(X,tt),j(tt,et),j(tt,nt),j(tt,ot),j(ot,lt),j(a,st),j(a,rt),j(rt,it),j(rt,at),j(rt,pt),j(pt,ct),Ot&&Ot.m(ct,null),j(a,dt),j(a,ut),j(ut,_t),j(ut,ht),j(ut,vt),j(vt,ft),Et&&Et.m(ft,null),j(a,mt),j(a,gt),j(gt,yt),j(yt,bt),j(bt,kt),z&&y(xt),xt=[E(R,"click",t[3]),E(bt,"click",t[5])]},p(t,[e]){2&e&&jt!==(jt=(t[1].name||t[1].dtvp||"")+"")&&P(l,jt),2&e&&Lt!==(Lt=(t[1].id||t[1].id_stat||t[1].id_skpdi||"")+"")&&P(_,Lt),2&e&&Ct!==(Ct=(t[1].km||0)+"")&&P(x,Ct),2&e&&wt!==(wt=(t[1].m||0)+"")&&P(O,wt),2&e&&Dt!==(Dt=t[1].lat+"")&&P(U,Dt),2&e&&zt!==(zt=t[1].lon+"")&&P(G,zt),2&e&&Ft!==(Ft=(t[1].collision_date||t[1].dtp_date||"")+"")&&P(J,Ft),2&e&&Tt!==(Tt=(t[1].collision_context||t[1].dtp_date||"")+"")&&P(lt,Tt),t[1].collisionTypes&&t[1].collisionTypes.length?Ot?Ot.p(t,e):(Ot=Bt(t),Ot.c(),Ot.m(ct,null)):Ot&&(Ot.d(1),Ot=null),t[1].uchs&&t[1].uchs.length?Et?Et.p(t,e):(Et=It(t),Et.c(),Et.m(ft,null)):Et&&(Et.d(1),Et=null),4&e&&(bt.disabled=t[2])},i:f,o:f,d(t){t&&w(e),Ot&&Ot.d(),Et&&Et.d(),y(xt)}}}function Rt(t,e,n){let o,{showModal:l=!1}=e,{prp:s}=e,r=s.files&&s.files.length?"":"disabled";R(()=>{n(2,r=s.files&&s.files.length?"":"disabled"),l&&(o=new xt({target:document.body,props:{data:s.files}}),o.$on("close",t=>{o.$destroy(),n(0,l=!1)}))});return t.$set=t=>{"showModal"in t&&n(0,l=t.showModal),"prp"in t&&n(1,s=t.prp)},[l,s,r,t=>{navigator.clipboard.writeText(t.target.parentNode.textContent).catch(t=>{console.log("Something went wrong",t)})},o,()=>n(0,l=!0)]}St._needHeat={radius:19,blur:11.26,minOpacity:.34},St.checkZoom=t=>{Object.keys(St._layers).length?t<12&&St.setFilter(Pt):t>11&&St.setFilter(Pt)},St.setFilter=t=>{if(!St._map)return;St.clearLayers(),Pt=t||[];let e=[],n=[];St._group&&St._map&&(St._group.getLayers().forEach(t=>{let o=t.options.props,l=0;Pt.forEach(t=>{"collision_type"===t.type?(""===t.zn[0]||t.zn.filter(t=>t===o.collision_type).length)&&l++:"id_dtp"===t.type?o.id==t.zn&&l++:"date"===t.type&&o.date>=t.zn[0]&&o.date<t.zn[1]&&l++}),l===Pt.length&&(e.push(t),n.push(t._latlng))}),St._needHeat?(St._map.addLayer(St._heat),St._heat.setLatLngs(n),St._heat.setOptions(St._needHeat),St._map._zoom>11&&St.addLayer(Mt.layerGroup(e))):(St.addLayer(Mt.layerGroup(e)),St._map.removeLayer(St._heat)))},St.on("remove",t=>{St._map.removeLayer(St._heat),St.clearLayers()}).on("add",t=>{St._heat=Mt.heatLayer([],{gradient:{.1:"blue",.4:"lime",1:"red"}}),Pt=[],fetch("https://dtp.mvs.group/scripts/index_dev.php?request=get_stat_gipdd",{}).then(t=>t.json()).then(t=>{let e={collision_type:{},iconType:{}},n=[],o=t.map(t=>{let o=t.iconType||0,l=!1,s="#2F4F4F";o&&(l=o%2==0,o>=1&&o<=6?s="#8B4513":7===o||8===o?s="#228B22":o>=9&&o<=14?s="#8B4513":15===o||16===o?s="#7B68EE":17!==o&&18!==o||(s="#2F4F4F")),t.lat&&t.lon||(console.log("_______",t),t.lat=t.lon=0);let r=e.collision_type[t.collision_type];r?r++:r=1,e.collision_type[t.collision_type]=r,e.iconType[t.collision_type]=o;let i=Mt.latLng(t.lat,t.lon,l?1:.5);return n.push(i),new v(i,{props:t,radius:6,stroke:l,fillColor:s}).bindPopup(qt).on("popupopen",t=>{var e;e=t.target.options.props.id,fetch("https://dtp.mvs.group/scripts/index_dev.php?request=get_dtp_id&id="+e+"&type=gibdd",{}).then(t=>t.json()).then(t=>{let e=Mt.DomUtil.create("div");const n=new $t({target:e,props:{prp:t}});qt._svObj=n,qt.setContent(e)})}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})});St.addLayer(St._heat),St._heat.setLatLngs(n),St._heat.setOptions(St._needHeat),St._opt=e,St._group=Mt.layerGroup(o),Pt?St.setFilter(Pt):St._map._zoom>11&&St.addLayer(St._group),St._refreshFilters()})});class Zt extends vt{constructor(t){super(),ht(this,t,Rt,At,k,{showModal:0,prp:1})}}const Yt=window.L,Vt=Yt.popup();let Wt;const Kt=Yt.featureGroup([]);function Jt(t,e,n){const o=t.slice();return o[6]=e[n],o[8]=n,o}function Qt(t){let e,n,o,l,s,r="gibdd"===t[6].type?"ГИБДД":"СКПДИ";return{c(){e=z("button"),n=F(r),M(e,"class",o=x(t[2]===t[8]?"current":"")+" svelte-txaali"),e.value=l=t[8]},m(o,l,r){C(o,e,l),j(e,n),r&&s(),s=E(e,"click",t[4])},p(t,l){1&l&&r!==(r="gibdd"===t[6].type?"ГИБДД":"СКПДИ")&&P(n,r),4&l&&o!==(o=x(t[2]===t[8]?"current":"")+" svelte-txaali")&&M(e,"class",o)},d(t){t&&w(e),s()}}}function Xt(t){let e;const n=new Zt({props:{prp:t[3]}});return{c(){ct(n.$$.fragment)},m(t,o){dt(n,t,o),e=!0},p(t,e){const o={};8&e&&(o.prp=t[3]),n.$set(o)},i(t){e||(at(n.$$.fragment,t),e=!0)},o(t){pt(n.$$.fragment,t),e=!1},d(t){ut(n,t)}}}function te(t){let e;const n=new $t({props:{prp:t[3]}});return{c(){ct(n.$$.fragment)},m(t,o){dt(n,t,o),e=!0},p(t,e){const o={};8&e&&(o.prp=t[3]),n.$set(o)},i(t){e||(at(n.$$.fragment,t),e=!0)},o(t){pt(n.$$.fragment,t),e=!1},d(t){ut(n,t)}}}function ee(t){let e,n,o,l,s,r,i,a,p,c,d=t[0]._cur,u=[];for(let e=0;e<d.length;e+=1)u[e]=Qt(Jt(t,d,e));const _=[te,Xt],h=[];function v(t,e){return"gibdd"===t[0]._cur[t[2]].type?0:1}return i=v(t),a=h[i]=_[i](t),{c(){e=z("div"),n=z("div"),o=z("a"),o.textContent="×",l=T(),s=z("div");for(let t=0;t<u.length;t+=1)u[t].c();r=T(),a.c(),M(o,"class","leaflet-popup-close-button"),M(o,"href","#close"),M(n,"class","close"),M(s,"class","pLine"),M(e,"class","mvsPopup")},m(a,d,_){C(a,e,d),j(e,n),j(n,o),j(e,l),j(e,s);for(let t=0;t<u.length;t+=1)u[t].m(s,null);var v;j(e,r),h[i].m(e,null),p=!0,_&&c(),c=E(o,"click",(v=function(){b(t[1])&&t[1].apply(this,arguments)},function(t){return t.preventDefault(),v.call(this,t)}))},p(n,[o]){if(t=n,21&o){let e;for(d=t[0]._cur,e=0;e<d.length;e+=1){const n=Jt(t,d,e);u[e]?u[e].p(n,o):(u[e]=Qt(n),u[e].c(),u[e].m(s,null))}for(;e<u.length;e+=1)u[e].d(1);u.length=d.length}let l=i;i=v(t),i===l?h[i].p(t,o):(rt(),pt(h[l],1,1,()=>{h[l]=null}),it(),a=h[i],a||(a=h[i]=_[i](t),a.c()),at(a,1),a.m(e,null))},i(t){p||(at(a),p=!0)},o(t){pt(a),p=!1},d(t){t&&w(e),D(u,t),h[i].d(),c()}}}function ne(t,e,n){let{prp:o}=e,{closeMe:l=(()=>{})}=e,s=0,r={};const i=t=>{let e=o._cur[t],l=e.type,s="https://dtp.mvs.group/scripts/index_dev.php?request=get_dtp_id&id="+e.id+"&type="+l;fetch(s,{}).then(t=>t.json()).then(t=>{n(3,r=t)})};return i(s),t.$set=t=>{"prp"in t&&n(0,o=t.prp),"closeMe"in t&&n(1,l=t.closeMe)},[o,l,s,r,t=>{let e=t.target,o=Number(e.value);s!==o&&(n(2,s=o),i(s))}]}Kt._needHeat={radius:19,blur:11.26,minOpacity:.34},Kt.checkZoom=t=>{Object.keys(Kt._layers).length?t<12&&Kt.setFilter(Wt):t>11&&Kt.setFilter(Wt)},Kt.setFilter=t=>{if(!Kt._map)return;Kt.clearLayers(),Wt=t||[];let e=[],n=[];Kt._group&&Kt._map&&(Kt._group.getLayers().forEach(t=>{let o=t.options.props,l=0;Wt.forEach(t=>{"collision_type"===t.type?(""===t.zn[0]||t.zn.filter(t=>t===o.collision_type).length)&&l++:"id_dtp"===t.type?o.id==t.zn&&l++:"date"===t.type&&o.date>=t.zn[0]&&o.date<t.zn[1]&&l++}),l===Wt.length&&(e.push(t),n.push(t._latlng))}),Kt._needHeat?(Kt._map.addLayer(Kt._heat),Kt._heat.setLatLngs(n),Kt._heat.setOptions(Kt._needHeat),Kt._map._zoom>11&&Kt.addLayer(Yt.layerGroup(e))):(Kt.addLayer(Yt.layerGroup(e)),Kt._map.removeLayer(Kt._heat)))},Kt.on("remove",()=>{Kt._map.removeLayer(Kt._heat),Kt.clearLayers()}).on("add",t=>{Kt._heat=Yt.heatLayer([]),Wt=[],fetch("https://dtp.mvs.group/scripts/index_dev.php?request=get_skpdi",{}).then(t=>t.json()).then(t=>{let e={collision_type:{},iconType:{}},n=[],o=t.map(t=>{let o=t.iconType||0,l=!1,s="#2F4F4F";o&&(l=o%2==0,o>=1&&o<=6?s="#8B4513":7===o||8===o?s="#228B22":o>=9&&o<=14?s="#8B4513":15===o||16===o?s="#7B68EE":17!==o&&18!==o||(s="#2F4F4F")),t.lat&&t.lon||(console.log("_______",t),t.lat=t.lon=0);let r=e.collision_type[t.collision_type];r?r++:r=1,e.collision_type[t.collision_type]=r,e.iconType[t.collision_type]=o;let i=Yt.latLng(t.lat,t.lon,l?1:.5);return n.push(i),new v(i,{props:t,radius:6,box:!0,stroke:l,fillColor:s}).bindPopup(Vt).on("popupopen",t=>{var e;e=t.target.options.props.id,fetch("https://dtp.mvs.group/scripts/index_dev.php?request=get_dtp_id&id="+e+"&type=skpdi",{}).then(t=>t.json()).then(t=>{let e=Yt.DomUtil.create("div");const n=new Zt({target:e,props:{prp:t}});Vt._svObj=n,Vt.setContent(e)})}).on("popupclose",t=>{console.log("popupclose",t),t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})});Kt.addLayer(Kt._heat),Kt._heat.setLatLngs(n),Kt._heat.setOptions(Kt._needHeat),Kt._opt=e,Kt._group=Yt.layerGroup(o),Wt?Kt.setFilter(Wt):Kt.addLayer(Kt._group),Kt.checkZoom(Kt._map._zoom),Kt._refreshFilters()})});class oe extends vt{constructor(t){super(),ht(this,t,ne,ee,k,{prp:0,closeMe:1})}}const le=window.L,se=le.popup();let re;const ie=le.featureGroup([]);function ae(t,e,n){const o=t.slice();return o[169]=e[n],o}function pe(t,e,n){const o=t.slice();return o[169]=e[n],o}function ce(t,e,n){const o=t.slice();return o[169]=e[n],o}function de(t,e,n){const o=t.slice();return o[169]=e[n],o}function ue(t,e,n){const o=t.slice();return o[169]=e[n],o}function _e(t,e,n){const o=t.slice();return o[182]=e[n],o}function he(t,e,n){const o=t.slice();return o[169]=e[n],o}function ve(t,e,n){const o=t.slice();return o[169]=e[n],o}function fe(t,e,n){const o=t.slice();return o[169]=e[n],o}function me(t,e,n){const o=t.slice();return o[182]=e[n],o}function ge(t,e,n){const o=t.slice();return o[169]=e[n],o}function ye(t,e,n){const o=t.slice();return o[169]=e[n],o}function be(t,e,n){const o=t.slice();return o[169]=e[n],o}function ke(t,e,n){const o=t.slice();return o[182]=e[n],o}function xe(t,e,n){const o=t.slice();return o[169]=e[n],o}function je(t,e,n){const o=t.slice();return o[169]=e[n],o}function Le(t,e,n){const o=t.slice();return o[169]=e[n],o}function Ce(t,e,n){const o=t.slice();return o[169]=e[n],o}function we(t,e,n){const o=t.slice();return o[169]=e[n],o}function De(t,e,n){const o=t.slice();return o[169]=e[n],o}function ze(t,e,n){const o=t.slice();return o[169]=e[n],o}function Fe(t,e,n){const o=t.slice();return o[169]=e[n],o}function Te(t,e,n){const o=t.slice();return o[169]=e[n],o}function Oe(t){let e,n,o,l,s,r,i,a,p,c,d,u,_,h,v,f,m,g,b,k,x,L,O,$,q,P,S,B,U,I,G,A,R,Z,Y,V,W,K,J,Q,tt,et,nt,ot,lt=Object.keys(t[0]._opt.years).sort(),st=[];for(let e=0;e<lt.length;e+=1)st[e]=Ee(Te(t,lt,e));let rt=t[76],it=[];for(let e=0;e<rt.length;e+=1)it[e]=$e(Fe(t,rt,e));return{c(){e=z("div"),e.innerHTML="Фильтры - <b>Предочаги по пикетажу</b>",n=T(),o=z("div"),l=z("div"),s=F("ID Очага: "),r=z("input"),i=T(),a=z("div"),p=F("ID ДТП: "),c=z("input"),d=T(),u=z("div"),_=z("fieldset"),h=z("legend"),h.textContent="Фильтрация по периодам:",v=T(),f=z("div"),m=z("input"),k=z("label"),k.textContent="Фильтрация по годам",x=T(),L=z("div");for(let t=0;t<st.length;t+=1)st[t].c();O=T(),$=z("div"),q=z("input"),S=z("label"),S.textContent="одного типа",B=T(),U=z("input"),G=z("label"),G.textContent="разного типа",A=T(),R=z("div"),Z=z("select"),Y=z("option"),Y.textContent=`\n\t\t\t\t\t\tВсе дороги (${t[76].reduce(t[123],0)})\n\t\t\t\t\t`;for(let t=0;t<it.length;t+=1)it[t].c();V=T(),W=z("div"),K=z("select"),J=z("option"),J.textContent=`(${t[75].stricken[0]||0}) Очаги все`,Q=z("option"),Q.textContent=`(${t[75].stricken[1]||0}) Только с погибшими`,tt=z("option"),tt.textContent=`(${t[75].stricken[2]||0}) Только с пострадавшими`,et=z("option"),et.textContent=`(${t[75].stricken[3]||0}) С пострадавшими или погибшими`,nt=z("option"),nt.textContent=`(${t[75].stricken[4]||0}) С пострадавшими и погибшими`,M(e,"class","pLine svelte-1jsovbn"),M(r,"type","text"),r.value=t[17],M(r,"class","svelte-1jsovbn"),M(l,"class","pLine svelte-1jsovbn"),M(c,"type","text"),c.value=t[14],M(c,"class","svelte-1jsovbn"),M(a,"class","pLine svelte-1jsovbn"),M(m,"type","radio"),m.__value=g=1,m.value=m.__value,m.checked=b=1===t[42],M(m,"id","hearths_period_type_Stat1"),M(m,"name","hearths_period_type_Stat"),M(m,"class","svelte-1jsovbn"),t[122][2].push(m),M(k,"for","hearths_period_type_Stat1"),M(k,"class","svelte-1jsovbn"),M(L,"class","pLine margin svelte-1jsovbn"),M(f,"class","pLine type svelte-1jsovbn"),M(u,"class","pLine nowrap svelte-1jsovbn"),M(q,"type","checkbox"),M(q,"id","ht_3"),q.checked=P=t[16].hearth3,M(q,"name","hearth3"),M(q,"class","svelte-1jsovbn"),M(S,"for","ht_3"),M(S,"class","svelte-1jsovbn"),M(U,"type","checkbox"),M(U,"id","ht_5"),U.checked=I=t[16].hearth5,M(U,"name","hearth5"),M(U,"class","svelte-1jsovbn"),M(G,"for","ht_5"),M(G,"class","svelte-1jsovbn"),M($,"class","pLine svelte-1jsovbn"),Y.__value="",Y.value=Y.__value,M(Y,"class","svelte-1jsovbn"),M(Z,"class","multiple_icon_typeTmp svelte-1jsovbn"),Z.multiple=!0,void 0===t[15]&&X(()=>t[124].call(Z)),M(R,"class","pLine svelte-1jsovbn"),J.__value="",J.value=J.__value,Q.__value="1",Q.value=Q.__value,tt.__value="2",tt.value=tt.__value,et.__value="3",et.value=et.__value,nt.__value="4",nt.value=nt.__value,M(K,"name","stricken"),M(K,"class","svelte-1jsovbn"),void 0===t[28]&&X(()=>t[125].call(K)),M(W,"class","pLine svelte-1jsovbn"),M(o,"class","filtersCont svelte-1jsovbn")},m(g,b,w){C(g,e,b),C(g,n,b),C(g,o,b),j(o,l),j(l,s),j(l,r),j(o,i),j(o,a),j(a,p),j(a,c),j(o,d),j(o,u),j(u,_),j(_,h),j(_,v),j(_,f),j(f,m),m.checked=m.__value===t[42],j(f,k),j(f,x),j(f,L);for(let t=0;t<st.length;t+=1)st[t].m(L,null);j(o,O),j(o,$),j($,q),j($,S),j($,B),j($,U),j($,G),j(o,A),j(o,R),j(R,Z),j(Z,Y);for(let t=0;t<it.length;t+=1)it[t].m(Z,null);N(Z,t[15]),j(o,V),j(o,W),j(W,K),j(K,J),j(K,Q),j(K,tt),j(K,et),j(K,nt),H(K,t[28]),w&&y(ot),ot=[E(r,"input",t[82]),E(c,"input",t[81]),E(m,"change",t[80]),E(m,"change",t[121]),E(q,"change",t[83]),E(U,"change",t[83]),E(Z,"change",t[124]),E(Z,"change",t[80]),E(K,"change",t[125]),E(K,"change",t[80])]},p(t,e){if(131072&e[0]&&r.value!==t[17]&&(r.value=t[17]),16384&e[0]&&c.value!==t[14]&&(c.value=t[14]),2048&e[1]&&b!==(b=1===t[42])&&(m.checked=b),2048&e[1]&&(m.checked=m.__value===t[42]),536870913&e[0]|2048&e[1]|262144&e[2]){let n;for(lt=Object.keys(t[0]._opt.years).sort(),n=0;n<lt.length;n+=1){const o=Te(t,lt,n);st[n]?st[n].p(o,e):(st[n]=Ee(o),st[n].c(),st[n].m(L,null))}for(;n<st.length;n+=1)st[n].d(1);st.length=lt.length}if(65536&e[0]&&P!==(P=t[16].hearth3)&&(q.checked=P),65536&e[0]&&I!==(I=t[16].hearth5)&&(U.checked=I),24576&e[2]){let n;for(rt=t[76],n=0;n<rt.length;n+=1){const o=Fe(t,rt,n);it[n]?it[n].p(o,e):(it[n]=$e(o),it[n].c(),it[n].m(Z,null))}for(;n<it.length;n+=1)it[n].d(1);it.length=rt.length}32768&e[0]&&N(Z,t[15]),268435456&e[0]&&H(K,t[28])},d(l){l&&w(e),l&&w(n),l&&w(o),t[122][2].splice(t[122][2].indexOf(m),1),D(st,l),D(it,l),y(ot)}}}function Ee(t){let e,n,o,l,s,r,i,a=t[169]+"";return{c(){e=z("input"),s=z("label"),r=F(a),M(e,"type","checkbox"),M(e,"id","hearths_year_Picket4"),e.checked=n=t[29][t[169]],e.disabled=o=2===t[42],M(e,"name",l=t[169]),M(e,"class","svelte-1jsovbn"),M(s,"for","hearths_year_Picket4"),M(s,"class","svelte-1jsovbn")},m(n,o,l){C(n,e,o),C(n,s,o),j(s,r),l&&i(),i=E(e,"change",t[80])},p(t,s){536870913&s[0]&&n!==(n=t[29][t[169]])&&(e.checked=n),2048&s[1]&&o!==(o=2===t[42])&&(e.disabled=o),1&s[0]&&l!==(l=t[169])&&M(e,"name",l),1&s[0]&&a!==(a=t[169]+"")&&P(r,a)},d(t){t&&w(e),t&&w(s),i()}}}function $e(t){let e,n,o,l,s,r,i,a,p=t[75].road[t[169]]+"",c=t[169]+"";return{c(){e=z("option"),n=F("("),o=F(p),l=F(") - "),s=F(c),r=T(),e.__value=i=t[169],e.value=e.__value,M(e,"class",a="road_"+t[169]+" svelte-1jsovbn")},m(t,i){C(t,e,i),j(e,n),j(e,o),j(e,l),j(e,s),j(e,r)},p:f,d(t){t&&w(e)}}}function Me(t){let e,n,o,l,s,r,i,a,p,c,d,u,_,h,v,f,m,g,b,k,x,L,O,$,q=t[74],P=[];for(let e=0;e<q.length;e+=1)P[e]=qe(ze(t,q,e));return{c(){e=z("div"),e.innerHTML="Фильтры - <b>ДТП Очаги(Picket)</b>",n=T(),o=z("div"),l=z("div"),s=F("ID Очага: "),r=z("input"),i=T(),a=z("div"),p=F("ID ДТП: "),c=z("input"),d=T(),u=z("div"),_=z("input"),v=z("label"),v.textContent="одного типа",f=T(),m=z("input"),b=z("label"),b.textContent="разного типа",k=T(),x=z("div"),L=z("select"),O=z("option"),O.textContent=`\n\t\t\t\t\t\tВсе дороги (${t[74].reduce(t[126],0)})\n\t\t\t\t\t`;for(let t=0;t<P.length;t+=1)P[t].c();M(e,"class","pLine svelte-1jsovbn"),M(r,"type","text"),r.value=t[17],M(r,"class","svelte-1jsovbn"),M(l,"class","pLine svelte-1jsovbn"),M(c,"type","text"),c.value=t[14],M(c,"class","svelte-1jsovbn"),M(a,"class","pLine svelte-1jsovbn"),M(_,"type","checkbox"),M(_,"id","ht_3"),_.checked=h=t[16].hearth3,M(_,"name","hearth3"),M(_,"class","svelte-1jsovbn"),M(v,"for","ht_3"),M(v,"class","svelte-1jsovbn"),M(m,"type","checkbox"),M(m,"id","ht_5"),m.checked=g=t[16].hearth5,M(m,"name","hearth5"),M(m,"class","svelte-1jsovbn"),M(b,"for","ht_5"),M(b,"class","svelte-1jsovbn"),M(u,"class","pLine svelte-1jsovbn"),O.__value="",O.value=O.__value,M(O,"class","svelte-1jsovbn"),M(L,"class","multiple_icon_typeTmp svelte-1jsovbn"),L.multiple=!0,void 0===t[15]&&X(()=>t[127].call(L)),M(x,"class","pLine svelte-1jsovbn"),M(o,"class","filtersCont svelte-1jsovbn")},m(h,g,w){C(h,e,g),C(h,n,g),C(h,o,g),j(o,l),j(l,s),j(l,r),j(o,i),j(o,a),j(a,p),j(a,c),j(o,d),j(o,u),j(u,_),j(u,v),j(u,f),j(u,m),j(u,b),j(o,k),j(o,x),j(x,L),j(L,O);for(let t=0;t<P.length;t+=1)P[t].m(L,null);N(L,t[15]),w&&y($),$=[E(r,"input",t[82]),E(c,"input",t[81]),E(_,"change",t[83]),E(m,"change",t[83]),E(L,"change",t[127]),E(L,"change",t[79])]},p(t,e){if(131072&e[0]&&r.value!==t[17]&&(r.value=t[17]),16384&e[0]&&c.value!==t[14]&&(c.value=t[14]),65536&e[0]&&h!==(h=t[16].hearth3)&&(_.checked=h),65536&e[0]&&g!==(g=t[16].hearth5)&&(m.checked=g),6144&e[2]){let n;for(q=t[74],n=0;n<q.length;n+=1){const o=ze(t,q,n);P[n]?P[n].p(o,e):(P[n]=qe(o),P[n].c(),P[n].m(L,null))}for(;n<P.length;n+=1)P[n].d(1);P.length=q.length}32768&e[0]&&N(L,t[15])},d(t){t&&w(e),t&&w(n),t&&w(o),D(P,t),y($)}}}function qe(t){let e,n,o,l,s,r,i,a,p=t[73].road[t[169]]+"",c=t[169]+"";return{c(){e=z("option"),n=F("("),o=F(p),l=F(") - "),s=F(c),r=T(),e.__value=i=t[169],e.value=e.__value,M(e,"class",a="road_"+t[169]+" svelte-1jsovbn")},m(t,i){C(t,e,i),j(e,n),j(e,o),j(e,l),j(e,s),j(e,r)},p:f,d(t){t&&w(e)}}}function Pe(t){let e,n,o,l,s,r,i,a,p,c,d,u,_,h,v,f,m,g,b,k,x,L,O,$,q,P,S,B,U,I,G,A=Object.keys(t[2]._opt.years).sort(),R=[];for(let e=0;e<A.length;e+=1)R[e]=Se(De(t,A,e));let Z=t[72],Y=[];for(let e=0;e<Z.length;e+=1)Y[e]=He(we(t,Z,e));return{c(){e=z("div"),e.innerHTML="Фильтры - <b>ДТП Очаги (5)</b>",n=T(),o=z("div"),l=z("div"),s=F("ID ДТП: "),r=z("input"),i=T(),a=z("div"),p=z("fieldset"),c=z("legend"),c.textContent="Фильтрация по периодам:",d=T(),u=z("div"),_=z("input"),f=z("label"),f.textContent="Фильтрация по годам",m=T(),g=z("div");for(let t=0;t<R.length;t+=1)R[t].c();b=T(),k=z("div"),x=z("select"),L=z("option"),L.textContent=`\n\t\t\t\t\t\tВсе типы (${t[72].reduce(t[129],0)})\n\t\t\t\t\t`;for(let t=0;t<Y.length;t+=1)Y[t].c();O=T(),$=z("div"),q=z("select"),P=z("option"),P.textContent=`(${t[71].stricken[0]||0}) Очаги все`,S=z("option"),S.textContent=`(${t[71].stricken[1]||0}) Только с погибшими`,B=z("option"),B.textContent=`(${t[71].stricken[2]||0}) Только с пострадавшими`,U=z("option"),U.textContent=`(${t[71].stricken[3]||0}) С пострадавшими или погибшими`,I=z("option"),I.textContent=`(${t[71].stricken[4]||0}) С пострадавшими и погибшими`,M(e,"class","pLine svelte-1jsovbn"),M(r,"type","text"),r.value=t[14],M(r,"class","svelte-1jsovbn"),M(l,"class","pLine svelte-1jsovbn"),M(_,"type","radio"),_.__value=h=1,_.value=_.__value,_.checked=v=1===t[34],M(_,"id","hearths_period_type_51"),M(_,"name","hearths_period_type_5"),M(_,"class","svelte-1jsovbn"),t[122][4].push(_),M(f,"for","hearths_period_type_51"),M(f,"class","svelte-1jsovbn"),M(g,"class","pLine margin svelte-1jsovbn"),M(u,"class","pLine type svelte-1jsovbn"),M(a,"class","pLine nowrap svelte-1jsovbn"),L.__value="",L.value=L.__value,M(L,"class","svelte-1jsovbn"),M(x,"class","multiple_icon_typeTmp svelte-1jsovbn"),x.multiple=!0,void 0===t[33]&&X(()=>t[130].call(x)),M(k,"class","pLine svelte-1jsovbn"),P.__value="",P.value=P.__value,S.__value="1",S.value=S.__value,B.__value="2",B.value=B.__value,U.__value="3",U.value=U.__value,I.__value="4",I.value=I.__value,M(q,"class","svelte-1jsovbn"),void 0===t[32]&&X(()=>t[131].call(q)),M($,"class","pLine svelte-1jsovbn"),M(o,"class","filtersCont svelte-1jsovbn")},m(h,v,w){C(h,e,v),C(h,n,v),C(h,o,v),j(o,l),j(l,s),j(l,r),j(o,i),j(o,a),j(a,p),j(p,c),j(p,d),j(p,u),j(u,_),_.checked=_.__value===t[34],j(u,f),j(u,m),j(u,g);for(let t=0;t<R.length;t+=1)R[t].m(g,null);j(o,b),j(o,k),j(k,x),j(x,L);for(let t=0;t<Y.length;t+=1)Y[t].m(x,null);N(x,t[33]),j(o,O),j(o,$),j($,q),j(q,P),j(q,S),j(q,B),j(q,U),j(q,I),H(q,t[32]),w&&y(G),G=[E(r,"input",t[81]),E(_,"change",t[93]),E(_,"change",t[128]),E(x,"change",t[130]),E(x,"change",t[93]),E(q,"change",t[131]),E(q,"change",t[93])]},p(t,e){if(16384&e[0]&&r.value!==t[14]&&(r.value=t[14]),8&e[1]&&v!==(v=1===t[34])&&(_.checked=v),8&e[1]&&(_.checked=_.__value===t[34]),4&e[0]|24&e[1]|1&e[3]){let n;for(A=Object.keys(t[2]._opt.years).sort(),n=0;n<A.length;n+=1){const o=De(t,A,n);R[n]?R[n].p(o,e):(R[n]=Se(o),R[n].c(),R[n].m(g,null))}for(;n<R.length;n+=1)R[n].d(1);R.length=A.length}if(1536&e[2]){let n;for(Z=t[72],n=0;n<Z.length;n+=1){const o=we(t,Z,n);Y[n]?Y[n].p(o,e):(Y[n]=He(o),Y[n].c(),Y[n].m(x,null))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=Z.length}4&e[1]&&N(x,t[33]),2&e[1]&&H(q,t[32])},d(l){l&&w(e),l&&w(n),l&&w(o),t[122][4].splice(t[122][4].indexOf(_),1),D(R,l),D(Y,l),y(G)}}}function Se(t){let e,n,o,l,s,r,i,a=t[169]+"";return{c(){e=z("input"),s=z("label"),r=F(a),M(e,"type","checkbox"),M(e,"id","hearths_year_5"),e.checked=n=t[35][t[169]],e.disabled=o=2===t[34],M(e,"name",l=t[169]),M(e,"class","svelte-1jsovbn"),M(s,"for","hearths_year_5"),M(s,"class","svelte-1jsovbn")},m(n,o,l){C(n,e,o),C(n,s,o),j(s,r),l&&i(),i=E(e,"change",t[93])},p(t,s){4&s[0]|16&s[1]&&n!==(n=t[35][t[169]])&&(e.checked=n),8&s[1]&&o!==(o=2===t[34])&&(e.disabled=o),4&s[0]&&l!==(l=t[169])&&M(e,"name",l),4&s[0]&&a!==(a=t[169]+"")&&P(r,a)},d(t){t&&w(e),t&&w(s),i()}}}function He(t){let e,n,o,l,s,r,i,a,p=t[71].str_icon_type[t[169]]+"",c=t[169]+"";return{c(){e=z("option"),n=F("("),o=F(p),l=F(") - "),s=F(c),r=T(),e.__value=i=t[169],e.value=e.__value,M(e,"class",a="icon_type_"+t[71].iconType[t[169]]+" svelte-1jsovbn")},m(t,i){C(t,e,i),j(e,n),j(e,o),j(e,l),j(e,s),j(e,r)},p:f,d(t){t&&w(e)}}}function Ne(t){let e,n,o,l,s,r,i,a,p,c,d,u,_,h,v,f,m,g,b,k,x,L,O,$,q,P,S,B,U,I,G,A=Object.keys(t[3]._opt.years).sort(),R=[];for(let e=0;e<A.length;e+=1)R[e]=Be(Ce(t,A,e));let Z=t[70],Y=[];for(let e=0;e<Z.length;e+=1)Y[e]=Ue(Le(t,Z,e));return{c(){e=z("div"),e.innerHTML="Фильтры - <b>ДТП Очаги (3)</b>",n=T(),o=z("div"),l=z("div"),s=F("ID ДТП: "),r=z("input"),i=T(),a=z("div"),p=z("fieldset"),c=z("legend"),c.textContent="Фильтрация по периодам:",d=T(),u=z("div"),_=z("input"),f=z("label"),f.textContent="Фильтрация по годам",m=T(),g=z("div");for(let t=0;t<R.length;t+=1)R[t].c();b=T(),k=z("div"),x=z("select"),L=z("option"),L.textContent=`\n\t\t\t\t\t\tВсе типы (${t[70].reduce(t[133],0)})\n\t\t\t\t\t`;for(let t=0;t<Y.length;t+=1)Y[t].c();O=T(),$=z("div"),q=z("select"),P=z("option"),P.textContent=`(${t[69].stricken[0]||0}) Очаги все`,S=z("option"),S.textContent=`(${t[69].stricken[1]||0}) Только с погибшими`,B=z("option"),B.textContent=`(${t[69].stricken[2]||0}) Только с пострадавшими`,U=z("option"),U.textContent=`(${t[69].stricken[3]||0}) С пострадавшими или погибшими`,I=z("option"),I.textContent=`(${t[69].stricken[4]||0}) С пострадавшими и погибшими`,M(e,"class","pLine svelte-1jsovbn"),M(r,"type","text"),r.value=t[14],M(r,"class","svelte-1jsovbn"),M(l,"class","pLine svelte-1jsovbn"),M(_,"type","radio"),_.__value=h=1,_.value=_.__value,_.checked=v=1===t[38],M(_,"id","hearths_period_type_31"),M(_,"name","hearths_period_type_3"),M(_,"class","svelte-1jsovbn"),t[122][3].push(_),M(f,"for","hearths_period_type_31"),M(f,"class","svelte-1jsovbn"),M(g,"class","pLine margin svelte-1jsovbn"),M(u,"class","pLine type svelte-1jsovbn"),M(a,"class","pLine nowrap svelte-1jsovbn"),L.__value="",L.value=L.__value,M(L,"class","svelte-1jsovbn"),M(x,"class","multiple_icon_typeTmp svelte-1jsovbn"),x.multiple=!0,void 0===t[37]&&X(()=>t[134].call(x)),M(k,"class","pLine svelte-1jsovbn"),P.__value="",P.value=P.__value,S.__value="1",S.value=S.__value,B.__value="2",B.value=B.__value,U.__value="3",U.value=U.__value,I.__value="4",I.value=I.__value,M(q,"class","svelte-1jsovbn"),void 0===t[36]&&X(()=>t[135].call(q)),M($,"class","pLine svelte-1jsovbn"),M(o,"class","filtersCont svelte-1jsovbn")},m(h,v,w){C(h,e,v),C(h,n,v),C(h,o,v),j(o,l),j(l,s),j(l,r),j(o,i),j(o,a),j(a,p),j(p,c),j(p,d),j(p,u),j(u,_),_.checked=_.__value===t[38],j(u,f),j(u,m),j(u,g);for(let t=0;t<R.length;t+=1)R[t].m(g,null);j(o,b),j(o,k),j(k,x),j(x,L);for(let t=0;t<Y.length;t+=1)Y[t].m(x,null);N(x,t[37]),j(o,O),j(o,$),j($,q),j(q,P),j(q,S),j(q,B),j(q,U),j(q,I),H(q,t[36]),w&&y(G),G=[E(r,"input",t[81]),E(_,"change",t[94]),E(_,"change",t[132]),E(x,"change",t[134]),E(x,"change",t[94]),E(q,"change",t[135]),E(q,"change",t[94])]},p(t,e){if(16384&e[0]&&r.value!==t[14]&&(r.value=t[14]),128&e[1]&&v!==(v=1===t[38])&&(_.checked=v),128&e[1]&&(_.checked=_.__value===t[38]),8&e[0]|384&e[1]|2&e[3]){let n;for(A=Object.keys(t[3]._opt.years).sort(),n=0;n<A.length;n+=1){const o=Ce(t,A,n);R[n]?R[n].p(o,e):(R[n]=Be(o),R[n].c(),R[n].m(g,null))}for(;n<R.length;n+=1)R[n].d(1);R.length=A.length}if(384&e[2]){let n;for(Z=t[70],n=0;n<Z.length;n+=1){const o=Le(t,Z,n);Y[n]?Y[n].p(o,e):(Y[n]=Ue(o),Y[n].c(),Y[n].m(x,null))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=Z.length}64&e[1]&&N(x,t[37]),32&e[1]&&H(q,t[36])},d(l){l&&w(e),l&&w(n),l&&w(o),t[122][3].splice(t[122][3].indexOf(_),1),D(R,l),D(Y,l),y(G)}}}function Be(t){let e,n,o,l,s,r,i,a=t[169]+"";return{c(){e=z("input"),s=z("label"),r=F(a),M(e,"type","checkbox"),M(e,"id","hearths_year_3"),e.checked=n=t[39][t[169]],e.disabled=o=2===t[38],M(e,"name",l=t[169]),M(e,"class","svelte-1jsovbn"),M(s,"for","hearths_year_3"),M(s,"class","svelte-1jsovbn")},m(n,o,l){C(n,e,o),C(n,s,o),j(s,r),l&&i(),i=E(e,"change",t[94])},p(t,s){8&s[0]|256&s[1]&&n!==(n=t[39][t[169]])&&(e.checked=n),128&s[1]&&o!==(o=2===t[38])&&(e.disabled=o),8&s[0]&&l!==(l=t[169])&&M(e,"name",l),8&s[0]&&a!==(a=t[169]+"")&&P(r,a)},d(t){t&&w(e),t&&w(s),i()}}}function Ue(t){let e,n,o,l,s,r,i,a,p=t[69].str_icon_type[t[169]]+"",c=t[169]+"";return{c(){e=z("option"),n=F("("),o=F(p),l=F(") - "),s=F(c),r=T(),e.__value=i=t[169],e.value=e.__value,M(e,"class",a="icon_type_"+t[69].iconType[t[169]]+" svelte-1jsovbn")},m(t,i){C(t,e,i),j(e,n),j(e,o),j(e,l),j(e,s),j(e,r)},p:f,d(t){t&&w(e)}}}function Ie(t){let e,n,o,l,s,r,i,a,p,c,d,u,_,h,v,f,m,g,b,k,x,L,O,$,q,P,S,B,U,I,G,A,R,Z,Y,V,W,K,J=Object.keys(t[9]._opt.years).sort(),Q=[];for(let e=0;e<J.length;e+=1)Q[e]=Ge(je(t,J,e));let tt=Object.keys(t[9]._opt.years).sort(),et=[];for(let e=0;e<tt.length;e+=1)et[e]=Re(xe(t,tt,e));let nt=t[68],ot=[];for(let e=0;e<nt.length;e+=1)ot[e]=Ze(be(t,nt,e));return{c(){e=z("div"),e.innerHTML="Фильтры - <b>ДТП Очаги (Stat)</b>",n=T(),o=z("div"),l=z("div"),s=F("ID ДТП: "),r=z("input"),i=T(),a=z("div"),p=z("fieldset"),c=z("legend"),c.textContent="Фильтрация по периодам:",d=T(),u=z("div"),_=z("input"),f=z("label"),f.textContent="Фильтрация по годам",m=T(),g=z("div");for(let t=0;t<Q.length;t+=1)Q[t].c();b=T(),k=z("div"),x=z("input"),O=z("label"),O.textContent="Фильтрация по кварталам",$=T(),q=z("div");for(let t=0;t<et.length;t+=1)et[t].c();P=T(),S=z("div"),B=z("select"),U=z("option"),U.textContent=`\n\t\t\t\t\t\tВсе типы (${t[68].reduce(t[138],0)})\n\t\t\t\t\t`;for(let t=0;t<ot.length;t+=1)ot[t].c();I=T(),G=z("div"),A=z("select"),R=z("option"),R.textContent=`(${t[67].stricken[0]||0}) Очаги все`,Z=z("option"),Z.textContent=`(${t[67].stricken[1]||0}) Только с погибшими`,Y=z("option"),Y.textContent=`(${t[67].stricken[2]||0}) Только с пострадавшими`,V=z("option"),V.textContent=`(${t[67].stricken[3]||0}) С пострадавшими или погибшими`,W=z("option"),W.textContent=`(${t[67].stricken[4]||0}) С пострадавшими и погибшими`,M(e,"class","pLine svelte-1jsovbn"),M(r,"type","text"),r.value=t[14],M(r,"class","svelte-1jsovbn"),M(l,"class","pLine svelte-1jsovbn"),M(_,"type","radio"),_.__value=h=1,_.value=_.__value,_.checked=v=1===t[42],M(_,"id","hearths_period_type_Stat1"),M(_,"name","hearths_period_type_Stat"),M(_,"class","svelte-1jsovbn"),t[122][2].push(_),M(f,"for","hearths_period_type_Stat1"),M(f,"class","svelte-1jsovbn"),M(g,"class","pLine margin svelte-1jsovbn"),M(u,"class","pLine type svelte-1jsovbn"),M(x,"type","radio"),x.__value=L=2,x.value=x.__value,M(x,"id","hearths_period_type_Stat2"),M(x,"name","hearths_period_type_Stat"),M(x,"class","svelte-1jsovbn"),t[122][2].push(x),M(O,"for","hearths_period_type_Stat2"),M(O,"class","svelte-1jsovbn"),M(q,"class","pLine margin svelte-1jsovbn"),M(k,"class","pLine type svelte-1jsovbn"),M(a,"class","pLine nowrap svelte-1jsovbn"),U.__value="",U.value=U.__value,M(U,"class","svelte-1jsovbn"),M(B,"class","multiple_icon_typeTmp svelte-1jsovbn"),B.multiple=!0,void 0===t[41]&&X(()=>t[139].call(B)),M(S,"class","pLine svelte-1jsovbn"),R.__value="",R.value=R.__value,Z.__value="1",Z.value=Z.__value,Y.__value="2",Y.value=Y.__value,V.__value="3",V.value=V.__value,W.__value="4",W.value=W.__value,M(A,"class","svelte-1jsovbn"),void 0===t[40]&&X(()=>t[140].call(A)),M(G,"class","pLine svelte-1jsovbn"),M(o,"class","filtersCont svelte-1jsovbn")},m(h,v,L){C(h,e,v),C(h,n,v),C(h,o,v),j(o,l),j(l,s),j(l,r),j(o,i),j(o,a),j(a,p),j(p,c),j(p,d),j(p,u),j(u,_),_.checked=_.__value===t[42],j(u,f),j(u,m),j(u,g);for(let t=0;t<Q.length;t+=1)Q[t].m(g,null);j(p,b),j(p,k),j(k,x),x.checked=x.__value===t[42],j(k,O),j(k,$),j(k,q);for(let t=0;t<et.length;t+=1)et[t].m(q,null);j(o,P),j(o,S),j(S,B),j(B,U);for(let t=0;t<ot.length;t+=1)ot[t].m(B,null);N(B,t[41]),j(o,I),j(o,G),j(G,A),j(A,R),j(A,Z),j(A,Y),j(A,V),j(A,W),H(A,t[40]),L&&y(K),K=[E(r,"input",t[81]),E(_,"change",t[95]),E(_,"change",t[136]),E(x,"change",t[95]),E(x,"change",t[137]),E(B,"change",t[139]),E(B,"change",t[95]),E(A,"change",t[140]),E(A,"change",t[95])]},p(t,e){if(16384&e[0]&&r.value!==t[14]&&(r.value=t[14]),2048&e[1]&&v!==(v=1===t[42])&&(_.checked=v),2048&e[1]&&(_.checked=_.__value===t[42]),512&e[0]|6144&e[1]|4&e[3]){let n;for(J=Object.keys(t[9]._opt.years).sort(),n=0;n<J.length;n+=1){const o=je(t,J,n);Q[n]?Q[n].p(o,e):(Q[n]=Ge(o),Q[n].c(),Q[n].m(g,null))}for(;n<Q.length;n+=1)Q[n].d(1);Q.length=J.length}if(2048&e[1]&&(x.checked=x.__value===t[42]),512&e[0]|10240&e[1]|4&e[3]){let n;for(tt=Object.keys(t[9]._opt.years).sort(),n=0;n<tt.length;n+=1){const o=xe(t,tt,n);et[n]?et[n].p(o,e):(et[n]=Re(o),et[n].c(),et[n].m(q,null))}for(;n<et.length;n+=1)et[n].d(1);et.length=tt.length}if(96&e[2]){let n;for(nt=t[68],n=0;n<nt.length;n+=1){const o=be(t,nt,n);ot[n]?ot[n].p(o,e):(ot[n]=Ze(o),ot[n].c(),ot[n].m(B,null))}for(;n<ot.length;n+=1)ot[n].d(1);ot.length=nt.length}1024&e[1]&&N(B,t[41]),512&e[1]&&H(A,t[40])},d(l){l&&w(e),l&&w(n),l&&w(o),t[122][2].splice(t[122][2].indexOf(_),1),D(Q,l),t[122][2].splice(t[122][2].indexOf(x),1),D(et,l),D(ot,l),y(K)}}}function Ge(t){let e,n,o,l,s,r,i,a=t[169]+"";return{c(){e=z("input"),s=z("label"),r=F(a),M(e,"type","checkbox"),M(e,"id","hearths_year_Stat"),e.checked=n=t[43][t[169]],e.disabled=o=2===t[42],M(e,"name",l=t[169]),M(e,"class","svelte-1jsovbn"),M(s,"for","hearths_year_Stat"),M(s,"class","svelte-1jsovbn")},m(n,o,l){C(n,e,o),C(n,s,o),j(s,r),l&&i(),i=E(e,"change",t[95])},p(t,s){512&s[0]|4096&s[1]&&n!==(n=t[43][t[169]])&&(e.checked=n),2048&s[1]&&o!==(o=2===t[42])&&(e.disabled=o),512&s[0]&&l!==(l=t[169])&&M(e,"name",l),512&s[0]&&a!==(a=t[169]+"")&&P(r,a)},d(t){t&&w(e),t&&w(s),i()}}}function Ae(t){let e,n,o,l,s,r,i,a,p,c,d=t[182]+"",u=t[169]+"";return{c(){e=z("input"),s=z("label"),r=F(d),i=F(" кв. "),a=F(u),M(e,"type","checkbox"),M(e,"id","hearths_quarter_Stat"),e.checked=n=t[44][t[169]]&&t[44][t[169]][t[182]],e.disabled=o=1===t[42],M(e,"name",l=t[169]+"_"+t[182]),M(e,"class","svelte-1jsovbn"),M(s,"for",p="hearths_quarter_Stat_"+t[169]+"_"+t[182]),M(s,"class","svelte-1jsovbn")},m(n,o,l){C(n,e,o),C(n,s,o),j(s,r),j(s,i),j(s,a),l&&c(),c=E(e,"change",t[95])},p(t,i){512&i[0]|8192&i[1]&&n!==(n=t[44][t[169]]&&t[44][t[169]][t[182]])&&(e.checked=n),2048&i[1]&&o!==(o=1===t[42])&&(e.disabled=o),512&i[0]&&l!==(l=t[169]+"_"+t[182])&&M(e,"name",l),512&i[0]&&d!==(d=t[182]+"")&&P(r,d),512&i[0]&&u!==(u=t[169]+"")&&P(a,u),512&i[0]&&p!==(p="hearths_quarter_Stat_"+t[169]+"_"+t[182])&&M(s,"for",p)},d(t){t&&w(e),t&&w(s),c()}}}function Re(t){let e,n,o=Object.keys(t[9]._opt.years[t[169]]).sort(),l=[];for(let e=0;e<o.length;e+=1)l[e]=Ae(ke(t,o,e));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=T(),n=z("br")},m(t,o){for(let e=0;e<l.length;e+=1)l[e].m(t,o);C(t,e,o),C(t,n,o)},p(t,n){if(512&n[0]|10240&n[1]|4&n[3]){let s;for(o=Object.keys(t[9]._opt.years[t[169]]).sort(),s=0;s<o.length;s+=1){const r=ke(t,o,s);l[s]?l[s].p(r,n):(l[s]=Ae(r),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=o.length}},d(t){D(l,t),t&&w(e),t&&w(n)}}}function Ze(t){let e,n,o,l,s,r,i,a,p=t[67].str_icon_type[t[169]]+"",c=t[169]+"";return{c(){e=z("option"),n=F("("),o=F(p),l=F(") - "),s=F(c),r=T(),e.__value=i=t[169],e.value=e.__value,M(e,"class",a="icon_type_"+t[67].iconType[t[169]]+" svelte-1jsovbn")},m(t,i){C(t,e,i),j(e,n),j(e,o),j(e,l),j(e,s),j(e,r)},p:f,d(t){t&&w(e)}}}function Ye(t){let e,n,o,l,s,r,i,a,p,c,d,u,_,h,v,f,m,g,b,k,x,L,O,$,q,P,S,B,U,I,G,A,R,Z,Y,V,W,K,J=Object.keys(t[10]._opt.years).sort(),Q=[];for(let e=0;e<J.length;e+=1)Q[e]=Ve(ye(t,J,e));let tt=Object.keys(t[10]._opt.years).sort(),et=[];for(let e=0;e<tt.length;e+=1)et[e]=Ke(ge(t,tt,e));let nt=t[66],ot=[];for(let e=0;e<nt.length;e+=1)ot[e]=Je(fe(t,nt,e));return{c(){e=z("div"),e.innerHTML="Фильтры - <b>ДТП Очаги (TMP)</b>",n=T(),o=z("div"),l=z("div"),s=F("ID ДТП: "),r=z("input"),i=T(),a=z("div"),p=z("fieldset"),c=z("legend"),c.textContent="Фильтрация по периодам:",d=T(),u=z("div"),_=z("input"),f=z("label"),f.textContent="Фильтрация по годам",m=T(),g=z("div");for(let t=0;t<Q.length;t+=1)Q[t].c();b=T(),k=z("div"),x=z("input"),O=z("label"),O.textContent="Фильтрация по кварталам",$=T(),q=z("div");for(let t=0;t<et.length;t+=1)et[t].c();P=T(),S=z("div"),B=z("select"),U=z("option"),U.textContent=`\n\t\t\t\t\t\tВсе типы (${t[66].reduce(t[143],0)})\n\t\t\t\t\t`;for(let t=0;t<ot.length;t+=1)ot[t].c();I=T(),G=z("div"),A=z("select"),R=z("option"),R.textContent=`(${t[65].stricken[0]||0}) Очаги все`,Z=z("option"),Z.textContent=`(${t[65].stricken[1]||0}) Только с погибшими`,Y=z("option"),Y.textContent=`(${t[65].stricken[2]||0}) Только с пострадавшими`,V=z("option"),V.textContent=`(${t[65].stricken[3]||0}) С пострадавшими или погибшими`,W=z("option"),W.textContent=`(${t[65].stricken[4]||0}) С пострадавшими и погибшими`,M(e,"class","pLine svelte-1jsovbn"),M(r,"type","text"),r.value=t[14],M(r,"class","svelte-1jsovbn"),M(l,"class","pLine svelte-1jsovbn"),M(_,"type","radio"),_.__value=h=1,_.value=_.__value,_.checked=v=1===t[47],M(_,"id","hearths_period_type_tmp1"),M(_,"name","hearths_period_type_tmp"),M(_,"class","svelte-1jsovbn"),t[122][1].push(_),M(f,"for","hearths_period_type_tmp1"),M(f,"class","svelte-1jsovbn"),M(g,"class","pLine margin svelte-1jsovbn"),M(u,"class","pLine type svelte-1jsovbn"),M(x,"type","radio"),x.__value=L=2,x.value=x.__value,M(x,"id","hearths_period_type_tmp2"),M(x,"name","hearths_period_type_tmp"),M(x,"class","svelte-1jsovbn"),t[122][1].push(x),M(O,"for","hearths_period_type_tmp2"),M(O,"class","svelte-1jsovbn"),M(q,"class","pLine margin svelte-1jsovbn"),M(k,"class","pLine type svelte-1jsovbn"),M(a,"class","pLine nowrap svelte-1jsovbn"),U.__value="",U.value=U.__value,M(U,"class","svelte-1jsovbn"),M(B,"class","multiple_icon_typeTmp svelte-1jsovbn"),B.multiple=!0,void 0===t[46]&&X(()=>t[144].call(B)),M(S,"class","pLine svelte-1jsovbn"),R.__value="",R.value=R.__value,Z.__value="1",Z.value=Z.__value,Y.__value="2",Y.value=Y.__value,V.__value="3",V.value=V.__value,W.__value="4",W.value=W.__value,M(A,"class","svelte-1jsovbn"),void 0===t[45]&&X(()=>t[145].call(A)),M(G,"class","pLine svelte-1jsovbn"),M(o,"class","filtersCont svelte-1jsovbn")},m(h,v,L){C(h,e,v),C(h,n,v),C(h,o,v),j(o,l),j(l,s),j(l,r),j(o,i),j(o,a),j(a,p),j(p,c),j(p,d),j(p,u),j(u,_),_.checked=_.__value===t[47],j(u,f),j(u,m),j(u,g);for(let t=0;t<Q.length;t+=1)Q[t].m(g,null);j(p,b),j(p,k),j(k,x),x.checked=x.__value===t[47],j(k,O),j(k,$),j(k,q);for(let t=0;t<et.length;t+=1)et[t].m(q,null);j(o,P),j(o,S),j(S,B),j(B,U);for(let t=0;t<ot.length;t+=1)ot[t].m(B,null);N(B,t[46]),j(o,I),j(o,G),j(G,A),j(A,R),j(A,Z),j(A,Y),j(A,V),j(A,W),H(A,t[45]),L&&y(K),K=[E(r,"input",t[81]),E(_,"change",t[96]),E(_,"change",t[141]),E(x,"change",t[96]),E(x,"change",t[142]),E(B,"change",t[144]),E(B,"change",t[96]),E(A,"change",t[145]),E(A,"change",t[96])]},p(t,e){if(16384&e[0]&&r.value!==t[14]&&(r.value=t[14]),65536&e[1]&&v!==(v=1===t[47])&&(_.checked=v),65536&e[1]&&(_.checked=_.__value===t[47]),1024&e[0]|196608&e[1]|8&e[3]){let n;for(J=Object.keys(t[10]._opt.years).sort(),n=0;n<J.length;n+=1){const o=ye(t,J,n);Q[n]?Q[n].p(o,e):(Q[n]=Ve(o),Q[n].c(),Q[n].m(g,null))}for(;n<Q.length;n+=1)Q[n].d(1);Q.length=J.length}if(65536&e[1]&&(x.checked=x.__value===t[47]),1024&e[0]|327680&e[1]|8&e[3]){let n;for(tt=Object.keys(t[10]._opt.years).sort(),n=0;n<tt.length;n+=1){const o=ge(t,tt,n);et[n]?et[n].p(o,e):(et[n]=Ke(o),et[n].c(),et[n].m(q,null))}for(;n<et.length;n+=1)et[n].d(1);et.length=tt.length}if(24&e[2]){let n;for(nt=t[66],n=0;n<nt.length;n+=1){const o=fe(t,nt,n);ot[n]?ot[n].p(o,e):(ot[n]=Je(o),ot[n].c(),ot[n].m(B,null))}for(;n<ot.length;n+=1)ot[n].d(1);ot.length=nt.length}32768&e[1]&&N(B,t[46]),16384&e[1]&&H(A,t[45])},d(l){l&&w(e),l&&w(n),l&&w(o),t[122][1].splice(t[122][1].indexOf(_),1),D(Q,l),t[122][1].splice(t[122][1].indexOf(x),1),D(et,l),D(ot,l),y(K)}}}function Ve(t){let e,n,o,l,s,r,i,a=t[169]+"";return{c(){e=z("input"),s=z("label"),r=F(a),M(e,"type","checkbox"),M(e,"id","hearths_year_tmp"),e.checked=n=t[48][t[169]],e.disabled=o=2===t[47],M(e,"name",l=t[169]),M(e,"class","svelte-1jsovbn"),M(s,"for","hearths_year_tmp"),M(s,"class","svelte-1jsovbn")},m(n,o,l){C(n,e,o),C(n,s,o),j(s,r),l&&i(),i=E(e,"change",t[96])},p(t,s){1024&s[0]|131072&s[1]&&n!==(n=t[48][t[169]])&&(e.checked=n),65536&s[1]&&o!==(o=2===t[47])&&(e.disabled=o),1024&s[0]&&l!==(l=t[169])&&M(e,"name",l),1024&s[0]&&a!==(a=t[169]+"")&&P(r,a)},d(t){t&&w(e),t&&w(s),i()}}}function We(t){let e,n,o,l,s,r,i,a,p,c,d=t[182]+"",u=t[169]+"";return{c(){e=z("input"),s=z("label"),r=F(d),i=F(" кв. "),a=F(u),M(e,"type","checkbox"),M(e,"id","hearths_quarter_tmp"),e.checked=n=t[49][t[169]]&&t[49][t[169]][t[182]],e.disabled=o=1===t[47],M(e,"name",l=t[169]+"_"+t[182]),M(e,"class","svelte-1jsovbn"),M(s,"for",p="hearths_quarter_tmp_"+t[169]+"_"+t[182]),M(s,"class","svelte-1jsovbn")},m(n,o,l){C(n,e,o),C(n,s,o),j(s,r),j(s,i),j(s,a),l&&c(),c=E(e,"change",t[96])},p(t,i){1024&i[0]|262144&i[1]&&n!==(n=t[49][t[169]]&&t[49][t[169]][t[182]])&&(e.checked=n),65536&i[1]&&o!==(o=1===t[47])&&(e.disabled=o),1024&i[0]&&l!==(l=t[169]+"_"+t[182])&&M(e,"name",l),1024&i[0]&&d!==(d=t[182]+"")&&P(r,d),1024&i[0]&&u!==(u=t[169]+"")&&P(a,u),1024&i[0]&&p!==(p="hearths_quarter_tmp_"+t[169]+"_"+t[182])&&M(s,"for",p)},d(t){t&&w(e),t&&w(s),c()}}}function Ke(t){let e,n,o=Object.keys(t[10]._opt.years[t[169]]).sort(),l=[];for(let e=0;e<o.length;e+=1)l[e]=We(me(t,o,e));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=T(),n=z("br")},m(t,o){for(let e=0;e<l.length;e+=1)l[e].m(t,o);C(t,e,o),C(t,n,o)},p(t,n){if(1024&n[0]|327680&n[1]|8&n[3]){let s;for(o=Object.keys(t[10]._opt.years[t[169]]).sort(),s=0;s<o.length;s+=1){const r=me(t,o,s);l[s]?l[s].p(r,n):(l[s]=We(r),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=o.length}},d(t){D(l,t),t&&w(e),t&&w(n)}}}function Je(t){let e,n,o,l,s,r,i,a,p=t[65].str_icon_type[t[169]]+"",c=t[169]+"";return{c(){e=z("option"),n=F("("),o=F(p),l=F(") - "),s=F(c),r=T(),e.__value=i=t[169],e.value=e.__value,M(e,"class",a="icon_type_"+t[65].iconType[t[169]]+" svelte-1jsovbn")},m(t,i){C(t,e,i),j(e,n),j(e,o),j(e,l),j(e,s),j(e,r)},p:f,d(t){t&&w(e)}}}function Qe(t){let e,n,o,l,s,r,i,a,p,c,d,u,_,h,v,f,m,g,b,k,x,L,O,$,q,P,S,B,U,I,G,A,R,Z,Y,V,W,K,J,Q,tt=Object.keys(t[11]._opt.years).sort(),et=[];for(let e=0;e<tt.length;e+=1)et[e]=Xe(ve(t,tt,e));let nt=Object.keys(t[11]._opt.years).sort(),ot=[];for(let e=0;e<nt.length;e+=1)ot[e]=en(he(t,nt,e));let lt=t[64],st=[];for(let e=0;e<lt.length;e+=1)st[e]=nn(ue(t,lt,e));return{c(){e=z("div"),e.innerHTML='<hr class="svelte-1jsovbn">',n=T(),o=z("div"),o.innerHTML="Фильтры - <b>ДТП Очаги</b>",l=T(),s=z("div"),r=z("div"),i=F("ID ДТП: "),a=z("input"),p=T(),c=z("div"),d=z("fieldset"),u=z("legend"),u.textContent="Фильтрация по периодам:",_=T(),h=z("div"),v=z("input"),g=z("label"),g.textContent="Фильтрация по годам",b=T(),k=z("div");for(let t=0;t<et.length;t+=1)et[t].c();x=T(),L=z("div"),O=z("input"),q=z("label"),q.textContent="Фильтрация по кварталам",P=T(),S=z("div");for(let t=0;t<ot.length;t+=1)ot[t].c();B=T(),U=z("div"),I=z("select"),G=z("option"),G.textContent=`\n\t\t\t\t\t\tВсе типы (${t[64].reduce(t[148],0)})\n\t\t\t\t\t`;for(let t=0;t<st.length;t+=1)st[t].c();A=T(),R=z("div"),Z=z("select"),Y=z("option"),Y.textContent=`(${t[63].stricken[0]||0}) Очаги все`,V=z("option"),V.textContent=`(${t[63].stricken[1]||0}) Только с погибшими`,W=z("option"),W.textContent=`(${t[63].stricken[2]||0}) Только с пострадавшими`,K=z("option"),K.textContent=`(${t[63].stricken[3]||0}) С пострадавшими или погибшими`,J=z("option"),J.textContent=`(${t[63].stricken[4]||0}) С пострадавшими и погибшими`,M(e,"class","pLine svelte-1jsovbn"),M(o,"class","pLine svelte-1jsovbn"),M(a,"type","text"),a.value=t[14],M(a,"class","svelte-1jsovbn"),M(r,"class","pLine svelte-1jsovbn"),M(v,"type","radio"),v.__value=f=1,v.value=v.__value,v.checked=m=1===t[52],M(v,"id","hearths_period_type1"),M(v,"name","hearths_period_type"),M(v,"class","svelte-1jsovbn"),t[122][0].push(v),M(g,"for","hearths_period_type1"),M(g,"class","svelte-1jsovbn"),M(k,"class","pLine margin svelte-1jsovbn"),M(h,"class","pLine type svelte-1jsovbn"),M(O,"type","radio"),O.__value=$=2,O.value=O.__value,M(O,"id","hearths_period_type2"),M(O,"name","hearths_period_type"),M(O,"class","svelte-1jsovbn"),t[122][0].push(O),M(q,"for","hearths_period_type2"),M(q,"class","svelte-1jsovbn"),M(S,"class","pLine margin svelte-1jsovbn"),M(L,"class","pLine type svelte-1jsovbn"),M(c,"class","pLine nowrap svelte-1jsovbn"),G.__value="",G.value=G.__value,M(G,"class","svelte-1jsovbn"),M(I,"class","multiple_icon_typeTmp svelte-1jsovbn"),I.multiple=!0,void 0===t[51]&&X(()=>t[149].call(I)),M(U,"class","pLine svelte-1jsovbn"),Y.__value="",Y.value=Y.__value,V.__value="1",V.value=V.__value,W.__value="2",W.value=W.__value,K.__value="3",K.value=K.__value,J.__value="4",J.value=J.__value,M(Z,"class","svelte-1jsovbn"),void 0===t[50]&&X(()=>t[150].call(Z)),M(R,"class","pLine svelte-1jsovbn"),M(s,"class","filtersCont svelte-1jsovbn")},m(f,m,w){C(f,e,m),C(f,n,m),C(f,o,m),C(f,l,m),C(f,s,m),j(s,r),j(r,i),j(r,a),j(s,p),j(s,c),j(c,d),j(d,u),j(d,_),j(d,h),j(h,v),v.checked=v.__value===t[52],j(h,g),j(h,b),j(h,k);for(let t=0;t<et.length;t+=1)et[t].m(k,null);j(d,x),j(d,L),j(L,O),O.checked=O.__value===t[52],j(L,q),j(L,P),j(L,S);for(let t=0;t<ot.length;t+=1)ot[t].m(S,null);j(s,B),j(s,U),j(U,I),j(I,G);for(let t=0;t<st.length;t+=1)st[t].m(I,null);N(I,t[51]),j(s,A),j(s,R),j(R,Z),j(Z,Y),j(Z,V),j(Z,W),j(Z,K),j(Z,J),H(Z,t[50]),w&&y(Q),Q=[E(a,"input",t[81]),E(v,"change",t[97]),E(v,"change",t[146]),E(O,"change",t[97]),E(O,"change",t[147]),E(I,"change",t[149]),E(I,"change",t[97]),E(Z,"change",t[150]),E(Z,"change",t[97])]},p(t,e){if(16384&e[0]&&a.value!==t[14]&&(a.value=t[14]),2097152&e[1]&&m!==(m=1===t[52])&&(v.checked=m),2097152&e[1]&&(v.checked=v.__value===t[52]),2048&e[0]|6291456&e[1]|16&e[3]){let n;for(tt=Object.keys(t[11]._opt.years).sort(),n=0;n<tt.length;n+=1){const o=ve(t,tt,n);et[n]?et[n].p(o,e):(et[n]=Xe(o),et[n].c(),et[n].m(k,null))}for(;n<et.length;n+=1)et[n].d(1);et.length=tt.length}if(2097152&e[1]&&(O.checked=O.__value===t[52]),2048&e[0]|10485760&e[1]|16&e[3]){let n;for(nt=Object.keys(t[11]._opt.years).sort(),n=0;n<nt.length;n+=1){const o=he(t,nt,n);ot[n]?ot[n].p(o,e):(ot[n]=en(o),ot[n].c(),ot[n].m(S,null))}for(;n<ot.length;n+=1)ot[n].d(1);ot.length=nt.length}if(6&e[2]){let n;for(lt=t[64],n=0;n<lt.length;n+=1){const o=ue(t,lt,n);st[n]?st[n].p(o,e):(st[n]=nn(o),st[n].c(),st[n].m(I,null))}for(;n<st.length;n+=1)st[n].d(1);st.length=lt.length}1048576&e[1]&&N(I,t[51]),524288&e[1]&&H(Z,t[50])},d(r){r&&w(e),r&&w(n),r&&w(o),r&&w(l),r&&w(s),t[122][0].splice(t[122][0].indexOf(v),1),D(et,r),t[122][0].splice(t[122][0].indexOf(O),1),D(ot,r),D(st,r),y(Q)}}}function Xe(t){let e,n,o,l,s,r,i,a,p=t[169]+"";return{c(){e=z("input"),s=z("label"),r=F(p),M(e,"type","checkbox"),M(e,"id","hearths_year"),e.checked=n=t[53][t[169]],e.disabled=o=2===t[52],M(e,"name",l=t[169]),M(e,"class","svelte-1jsovbn"),M(s,"for",i="hearths_year"+t[169]),M(s,"class","svelte-1jsovbn")},m(n,o,l){C(n,e,o),C(n,s,o),j(s,r),l&&a(),a=E(e,"change",t[97])},p(t,a){2048&a[0]|4194304&a[1]&&n!==(n=t[53][t[169]])&&(e.checked=n),2097152&a[1]&&o!==(o=2===t[52])&&(e.disabled=o),2048&a[0]&&l!==(l=t[169])&&M(e,"name",l),2048&a[0]&&p!==(p=t[169]+"")&&P(r,p),2048&a[0]&&i!==(i="hearths_year"+t[169])&&M(s,"for",i)},d(t){t&&w(e),t&&w(s),a()}}}function tn(t){let e,n,o,l,s,r,i,a,p,c,d=t[182]+"",u=t[169]+"";return{c(){e=z("input"),s=z("label"),r=F(d),i=F(" кв. "),a=F(u),M(e,"type","checkbox"),M(e,"id","hearths_quarter"),e.checked=n=t[54][t[169]]&&t[54][t[169]][t[182]],e.disabled=o=1===t[52],M(e,"name",l=t[169]+"_"+t[182]),M(e,"class","svelte-1jsovbn"),M(s,"for",p="hearths_quarter_"+t[169]+"_"+t[182]),M(s,"class","svelte-1jsovbn")},m(n,o,l){C(n,e,o),C(n,s,o),j(s,r),j(s,i),j(s,a),l&&c(),c=E(e,"change",t[97])},p(t,i){2048&i[0]|8388608&i[1]&&n!==(n=t[54][t[169]]&&t[54][t[169]][t[182]])&&(e.checked=n),2097152&i[1]&&o!==(o=1===t[52])&&(e.disabled=o),2048&i[0]&&l!==(l=t[169]+"_"+t[182])&&M(e,"name",l),2048&i[0]&&d!==(d=t[182]+"")&&P(r,d),2048&i[0]&&u!==(u=t[169]+"")&&P(a,u),2048&i[0]&&p!==(p="hearths_quarter_"+t[169]+"_"+t[182])&&M(s,"for",p)},d(t){t&&w(e),t&&w(s),c()}}}function en(t){let e,n,o=Object.keys(t[11]._opt.years[t[169]]).sort(),l=[];for(let e=0;e<o.length;e+=1)l[e]=tn(_e(t,o,e));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=T(),n=z("br")},m(t,o){for(let e=0;e<l.length;e+=1)l[e].m(t,o);C(t,e,o),C(t,n,o)},p(t,n){if(2048&n[0]|10485760&n[1]|16&n[3]){let s;for(o=Object.keys(t[11]._opt.years[t[169]]).sort(),s=0;s<o.length;s+=1){const r=_e(t,o,s);l[s]?l[s].p(r,n):(l[s]=tn(r),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=o.length}},d(t){D(l,t),t&&w(e),t&&w(n)}}}function nn(t){let e,n,o,l,s,r,i,a,p=t[63].str_icon_type[t[169]]+"",c=t[169]+"";return{c(){e=z("option"),n=F("("),o=F(p),l=F(") - "),s=F(c),r=T(),e.__value=i=t[169],e.value=e.__value,M(e,"class",a="icon_type_"+t[63].iconType[t[169]]+" svelte-1jsovbn")},m(t,i){C(t,e,i),j(e,n),j(e,o),j(e,l),j(e,s),j(e,r)},p:f,d(t){t&&w(e)}}}function on(t){let e;return{c(){e=z("div"),e.textContent="Нет включенных слоев",M(e,"class","pLine svelte-1jsovbn")},m(t,n){C(t,e,n)},p:f,d(t){t&&w(e)}}}function ln(t){let e,n,o,l,s,r,i,a,p,c,d,u,_,h,v,f,m,g,b,k,x,L,D,O,$,q,H,N,B,U,I,G,A,R,Z,Y,V,W,K,J,Q,X,tt,et,nt,ot,lt;return{c(){e=z("div"),e.innerHTML='<hr class="svelte-1jsovbn">',n=T(),o=z("div"),l=z("button"),s=T(),r=z("input"),i=T(),a=z("input"),p=T(),c=z("button"),d=T(),u=z("div"),_=z("br"),h=T(),v=z("label"),f=z("input"),g=z("span"),b=F("Мин.яркость ("),k=F(t[24]),x=F(")"),L=T(),D=z("br"),O=T(),$=z("label"),q=z("input"),N=z("span"),B=F("Радиус ("),U=F(t[22]),I=F(")"),G=T(),A=z("br"),R=T(),Z=z("label"),Y=z("input"),W=z("span"),K=F("Размытие ("),J=F(t[23]),Q=F(")"),X=T(),tt=z("div"),et=z("input"),ot=z("label"),ot.textContent="- тепловая карта",M(e,"class","pLine svelte-1jsovbn"),M(l,"class","pika-prev"),M(r,"type","text"),M(r,"class","begDate svelte-1jsovbn"),M(a,"type","text"),M(a,"class","endDate svelte-1jsovbn"),M(c,"class","pika-next"),M(o,"class","pikaday pLine svelte-1jsovbn"),M(f,"type","range"),M(f,"min","0.05"),M(f,"max","1"),M(f,"step","0.01"),f.disabled=m=!t[77],M(f,"class","svelte-1jsovbn"),M(v,"class","svelte-1jsovbn"),M(q,"type","range"),M(q,"min","0"),M(q,"max","100"),M(q,"step","1"),q.disabled=H=!t[77],M(q,"class","svelte-1jsovbn"),M($,"class","svelte-1jsovbn"),M(Y,"type","range"),M(Y,"min","0"),M(Y,"max","15"),M(Y,"step","0.01"),Y.disabled=V=!t[77],M(Y,"class","svelte-1jsovbn"),M(Z,"class","svelte-1jsovbn"),M(u,"class","pLine svelte-1jsovbn"),M(et,"type","checkbox"),et.checked=nt=t[7]._needHeat||t[6]._needHeat||t[5]._needHeat||t[4]._needHeat,M(et,"name","heat"),M(et,"class","svelte-1jsovbn"),M(ot,"for","heat"),M(ot,"class","svelte-1jsovbn"),M(tt,"class","pLine svelte-1jsovbn")},m(m,w,z){C(m,e,w),C(m,n,w),C(m,o,w),j(o,l),j(o,s),j(o,r),t[151](r),j(o,i),j(o,a),t[152](a),j(o,p),j(o,c),C(m,d,w),C(m,u,w),j(u,_),j(u,h),j(u,v),j(v,f),S(f,t[24]),j(v,g),j(g,b),j(g,k),j(g,x),j(u,L),j(u,D),j(u,O),j(u,$),j($,q),S(q,t[22]),j($,N),j(N,B),j(N,U),j(N,I),j(u,G),j(u,A),j(u,R),j(u,Z),j(Z,Y),S(Y,t[23]),j(Z,W),j(W,K),j(W,J),j(W,Q),C(m,X,w),C(m,tt,w),j(tt,et),t[156](et),j(tt,ot),z&&y(lt),lt=[E(l,"click",t[91]),E(c,"click",t[92]),E(f,"change",t[153]),E(f,"input",t[153]),E(f,"input",t[85]),E(q,"change",t[154]),E(q,"input",t[154]),E(q,"input",t[85]),E(Y,"change",t[155]),E(Y,"input",t[155]),E(Y,"input",t[85]),E(et,"change",t[84])]},p(t,e){16777216&e[0]&&S(f,t[24]),16777216&e[0]&&P(k,t[24]),4194304&e[0]&&S(q,t[22]),4194304&e[0]&&P(U,t[22]),8388608&e[0]&&S(Y,t[23]),8388608&e[0]&&P(J,t[23]),240&e[0]&&nt!==(nt=t[7]._needHeat||t[6]._needHeat||t[5]._needHeat||t[4]._needHeat)&&(et.checked=nt)},d(l){l&&w(e),l&&w(n),l&&w(o),t[151](null),t[152](null),l&&w(d),l&&w(u),l&&w(X),l&&w(tt),t[156](null),y(lt)}}}function sn(t){let e,n,o,l,s,r,i,a,p,c,d,u,_,h,v,f,m,g,b;function k(t,e){return t[4]._arm?an:rn}let x=k(t),L=x(t),O=t[55].collision_type&&function(t){let e,n,o,l,s=t[56],r=[];for(let e=0;e<s.length;e+=1)r[e]=pn(de(t,s,e));return{c(){e=z("div"),n=z("select"),o=z("option"),o.textContent=`\n\t\t\t\t\t\tВсе типы (${t[56].reduce(t[157],0)})\n\t\t\t\t\t`;for(let t=0;t<r.length;t+=1)r[t].c();o.__value="",o.value=o.__value,M(o,"class","svelte-1jsovbn"),M(n,"class","multiple_icon_type svelte-1jsovbn"),n.multiple=!0,void 0===t[18]&&X(()=>t[158].call(n)),M(e,"class","pLine svelte-1jsovbn")},m(s,i,a){C(s,e,i),j(e,n),j(n,o);for(let t=0;t<r.length;t+=1)r[t].m(n,null);N(n,t[18]),a&&y(l),l=[E(n,"change",t[158]),E(n,"change",t[86])]},p(t,e){if(50331648&e[1]){let o;for(s=t[56],o=0;o<s.length;o+=1){const l=de(t,s,o);r[o]?r[o].p(l,e):(r[o]=pn(l),r[o].c(),r[o].m(n,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=s.length}262144&e[0]&&N(n,t[18])},d(t){t&&w(e),D(r,t),y(l)}}}(t);return{c(){e=z("div"),e.innerHTML='<hr class="svelte-1jsovbn">',n=T(),o=z("div"),o.innerHTML="Фильтры - <b>ДТП Сводный</b>",l=T(),s=z("div"),r=z("div"),i=F("ID ДТП: "),a=z("input"),p=T(),c=z("div"),d=z("input"),u=z("label"),u.textContent="Все",_=T(),L.c(),h=T(),v=z("div"),f=z("input"),m=z("label"),m.textContent="Только ГИБДД",g=T(),O&&O.c(),M(e,"class","pLine svelte-1jsovbn"),M(o,"class","pLine svelte-1jsovbn"),M(a,"type","text"),a.value=t[14],M(a,"class","svelte-1jsovbn"),M(r,"class","pLine svelte-1jsovbn"),M(d,"type","radio"),M(d,"id","d0"),M(d,"name","drone"),d.value="0",d.checked=!0,M(d,"class","svelte-1jsovbn"),M(u,"for","d0"),M(u,"class","svelte-1jsovbn"),M(c,"class","pLine svelte-1jsovbn"),M(f,"type","radio"),M(f,"id","d3"),M(f,"name","drone"),f.value="3",M(f,"class","svelte-1jsovbn"),M(m,"for","d3"),M(m,"class","svelte-1jsovbn"),M(v,"class","pLine svelte-1jsovbn"),M(s,"class","filtersCont svelte-1jsovbn")},m(k,x,w){C(k,e,x),C(k,n,x),C(k,o,x),C(k,l,x),C(k,s,x),j(s,r),j(r,i),j(r,a),j(s,p),j(s,c),j(c,d),j(c,u),j(s,_),L.m(s,null),j(s,h),j(s,v),j(v,f),j(v,m),j(s,g),O&&O.m(s,null),w&&y(b),b=[E(a,"input",t[81]),E(d,"click",t[90]),E(f,"click",t[90])]},p(t,e){16384&e[0]&&a.value!==t[14]&&(a.value=t[14]),x===(x=k(t))&&L?L.p(t,e):(L.d(1),L=x(t),L&&(L.c(),L.m(s,h))),t[55].collision_type&&O.p(t,e)},d(t){t&&w(e),t&&w(n),t&&w(o),t&&w(l),t&&w(s),L.d(),O&&O.d(),y(b)}}}function rn(t){let e,n,o,l,s,r,i,a;return{c(){e=z("div"),n=z("input"),o=z("label"),o.textContent="Только Пересечения",l=T(),s=z("div"),r=z("input"),i=z("label"),i.textContent="Только СКПДИ",M(n,"type","radio"),M(n,"id","d1"),M(n,"name","drone"),n.value="1",M(n,"class","svelte-1jsovbn"),M(o,"for","d1"),M(o,"class","svelte-1jsovbn"),M(e,"class","pLine svelte-1jsovbn"),M(r,"type","radio"),M(r,"id","d2"),M(r,"name","drone"),r.value="2",M(r,"class","svelte-1jsovbn"),M(i,"for","d2"),M(i,"class","svelte-1jsovbn"),M(s,"class","pLine svelte-1jsovbn")},m(p,c,d){C(p,e,c),j(e,n),j(e,o),C(p,l,c),C(p,s,c),j(s,r),j(s,i),d&&y(a),a=[E(n,"click",t[90]),E(r,"click",t[90])]},p:f,d(t){t&&w(e),t&&w(l),t&&w(s),y(a)}}}function an(t){let e,n,o,l;return{c(){e=z("div"),n=z("input"),o=z("label"),o.textContent="Только Пересечения ГИБДД и СКПДИ",M(n,"type","radio"),M(n,"id","d1"),M(n,"name","drone"),n.value="1",M(n,"class","svelte-1jsovbn"),M(o,"for","d1"),M(o,"class","svelte-1jsovbn"),M(e,"class","pLine svelte-1jsovbn")},m(s,r,i){C(s,e,r),j(e,n),j(e,o),i&&l(),l=E(n,"click",t[90])},p:f,d(t){t&&w(e),l()}}}function pn(t){let e,n,o,l,s,r,i,a,p=t[55].collision_type[t[169]]+"",c=t[169]+"";return{c(){e=z("option"),n=F("("),o=F(p),l=F(") - "),s=F(c),r=T(),e.__value=i=t[169],e.value=e.__value,M(e,"class",a="icon_type_"+t[55].iconType[t[169]]+" svelte-1jsovbn")},m(t,i){C(t,e,i),j(e,n),j(e,o),j(e,l),j(e,s),j(e,r)},p:f,d(t){t&&w(e)}}}function cn(t){let e,n,o,l,s,r,i,a,p,c,d=t[57].collision_type&&function(t){let e,n,o,l,s=t[58],r=[];for(let e=0;e<s.length;e+=1)r[e]=dn(ce(t,s,e));return{c(){e=z("div"),n=z("select"),o=z("option"),o.textContent=`\n\t\t\t\t\t\tВсе типы (${t[58].reduce(t[159],0)})\n\t\t\t\t\t`;for(let t=0;t<r.length;t+=1)r[t].c();o.__value="",o.value=o.__value,M(o,"class","svelte-1jsovbn"),M(n,"class","multiple_icon_type svelte-1jsovbn"),n.multiple=!0,void 0===t[19]&&X(()=>t[160].call(n)),M(e,"class","pLine svelte-1jsovbn")},m(s,i,a){C(s,e,i),j(e,n),j(n,o);for(let t=0;t<r.length;t+=1)r[t].m(n,null);N(n,t[19]),a&&y(l),l=[E(n,"change",t[160]),E(n,"change",t[89])]},p(t,e){if(201326592&e[1]){let o;for(s=t[58],o=0;o<s.length;o+=1){const l=ce(t,s,o);r[o]?r[o].p(l,e):(r[o]=dn(l),r[o].c(),r[o].m(n,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=s.length}524288&e[0]&&N(n,t[19])},d(t){t&&w(e),D(r,t),y(l)}}}(t);return{c(){e=z("div"),e.innerHTML='<hr class="svelte-1jsovbn">',n=T(),o=z("div"),o.innerHTML="Фильтры - <b>ДТП СКПДИ</b>",l=T(),s=z("div"),r=z("div"),i=F("ID ДТП: "),a=z("input"),p=T(),d&&d.c(),M(e,"class","pLine svelte-1jsovbn"),M(o,"class","pLine svelte-1jsovbn"),M(a,"type","text"),a.value=t[14],M(a,"class","svelte-1jsovbn"),M(r,"class","pLine svelte-1jsovbn"),M(s,"class","filtersCont svelte-1jsovbn")},m(u,_,h){C(u,e,_),C(u,n,_),C(u,o,_),C(u,l,_),C(u,s,_),j(s,r),j(r,i),j(r,a),j(s,p),d&&d.m(s,null),h&&c(),c=E(a,"input",t[81])},p(t,e){16384&e[0]&&a.value!==t[14]&&(a.value=t[14]),t[57].collision_type&&d.p(t,e)},d(t){t&&w(e),t&&w(n),t&&w(o),t&&w(l),t&&w(s),d&&d.d(),c()}}}function dn(t){let e,n,o,l,s,r,i,a,p=t[57].collision_type[t[169]]+"",c=t[169]+"";return{c(){e=z("option"),n=F("("),o=F(p),l=F(") - "),s=F(c),r=T(),e.__value=i=t[169],e.value=e.__value,M(e,"class",a="icon_type_"+t[57].iconType[t[169]]+" svelte-1jsovbn")},m(t,i){C(t,e,i),j(e,n),j(e,o),j(e,l),j(e,s),j(e,r)},p:f,d(t){t&&w(e)}}}function un(t){let e,n,o,l,s,r,i,a,p,c,d=t[59].collision_type&&function(t){let e,n,o,l,s=t[60],r=[];for(let e=0;e<s.length;e+=1)r[e]=_n(pe(t,s,e));return{c(){e=z("div"),n=z("select"),o=z("option"),o.textContent=`\n\t\t\t\t\t\tВсе типы (${t[60].reduce(t[161],0)})\n\t\t\t\t\t`;for(let t=0;t<r.length;t+=1)r[t].c();o.__value="",o.value=o.__value,M(o,"class","svelte-1jsovbn"),M(n,"class","multiple_icon_type svelte-1jsovbn"),n.multiple=!0,void 0===t[20]&&X(()=>t[162].call(n)),M(e,"class","pLine svelte-1jsovbn")},m(s,i,a){C(s,e,i),j(e,n),j(n,o);for(let t=0;t<r.length;t+=1)r[t].m(n,null);N(n,t[20]),a&&y(l),l=[E(n,"change",t[162]),E(n,"change",t[88])]},p(t,e){if(805306368&e[1]){let o;for(s=t[60],o=0;o<s.length;o+=1){const l=pe(t,s,o);r[o]?r[o].p(l,e):(r[o]=_n(l),r[o].c(),r[o].m(n,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=s.length}1048576&e[0]&&N(n,t[20])},d(t){t&&w(e),D(r,t),y(l)}}}(t);return{c(){e=z("div"),e.innerHTML='<hr class="svelte-1jsovbn">',n=T(),o=z("div"),o.innerHTML="Фильтры - <b>ДТП ГИБДД</b>",l=T(),s=z("div"),r=z("div"),i=F("ID ДТП: "),a=z("input"),p=T(),d&&d.c(),M(e,"class","pLine svelte-1jsovbn"),M(o,"class","pLine svelte-1jsovbn"),M(a,"type","text"),a.value=t[14],M(a,"class","svelte-1jsovbn"),M(r,"class","pLine svelte-1jsovbn"),M(s,"class","filtersCont svelte-1jsovbn")},m(u,_,h){C(u,e,_),C(u,n,_),C(u,o,_),C(u,l,_),C(u,s,_),j(s,r),j(r,i),j(r,a),j(s,p),d&&d.m(s,null),h&&c(),c=E(a,"input",t[81])},p(t,e){16384&e[0]&&a.value!==t[14]&&(a.value=t[14]),t[59].collision_type&&d.p(t,e)},d(t){t&&w(e),t&&w(n),t&&w(o),t&&w(l),t&&w(s),d&&d.d(),c()}}}function _n(t){let e,n,o,l,s,r,i,a,p=t[59].collision_type[t[169]]+"",c=t[169]+"";return{c(){e=z("option"),n=F("("),o=F(p),l=F(") - "),s=F(c),r=T(),e.__value=i=t[169],e.value=e.__value,M(e,"class",a="icon_type_"+t[59].iconType[t[169]]+" svelte-1jsovbn")},m(t,i){C(t,e,i),j(e,n),j(e,o),j(e,l),j(e,s),j(e,r)},p:f,d(t){t&&w(e)}}}function hn(t){let e,n,o,l,s,r,i,a,p,c,d,u,_,h,v,f,m,g=t[61].collision_type&&function(t){let e,n,o,l,s=t[62],r=[];for(let e=0;e<s.length;e+=1)r[e]=vn(ae(t,s,e));return{c(){e=z("div"),n=z("select"),o=z("option"),o.textContent=`\n\t\t\t\t\t\tВсе типы (${t[62].reduce(t[165],0)})\n\t\t\t\t\t`;for(let t=0;t<r.length;t+=1)r[t].c();o.__value="",o.value=o.__value,M(o,"class","svelte-1jsovbn"),M(n,"class","multiple_icon_type svelte-1jsovbn"),n.multiple=!0,void 0===t[21]&&X(()=>t[166].call(n)),M(e,"class","pLine svelte-1jsovbn")},m(s,i,a){C(s,e,i),j(e,n),j(n,o);for(let t=0;t<r.length;t+=1)r[t].m(n,null);N(n,t[21]),a&&y(l),l=[E(n,"change",t[166]),E(n,"change",t[87])]},p(t,e){if(1073741824&e[1]|1&e[2]){let o;for(s=t[62],o=0;o<s.length;o+=1){const l=ae(t,s,o);r[o]?r[o].p(l,e):(r[o]=vn(l),r[o].c(),r[o].m(n,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=s.length}2097152&e[0]&&N(n,t[21])},d(t){t&&w(e),D(r,t),y(l)}}}(t);return{c(){e=z("div"),e.innerHTML='<hr class="svelte-1jsovbn">',n=T(),o=z("div"),o.innerHTML="Фильтры - <b>ДТП ГИБДД + Рубежи</b>",l=T(),s=z("div"),r=F("ID ДТП: "),i=z("input"),a=T(),p=z("div"),c=z("input"),d=z("label"),d.textContent="- с рубежами",u=T(),_=z("input"),h=z("label"),h.textContent="- без рубежей",v=T(),f=z("div"),g&&g.c(),M(e,"class","pLine svelte-1jsovbn"),M(o,"class","pLine svelte-1jsovbn"),M(i,"type","text"),i.value=t[14],M(i,"class","svelte-1jsovbn"),M(s,"class","pLine svelte-1jsovbn"),M(c,"type","checkbox"),M(c,"name","list_rubOn"),M(c,"class","svelte-1jsovbn"),M(d,"for","list_rubOn"),M(d,"class","svelte-1jsovbn"),M(_,"type","checkbox"),M(_,"name","list_rubOff"),M(_,"class","svelte-1jsovbn"),M(h,"for","list_rubOff"),M(h,"class","svelte-1jsovbn"),M(p,"class","pLine svelte-1jsovbn"),M(f,"class","filtersCont svelte-1jsovbn")},m(b,k,x){C(b,e,k),C(b,n,k),C(b,o,k),C(b,l,k),C(b,s,k),j(s,r),j(s,i),C(b,a,k),C(b,p,k),j(p,c),c.checked=t[30],j(p,d),j(p,u),j(p,_),_.checked=t[31],j(p,h),C(b,v,k),C(b,f,k),g&&g.m(f,null),x&&y(m),m=[E(i,"input",t[81]),E(c,"change",t[163]),E(c,"change",t[87]),E(_,"change",t[164]),E(_,"change",t[87])]},p(t,e){16384&e[0]&&i.value!==t[14]&&(i.value=t[14]),1073741824&e[0]&&(c.checked=t[30]),1&e[1]&&(_.checked=t[31]),t[61].collision_type&&g.p(t,e)},d(t){t&&w(e),t&&w(n),t&&w(o),t&&w(l),t&&w(s),t&&w(a),t&&w(p),t&&w(v),t&&w(f),g&&g.d(),y(m)}}}function vn(t){let e,n,o,l,s,r,i,a,p=t[61].collision_type[t[169]]+"",c=t[169]+"";return{c(){e=z("option"),n=F("("),o=F(p),l=F(") - "),s=F(c),r=T(),e.__value=i=t[169],e.value=e.__value,M(e,"class",a="icon_type_"+t[61].iconType[t[169]]+" svelte-1jsovbn")},m(t,i){C(t,e,i),j(e,n),j(e,o),j(e,l),j(e,s),j(e,r)},p:f,d(t){t&&w(e)}}}function fn(t){let e,n,o,l,s,r,i,a,p,c,d,u;return{c(){e=z("div"),e.innerHTML='<hr class="svelte-1jsovbn">',n=T(),o=z("div"),o.innerHTML="Фильтры - <b>Рубежей</b>",l=T(),s=z("div"),r=z("div"),i=z("input"),a=z("label"),a.textContent="- есть комплексы",p=T(),c=z("input"),d=z("label"),d.textContent="-  нет комплексов",M(e,"class","pLine svelte-1jsovbn"),M(o,"class","pLine svelte-1jsovbn"),M(i,"type","checkbox"),M(i,"name","comp1"),M(i,"class","svelte-1jsovbn"),M(a,"for","comp1"),M(a,"class","svelte-1jsovbn"),M(c,"type","checkbox"),M(c,"name","comp"),M(c,"class","svelte-1jsovbn"),M(d,"for","comp"),M(d,"class","svelte-1jsovbn"),M(r,"class","pLine svelte-1jsovbn"),M(s,"class","filtersCont")},m(_,h,v){C(_,e,h),C(_,n,h),C(_,o,h),C(_,l,h),C(_,s,h),j(s,r),j(r,i),i.checked=t[26],j(r,a),j(r,p),j(r,c),c.checked=t[27],j(r,d),v&&y(u),u=[E(i,"change",t[167]),E(i,"change",t[78]),E(c,"change",t[168]),E(c,"change",t[78])]},p(t,e){67108864&e[0]&&(i.checked=t[26]),134217728&e[0]&&(c.checked=t[27])},d(t){t&&w(e),t&&w(n),t&&w(o),t&&w(l),t&&w(s),y(u)}}}function mn(t){let e,n,o,l,s,r,i,a,p,c,d,u,_,h=t[0]._map&&t[0]._opt&&t[0]._opt.years&&Oe(t),v=t[1]._map&&t[1]._opt&&t[1]._opt.years&&Me(t),m=t[2]._map&&t[2]._opt&&t[2]._opt.years&&Pe(t),g=t[3]._map&&t[3]._opt&&t[3]._opt.years&&Ne(t),y=t[9]._map&&t[9]._opt&&t[9]._opt.years&&Ie(t),b=t[10]._map&&t[10]._opt&&t[10]._opt.years&&Ye(t),k=t[11]._map&&t[11]._opt&&t[11]._opt.years&&Qe(t);function x(t,e){return t[4]._map||t[5]._map||t[6]._map||t[7]._map?ln:t[11]._map||t[9]._map||t[10]._map||t[0]._map||t[1]._map||t[3]._map||t[2]._map||t[8]._map?void 0:on}let L=x(t),D=L&&L(t),F=t[4]._map&&sn(t),O=t[5]._map&&cn(t),E=t[6]._map&&un(t),$=t[7]._map&&hn(t),q=t[8]._map&&fn(t);return{c(){e=z("div"),h&&h.c(),n=T(),v&&v.c(),o=T(),m&&m.c(),l=T(),g&&g.c(),s=T(),y&&y.c(),r=T(),b&&b.c(),i=T(),k&&k.c(),a=T(),D&&D.c(),p=T(),F&&F.c(),c=T(),O&&O.c(),d=T(),E&&E.c(),u=T(),$&&$.c(),_=T(),q&&q.c(),M(e,"class","mvsFilters")},m(t,f){C(t,e,f),h&&h.m(e,null),j(e,n),v&&v.m(e,null),j(e,o),m&&m.m(e,null),j(e,l),g&&g.m(e,null),j(e,s),y&&y.m(e,null),j(e,r),b&&b.m(e,null),j(e,i),k&&k.m(e,null),j(e,a),D&&D.m(e,null),j(e,p),F&&F.m(e,null),j(e,c),O&&O.m(e,null),j(e,d),E&&E.m(e,null),j(e,u),$&&$.m(e,null),j(e,_),q&&q.m(e,null)},p(t,f){t[0]._map&&t[0]._opt&&t[0]._opt.years?h?h.p(t,f):(h=Oe(t),h.c(),h.m(e,n)):h&&(h.d(1),h=null),t[1]._map&&t[1]._opt&&t[1]._opt.years?v?v.p(t,f):(v=Me(t),v.c(),v.m(e,o)):v&&(v.d(1),v=null),t[2]._map&&t[2]._opt&&t[2]._opt.years?m?m.p(t,f):(m=Pe(t),m.c(),m.m(e,l)):m&&(m.d(1),m=null),t[3]._map&&t[3]._opt&&t[3]._opt.years?g?g.p(t,f):(g=Ne(t),g.c(),g.m(e,s)):g&&(g.d(1),g=null),t[9]._map&&t[9]._opt&&t[9]._opt.years?y?y.p(t,f):(y=Ie(t),y.c(),y.m(e,r)):y&&(y.d(1),y=null),t[10]._map&&t[10]._opt&&t[10]._opt.years?b?b.p(t,f):(b=Ye(t),b.c(),b.m(e,i)):b&&(b.d(1),b=null),t[11]._map&&t[11]._opt&&t[11]._opt.years?k?k.p(t,f):(k=Qe(t),k.c(),k.m(e,a)):k&&(k.d(1),k=null),L===(L=x(t))&&D?D.p(t,f):(D&&D.d(1),D=L&&L(t),D&&(D.c(),D.m(e,p))),t[4]._map?F?F.p(t,f):(F=sn(t),F.c(),F.m(e,c)):F&&(F.d(1),F=null),t[5]._map?O?O.p(t,f):(O=cn(t),O.c(),O.m(e,d)):O&&(O.d(1),O=null),t[6]._map?E?E.p(t,f):(E=un(t),E.c(),E.m(e,u)):E&&(E.d(1),E=null),t[7]._map?$?$.p(t,f):($=hn(t),$.c(),$.m(e,_)):$&&($.d(1),$=null),t[8]._map?q?q.p(t,f):(q=fn(t),q.c(),q.m(e,null)):q&&(q.d(1),q=null)},i:f,o:f,d(t){t&&w(e),h&&h.d(),v&&v.d(),m&&m.d(),g&&g.d(),y&&y.d(),b&&b.d(),k&&k.d(),D&&D.d(),F&&F.d(),O&&O.d(),E&&E.d(),$&&$.d(),q&&q.d()}}}function gn(t,e,n){let{DtpHearthsPicket4:o}=e,{DtpHearthsPicket:l}=e,{DtpHearths5:s}=e,{DtpHearths3:r}=e,{DtpHearthsStat:i}=e,{DtpHearthsTmp:a}=e,{DtpHearths:p}=e,{DtpVerifyed:c}=e,{DtpSkpdi:d}=e,{DtpGibdd:u}=e,{DtpGibddRub:_}=e,{Rub:h}=e,{control:v}=e;h||(h={}),_||(_={}),o||(o={}),l||(l={}),s||(s={}),r||(r={});let f,m,g=0;const y=new Date,b=new Date(new Date(y.getFullYear(),y.getMonth(),y.getDate()).getTime()),k=y,x=new Date(2019,0,1);let j,C,w,D=v._id_dtp||null,z=v._dateInterval||[x.getTime()/1e3,k.getTime()/1e3],F=c._opt||{},T=F.collision_type?Object.keys(F.collision_type).sort((t,e)=>F.collision_type[e]-F.collision_type[t]):[],O=d._opt||{},E=O.collision_type?Object.keys(O.collision_type).sort((t,e)=>O.collision_type[e]-O.collision_type[t]):[],$=u._opt||{},M=$.collision_type?Object.keys($.collision_type).sort((t,e)=>$.collision_type[e]-$.collision_type[t]):[],P=(_||{})._opt||{},S=P.collision_type?Object.keys(P.collision_type).sort((t,e)=>P.collision_type[e]-P.collision_type[t]):[],H=(p||{})._opt||{},N=H.str_icon_type?Object.keys(H.str_icon_type).sort((t,e)=>H.str_icon_type[e]-H.str_icon_type[t]):[],I=(a||{})._opt||{},G=I.str_icon_type?Object.keys(I.str_icon_type).sort((t,e)=>I.str_icon_type[e]-I.str_icon_type[t]):[],R=(i||{})._opt||{},Z=R.str_icon_type?Object.keys(R.str_icon_type).sort((t,e)=>R.str_icon_type[e]-R.str_icon_type[t]):[],Y=(r||{})._opt||{},W=Y.str_icon_type?Object.keys(Y.str_icon_type).sort((t,e)=>Y.str_icon_type[e]-Y.str_icon_type[t]):[],K=(s||{})._opt||{},J=K.str_icon_type?Object.keys(K.str_icon_type).sort((t,e)=>K.str_icon_type[e]-K.str_icon_type[t]):[],Q=(l||{})._opt||{},X=Q.road?Object.keys(Q.road).sort((t,e)=>Q.road[e]-Q.road[t]):[],tt=(o||{})._opt||{},et=tt.road?Object.keys(tt.road).sort((t,e)=>tt.road[e]-tt.road[t]):[],nt=[""],ot={hearth3:!0,hearth5:!0},lt=null,st=[""],rt=[""],it=[""],at=[""],pt={radius:19,blur:11.26,minOpacity:.34},ct=pt.radius,dt=11.26,ut=.34,_t=h&&h._argFilters?h._argFilters[0]:{type:"comp",zn:{on:!0,off:!0}},ht=_t.zn.on,vt=_t.zn.off;const ft=()=>{if(l._map){let t=[];D&&t.push({type:"id_dtp",zn:D}),lt&&t.push({type:"id_hearth",zn:lt}),nt&&t.push({type:"roads",zn:nt}),t.push({type:"ht",zn:ot}),l.setFilter(t)}};let mt,gt={};Object.keys(tt.years||{}).sort().forEach(t=>{n(29,gt[t]=!0,gt)});const yt=t=>{if(o._map){if(t){let e=t.target||{},o=e.checked,l=e.id,s=e.name;"stricken"!==l&&n(29,gt[s]=o,gt)}let e=[];D&&e.push({type:"id_dtp",zn:D}),mt&&e.push({type:"stricken",zn:Number(mt)}),1===Zt&&e.push({type:"year",zn:gt}),lt&&e.push({type:"id_hearth",zn:lt}),nt&&e.push({type:"roads",zn:nt}),e.push({type:"ht",zn:ot}),o.setFilter(e)}},bt=()=>{yt(),ft(),qt({}),It({}),pe({}),ne({}),Wt({}),Dt(),wt(),Ct(),kt()},kt=()=>{if(c._map){let t=[{type:"itemType",zn:g}];D&&t.push({type:"id_dtp",zn:D}),z&&(n(98,v._dateInterval=z,v),t.push({type:"date",zn:z})),st&&t.push({type:"collision_type",zn:st}),c.setFilter(t)}};let xt=_._argFilters&&_._argFilters.length?_._argFilters[0]:{type:"list_rub",zn:{on:!0,off:!0}},jt=xt.zn.on,Lt=xt.zn.off;const Ct=()=>{if(_._map){let t=[{type:"list_rub",zn:{on:jt,off:Lt}}];D&&t.push({type:"id_dtp",zn:D}),z&&t.push({type:"date",zn:z}),at&&t.push({type:"collision_type",zn:at}),_.setFilter(t)}},wt=()=>{if(u._map){let t=[];D&&t.push({type:"id_dtp",zn:D}),z&&t.push({type:"date",zn:z}),it&&t.push({type:"collision_type",zn:it}),u.setFilter(t)}},Dt=()=>{if(d._map){let t=[];D&&t.push({type:"id_dtp",zn:D}),z&&t.push({type:"date",zn:z}),rt&&t.push({type:"collision_type",zn:rt}),d.setFilter(t)}};var zt;zt=()=>{let t={onSelect(t){this._o.field.value=this.toString(),z[this._o._dint]=this.getDate().getTime()/1e3+24*this._o._dint*60*60,kt(),Dt(),wt(),Ct()},toString(t,e){let n=t.getDate();n<10&&(n="0"+n);let o=t.getMonth()+1;return o<10&&(o="0"+o),`${n}.${o}.${t.getFullYear()}`},parse(t,e){const n=t.split("."),o=parseInt(n[0],10),l=parseInt(n[1],10)-1,s=parseInt(n[2],10);return new Date(s,l,o)},i18n:{previousMonth:"Предыдущий месяц",nextMonth:"Следующий месяц",months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],weekdays:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],weekdaysShort:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]},format:"DD.MM.YYYY",setDefaultDate:!0,yearRange:20,blurFieldOnSelect:!1};j=new Pikaday(L.extend({},t,{_dint:0,field:f,defaultDate:new Date(1e3*z[0])})),C=new Pikaday(L.extend({},t,{_dint:1,field:m,defaultDate:new Date(1e3*z[1])})),bt()},A().$$.on_mount.push(zt);let Ft,Tt,Ot=[""],Et=1,$t={},Mt={};Object.keys(K.years||{}).sort().forEach(t=>{n(35,$t[t]=!0,$t),Object.keys(K.years[t]).sort().forEach(e=>{Tt={},Tt[t]={},Tt[t][e]=!0})}),Mt=Tt||{};const qt=t=>{if(s._map){let e=[],o=t.target||{},l=o.checked,r=o.id,i=o.name;if("hearths_period_type_52"===r)n(34,Et=2);else if("hearths_period_type_51"===r)n(34,Et=1);else if("hearths_year_5"===r)l?n(35,$t[i]=!0,$t):delete $t[i];else if("hearths_quarter_5"===r){let t=i.split("_");l?(Mt[t[0]]||(Mt[t[0]]={}),Mt[t[0]][t[1]]=!0):(Mt[t[0]]&&delete Mt[t[0]][t[1]],0===Object.keys(Mt[t[0]]).length&&delete Mt[t[0]])}1===Et?e.push({type:"year",zn:$t}):2===Et&&e.push({type:"quarter",zn:Mt}),Ft&&e.push({type:"stricken",zn:Number(Ft)}),Ot.length>0&&Ot[0]&&e.push({type:"str_icon_type",zn:Ot}),D&&e.push({type:"id_dtp",zn:D}),s.setFilter(e)}};let Pt,St,Ht=[""],Nt=1,Bt={},Ut={};Object.keys(Y.years||{}).sort().forEach(t=>{n(39,Bt[t]=!0,Bt),Object.keys(Y.years[t]).sort().forEach(e=>{St={},St[t]={},St[t][e]=!0})}),Ut=St||{};const It=t=>{if(r._map){let e=[],o=t.target||{},l=o.checked,s=o.id,i=o.name;if("hearths_period_type_32"===s)n(38,Nt=2);else if("hearths_period_type_31"===s)n(38,Nt=1);else if("hearths_year_3"===s)l?n(39,Bt[i]=!0,Bt):delete Bt[i];else if("hearths_quarter_3"===s){let t=i.split("_");l?(Ut[t[0]]||(Ut[t[0]]={}),Ut[t[0]][t[1]]=!0):(Ut[t[0]]&&delete Ut[t[0]][t[1]],0===Object.keys(Ut[t[0]]).length&&delete Ut[t[0]])}1===Nt?e.push({type:"year",zn:Bt}):2===Nt&&e.push({type:"quarter",zn:Ut}),Pt&&e.push({type:"stricken",zn:Number(Pt)}),Ht.length>0&&Ht[0]&&e.push({type:"str_icon_type",zn:Ht}),D&&e.push({type:"id_dtp",zn:D}),r.setFilter(e)}};let Gt,At,Rt=[""],Zt=1,Yt={},Vt={};Object.keys(R.years||{}).sort().forEach(t=>{n(43,Yt[t]=!0,Yt),Object.keys(R.years[t]).sort().forEach(e=>{At={},At[t]={},At[t][e]=!0})}),Vt=At||{};const Wt=t=>{if(i._map){let e=[],o=t.target||{},l=o.checked,s=o.id,r=o.name;if("hearths_period_type_Stat2"===s)n(42,Zt=2);else if("hearths_period_type_Stat1"===s)n(42,Zt=1);else if("hearths_year_Stat"===s)l?n(43,Yt[r]=!0,Yt):delete Yt[r];else if("hearths_quarter_Stat"===s){let t=r.split("_");l?(Vt[t[0]]||n(44,Vt[t[0]]={},Vt),n(44,Vt[t[0]][t[1]]=!0,Vt)):(Vt[t[0]]&&delete Vt[t[0]][t[1]],0===Object.keys(Vt[t[0]]).length&&delete Vt[t[0]])}1===Zt?e.push({type:"year",zn:Yt}):2===Zt&&e.push({type:"quarter",zn:Vt}),Gt&&e.push({type:"stricken",zn:Number(Gt)}),Rt.length>0&&Rt[0]&&e.push({type:"str_icon_type",zn:Rt}),D&&e.push({type:"id_dtp",zn:D}),i.setFilter(e)}};let Kt,Jt,Qt=[""],Xt=1,te={},ee={};Object.keys(I.years||{}).sort().forEach(t=>{n(48,te[t]=!0,te),Object.keys(I.years[t]).sort().forEach(e=>{Jt={},Jt[t]={},Jt[t][e]=!0})}),ee=Jt||{};const ne=t=>{if(a._map){let e=[],o=t.target||{},l=o.checked,s=o.id,r=o.name;if("hearths_period_type_tmp2"===s)n(47,Xt=2);else if("hearths_period_type_tmp1"===s)n(47,Xt=1);else if("hearths_year_tmp"===s)l?n(48,te[r]=!0,te):delete te[r];else if("hearths_quarter_tmp"===s){let t=r.split("_");l?(ee[t[0]]||n(49,ee[t[0]]={},ee),n(49,ee[t[0]][t[1]]=!0,ee)):(ee[t[0]]&&delete ee[t[0]][t[1]],0===Object.keys(ee[t[0]]).length&&delete ee[t[0]])}1===Xt?e.push({type:"year",zn:te}):2===Xt&&e.push({type:"quarter",zn:ee}),Kt&&e.push({type:"stricken",zn:Number(Kt)}),Qt.length>0&&Qt[0]&&e.push({type:"str_icon_type",zn:Qt}),D&&e.push({type:"id_dtp",zn:D}),a.setFilter(e)}};let oe,le,se=[""],re=1,ie={},ae={};Object.keys(H.years||{}).sort().forEach(t=>{n(53,ie[t]=!0,ie),Object.keys(H.years[t]).sort().forEach(e=>{le={},le[t]={},le[t][e]=!0})}),ae=le||{};const pe=t=>{if(p._map){let e=[],o=t.target||{},l=o.checked,s=o.id,r=o.name;if("hearths_period_type2"===s)n(52,re=2);else if("hearths_period_type1"===s)n(52,re=1);else if("hearths_year"===s)l?n(53,ie[r]=!0,ie):delete ie[r];else if("hearths_quarter"===s){let t=r.split("_");l?(ae[t[0]]||n(54,ae[t[0]]={},ae),n(54,ae[t[0]][t[1]]=!0,ae)):(ae[t[0]]&&delete ae[t[0]][t[1]],0===Object.keys(ae[t[0]]).length&&delete ae[t[0]])}1===re?e.push({type:"year",zn:ie}):2===re&&e.push({type:"quarter",zn:ae}),oe&&e.push({type:"stricken",zn:Number(oe)}),se.length>0&&se[0]&&e.push({type:"str_icon_type",zn:se}),D&&e.push({type:"id_dtp",zn:D}),p.setFilter(e)}};return t.$set=t=>{"DtpHearthsPicket4"in t&&n(0,o=t.DtpHearthsPicket4),"DtpHearthsPicket"in t&&n(1,l=t.DtpHearthsPicket),"DtpHearths5"in t&&n(2,s=t.DtpHearths5),"DtpHearths3"in t&&n(3,r=t.DtpHearths3),"DtpHearthsStat"in t&&n(9,i=t.DtpHearthsStat),"DtpHearthsTmp"in t&&n(10,a=t.DtpHearthsTmp),"DtpHearths"in t&&n(11,p=t.DtpHearths),"DtpVerifyed"in t&&n(4,c=t.DtpVerifyed),"DtpSkpdi"in t&&n(5,d=t.DtpSkpdi),"DtpGibdd"in t&&n(6,u=t.DtpGibdd),"DtpGibddRub"in t&&n(7,_=t.DtpGibddRub),"Rub"in t&&n(8,h=t.Rub),"control"in t&&n(98,v=t.control)},[o,l,s,r,c,d,u,_,h,i,a,p,f,m,D,nt,ot,lt,st,rt,it,at,ct,dt,ut,w,ht,vt,mt,gt,jt,Lt,Ft,Ot,Et,$t,Pt,Ht,Nt,Bt,Gt,Rt,Zt,Yt,Vt,Kt,Qt,Xt,te,ee,oe,se,re,ie,ae,F,T,O,E,$,M,P,S,H,N,I,G,R,Z,Y,W,K,J,Q,X,tt,et,pt,t=>{let e=[{type:"comp",zn:{on:ht,off:vt}}];h.setFilter(e)},ft,yt,t=>{let e=t.target.value;n(14,D=e||null),n(98,v._id_dtp=D,v),bt()},t=>{let e=t.target.value;n(17,lt=e||null),ft(),yt()},t=>{let e=t.target;n(16,ot[e.name]=e.checked,ot),ft(),yt()},t=>{let e=t.target;n(7,_._needHeat=n(6,u._needHeat=n(5,d._needHeat=n(4,c._needHeat=!!e.checked&&pt,c),d),u),_),Ct(),wt(),Dt(),kt()},()=>{let t={radius:ct,blur:dt,minOpacity:ut};u._heat&&u._heat.setOptions(t),d._heat&&d._heat.setOptions(t),c._heat&&c._heat.setOptions(t)},kt,Ct,wt,Dt,t=>{let e=t.target;g=Number(e.value),kt()},()=>{let t=C.getDate(),e=j.getDate(),n=t-e;0===n&&(n=864e5),j.setDate(new Date(e.getTime()-n)),C.setDate(new Date(t.getTime()-n)),z=[j.getDate().getTime()/1e3,86400+C.getDate().getTime()/1e3],kt(),Dt(),wt(),Ct()},()=>{let t=C.getDate(),e=j.getDate(),n=t-e;0===n&&(n=864e5),j.setDate(new Date(e.getTime()+n)),C.setDate(new Date(t.getTime()+n)),z=[j.getDate().getTime()/1e3,86400+C.getDate().getTime()/1e3],kt(),Dt(),wt(),Ct()},qt,It,Wt,ne,pe,v,g,z,j,C,Mt,Tt,Ut,St,At,Jt,le,y,b,k,x,void 0,void 0,void 0,void 0,_t,bt,xt,function(){Zt=this.__value,n(42,Zt)},[[],[],[],[],[]],(t,e)=>t+=tt.road[e],function(){nt=U(this),n(15,nt),n(76,et)},function(){mt=B(this),n(28,mt)},(t,e)=>t+=Q.road[e],function(){nt=U(this),n(15,nt),n(76,et)},function(){Et=this.__value,n(34,Et)},(t,e)=>t+=K.str_icon_type[e],function(){Ot=U(this),n(33,Ot),n(72,J)},function(){Ft=B(this),n(32,Ft)},function(){Nt=this.__value,n(38,Nt)},(t,e)=>t+=Y.str_icon_type[e],function(){Ht=U(this),n(37,Ht),n(70,W)},function(){Pt=B(this),n(36,Pt)},function(){Zt=this.__value,n(42,Zt)},function(){Zt=this.__value,n(42,Zt)},(t,e)=>t+=R.str_icon_type[e],function(){Rt=U(this),n(41,Rt),n(68,Z)},function(){Gt=B(this),n(40,Gt)},function(){Xt=this.__value,n(47,Xt)},function(){Xt=this.__value,n(47,Xt)},(t,e)=>t+=I.str_icon_type[e],function(){Qt=U(this),n(46,Qt),n(66,G)},function(){Kt=B(this),n(45,Kt)},function(){re=this.__value,n(52,re)},function(){re=this.__value,n(52,re)},(t,e)=>t+=H.str_icon_type[e],function(){se=U(this),n(51,se),n(64,N)},function(){oe=B(this),n(50,oe)},function(t){V[t?"unshift":"push"](()=>{n(12,f=t)})},function(t){V[t?"unshift":"push"](()=>{n(13,m=t)})},function(){ut=q(this.value),n(24,ut)},function(){ct=q(this.value),n(22,ct)},function(){dt=q(this.value),n(23,dt)},function(t){V[t?"unshift":"push"](()=>{n(25,w=t)})},(t,e)=>t+=F.collision_type[e],function(){st=U(this),n(18,st),n(56,T)},(t,e)=>t+=O.collision_type[e],function(){rt=U(this),n(19,rt),n(58,E)},(t,e)=>t+=$.collision_type[e],function(){it=U(this),n(20,it),n(60,M)},function(){jt=this.checked,n(30,jt)},function(){Lt=this.checked,n(31,Lt)},(t,e)=>t+=P.collision_type[e],function(){at=U(this),n(21,at),n(62,S)},function(){ht=this.checked,n(26,ht)},function(){vt=this.checked,n(27,vt)}]}ie._needHeat={radius:19,blur:11.26,minOpacity:.34},ie.checkZoom=t=>{Object.keys(ie._layers).length?t<12&&ie.setFilter(re):t>11&&ie.setFilter(re)},ie.setFilter=t=>{if(!ie._map)return;ie.clearLayers(),re=t||[];let e=[],n=[];ie._group&&ie._map&&(ie._group.getLayers().forEach(t=>{let o=t.options.props,l=0;re.forEach(t=>{"itemType"===t.type?(0===t.zn||1===t.zn&&o.id_stat&&o.id_skpdi||2===t.zn&&o.id_skpdi&&!o.id_stat||3===t.zn&&o.id_stat&&!o.id_skpdi)&&l++:"id_dtp"===t.type?o.id_skpdi!=t.zn&&o.id_stat!=t.zn||l++:"collision_type"===t.type?(""===t.zn[0]||t.zn.filter(t=>t===o.collision_type).length)&&l++:"date"===t.type&&o.date>=t.zn[0]&&o.date<t.zn[1]&&l++}),l===re.length&&(e.push(t),n.push(t._latlng))}),ie._needHeat?(ie._map.addLayer(ie._heat),ie._heat.setLatLngs(n),ie._heat.setOptions(ie._needHeat),ie._map._zoom>11&&ie.addLayer(le.layerGroup(e))):(ie.addLayer(le.layerGroup(e)),ie._map.removeLayer(ie._heat)))},ie.on("remove",()=>{ie._map.removeLayer(ie._heat),ie.clearLayers()}).on("add",t=>{re=[],ie._heat=le.heatLayer([],{interactive:!1}),fetch("https://dtp.mvs.group/scripts/index_dev.php?request=get_collision",{}).then(t=>t.json()).then(t=>{let e={collision_type:{},iconType:{}},n=[],o=t.map(t=>{let o=t.iconType||0,l=[],s=!1,r="#2F4F4F";o&&(s=o%2==0,o>=1&&o<=6?r="#8B4513":7===o||8===o?r="#228B22":o>=9&&o<=14?r="#8B4513":15===o||16===o?r="#7B68EE":17!==o&&18!==o||(r="#2F4F4F")),t.id_skpdi&&l.push({type:"skpdi",id:t.id_skpdi}),t.id_stat&&l.push({type:"gibdd",id:t.id_stat}),t._cur=l,t.lat&&t.lon||(console.log("_______",t),t.lat=t.lon=0);let i=e.collision_type[t.collision_type];i?i++:i=1,e.collision_type[t.collision_type]=i,e.iconType[t.collision_type]=o;let a=le.latLng(t.lat,t.lon,s?1:.5);return n.push(a),new v(a,{props:t,radius:6,triangle:l.length>1,box:!!t.id_skpdi,stroke:s,fillColor:r}).bindPopup(se).on("popupopen",t=>{!function(t){let e=le.DomUtil.create("div");new oe({target:e,props:{prp:t}}),se.setContent(e)}(t.target.options.props)}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})});ie.addLayer(ie._heat),ie._heat.setLatLngs(n),ie._heat.setOptions(ie._needHeat),ie._opt=e,ie._group=le.layerGroup(o),re?ie.setFilter(re):ie.addLayer(ie._group),ie.checkZoom(ie._map._zoom),ie._refreshFilters()})});class yn extends vt{constructor(t){super(),ht(this,t,gn,mn,k,{DtpHearthsPicket4:0,DtpHearthsPicket:1,DtpHearths5:2,DtpHearths3:3,DtpHearthsStat:9,DtpHearthsTmp:10,DtpHearths:11,DtpVerifyed:4,DtpSkpdi:5,DtpGibdd:6,DtpGibddRub:7,Rub:8,control:98},[-1,-1,-1,-1,-1,-1,-1])}}function bn(t,e,n){const o=t.slice();return o[8]=e[n],o[10]=n,o}function kn(t){let e,n,o,l,s,r,i,a,p,c,d,u=(t[0].piketaj_start_km||0)+"",_=(t[0].piketaj_finish_km||0)+"";return{c(){e=z("tr"),n=z("td"),n.textContent="Пикетаж:",o=T(),l=z("td"),s=F("От: "),r=z("b"),i=F(u),a=F(" км. до: "),p=z("b"),c=F(_),d=F(" км."),M(n,"class","first svelte-mnr9l0")},m(t,u){C(t,e,u),j(e,n),j(e,o),j(e,l),j(l,s),j(l,r),j(r,i),j(l,a),j(l,p),j(p,c),j(l,d)},p(t,e){1&e&&u!==(u=(t[0].piketaj_start_km||0)+"")&&P(i,u),1&e&&_!==(_=(t[0].piketaj_finish_km||0)+"")&&P(c,_)},d(t){t&&w(e)}}}function xn(t){let e,n,o,l,s,r=(t[0].str_icon_type||"")+"";return{c(){e=z("tr"),n=z("td"),n.textContent="Тип ДТП:",o=T(),l=z("td"),s=F(r),M(n,"class","first svelte-mnr9l0")},m(t,r){C(t,e,r),j(e,n),j(e,o),j(e,l),j(l,s)},p(t,e){1&e&&r!==(r=(t[0].str_icon_type||"")+"")&&P(s,r)},d(t){t&&w(e)}}}function jn(t){let e,n;const o=new oe({props:{prp:t[8],closeMe:t[7]}});return{c(){e=z("div"),ct(o.$$.fragment),M(e,"class","win leaflet-popup-content-wrapper  svelte-mnr9l0")},m(t,l){C(t,e,l),dt(o,e,null),n=!0},p(t,e){const n={};1&e&&(n.prp=t[8]),4&e&&(n.closeMe=t[7]),o.$set(n)},i(t){n||(at(o.$$.fragment,t),n=!0)},o(t){pt(o.$$.fragment,t),n=!1},d(t){t&&w(e),ut(o)}}}function Ln(t){let e,n,o,l,s,r,i,a,p,c,d,u,_,h,v,f,m,g,b,k,x,L,D,O,$,q,S,H,N,B=Math.floor(t[8].piketaj_m/1e3)+"",U=t[8].piketaj_m%1e3+"",I=new Date(1e3*t[8].date).toLocaleDateString()+"",G=t[8].lost+"",A=t[8].stricken+"",R=t[8].address+"";function Z(...e){return t[5](t[10],...e)}function Y(...e){return t[6](t[10],...e)}let V=t[2]===t[10]&&jn(t);return{c(){e=z("tr"),n=z("td"),o=z("ul"),l=z("li"),s=F("Пикетаж: "),r=F(B),i=F(" км. "),a=F(U),p=F(" м."),c=T(),d=z("li"),u=F(I),_=F(" погибших "),h=F(G),v=F(", раненых "),f=F(A),g=T(),b=z("tr"),k=z("td"),k.textContent="Адрес:",x=T(),L=z("td"),D=F(R),O=z("br"),$=z("span"),$.textContent="подробнее",q=T(),V&&V.c(),S=T(),M(l,"class","svelte-mnr9l0"),M(d,"title",m="id: "+t[8].id),M(d,"class","svelte-mnr9l0"),M(n,"class","first svelte-mnr9l0"),M(n,"colspan","2"),M(k,"class","first svelte-mnr9l0"),M($,"class","link svelte-mnr9l0")},m(t,m,w){C(t,e,m),j(e,n),j(n,o),j(o,l),j(l,s),j(l,r),j(l,i),j(l,a),j(l,p),j(o,c),j(o,d),j(d,u),j(d,_),j(d,h),j(d,v),j(d,f),C(t,g,m),C(t,b,m),j(b,k),j(b,x),j(b,L),j(L,D),j(L,O),j(L,$),j(L,q),V&&V.m(L,null),j(b,S),H=!0,w&&y(N),N=[E(d,"click",Z),E($,"click",Y)]},p(e,n){t=e,(!H||1&n)&&B!==(B=Math.floor(t[8].piketaj_m/1e3)+"")&&P(r,B),(!H||1&n)&&U!==(U=t[8].piketaj_m%1e3+"")&&P(a,U),(!H||1&n)&&I!==(I=new Date(1e3*t[8].date).toLocaleDateString()+"")&&P(u,I),(!H||1&n)&&G!==(G=t[8].lost+"")&&P(h,G),(!H||1&n)&&A!==(A=t[8].stricken+"")&&P(f,A),(!H||1&n&&m!==(m="id: "+t[8].id))&&M(d,"title",m),(!H||1&n)&&R!==(R=t[8].address+"")&&P(D,R),t[2]===t[10]?V?(V.p(t,n),at(V,1)):(V=jn(t),V.c(),at(V,1),V.m(L,null)):V&&(rt(),pt(V,1,1,()=>{V=null}),it())},i(t){H||(at(V),H=!0)},o(t){pt(V),H=!1},d(t){t&&w(e),t&&w(g),t&&w(b),V&&V.d(),y(N)}}}function Cn(t){let e,n,o,l,s,r,i,a,p,c,d,u,_,h,v,f,m,g,y,b,k,x,L,O,E,$,q,S,H,N,B,U,I,G,A,R,Z,Y=t[1]?"Предочаг":"Очаг",V=(t[0].id||t[0].id_hearth)+"",W=t[0].quarter?t[0].quarter+" кв.":"",K=t[0].year+"",J=t[0].list_dtp.length+"",Q=t[0].count_lost+"",X=t[0].count_stricken+"",tt=t[0].piketaj_start_km&&kn(t),et=t[0].str_icon_type&&xn(t),nt=t[0].list_dtp,ot=[];for(let e=0;e<nt.length;e+=1)ot[e]=Ln(bn(t,nt,e));const lt=t=>pt(ot[t],1,1,()=>{ot[t]=null});return{c(){e=z("div"),n=z("div"),o=F(Y),l=F(" ДТП (id: "),s=F(V),r=F(")"),i=T(),a=z("div"),p=F(W),c=T(),d=F(K),u=F("г."),_=T(),h=z("div"),v=z("table"),f=z("tbody"),tt&&tt.c(),m=T(),et&&et.c(),g=T(),y=z("tr"),b=z("td"),b.textContent="Всего ДТП:",k=T(),x=z("td"),L=F(J),O=T(),E=z("tr"),$=z("td"),$.textContent="Погибших:",q=T(),S=z("td"),H=F(Q),N=T(),B=z("tr"),U=z("td"),U.textContent="Раненых:",I=T(),G=z("td"),A=F(X),R=T();for(let t=0;t<ot.length;t+=1)ot[t].c();M(n,"class","pLine"),M(a,"class","pLine"),M(b,"class","first svelte-mnr9l0"),M($,"class","first svelte-mnr9l0"),M(U,"class","first svelte-mnr9l0"),M(v,"class","table svelte-mnr9l0"),M(h,"class","featureCont"),M(e,"class","mvsPopup svelte-mnr9l0")},m(t,w){C(t,e,w),j(e,n),j(n,o),j(n,l),j(n,s),j(n,r),j(e,i),j(e,a),j(a,p),j(a,c),j(a,d),j(a,u),j(e,_),j(e,h),j(h,v),j(v,f),tt&&tt.m(f,null),j(f,m),et&&et.m(f,null),j(f,g),j(f,y),j(y,b),j(y,k),j(y,x),j(x,L),j(f,O),j(f,E),j(E,$),j(E,q),j(E,S),j(S,H),j(f,N),j(f,B),j(B,U),j(B,I),j(B,G),j(G,A),j(f,R);for(let t=0;t<ot.length;t+=1)ot[t].m(f,null);Z=!0},p(t,[e]){if((!Z||2&e)&&Y!==(Y=t[1]?"Предочаг":"Очаг")&&P(o,Y),(!Z||1&e)&&V!==(V=(t[0].id||t[0].id_hearth)+"")&&P(s,V),(!Z||1&e)&&W!==(W=t[0].quarter?t[0].quarter+" кв.":"")&&P(p,W),(!Z||1&e)&&K!==(K=t[0].year+"")&&P(d,K),t[0].piketaj_start_km?tt?tt.p(t,e):(tt=kn(t),tt.c(),tt.m(f,m)):tt&&(tt.d(1),tt=null),t[0].str_icon_type?et?et.p(t,e):(et=xn(t),et.c(),et.m(f,g)):et&&(et.d(1),et=null),(!Z||1&e)&&J!==(J=t[0].list_dtp.length+"")&&P(L,J),(!Z||1&e)&&Q!==(Q=t[0].count_lost+"")&&P(H,Q),(!Z||1&e)&&X!==(X=t[0].count_stricken+"")&&P(A,X),13&e){let n;for(nt=t[0].list_dtp,n=0;n<nt.length;n+=1){const o=bn(t,nt,n);ot[n]?(ot[n].p(o,e),at(ot[n],1)):(ot[n]=Ln(o),ot[n].c(),at(ot[n],1),ot[n].m(f,null))}for(rt(),n=nt.length;n<ot.length;n+=1)lt(n);it()}},i(t){if(!Z){for(let t=0;t<nt.length;t+=1)at(ot[t]);Z=!0}},o(t){ot=ot.filter(Boolean);for(let t=0;t<ot.length;t+=1)pt(ot[t]);Z=!1},d(t){t&&w(e),tt&&tt.d(),et&&et.d(),D(ot,t)}}}function wn(t,e,n){let o,{prp:l}=e,{predochag:s}=e;const r=t=>{let e=l._bounds.options.items[t];e&&e._map&&e._map.panTo(e._latlng)};return t.$set=t=>{"prp"in t&&n(0,l=t.prp),"predochag"in t&&n(1,s=t.predochag)},[l,s,o,r,t=>{console.log("showDtpInfo ",t)},t=>{r(t)},t=>{n(2,o=t)},()=>{n(2,o=null)}]}class Dn extends vt{constructor(t){super(),ht(this,t,wn,Cn,k,{prp:0,predochag:1})}}const zn=(t,e)=>{let n=t.count_lost,o=t.count_stricken;!o&&n&&(e.stricken[1]=1+(e.stricken[1]||0)),o&&!n&&(e.stricken[2]=1+(e.stricken[2]||0)),(o||n)&&(e.stricken[3]=1+(e.stricken[3]||0)),o&&n&&(e.stricken[4]=1+(e.stricken[4]||0))},Fn=window.L,Tn=Fn.popup(),On=Fn.popup({minWidth:200});let En;const $n=function(t){let e=Fn.DomUtil.create("div");return new oe({target:e,props:{prp:t}}),Tn.setContent(e),e},Mn=Fn.featureGroup([]);Mn.setFilter=t=>{Mn.clearLayers(),En=t;let e=[];Mn._group&&Mn._map&&(Mn._group.getLayers().forEach(t=>{let n=t.options.cluster,o=n.list_dtp||[],l=0;En.forEach(t=>{if("quarter"===t.type)t.zn[n.year]&&t.zn[n.year][n.quarter]&&l++;else if("id_dtp"===t.type)o.filter(e=>e.id==t.zn||e.id_skpdi==t.zn||e.id_stat==t.zn).length&&l++;else if("year"===t.type)t.zn[n.year]&&l++;else if("str_icon_type"===t.type)t.zn.filter(t=>t===n.str_icon_type).length&&l++;else if("stricken"===t.type){let e=t.zn;e?(1===e&&!n.count_stricken&&n.count_lost||2===e&&n.count_stricken&&!n.count_lost||3===e&&(n.count_stricken||n.count_lost)||4===e&&n.count_stricken&&n.count_lost)&&l++:l++}}),l===En.length&&e.push(t)}),Mn.addLayer(Fn.layerGroup(e)))},Mn.on("remove",()=>{Mn.clearLayers()}).on("add",t=>{En=[];let e={str_icon_type:{},iconType:{},years:{},dtps:{},stricken:{0:0}},n=[];Promise.all([2019,2020].map(t=>fetch("https://dtp.mvs.group/scripts/hearths_dev/"+t+".txt",{}).then(t=>t.json()))).then(t=>{t.forEach(t=>{e.stricken[0]+=t.length,t.forEach(t=>{let o=t.icon_type||1,l=Fn.latLngBounds(),s=t.list_dtp,r=!1,i="#FF0000";if(zn(t,e),s.length){Number(t.year),Number(t.quarter);let a=e.years[t.year];a||(a=e.years[t.year]={}),e.years[t.year]=a;let p=a[t.quarter];t.quarter in a?p++:p=a[t.quarter]=1,a[t.quarter]=p;let c=e.str_icon_type[t.str_icon_type];c?c++:c=1,e.str_icon_type[t.str_icon_type]=c,e.iconType[t.str_icon_type]=o,o&&(r=o%2==0,1===o||2===o?i="#FFA500":3===o||4===o?i="#B8860B":5===o||6===o?i="#CD853F":7===o||8===o?i="#228B22":9===o||10===o?i="#FF8C00":11===o||12===o?i="#D2691E":13===o||14===o?i="#DEB887":15===o||16===o?i="#7B68EE":17!==o&&18!==o||(i="#2F4F4F"));let d=s.map(n=>{n.iconType;let o=n.coords||{lat:0,lon:0},s=Fn.latLng(o.lat,o.lon),a=[];l.extend(s),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let p=e.dtps[n.id];return p?p[t.id]?p[t.id]++:p[t.id]=1:(p={},p[t.id]=1),e.dtps[n.id]=p,new v(Fn.latLng(o.lat,o.lon),{cluster:t,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:r,fillColor:i}).bindPopup(Tn).on("popupopen",t=>{$n(t.target.options.props)}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})});t._bounds=Fn.rectangle(l,{items:d,cluster:t,fill:!0,color:i,dashArray:"8 3 1"}).on("mouseover",t=>{let e=t.target;e._color=e.options.color,e.options.color="red",e._renderer._updateStyle(e)}).on("mouseout",t=>{let e=t.target;e.options.color=e._color,e._renderer._updateStyle(e)}).on("click",e=>{Fn.DomEvent.stopPropagation(e);let n,o=1e3,l=e.target,s=e.latlng;e.originalEvent.ctrlKey&&l.bringToBack(),l.options.items.forEach(t=>{let e=t._latlng.distanceTo(s);e<o&&(o=e,n=t)}),o<10?($n(n.options.props),Tn.setLatLng(n._latlng).openOn(Mn._map)):(!function(t){let e=Fn.DomUtil.create("div");new Dn({target:e,props:{prp:t}}),On.setContent(e)}(t),On.setLatLng(s).openOn(Mn._map))}),n.push(t._bounds),n=n.concat(d)}}),Mn._opt=e,Mn._group=Fn.layerGroup(n),En?Mn.setFilter(En):Mn.addLayer(Mn._group),Mn._refreshFilters()})})});const qn=window.L,Pn=qn.popup(),Sn=qn.popup({minWidth:200});let Hn;const Nn=function(t){let e=qn.DomUtil.create("div");return new oe({target:e,props:{prp:t}}),Pn.setContent(e),e},Bn=qn.featureGroup([]);Bn.setFilter=t=>{Bn.clearLayers(),Hn=t;let e=[];Bn._group&&Bn._map&&(Bn._group.getLayers().forEach(t=>{let n=t.options.cluster,o=n.list_dtp||[],l=0;Hn.forEach(t=>{if("quarter"===t.type)t.zn[n.year]&&t.zn[n.year][n.quarter]&&l++;else if("id_dtp"===t.type)o.filter(e=>e.id==t.zn||e.id_skpdi==t.zn||e.id_stat==t.zn).length&&l++;else if("year"===t.type)t.zn[n.year]&&l++;else if("str_icon_type"===t.type)t.zn.filter(t=>t===n.str_icon_type).length&&l++;else if("stricken"===t.type){let e=t.zn;e?(1===e&&!n.count_stricken&&n.count_lost||2===e&&n.count_stricken&&!n.count_lost||3===e&&(n.count_stricken||n.count_lost)||4===e&&n.count_stricken&&n.count_lost)&&l++:l++}}),l===Hn.length&&e.push(t)}),Bn.addLayer(qn.layerGroup(e)))},Bn.on("remove",()=>{Bn.clearLayers()}).on("add",t=>{Hn=[];let e={str_icon_type:{},iconType:{},years:{},dtps:{},stricken:{0:0}},n=[];Promise.all([2019,2020].map(t=>fetch("https://dtp.mvs.group/scripts/hearthstmp_dev/"+t+".txt",{}).then(t=>t.json()))).then(t=>{t.forEach(t=>{e.stricken[0]+=t.length,t.forEach(t=>{let o=t.icon_type||1,l=qn.latLngBounds(),s=t.list_dtp,r=!1,i="#FF0000";if(zn(t,e),s.length){Number(t.year),Number(t.quarter);let a=e.years[t.year];a||(a=e.years[t.year]={}),e.years[t.year]=a;let p=a[t.quarter];t.quarter in a?p++:p=a[t.quarter]=1,a[t.quarter]=p;let c=e.str_icon_type[t.str_icon_type];c?c++:c=1,e.str_icon_type[t.str_icon_type]=c,e.iconType[t.str_icon_type]=o,o&&(r=o%2==0,1===o||2===o?i="#FFA500":3===o||4===o?i="#B8860B":5===o||6===o?i="#CD853F":7===o||8===o?i="#228B22":9===o||10===o?i="#FF8C00":11===o||12===o?i="#D2691E":13===o||14===o?i="#DEB887":15===o||16===o?i="#7B68EE":17!==o&&18!==o||(i="#2F4F4F"));let d=s.map(n=>{n.iconType;let o=n.coords||{lat:0,lon:0},s=qn.latLng(o.lat,o.lon),a=[];l.extend(s),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let p=e.dtps[n.id];return p?p[t.id]?p[t.id]++:p[t.id]=1:(p={},p[t.id]=1),e.dtps[n.id]=p,new v(qn.latLng(o.lat,o.lon),{cluster:t,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:r,fillColor:i}).bindPopup(Pn).on("popupopen",t=>{Nn(t.target.options.props)}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})});t._bounds=qn.rectangle(l,{items:d,cluster:t,fill:!0,color:i,dashArray:"8 3 1"}).on("mouseover",t=>{let e=t.target;e._color=e.options.color,e.options.color="red",e._renderer._updateStyle(e)}).on("mouseout",t=>{let e=t.target;e.options.color=e._color,e._renderer._updateStyle(e)}).on("click",e=>{qn.DomEvent.stopPropagation(e);let n,o=1e3,l=e.target,s=e.latlng;e.originalEvent.ctrlKey&&l.bringToBack(),l.options.items.forEach(t=>{let e=t._latlng.distanceTo(s);e<o&&(o=e,n=t)}),o<10?(Nn(n.options.props),Pn.setLatLng(n._latlng).openOn(Bn._map)):(!function(t){let e=qn.DomUtil.create("div");new Dn({target:e,props:{prp:t}}),Sn.setContent(e)}(t),Sn.setLatLng(s).openOn(Bn._map))}),n.push(t._bounds),n=n.concat(d)}}),Bn._opt=e,Bn._group=qn.layerGroup(n),Hn?Bn.setFilter(Hn):Bn.addLayer(Bn._group),Bn._refreshFilters()})})});const Un=window.L,In=Un.popup(),Gn=Un.popup({minWidth:200});let An;const Rn=function(t){let e=Un.DomUtil.create("div");return new oe({target:e,props:{prp:t}}),In.setContent(e),e},Zn=Un.featureGroup([]);Zn.setFilter=t=>{Zn.clearLayers(),An=t;let e=[];Zn._group&&Zn._map&&(Zn._group.getLayers().forEach(t=>{let n=t.options.cluster,o=n.list_dtp||[],l=0;An.forEach(t=>{if("quarter"===t.type)t.zn[n.year]&&t.zn[n.year][n.quarter]&&l++;else if("id_dtp"===t.type)o.filter(e=>e.id==t.zn||e.id_skpdi==t.zn||e.id_stat==t.zn).length&&l++;else if("year"===t.type)t.zn[n.year]&&l++;else if("str_icon_type"===t.type)t.zn.filter(t=>t===n.str_icon_type).length&&l++;else if("stricken"===t.type){let e=t.zn;e?(1===e&&!n.count_stricken&&n.count_lost||2===e&&n.count_stricken&&!n.count_lost||3===e&&(n.count_stricken||n.count_lost)||4===e&&n.count_stricken&&n.count_lost)&&l++:l++}}),l===An.length&&e.push(t)}),Zn.addLayer(Un.layerGroup(e)))},Zn.on("remove",()=>{Zn.clearLayers()}).on("add",t=>{An=[];let e={str_icon_type:{},iconType:{},years:{},dtps:{},stricken:{0:0}},n=[];Promise.all([2019,2020].map(t=>fetch("https://dtp.mvs.group/scripts/hearthsstat_dev/"+t+".txt",{}).then(t=>t.json()))).then(t=>{t.forEach(t=>{e.stricken[0]+=t.length,t.forEach(t=>{let o=t.icon_type||1,l=Un.latLngBounds(),s=t.list_dtp,r=!1,i="#FF0000";if(zn(t,e),s.length){Number(t.year),Number(t.quarter);let a=e.years[t.year];a||(a=e.years[t.year]={}),e.years[t.year]=a;let p=a[t.quarter];t.quarter in a?p++:p=a[t.quarter]=1,a[t.quarter]=p;let c=e.str_icon_type[t.str_icon_type];c?c++:c=1,e.str_icon_type[t.str_icon_type]=c,e.iconType[t.str_icon_type]=o,o&&(r=o%2==0,1===o||2===o?i="#FFA500":3===o||4===o?i="#B8860B":5===o||6===o?i="#CD853F":7===o||8===o?i="#228B22":9===o||10===o?i="#FF8C00":11===o||12===o?i="#D2691E":13===o||14===o?i="#DEB887":15===o||16===o?i="#7B68EE":17!==o&&18!==o||(i="#2F4F4F"));let d=s.map(n=>{n.iconType;let o=n.coords||{lat:0,lon:0},s=Un.latLng(o.lat,o.lon),a=[];l.extend(s),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let p=e.dtps[n.id];return p?p[t.id]?p[t.id]++:p[t.id]=1:(p={},p[t.id]=1),e.dtps[n.id]=p,new v(Un.latLng(o.lat,o.lon),{cluster:t,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:r,fillColor:i}).bindPopup(In).on("popupopen",t=>{Rn(t.target.options.props)}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})});t._bounds=Un.rectangle(l,{items:d,cluster:t,fill:!0,color:i,dashArray:"8 3 1"}).on("mouseover",t=>{let e=t.target;e._color=e.options.color,e.options.color="red",e._renderer._updateStyle(e)}).on("mouseout",t=>{let e=t.target;e.options.color=e._color,e._renderer._updateStyle(e)}).on("click",e=>{Un.DomEvent.stopPropagation(e);let n,o=1e3,l=e.target,s=e.latlng,r=e.layerPoint;e.originalEvent.ctrlKey&&l.bringToBack(),l.options.items.forEach(t=>{let e=t._point.distanceTo(r);e<o&&(o=e,n=t)}),o<10?(Rn(n.options.props),In.setLatLng(n._latlng).openOn(Zn._map)):(!function(t){let e=Un.DomUtil.create("div");new Dn({target:e,props:{prp:t}}),Gn.setContent(e)}(t),Gn.setLatLng(s).openOn(Zn._map))}),n.push(t._bounds),n=n.concat(d)}}),Zn._opt=e,Zn._group=Un.layerGroup(n),An?Zn.setFilter(An):Zn.addLayer(Zn._group),Zn._refreshFilters()})})});const Yn=window.L,Vn=Yn.popup(),Wn=Yn.popup({minWidth:200});let Kn;const Jn=function(t){let e=Yn.DomUtil.create("div");return new oe({target:e,props:{prp:t}}),Vn.setContent(e),e},Qn=Yn.featureGroup([]);Qn.setFilter=t=>{Qn.clearLayers(),Kn=t;let e=[];Qn._group&&Qn._map&&(Qn._group.getLayers().forEach(t=>{let n=t.options.cluster,o=n.list_dtp||[],l=0;Kn.forEach(t=>{if("quarter"===t.type)t.zn[n.year]&&t.zn[n.year][n.quarter]&&l++;else if("id_dtp"===t.type)o.filter(e=>e.id==t.zn||e.id_skpdi==t.zn||e.id_stat==t.zn).length&&l++;else if("year"===t.type)t.zn[n.year]&&l++;else if("str_icon_type"===t.type)t.zn.filter(t=>t===n.str_icon_type).length&&l++;else if("stricken"===t.type){let e=t.zn;e?(1===e&&!n.count_stricken&&n.count_lost||2===e&&n.count_stricken&&!n.count_lost||3===e&&(n.count_stricken||n.count_lost)||4===e&&n.count_stricken&&n.count_lost)&&l++:l++}}),l===Kn.length&&e.push(t)}),Qn.addLayer(Yn.layerGroup(e)))},Qn.on("remove",()=>{Qn.clearLayers()}).on("add",t=>{Kn=[];let e={str_icon_type:{},iconType:{},years:{},dtps:{},stricken:{0:0}},n=[];Promise.all([2019,2020].map(t=>fetch("https://dtp.mvs.group/scripts/hearths3_dev/"+t+".txt",{}).then(t=>t.json()))).then(t=>{t.forEach(t=>{e.stricken[0]+=t.length,t.forEach(t=>{let o=t.icon_type||1,l=Yn.latLngBounds(),s=t.list_dtp,r=!1,i=(zn(t,e),"#FF0000");if(s.length){Number(t.year),Number(t.quarter);let a=e.years[t.year];a||(a=e.years[t.year]={}),e.years[t.year]=a;let p=a[t.quarter];t.quarter in a?p++:p=a[t.quarter]=1,a[t.quarter]=p;let c,d=e.str_icon_type[t.str_icon_type];d?d++:d=1,e.str_icon_type[t.str_icon_type]=d,e.iconType[t.str_icon_type]=o,o&&(r=o%2==0,1===o||2===o?i="#FFA500":3===o||4===o?i="#B8860B":5===o||6===o?i="#CD853F":7===o||8===o?i="#228B22":9===o||10===o?i="#FF8C00":11===o||12===o?i="#D2691E":13===o||14===o?i="#DEB887":15===o||16===o?i="#7B68EE":17!==o&&18!==o||(i="#2F4F4F"));let u=s.map(n=>{n.iconType;let o=n.coords||{lat:0,lon:0},s=Yn.latLng(o.lat,o.lon),a=[];l.extend(s),n.id===t.head&&(c=n),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let p=e.dtps[n.id];return p?p[t.id]?p[t.id]++:p[t.id]=1:(p={},p[t.id]=1),e.dtps[n.id]=p,new v(Yn.latLng(o.lat,o.lon),{cluster:t,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:r,fillColor:i}).bindPopup(Vn).on("popupopen",t=>{Jn(t.target.options.props)}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})});t._bounds=c?Yn.circle(Yn.latLng(c.coords.lat,c.coords.lon),{radius:t.radius||500,items:u,cluster:t,color:i}):Yn.rectangle(l,{items:u,cluster:t,fill:!0,color:i,dashArray:"8 3 1"}),t._bounds.on("mouseover",t=>{let e=t.target;e._color=e.options.color,e.options.color="red",e._renderer._updateStyle(e)}).on("mouseout",t=>{let e=t.target;e.options.color=e._color,e._renderer._updateStyle(e)}).on("click",e=>{Yn.DomEvent.stopPropagation(e);let n,o=1e3,l=e.target,s=e.latlng,r=e.layerPoint;e.originalEvent.ctrlKey&&l.bringToBack(),l.options.items.forEach(t=>{let e=t._point.distanceTo(r);e<o&&(o=e,n=t)}),o<10?(Jn(n.options.props),Vn.setLatLng(n._latlng).openOn(Qn._map)):(!function(t){let e=Yn.DomUtil.create("div");new Dn({target:e,props:{prp:t}}),Wn.setContent(e)}(t),Wn.setLatLng(s).openOn(Qn._map))}),n.push(t._bounds),n=n.concat(u)}}),Qn._opt=e,Qn._group=Yn.layerGroup(n),Kn?Qn.setFilter(Kn):Qn.addLayer(Qn._group),Qn._refreshFilters()}),console.log("__DtpHearths3_____",t,Qn._opt)})});const Xn=window.L,to=Xn.popup(),eo=Xn.popup({minWidth:200});let no;const oo=function(t){let e=Xn.DomUtil.create("div");return new oe({target:e,props:{prp:t}}),to.setContent(e),e},lo=Xn.featureGroup([]);lo.setFilter=t=>{lo.clearLayers(),no=t;let e=[];lo._group&&lo._map&&(lo._group.getLayers().forEach(t=>{let n=t.options.cluster,o=n.list_dtp||[],l=0;no.forEach(t=>{if("quarter"===t.type)t.zn[n.year]&&t.zn[n.year][n.quarter]&&l++;else if("id_dtp"===t.type)o.filter(e=>e.id==t.zn||e.id_skpdi==t.zn||e.id_stat==t.zn).length&&l++;else if("year"===t.type)t.zn[n.year]&&l++;else if("str_icon_type"===t.type)t.zn.filter(t=>t===n.str_icon_type).length&&l++;else if("stricken"===t.type){let e=t.zn;e?(1===e&&!n.count_stricken&&n.count_lost||2===e&&n.count_stricken&&!n.count_lost||3===e&&(n.count_stricken||n.count_lost)||4===e&&n.count_stricken&&n.count_lost)&&l++:l++}}),l===no.length&&e.push(t)}),lo.addLayer(Xn.layerGroup(e)))},lo.on("remove",()=>{lo.clearLayers()}).on("add",t=>{no=[];let e={str_icon_type:{},iconType:{},years:{},dtps:{},stricken:{0:0}},n=[];Promise.all([2019,2020].map(t=>fetch("https://dtp.mvs.group/scripts/hearths5_dev/"+t+".txt",{}).then(t=>t.json()))).then(t=>{t.forEach(t=>{e.stricken[0]+=t.length,t.forEach(t=>{let o=t.icon_type||1,l=Xn.latLngBounds(),s=t.list_dtp,r=!1,i="#FF0000";if(zn(t,e),s.length){Number(t.year),Number(t.quarter);let a=e.years[t.year];a||(a=e.years[t.year]={}),e.years[t.year]=a;let p=a[t.quarter];t.quarter in a?p++:p=a[t.quarter]=1,a[t.quarter]=p;let c,d=e.str_icon_type[t.str_icon_type];d?d++:d=1,e.str_icon_type[t.str_icon_type]=d,e.iconType[t.str_icon_type]=o,o&&(r=o%2==0,1===o||2===o?i="#FFA500":3===o||4===o?i="#B8860B":5===o||6===o?i="#CD853F":7===o||8===o?i="#228B22":9===o||10===o?i="#FF8C00":11===o||12===o?i="#D2691E":13===o||14===o?i="#DEB887":15===o||16===o?i="#7B68EE":17!==o&&18!==o||(i="#2F4F4F"));let u=s.map(n=>{n.iconType;let o=n.coords||{lat:0,lon:0},s=Xn.latLng(o.lat,o.lon),a=[];l.extend(s),n.id===t.head&&(c=n),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let p=e.dtps[n.id];return p?p[t.id]?p[t.id]++:p[t.id]=1:(p={},p[t.id]=1),e.dtps[n.id]=p,new v(Xn.latLng(o.lat,o.lon),{cluster:t,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:r,fillColor:i}).bindPopup(to).on("popupopen",t=>{oo(t.target.options.props)}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})});t._bounds=c?Xn.circle(Xn.latLng(c.coords.lat,c.coords.lon),{radius:t.radius||500,items:u,cluster:t,color:i}):Xn.rectangle(l,{items:u,cluster:t,fill:!0,color:i,dashArray:"8 3 1"}),t._bounds.on("mouseover",t=>{let e=t.target;e._color=e.options.color,e.options.color="red",e._renderer._updateStyle(e)}).on("mouseout",t=>{let e=t.target;e.options.color=e._color,e._renderer._updateStyle(e)}).on("click",e=>{Xn.DomEvent.stopPropagation(e);let n,o=1e3,l=e.target,s=e.latlng,r=e.layerPoint;e.originalEvent.ctrlKey&&l.bringToBack(),l.options.items.forEach(t=>{let e=t._point.distanceTo(r);e<o&&(o=e,n=t)}),o<10?(oo(n.options.props),to.setLatLng(n._latlng).openOn(lo._map)):(!function(t){let e=Xn.DomUtil.create("div");new Dn({target:e,props:{prp:t}}),eo.setContent(e)}(t),eo.setLatLng(s).openOn(lo._map))}),n.push(t._bounds),n=n.concat(u)}}),lo._opt=e,lo._group=Xn.layerGroup(n),no?lo.setFilter(no):lo.addLayer(lo._group),lo._refreshFilters()})})});const so=window.L,ro=so.popup(),io=so.popup({minWidth:200});let ao;const po=function(t){let e=so.DomUtil.create("div");return new oe({target:e,props:{prp:t}}),ro.setContent(e),e},co=so.featureGroup([]);function uo(t,e,n){const o=t.slice();return o[4]=e[n],o[6]=n,o}function _o(t,e,n){const o=t.slice();return o[4]=e[n],o[6]=n,o}function ho(t){let e,n,o,l,s=t[4].complexName+"";return{c(){e=z("button"),n=F(s),M(e,"class",o="tab "+t[6]+" "+(0===t[6]?"active":"")+" svelte-h8luxq")},m(o,s,r){C(o,e,s),j(e,n),r&&l(),l=E(e,"click",t[2])},p:f,d(t){t&&w(e),l()}}}function vo(t){let e,n,o,l,s,r,i,a,p,c,d,u,_,h,v,f,m,g,y,b,k,x,L,D,O,E,$,q,S,H,N,B,U,I,G,A=t[4].complexName+"",R=t[4].complexSid+"",Z=t[4].complexModelName+"",Y=t[4].complexTypeName+"",V=t[4].complexStageName+"",W=(t[4].kvfStatus||"")+"",K=(t[4].roadName||t[0].roadName||"")+"";return{c(){e=z("table"),n=z("tr"),o=z("td"),o.textContent="Комплекс:",l=z("td"),s=F(A),r=F(" (id: "),i=F(R),a=F(")"),p=T(),c=z("tr"),d=z("td"),d.textContent="Модель:",u=z("td"),_=F(Z),h=T(),v=z("tr"),f=z("td"),f.textContent="Тип:",m=z("td"),g=F(Y),y=T(),b=z("tr"),k=z("td"),k.textContent="Этап:",x=z("td"),L=F(V),D=T(),O=z("tr"),E=z("td"),E.textContent="Работоспособность:",$=z("td"),q=F(W),S=T(),H=z("tr"),N=z("td"),N.textContent="Дорога:",B=z("td"),U=F(K),I=T(),M(o,"class","first svelte-h8luxq"),M(d,"class","first svelte-h8luxq"),M(f,"class","first svelte-h8luxq"),M(k,"class","first svelte-h8luxq"),M(E,"class","first svelte-h8luxq"),M(N,"class","first svelte-h8luxq"),M(e,"class",G="tabCont "+t[6]+" "+(0===t[6]?"":"hidden")+" svelte-h8luxq")},m(t,w){C(t,e,w),j(e,n),j(n,o),j(n,l),j(l,s),j(l,r),j(l,i),j(l,a),j(e,p),j(e,c),j(c,d),j(c,u),j(u,_),j(e,h),j(e,v),j(v,f),j(v,m),j(m,g),j(e,y),j(e,b),j(b,k),j(b,x),j(x,L),j(e,D),j(e,O),j(O,E),j(O,$),j($,q),j(e,S),j(e,H),j(H,N),j(H,B),j(B,U),j(e,I)},p(t,e){1&e&&K!==(K=(t[4].roadName||t[0].roadName||"")+"")&&P(U,K)},d(t){t&&w(e)}}}function fo(t){let e,n,o,l,s,r,i,a,p,c,d,u,_,h,v,m,g,y,b,k,x,L,O,$,q,S,H,N,B,U,I,G,A,R,Z,Y,V,W,K,J,Q=(t[0].id||t[0].lineSid)+"",X=(t[0].roadName||"")+"",tt=t[0].lat+"",et=t[0].lon+"",nt=(t[0].lineAddress||"")+"",ot=t[3],lt=[];for(let e=0;e<ot.length;e+=1)lt[e]=ho(_o(t,ot,e));let st=t[3],rt=[];for(let e=0;e<st.length;e+=1)rt[e]=vo(uo(t,st,e));return{c(){e=z("div"),n=z("div"),o=F("Рубеж (id: "),l=F(Q),s=F(")"),r=T(),i=z("div"),a=z("table"),p=z("tbody"),c=z("tr"),d=z("td"),d.textContent="Дорога:",u=T(),_=z("td"),h=F(X),v=T(),m=z("tr"),g=z("td"),g.textContent="Координаты:",y=T(),b=z("td"),k=F(tt),x=T(),L=F(et),O=T(),$=z("span"),q=T(),S=z("tr"),H=z("td"),H.textContent="Адрес:",N=T(),B=z("td"),U=F(nt),I=T(),G=z("tr"),A=z("td"),A.textContent="Комплексов:",R=T(),Z=z("td"),Z.textContent=`${t[3].length}`,Y=T(),V=z("tr"),W=z("td");for(let t=0;t<lt.length;t+=1)lt[t].c();K=T();for(let t=0;t<rt.length;t+=1)rt[t].c();M(n,"class","pLine"),M(d,"class","first svelte-h8luxq"),M(g,"class","first svelte-h8luxq"),M($,"title","Скопировать в буфер обмена"),M($,"class","leaflet-gmx-icon-copy"),M(H,"class","first svelte-h8luxq"),M(A,"class","first svelte-h8luxq"),M(W,"class","tabs svelte-h8luxq"),M(W,"colspan","2"),M(a,"class","table svelte-h8luxq"),M(i,"class","featureCont"),M(e,"class","mvsPopup svelte-h8luxq")},m(f,w,D){C(f,e,w),j(e,n),j(n,o),j(n,l),j(n,s),j(e,r),j(e,i),j(i,a),j(a,p),j(p,c),j(c,d),j(c,u),j(c,_),j(_,h),j(p,v),j(p,m),j(m,g),j(m,y),j(m,b),j(b,k),j(b,x),j(b,L),j(b,O),j(b,$),j(p,q),j(p,S),j(S,H),j(S,N),j(S,B),j(B,U),j(p,I),j(p,G),j(G,A),j(G,R),j(G,Z),j(p,Y),j(p,V),j(V,W);for(let t=0;t<lt.length;t+=1)lt[t].m(W,null);j(W,K);for(let t=0;t<rt.length;t+=1)rt[t].m(W,null);D&&J(),J=E($,"click",t[1])},p(t,[e]){if(1&e&&Q!==(Q=(t[0].id||t[0].lineSid)+"")&&P(l,Q),1&e&&X!==(X=(t[0].roadName||"")+"")&&P(h,X),1&e&&tt!==(tt=t[0].lat+"")&&P(k,tt),1&e&&et!==(et=t[0].lon+"")&&P(L,et),1&e&&nt!==(nt=(t[0].lineAddress||"")+"")&&P(U,nt),12&e){let n;for(ot=t[3],n=0;n<ot.length;n+=1){const o=_o(t,ot,n);lt[n]?lt[n].p(o,e):(lt[n]=ho(o),lt[n].c(),lt[n].m(W,K))}for(;n<lt.length;n+=1)lt[n].d(1);lt.length=ot.length}if(9&e){let n;for(st=t[3],n=0;n<st.length;n+=1){const o=uo(t,st,n);rt[n]?rt[n].p(o,e):(rt[n]=vo(o),rt[n].c(),rt[n].m(W,null))}for(;n<rt.length;n+=1)rt[n].d(1);rt.length=st.length}},i:f,o:f,d(t){t&&w(e),D(lt,t),D(rt,t),J()}}}function mo(t,e,n){let{prp:o}=e;let l=o&&o.complexes?o.complexes:[];return console.log("complexes ",l),t.$set=t=>{"prp"in t&&n(0,o=t.prp)},[o,t=>{navigator.clipboard.writeText(t.target.parentNode.textContent).catch(t=>{console.log("Something went wrong",t)})},t=>{let e=t.target,n=/tab (\d)/.exec(e.className),o=n&&2===n.length?n[1]:0,l=e.parentNode;for(let t=0,e=l.childNodes.length;t<e;t++){let e=l.childNodes[t];if(e.classList){let t=e.classList.contains(o);"BUTTON"===e.tagName?e.classList[t?"add":"remove"]("active"):"TABLE"===e.tagName&&e.classList[t?"remove":"add"]("hidden")}}},l]}co.setFilter=t=>{if(!co._map)return;co.clearLayers(),ao=t;let e=[];co._group&&(co._group.getLayers().forEach(t=>{let n=t.options.cluster,o=0;ao.forEach(t=>{if("ht"===t.type)t.zn[n.ht]&&o++;else if("roads"===t.type)(t.zn.filter(t=>t===n.road).length||1===t.zn.length&&""===t.zn[0])&&o++;else if("id_dtp"===t.type)!n.list_dtp.filter(e=>e.id==t.zn).length&&t.zn.length||o++;else if("id_hearth"===t.type)t.zn==n.id_hearth&&o++;else if("stricken"===t.type){let e=t.zn;e?(1===e&&!n.count_stricken&&n.count_lost||2===e&&n.count_stricken&&!n.count_lost||3===e&&(n.count_stricken||n.count_lost)||4===e&&n.count_stricken&&n.count_lost)&&o++:o++}}),o===ao.length&&e.push(t)}),co.addLayer(so.layerGroup(e)))},co.on("remove",()=>{co.clearLayers()}).on("add",t=>{let e={road:{},str_icon_type:{},iconType:{},years:{},dtps:{}},n=[],o=(t,o)=>{let l=t.icon_type||1,s=so.latLngBounds(),r=[],i=t.list_dtp,a=!1,p="#FF0000";if(t.ht=o,i.length){Number(t.year),Number(t.quarter);let o=e.years[t.year];o||(o=e.years[t.year]={}),e.years[t.year]=o;let c=o[t.quarter];t.quarter in o?c++:c=o[t.quarter]=1,o[t.quarter]=c;let d,u=e.str_icon_type[t.str_icon_type];u?u++:u=1,e.str_icon_type[t.str_icon_type]=u,e.iconType[t.str_icon_type]=l,t.road in e.road?e.road[t.road]++:e.road[t.road]=1,l&&(a=l%2==0,1===l||2===l?p="#FFA500":3===l||4===l?p="#B8860B":5===l||6===l?p="#CD853F":7===l||8===l?p="#228B22":9===l||10===l?p="#FF8C00":11===l||12===l?p="#D2691E":13===l||14===l?p="#DEB887":15===l||16===l?p="#7B68EE":17!==l&&18!==l||(p="#2F4F4F"));let _=i.map(n=>{n.iconType;let o=n.coords||{lat:0,lon:0},l=so.latLng(o.lat,o.lon),i=[];s.extend(l),r.push(l),n.id===t.head&&(d=n),n.id_skpdi&&i.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&i.push({type:"gibdd",id:n.id_stat}),n._cur=i;let c=e.dtps[n.id]||{},u=t.id||t.id_hearth;return c?c[u]?c[u]++:c[u]=1:(c={},c[u]=1),e.dtps[n.id]=c,new v(so.latLng(o.lat,o.lon),{cluster:t,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:a,fillColor:p}).bindPopup(ro).on("popupopen",t=>{po(t.target.options.props)}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})});d?t._bounds=so.circle(so.latLng(d.coords.lat,d.coords.lon),{radius:t.radius||500,items:_,cluster:t,color:p}):r.length?t._bounds=so.polyline(r,{items:_,cluster:t,color:p,weight:4}):t._bounds=so.rectangle(s,{items:_,cluster:t,fill:!0,color:p,dashArray:"8 3 1"}),t._bounds.on("mouseover",t=>{let e=t.target;e._weight=e.options.weight,e._color=e.options.color,e.options.weight=8,e.options.color="red",e._renderer._updateStyle(e)}).on("mouseout",t=>{let e=t.target;e.options.weight=e._weight,e.options.color=e._color,e._renderer._updateStyle(e)}).on("click",e=>{so.DomEvent.stopPropagation(e);let n,o=1e3,l=e.target,s=e.latlng,r=e.layerPoint;e.originalEvent.ctrlKey&&l.bringToBack(),l.options.items.forEach(t=>{let e=t._point.distanceTo(r);e<o&&(o=e,n=t)}),o<10?(po(n.options.props),ro.setLatLng(n._latlng).openOn(co._map)):(!function(t){let e=so.DomUtil.create("div");new Dn({target:e,props:{prp:t}}),io.setContent(e)}(t),io.setLatLng(s).openOn(co._map))}),n.push(t._bounds),n=n.concat(_)}};Promise.all([2019].map(t=>fetch("https://dtp.mvs.group/scripts/hearths_picket_dev/"+t+".txt",{}).then(t=>t.json()))).then(t=>{t.forEach(t=>{t.forEach(t=>{(t.hearth3||[]).forEach(t=>{o(t,"hearth3")}),(t.hearth5||[]).forEach(t=>{o(t,"hearth5")})}),co._opt=e,co._group=so.layerGroup(n),ao?co.setFilter(ao):co.addLayer(co._group),co._refreshFilters()}),console.log("__allJson_____",t,co._opt)})});class go extends vt{constructor(t){super(),ht(this,t,mo,fo,k,{prp:0})}}const yo=window.L,bo=yo.popup();yo.popup({minWidth:200});let ko;const xo=yo.featureGroup([]);function jo(t,e,n){const o=t.slice();return o[4]=e[n],o[6]=n,o}function Lo(t,e,n){const o=t.slice();return o[4]=e[n],o[6]=n,o}function Co(t){let e,n,o,l,s=t[4].complex_name+"";return{c(){e=z("button"),n=F(s),M(e,"class",o="tab "+t[6]+" "+(0===t[6]?"active":"")+" svelte-h8luxq")},m(o,s,r){C(o,e,s),j(e,n),r&&l(),l=E(e,"click",t[2])},p:f,d(t){t&&w(e),l()}}}function wo(t){let e,n,o,l,s,r,i,a,p,c,d,u,_,h,v,m,g,y,b,k,x,L,D,O,E,$=t[4].complex_name+"",q=t[4].complex_sid+"",P=t[4].complex_model_name+"",S=t[4].complex_type_name+"",H=(t[4].cafap_status||"")+"";return{c(){e=z("table"),n=z("tr"),o=z("td"),o.textContent="Комплекс:",l=z("td"),s=F($),r=F(" (id: "),i=F(q),a=F(")"),p=T(),c=z("tr"),d=z("td"),d.textContent="Модель:",u=z("td"),_=F(P),h=T(),v=z("tr"),m=z("td"),m.textContent="Тип:",g=z("td"),y=F(S),b=T(),k=z("tr"),x=z("td"),x.textContent="Работоспособность:",L=z("td"),D=F(H),O=T(),M(o,"class","first svelte-h8luxq"),M(d,"class","first svelte-h8luxq"),M(m,"class","first svelte-h8luxq"),M(x,"class","first svelte-h8luxq"),M(e,"class",E="tabCont "+t[6]+" "+(0===t[6]?"":"hidden")+" svelte-h8luxq")},m(t,f){C(t,e,f),j(e,n),j(n,o),j(n,l),j(l,s),j(l,r),j(l,i),j(l,a),j(e,p),j(e,c),j(c,d),j(c,u),j(u,_),j(e,h),j(e,v),j(v,m),j(v,g),j(g,y),j(e,b),j(e,k),j(k,x),j(k,L),j(L,D),j(e,O)},p:f,d(t){t&&w(e)}}}function Do(t){let e,n,o,l,s,r,i,a,p,c,d,u,_,h,v,m,g,y,b,k,x,L,O,$,q,S,H,N,B,U,I,G,A,R,Z,Y,V,W,K,J,Q,X,tt,et,nt,ot,lt=(t[0].id||t[0].line_id)+"",st=(t[0].stage_name||"")+"",rt=(t[0].road_name||"")+"",it=t[0].lat+"",at=t[0].lon+"",pt=(t[0].address||"")+"",ct=t[3],dt=[];for(let e=0;e<ct.length;e+=1)dt[e]=Co(Lo(t,ct,e));let ut=t[3],_t=[];for(let e=0;e<ut.length;e+=1)_t[e]=wo(jo(t,ut,e));return{c(){e=z("div"),n=z("div"),o=F("Рубеж (id: "),l=F(lt),s=F(")"),r=T(),i=z("div"),a=z("table"),p=z("tbody"),c=z("tr"),d=z("td"),d.textContent="Этап:",u=T(),_=z("td"),h=F(st),v=T(),m=z("tr"),g=z("td"),g.textContent="Дорога:",y=T(),b=z("td"),k=F(rt),x=T(),L=z("tr"),O=z("td"),O.textContent="Координаты:",$=T(),q=z("td"),S=F(it),H=T(),N=F(at),B=T(),U=z("span"),I=T(),G=z("tr"),A=z("td"),A.textContent="Адрес:",R=T(),Z=z("td"),Y=F(pt),V=T(),W=z("tr"),K=z("td"),K.textContent="Комплексов:",J=T(),Q=z("td"),Q.textContent=`${t[3].length}`,X=T(),tt=z("tr"),et=z("td");for(let t=0;t<dt.length;t+=1)dt[t].c();nt=T();for(let t=0;t<_t.length;t+=1)_t[t].c();M(n,"class","pLine"),M(d,"class","first svelte-h8luxq"),M(g,"class","first svelte-h8luxq"),M(O,"class","first svelte-h8luxq"),M(U,"title","Скопировать в буфер обмена"),M(U,"class","leaflet-gmx-icon-copy"),M(A,"class","first svelte-h8luxq"),M(K,"class","first svelte-h8luxq"),M(et,"class","tabs svelte-h8luxq"),M(et,"colspan","2"),M(a,"class","table svelte-h8luxq"),M(i,"class","featureCont"),M(e,"class","mvsPopup svelte-h8luxq")},m(f,w,D){C(f,e,w),j(e,n),j(n,o),j(n,l),j(n,s),j(e,r),j(e,i),j(i,a),j(a,p),j(p,c),j(c,d),j(c,u),j(c,_),j(_,h),j(p,v),j(p,m),j(m,g),j(m,y),j(m,b),j(b,k),j(p,x),j(p,L),j(L,O),j(L,$),j(L,q),j(q,S),j(q,H),j(q,N),j(q,B),j(q,U),j(p,I),j(p,G),j(G,A),j(G,R),j(G,Z),j(Z,Y),j(p,V),j(p,W),j(W,K),j(W,J),j(W,Q),j(p,X),j(p,tt),j(tt,et);for(let t=0;t<dt.length;t+=1)dt[t].m(et,null);j(et,nt);for(let t=0;t<_t.length;t+=1)_t[t].m(et,null);D&&ot(),ot=E(U,"click",t[1])},p(t,[e]){if(1&e&&lt!==(lt=(t[0].id||t[0].line_id)+"")&&P(l,lt),1&e&&st!==(st=(t[0].stage_name||"")+"")&&P(h,st),1&e&&rt!==(rt=(t[0].road_name||"")+"")&&P(k,rt),1&e&&it!==(it=t[0].lat+"")&&P(S,it),1&e&&at!==(at=t[0].lon+"")&&P(N,at),1&e&&pt!==(pt=(t[0].address||"")+"")&&P(Y,pt),12&e){let n;for(ct=t[3],n=0;n<ct.length;n+=1){const o=Lo(t,ct,n);dt[n]?dt[n].p(o,e):(dt[n]=Co(o),dt[n].c(),dt[n].m(et,nt))}for(;n<dt.length;n+=1)dt[n].d(1);dt.length=ct.length}if(8&e){let n;for(ut=t[3],n=0;n<ut.length;n+=1){const o=jo(t,ut,n);_t[n]?_t[n].p(o,e):(_t[n]=wo(o),_t[n].c(),_t[n].m(et,null))}for(;n<_t.length;n+=1)_t[n].d(1);_t.length=ut.length}},i:f,o:f,d(t){t&&w(e),D(dt,t),D(_t,t),ot()}}}function zo(t,e,n){let{prp:o}=e;let l=o&&o.list_complex?o.list_complex:[];return console.log("complexes ",l),t.$set=t=>{"prp"in t&&n(0,o=t.prp)},[o,t=>{navigator.clipboard.writeText(t.target.parentNode.textContent).catch(t=>{console.log("Something went wrong",t)})},t=>{let e=t.target,n=/tab (\d)/.exec(e.className),o=n&&2===n.length?n[1]:0,l=e.parentNode;for(let t=0,e=l.childNodes.length;t<e;t++){let e=l.childNodes[t];if(e.classList){let t=e.classList.contains(o);"BUTTON"===e.tagName?e.classList[t?"add":"remove"]("active"):"TABLE"===e.tagName&&e.classList[t?"remove":"add"]("hidden")}}},l]}xo.setFilter=t=>{if(!xo._map)return;xo.clearLayers(),ko=t;let e=[];xo._group&&(xo._group.getLayers().forEach(t=>{let n=t.options.cluster,o=0;ko.forEach(t=>{if("ht"===t.type)t.zn[n.ht]&&o++;else if("roads"===t.type)(t.zn.filter(t=>t===n.road).length||1===t.zn.length&&""===t.zn[0])&&o++;else if("id_dtp"===t.type)!n.list_dtp.filter(e=>e.id==t.zn).length&&t.zn.length||o++;else if("id_hearth"===t.type)t.zn==n.id_hearth&&o++;else if("stricken"===t.type){let e=t.zn;e?(1===e&&!n.count_stricken&&n.count_lost||2===e&&n.count_stricken&&!n.count_lost||3===e&&(n.count_stricken||n.count_lost)||4===e&&n.count_stricken&&n.count_lost)&&o++:o++}}),o===ko.length&&e.push(t)}),xo.addLayer(yo.layerGroup(e)))},xo.on("remove",()=>{xo.clearLayers()}).on("add",t=>{let e=t=>{let e=yo.latLngBounds(),n="#FF0000";t.complexes&&(1===t.complexes.length?n="#FFA500":t.complexes.length>1&&(n="#0000FF"));let o=t.coords||{lat:t.lat,lon:t.lon},l=yo.latLng(o.lat,o.lon);return e.extend(l),new v(yo.latLng(o.lat,o.lon),{props:t,radius:6,zIndexOffset:5e4,stroke:!1,fillColor:n}).bindPopup(bo).on("popupopen",t=>{!function(t){let e=yo.DomUtil.create("div");new go({target:e,props:{prp:t}}),bo.setContent(e)}(t.target.options.props)}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})};fetch("./static/rub.geojson",{}).then(t=>t.json()).then(t=>{let n=t.map(e);xo._group=yo.layerGroup(n),xo.addLayer(xo._group)})});class Fo extends vt{constructor(t){super(),ht(this,t,zo,Do,k,{prp:0})}}const To=window.L,Oo=To.popup();To.popup({minWidth:200});let Eo,$o="https://dtp.mvs.group/scripts/rubez_dev/";const Mo=To.featureGroup([]);function qo(t,e,n){const o=t.slice();return o[9]=e[n],o[11]=n,o}function Po(t,e,n){const o=t.slice();return o[14]=e[n],o}function So(t,e,n){const o=t.slice();return o[9]=e[n],o}function Ho(t){let e,n,o,l=t[14].k_uch&&(t[14].npdd||t[14].sop_npdd)&&function(t){let e,n,o=t[14].k_uch+"";return{c(){e=z("li"),n=F(o)},m(t,o){C(t,e,o),j(e,n)},p:f,d(t){t&&w(e)}}}(t),s=t[14].npdd&&function(t){let e,n,o=t[14].npdd+"";return{c(){e=z("li"),n=F(o)},m(t,o){C(t,e,o),j(e,n)},p:f,d(t){t&&w(e)}}}(t),r=t[14].sop_npdd&&function(t){let e,n,o=t[14].sop_npdd+"";return{c(){e=z("li"),n=F(o)},m(t,o){C(t,e,o),j(e,n)},p:f,d(t){t&&w(e)}}}(t);return{c(){l&&l.c(),e=T(),s&&s.c(),n=T(),r&&r.c(),o=O()},m(t,i){l&&l.m(t,i),C(t,e,i),s&&s.m(t,i),C(t,n,i),r&&r.m(t,i),C(t,o,i)},p(t,e){t[14].k_uch&&(t[14].npdd||t[14].sop_npdd)&&l.p(t,e),t[14].npdd&&s.p(t,e),t[14].sop_npdd&&r.p(t,e)},d(t){l&&l.d(t),t&&w(e),s&&s.d(t),t&&w(n),r&&r.d(t),t&&w(o)}}}function No(t){let e,n,o=t[9].ts&&function(t){let e,n,o=t[9].ts+"";return{c(){e=z("li"),n=F(o)},m(t,o){C(t,e,o),j(e,n)},p:f,d(t){t&&w(e)}}}(t),l=t[9].arr,s=[];for(let e=0;e<l.length;e+=1)s[e]=Ho(Po(t,l,e));return{c(){o&&o.c(),e=T();for(let t=0;t<s.length;t+=1)s[t].c();n=O()},m(t,l){o&&o.m(t,l),C(t,e,l);for(let e=0;e<s.length;e+=1)s[e].m(t,l);C(t,n,l)},p(t,e){if(t[9].ts&&o.p(t,e),16&e){let o;for(l=t[9].arr,o=0;o<l.length;o+=1){const r=Po(t,l,o);s[o]?s[o].p(r,e):(s[o]=Ho(r),s[o].c(),s[o].m(n.parentNode,n))}for(;o<s.length;o+=1)s[o].d(1);s.length=l.length}},d(t){o&&o.d(t),t&&w(e),D(s,t),t&&w(n)}}}function Bo(t){let e,n,o,l,s,r=t[0].spog+"";return{c(){e=z("div"),n=z("div"),n.textContent="Погода:",o=T(),l=z("div"),s=F(r),M(n,"class","stitle"),M(l,"class","sval")},m(t,r){C(t,e,r),j(e,n),j(e,o),j(e,l),j(l,s)},p(t,e){1&e&&r!==(r=t[0].spog+"")&&P(s,r)},d(t){t&&w(e)}}}function Uo(t){let e,n,o,l,s,r=t[0].s_pch+"";return{c(){e=z("div"),n=z("div"),n.textContent="Покрытие:",o=T(),l=z("div"),s=F(r),M(n,"class","stitle"),M(l,"class","sval")},m(t,r){C(t,e,r),j(e,n),j(e,o),j(e,l),j(l,s)},p(t,e){1&e&&r!==(r=t[0].s_pch+"")&&P(s,r)},d(t){t&&w(e)}}}function Io(t){let e,n,o,l,s,r=t[0].osv+"";return{c(){e=z("div"),n=z("div"),n.textContent="Освещенность:",o=T(),l=z("div"),s=F(r),M(n,"class","stitle"),M(l,"class","sval")},m(t,r){C(t,e,r),j(e,n),j(e,o),j(e,l),j(l,s)},p(t,e){1&e&&r!==(r=t[0].osv+"")&&P(s,r)},d(t){t&&w(e)}}}function Go(t){let e,n,o,l,s,r=t[0].ndu+"";return{c(){e=z("div"),n=z("div"),n.textContent="Иные условия:",o=T(),l=z("div"),s=F(r),M(n,"class","stitle"),M(l,"class","sval")},m(t,r){C(t,e,r),j(e,n),j(e,o),j(e,l),j(l,s)},p(t,e){1&e&&r!==(r=t[0].ndu+"")&&P(s,r)},d(t){t&&w(e)}}}function Ao(t){let e,n,o,l,s,r,i,a=t[9].line_id+"",p=t[9].range+"";return{c(){e=z("li"),n=F(a),o=F(" ("),l=F(p),s=F(" м.)"),M(e,"class","link svelte-vw4d3d"),e.value=r=t[9].line_id},m(r,a,p){C(r,e,a),j(e,n),j(e,o),j(e,l),j(e,s),p&&i(),i=E(e,"click",t[2])},p(t,o){1&o&&a!==(a=t[9].line_id+"")&&P(n,a),1&o&&p!==(p=t[9].range+"")&&P(l,p),1&o&&r!==(r=t[9].line_id)&&(e.value=r)},d(t){t&&w(e),i()}}}function Ro(t){let e,n,o,l,s,r,i,a,p,c,d,u,_,h,v,m,g,y,b,k,x,L,O,$,q,S,H,N,B,U,I,G,A,R,Z,Y,V,W,K,J,Q,X,tt,et,nt,ot,lt,st,rt,it,at,pt,ct,dt,ut,_t,ht,vt,ft,mt,gt,yt,bt,kt,xt,jt,Lt,Ct,wt,Dt,zt,Ft,Tt,Ot,Et,$t,Mt,qt,Pt,St,Ht,Nt,Bt,Ut,It,Gt,At=(t[0].name||t[0].dtvp||"")+"",Rt=(t[0].sid||t[0].id_stat||t[0].id_skpdi||"")+"",Zt=(t[0].district||"")+"",Yt=(t[0].dor||"")+"",Vt=(t[0].km||0)+"",Wt=(t[0].m||0)+"",Kt=t[0].lat+"",Jt=t[0].lon+"",Qt=(t[0].collision_date||t[0].dtp_date||"")+"",Xt=(t[0].dtvp||"")+"",te=t[0].pog+"",ee=t[0].ran+"",ne=t[4],oe=[];for(let e=0;e<ne.length;e+=1)oe[e]=No(So(t,ne,e));let le=t[0].spog&&Bo(t),se=t[0].s_pch&&Uo(t),re=t[0].osv&&Io(t),ie=t[0].ndu&&Go(t),ae=t[0].list_rub||[],pe=[];for(let e=0;e<ae.length;e+=1)pe[e]=Ao(qo(t,ae,e));return{c(){e=z("div"),n=z("div"),o=z("b"),l=F(At),s=T(),r=z("div"),i=z("table"),a=z("tbody"),p=z("tr"),c=z("td"),c.textContent="ID:",d=T(),u=z("td"),_=F(Rt),h=T(),v=z("tr"),m=z("td"),m.textContent="Адрес:",g=T(),y=z("td"),b=F(Zt),k=T(),x=F(Yt),L=T(),O=z("tr"),$=z("td"),$.textContent="Пикетаж:",q=T(),S=z("td"),H=z("b"),N=F(Vt),B=F(" км. "),U=z("b"),I=F(Wt),G=F(" м."),A=T(),R=z("tr"),Z=z("td"),Z.textContent="Координаты:",Y=T(),V=z("td"),W=F(Kt),K=T(),J=F(Jt),Q=T(),X=z("span"),tt=T(),et=z("tr"),nt=z("td"),nt.textContent="Дата/время:",ot=T(),lt=z("td"),st=F(Qt),rt=T(),it=z("tr"),at=z("td"),at.textContent="Вид ДТП:",pt=T(),ct=z("td"),dt=F(Xt),ut=T(),_t=z("tr"),ht=z("td"),ht.textContent="Нарушения:",vt=T(),ft=z("td"),mt=z("ul");for(let t=0;t<oe.length;t+=1)oe[t].c();gt=T(),yt=z("tr"),bt=z("td"),bt.textContent="Условия:",kt=T(),xt=z("td"),le&&le.c(),jt=T(),se&&se.c(),Lt=T(),re&&re.c(),Ct=T(),ie&&ie.c(),wt=T(),Dt=z("tr"),zt=z("td"),zt.textContent="Количество погибших/раненых:",Ft=T(),Tt=z("td"),Ot=z("b"),Et=F(te),$t=F("/"),Mt=F(ee),qt=T(),Pt=z("tr"),St=z("td"),St.textContent="Рубежи:",Ht=T(),Nt=z("td"),Bt=z("div"),Ut=T(),It=z("ul");for(let t=0;t<pe.length;t+=1)pe[t].c();M(n,"class","pLine"),M(c,"class","first svelte-vw4d3d"),M(m,"class","first svelte-vw4d3d"),M($,"class","first svelte-vw4d3d"),M(Z,"class","first svelte-vw4d3d"),M(X,"title","Скопировать в буфер обмена"),M(X,"class","leaflet-gmx-icon-copy"),M(nt,"class","first svelte-vw4d3d"),M(at,"class","first svelte-vw4d3d"),M(ht,"class","first svelte-vw4d3d"),M(bt,"class","first svelte-vw4d3d"),M(zt,"class","first svelte-vw4d3d"),M(St,"class","first svelte-vw4d3d"),M(Bt,"class","win leaflet-popup-content-wrapper  svelte-vw4d3d"),M(i,"class","table"),M(r,"class","featureCont"),M(e,"class","mvsPopup svelte-vw4d3d")},m(f,w,D){C(f,e,w),j(e,n),j(n,o),j(o,l),j(e,s),j(e,r),j(r,i),j(i,a),j(a,p),j(p,c),j(p,d),j(p,u),j(u,_),j(a,h),j(a,v),j(v,m),j(v,g),j(v,y),j(y,b),j(y,k),j(y,x),j(a,L),j(a,O),j(O,$),j(O,q),j(O,S),j(S,H),j(H,N),j(S,B),j(S,U),j(U,I),j(S,G),j(a,A),j(a,R),j(R,Z),j(R,Y),j(R,V),j(V,W),j(V,K),j(V,J),j(V,Q),j(V,X),j(a,tt),j(a,et),j(et,nt),j(et,ot),j(et,lt),j(lt,st),j(a,rt),j(a,it),j(it,at),j(it,pt),j(it,ct),j(ct,dt),j(a,ut),j(a,_t),j(_t,ht),j(_t,vt),j(_t,ft),j(ft,mt);for(let t=0;t<oe.length;t+=1)oe[t].m(mt,null);j(a,gt),j(a,yt),j(yt,bt),j(yt,kt),j(yt,xt),le&&le.m(xt,null),j(xt,jt),se&&se.m(xt,null),j(xt,Lt),re&&re.m(xt,null),j(xt,Ct),ie&&ie.m(xt,null),j(a,wt),j(a,Dt),j(Dt,zt),j(Dt,Ft),j(Dt,Tt),j(Tt,Ot),j(Ot,Et),j(Ot,$t),j(Ot,Mt),j(a,qt),j(a,Pt),j(Pt,St),j(Pt,Ht),j(Pt,Nt),j(Nt,Bt),t[8](Bt),j(Nt,Ut),j(Nt,It);for(let t=0;t<pe.length;t+=1)pe[t].m(It,null);D&&Gt(),Gt=E(X,"click",t[3])},p(t,[e]){if(1&e&&At!==(At=(t[0].name||t[0].dtvp||"")+"")&&P(l,At),1&e&&Rt!==(Rt=(t[0].sid||t[0].id_stat||t[0].id_skpdi||"")+"")&&P(_,Rt),1&e&&Zt!==(Zt=(t[0].district||"")+"")&&P(b,Zt),1&e&&Yt!==(Yt=(t[0].dor||"")+"")&&P(x,Yt),1&e&&Vt!==(Vt=(t[0].km||0)+"")&&P(N,Vt),1&e&&Wt!==(Wt=(t[0].m||0)+"")&&P(I,Wt),1&e&&Kt!==(Kt=t[0].lat+"")&&P(W,Kt),1&e&&Jt!==(Jt=t[0].lon+"")&&P(J,Jt),1&e&&Qt!==(Qt=(t[0].collision_date||t[0].dtp_date||"")+"")&&P(st,Qt),1&e&&Xt!==(Xt=(t[0].dtvp||"")+"")&&P(dt,Xt),16&e){let n;for(ne=t[4],n=0;n<ne.length;n+=1){const o=So(t,ne,n);oe[n]?oe[n].p(o,e):(oe[n]=No(o),oe[n].c(),oe[n].m(mt,null))}for(;n<oe.length;n+=1)oe[n].d(1);oe.length=ne.length}if(t[0].spog?le?le.p(t,e):(le=Bo(t),le.c(),le.m(xt,jt)):le&&(le.d(1),le=null),t[0].s_pch?se?se.p(t,e):(se=Uo(t),se.c(),se.m(xt,Lt)):se&&(se.d(1),se=null),t[0].osv?re?re.p(t,e):(re=Io(t),re.c(),re.m(xt,Ct)):re&&(re.d(1),re=null),t[0].ndu?ie?ie.p(t,e):(ie=Go(t),ie.c(),ie.m(xt,null)):ie&&(ie.d(1),ie=null),1&e&&te!==(te=t[0].pog+"")&&P(Et,te),1&e&&ee!==(ee=t[0].ran+"")&&P(Mt,ee),5&e){let n;for(ae=t[0].list_rub||[],n=0;n<ae.length;n+=1){const o=qo(t,ae,n);pe[n]?pe[n].p(o,e):(pe[n]=Ao(o),pe[n].c(),pe[n].m(It,null))}for(;n<pe.length;n+=1)pe[n].d(1);pe.length=ae.length}},i:f,o:f,d(n){n&&w(e),D(oe,n),le&&le.d(),se&&se.d(),re&&re.d(),ie&&ie.d(),t[8](null),D(pe,n),Gt()}}}function Zo(t,e,n){let o,l,{showModal:s=!1}=e,{prp:r}=e,i=r.skpdiFiles?"":"disabled";R(()=>{s&&(o=new xt({target:document.body,props:{data:r.skpdiFiles}}),o.$on("close",t=>{o.$destroy(),n(5,s=!1)}))});const a=(r.tsInfo||[]).map(t=>{let e=t.ts_uch||[];return{ts:"Осталось на месте ДТП"!==t.ts?t.ts:"",arr:e.map(t=>({k_uch:t.k_uch||"",npdd:"Нет нарушений"!==t.npdd?t.npdd:"",sop_npdd:"Нет нарушений"!==t.sop_npdd?t.sop_npdd:""}))}});return console.log("ddddd",r),t.$set=t=>{"showModal"in t&&n(5,s=t.showModal),"prp"in t&&n(0,r=t.prp)},[r,l,t=>{let e=t.target.value;console.log("showRub",t.target.value),n(1,l.innerHTML="",l),fetch("https://dtp.mvs.group/scripts/rubez_dev/rubez-complex-"+e+".txt",{}).then(t=>t.json()).then(t=>{new Fo({target:l,props:{prp:t[0]}})})},t=>{navigator.clipboard.writeText(t.target.parentNode.textContent).catch(t=>{console.log("Something went wrong",t)})},a,s,o,i,function(t){V[t?"unshift":"push"](()=>{n(1,l=t)})}]}Mo.setFilter=t=>{if(!Mo._map)return;Mo.clearLayers(),Eo=t,Mo._argFilters=Eo;let e=[];Mo._group&&(Mo._group.getLayers().forEach(t=>{let n=t.options.props,o=0;Eo.forEach(t=>{"comp"===t.type&&(n.rub_flag?t.zn.on&&o++:t.zn.off&&o++)}),o===Eo.length&&e.push(t)}),Mo.addLayer(To.layerGroup(e)))},Mo.on("remove",()=>{Mo.clearLayers()}).on("add",t=>{let e={road:{},bad:[]},n=[],o={},l=t=>{let l=To.latLngBounds(),s="gray";if(t.rub_flag&&(s="#00FF00"),o[t.line_sid]?console.log("___Дубль____",t):o[t.line_sid]=t,!t.lat||!t.lon)return void e.bad.push(t);let r=t.coords||{lat:t.lat,lon:t.lon},i=To.latLng(r.lat,r.lon);l.extend(i),n.push(new v(To.latLng(r.lat,r.lon),{props:t,radius:6,zIndexOffset:5e4,path:"camera",stroke:!1,fillColor:s}).bindPopup(Oo).on("popupopen",t=>{!function(t){let e=To.DomUtil.create("div"),n=t.line_sid;fetch($o+"rubez-complex-"+n+".txt",{}).then(t=>t.json()).then(t=>{new Fo({target:e,props:{prp:t[0]}}),Oo.setContent(e)}),Oo.setContent(e)}(t.target.options.props)}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)}))};fetch($o+"rubez.txt",{}).then(t=>t.json()).then(t=>{t.forEach(l),Mo._group=To.layerGroup(n),Mo.addLayer(Mo._group),console.log("opt",e)})});class Yo extends vt{constructor(t){super(),ht(this,t,Zo,Ro,k,{showModal:5,prp:0})}}const Vo=window.L,Wo=Vo.popup();let Ko;const Jo=Vo.featureGroup([]);Jo._needHeat={radius:19,blur:11.26,minOpacity:.34},Jo.checkZoom=t=>{Object.keys(Jo._layers).length?t<12&&Jo.setFilter(Ko):t>11&&Jo.setFilter(Ko)},Jo.setFilter=t=>{if(!Jo._map)return;Jo.clearLayers(),Ko=t||[],Jo._argFilters=Ko;let e=[],n=[];Jo._group&&Jo._map&&(Jo._group.getLayers().forEach(t=>{let o=t.options.props,l=0;Ko.forEach(t=>{"collision_type"===t.type?(""===t.zn[0]||t.zn.filter(t=>t===o.collision_type).length)&&l++:"id_dtp"===t.type?o.id==t.zn&&l++:"list_rub"===t.type?o.list_rub.length?t.zn.on&&l++:t.zn.off&&l++:"date"===t.type&&o.date>=t.zn[0]&&o.date<t.zn[1]&&l++}),l===Ko.length&&(e.push(t),n.push(t._latlng))}),Jo._needHeat?(Jo._map.addLayer(Jo._heat),Jo._heat.setLatLngs(n),Jo._heat.setOptions(Jo._needHeat),Jo._map._zoom>11&&Jo.addLayer(Vo.layerGroup(e))):(Jo.addLayer(Vo.layerGroup(e)),Jo._map.removeLayer(Jo._heat)))},Jo.on("remove",t=>{Jo._map.removeLayer(Jo._heat),Jo.clearLayers()}).on("add",t=>{Jo._heat=Vo.heatLayer([],{gradient:{.1:"blue",.4:"lime",1:"red"}}),Ko=null,fetch("https://dtp.mvs.group/scripts/dtprubez_dev/get_stat_gipdd_with_rub.txt",{}).then(t=>t.json()).then(t=>{let e={collision_type:{},iconType:{}},n=[],o=t.map(t=>{let o=t.iconType||0,l=!1,s="#2F4F4F";o&&(l=o%2==0,o>=1&&o<=6?s="#8B4513":7===o||8===o?s="#228B22":o>=9&&o<=14?s="#8B4513":15===o||16===o?s="#7B68EE":17!==o&&18!==o||(s="#2F4F4F")),t.list_rub||(t.list_rub=[]),t.lat&&t.lon||(console.log("_______",t),t.lat=t.lon=0);let r=e.collision_type[t.collision_type];r?r++:r=1,e.collision_type[t.collision_type]=r,e.iconType[t.collision_type]=o;let i=Vo.latLng(t.lat,t.lon,l?1:.5);return n.push(i),new v(i,{props:t,radius:6,stroke:l,fillColor:s}).bindPopup(Wo).on("popupopen",t=>{var e;e=t.target.options.props.id,fetch("https://dtp.mvs.group/scripts/dtprubez_dev/get_stat_gipdd_with_rub_"+e+".txt",{}).then(t=>t.json()).then(t=>{let e=Vo.DomUtil.create("div");const n=new Yo({target:e,props:{prp:t}});Wo._svObj=n,Wo.setContent(e)})}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})});Jo.addLayer(Jo._heat),Jo._heat.setLatLngs(n),Jo._heat.setOptions(Jo._needHeat),Jo._opt=e,Jo._group=Vo.layerGroup(o),Jo.setFilter(),Jo._map._zoom>11&&Jo.addLayer(Jo._group),Jo._refreshFilters()})});const Qo=window.L;Qo.popup();let Xo;const tl=Qo.featureGroup([]);tl._needHeat={radius:19,blur:11.26,minOpacity:.34},tl.checkZoom=t=>{Object.keys(tl._layers).length?t<12&&tl.setFilter(Xo):t>11&&tl.setFilter(Xo)},tl.setFilter=t=>{if(!tl._map)return;tl.clearLayers(),Xo=t||[],tl._argFilters=Xo;let e=[],n=[];tl._group&&(tl._group.getLayers().forEach(t=>{let o=t.options.props,l=0;Xo.forEach(t=>{"collision_type"===t.type?(""===t.zn[0]||t.zn.filter(t=>t===o.collision_type).length)&&l++:"list_rub"===t.type?o.list_rub.length?t.zn.on&&l++:t.zn.off&&l++:"date"===t.type&&o.date>=t.zn[0]&&o.date<t.zn[1]&&l++}),l===Xo.length&&(e.push(t),n.push(t._latlng))}),tl.addLayer(Qo.layerGroup(e)))},tl.on("remove",t=>{tl.clearLayers()}).on("add",t=>{fetch("https://dtp.mvs.group/static/proxy.php?url=https://graphql.dev.mvs.group/graphql",{body:'{"operationName":null,"variables":{},"query":"{\\n  allVMapLineInfos(filter: {lon: {isNull: false}, lat: {isNull: false}}) {\\n    totalCount\\n    nodes {\\n      lineSid: sid\\n      lineName: name\\n      lineAddress: address\\n      roadName\\n      stage\\n      lat\\n      lon\\n      yield\\n      complexes\\n      __typename\\n    }\\n    __typename\\n  }\\n}\\n"}',method:"POST",mode:"cors"}).then(t=>t.json()).then(t=>{console.log("json",t)})});const el=window.L,nl=el.popup(),ol=el.popup({minWidth:200});let ll;const sl=function(t){let e=el.DomUtil.create("div");return new oe({target:e,props:{prp:t}}),nl.setContent(e),e},rl=el.featureGroup([]);rl.setFilter=t=>{if(!rl._map)return;rl.clearLayers(),ll=t;let e=[];rl._group&&(rl._group.getLayers().forEach(t=>{let n=t.options.cluster,o=0;ll.forEach(t=>{if("ht"===t.type)t.zn[n.ht]&&o++;else if("roads"===t.type)(t.zn.filter(t=>t===n.road).length||1===t.zn.length&&""===t.zn[0])&&o++;else if("id_dtp"===t.type)!n.list_dtp.filter(e=>e.id_skpdi==t.zn||e.id_stat==t.zn).length&&t.zn.length||o++;else if("id_hearth"===t.type)t.zn==n.id&&o++;else if("year"===t.type)t.zn[n.year]&&o++;else if("stricken"===t.type){let e=t.zn;e?(1===e&&!n.count_stricken&&n.count_lost||2===e&&n.count_stricken&&!n.count_lost||3===e&&(n.count_stricken||n.count_lost)||4===e&&n.count_stricken&&n.count_lost)&&o++:o++}}),o===ll.length&&e.push(t)}),rl.addLayer(el.layerGroup(e)))},rl.on("remove",()=>{rl.clearLayers()}).on("add",t=>{let e={road:{},str_icon_type:{},lost:0,stricken:{0:0},iconType:{},years:{},dtps:{}},n=[],o=(t,o)=>{let l=t.icon_type||1,s=el.latLngBounds(),r=[],i=t.list_dtp,a=!1,p="#FF0000";if(zn(t,e),t.ht=o<2?"hearth3":"hearth5",i.length){e.years[t.year]=!0;let o=e.str_icon_type[t.str_icon_type];o?o++:o=1,e.str_icon_type[t.str_icon_type]=o,e.iconType[t.str_icon_type]=l,t.road in e.road?e.road[t.road]++:e.road[t.road]=1,l&&(a=l%2==0,1===l||2===l?p="#FFA500":3===l||4===l?p="#B8860B":5===l||6===l?p="#CD853F":7===l||8===l?p="#228B22":9===l||10===l?p="#FF8C00":11===l||12===l?p="#D2691E":13===l||14===l?p="#DEB887":15===l||16===l?p="#7B68EE":17!==l&&18!==l||(p="#2F4F4F"));let c=i.map(n=>{n.iconType;let o=n.coords||{lat:0,lon:0},l=el.latLng(o.lat,o.lon),i=[];s.extend(l),r.push(l),n.id_skpdi&&i.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&i.push({type:"gibdd",id:n.id_stat}),n._cur=i;let c=n.id||n.id_stat||n.id_skpdi,d=e.dtps[c]||{},u=t.id||t.id_hearth;return d?d[u]?d[u]++:d[u]=1:(d={},d[u]=1),e.dtps[c]=d,a=!1,n.lost&&(e.lost++,a=!0),new v(el.latLng(o.lat,o.lon),{cluster:t,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:a,fillColor:p}).bindPopup(nl).on("popupopen",t=>{sl(t.target.options.props)}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})});r.length?t._bounds=el.polyline(r,{items:c,cluster:t,color:p,weight:4}):t._bounds=el.rectangle(s,{items:c,cluster:t,fill:!0,color:p,dashArray:"8 3 1"}),t._bounds.on("mouseover",t=>{let e=t.target;e._weight=e.options.weight,e._color=e.options.color,e.options.weight=8,e.options.color="red",e._renderer._updateStyle(e)}).on("mouseout",t=>{let e=t.target;e.options.weight=e._weight,e.options.color=e._color,e._renderer._updateStyle(e)}).on("click",e=>{el.DomEvent.stopPropagation(e);let n,o=1e3,l=e.target,s=e.latlng,r=e.layerPoint;e.originalEvent.ctrlKey&&l.bringToBack(),l.options.items.forEach(t=>{let e=t._point.distanceTo(r);e<o&&(o=e,n=t)}),o<10?(sl(n.options.props),nl.setLatLng(n._latlng).openOn(rl._map)):(!function(t){let e=el.DomUtil.create("div");new Dn({target:e,props:{predochag:1,prp:t}}),ol.setContent(e)}(t),ol.setLatLng(s).openOn(rl._map))}),n.push(t._bounds),n=n.concat(c)}};Promise.all(["https://dtp.mvs.group/scripts/prehearths2_dev/2019.txt","https://dtp.mvs.group/scripts/prehearths2_dev/2020.txt","https://dtp.mvs.group/scripts/prehearths4_dev/2019.txt","https://dtp.mvs.group/scripts/prehearths4_dev/2020.txt"].map(t=>fetch(t,{}).then(t=>t.json()))).then(t=>{t.forEach((t,l)=>{e.stricken[0]+=t.length,t.forEach(t=>{o(t,l)}),rl._opt=e,rl._group=el.layerGroup(n),ll?rl.setFilter(ll):rl.addLayer(rl._group),rl._refreshFilters()}),console.log("__allJson_____",t,rl._opt)})});const il=window.L,al=il.map(document.body,{center:[55.758031,37.611694],minZoom:1,zoom:8,maxZoom:21,attributionControl:!1,trackResize:!0,fadeAnimation:!0,zoomAnimation:!0,distanceUnit:"auto",squareUnit:"auto"});var pl=al._controlCorners,cl=al._controlContainer,dl="leaflet-top leaflet-bottom",ul="leaflet-left leaflet-right",_l={bottom:"leaflet-bottom "+ul,gmxbottomleft:"leaflet-bottom leaflet-left",gmxbottomcenter:"leaflet-bottom "+ul,gmxbottomright:"leaflet-bottom leaflet-right",center:dl+" "+ul,right:"leaflet-right "+dl,left:"leaflet-left "+dl,top:"leaflet-top "+ul};for(var hl in _l)pl[hl]||(pl[hl]=il.DomUtil.create("div",_l[hl],cl));al.addControl(il.control.gmxCenter()).addControl(il.control.fitCenter());var vl=il.TileLayer.extend({options:{tilesCRS:il.CRS.EPSG3395},_getTiledPixelBounds:function(t){var e=il.TileLayer.prototype._getTiledPixelBounds.call(this,t);return this._shiftY=this._getShiftY(this._tileZoom),e.min.y+=this._shiftY,e.max.y+=this._shiftY,e},_tileOnError:function(t,e,n){var o=e.getAttribute("src"),l=o.indexOf("/mapcache/");if(l>-1){var s=new URL("http:"+o).searchParams,r=o.substr(l+1).split("/"),i=a[r[1]];e.src=il.Util.template(i.errorTileUrlPrefix+i.postfix,{z:s.get("z"),x:s.get("x"),y:s.get("y")})}t(n,e)},_getTilePos:function(t){return il.TileLayer.prototype._getTilePos.call(this,t).subtract([0,this._shiftY])},_getShiftY:function(t){var e=this._map,n=e.getCenter(),o=e.options.crs.project(n).y-this.options.tilesCRS.project(n).y;return Math.floor(il.CRS.scale(t)*o/40075016.685578495)}});il.TileLayer.Mercator=vl,il.tileLayer.Mercator=function(t,e){return new vl(t,e)};let fl={};p.b||(p.b="m2"),["m2","m3"].forEach(t=>{let e=a[t],n=il.tileLayer.Mercator(e.prefix+e.postfix,e.options);fl[e.title]=n,p.b===e.options.key&&n.addTo(al)}),fl.OpenStreetMap=il.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:21,maxNativeZoom:18});let ml={"Рубежи":Mo,"Предочаги по пикетажу":rl,"Очаги ГИБДД по пикетажу":co,"Очаги ГИБДД разные типы, геометрия":lo,"Очаги ГИБДД одного типа, геометрия":Qn,"ДТП Очаги(Stat)":Zn,"ДТП Очаги(tmp)":Bn,"Очаги ГИБДД+СКПДИ по кварталам геометрия":Mn,"ДТП  ГИБДД+СКПДИ (объединение)":ie,"ДТП СКПДИ + тепловая карта":Kt,"ДТП ГИБДД + тепловая карта":St,"ДТП ГИБДД + тепловая карта + Рубежи":Jo},gl=p.o?p.o.split(",").reduce((t,e)=>(t[e]=!0,t),{}):{};["m1","m4","m5"].forEach(t=>{let e=a[t],n=il.tileLayer.Mercator(e.prefix+e.postfix,e.options);ml[e.title]=n,gl[e.options.key]&&n.addTo(al)}),il.control.layers(fl,ml).addTo(al);let yl=il.control.gmxIcon({id:"filters",className:"leaflet-bar",togglable:!0,title:"Фильтры"}).on("statechange",(function(t){let e=t.target,n=e._container,o=e._win;e.options.isActive?o||(o=e._win=il.DomUtil.create("div","win leaflet-control-layers",n),il.DomEvent.disableScrollPropagation(o),o._Filters=new yn({target:o,props:{control:e,DtpGibddRub:Jo,DtpGibdd:St,DtpSkpdi:Kt,Rub:Mo,DtpHearthsPicket4:rl,DtpHearthsPicket:co,DtpHearths5:lo,DtpHearths3:Qn,DtpHearthsStat:Zn,DtpHearthsTmp:Bn,DtpHearths:Mn,DtpVerifyed:ie}})):(e._win.parentNode.removeChild(e._win),e._win=null)})).addTo(al);const bl=(t,e)=>{for(var n=Math.PI/180,o={lon:n*t.lng,lat:n*t.lat},l={lon:n*e.lng,lat:n*e.lat},s=6378137,r=6356752.3142,i=1/298.257223563,a=l.lon-o.lon,p=Math.atan((1-i)*Math.tan(o.lat)),c=Math.atan((1-i)*Math.tan(l.lat)),d=Math.sin(p),u=Math.cos(p),_=Math.sin(c),h=Math.cos(c),v=a,f=2*Math.PI,m=20;Math.abs(v-f)>1e-12&&--m>0;){var g=Math.sin(v),y=Math.cos(v),b=Math.sqrt(h*g*(h*g)+(u*_-d*h*y)*(u*_-d*h*y));if(0===b)return 0;var k=d*_+u*h*y,x=Math.atan2(b,k),j=u*h*g/b,L=1-j*j,C=k-2*d*_/L;isNaN(C)&&(C=0);var w=i/16*L*(4+i*(4-3*L));f=v,v=a+(1-w)*i*j*(x+w*b*(C+w*k*(2*C*C-1)))}if(0===m)return NaN;var D=L*(s*s/(r*r)-1),z=D/1024*(256+D*(D*(74-47*D)-128));return r*(1+D/16384*(4096+D*(D*(320-175*D)-768)))*(x-z*b*(C+z/4*(k*(2*C*C-1)-z/6*C*(4*b*b-3)*(4*C*C-3))))};let kl,xl;al.pm.setLang("customName",{tooltips:{finishLine:"Щелкните любой существующий маркер для завершения"}},"ru"),al.pm.setLang("ru"),al.on("pm:create",t=>{al.removeLayer(t.layer),jl.setActive(!1)}).on("pm:drawstart",t=>{let e=t.workingLayer;if("Line"===t.shape){let n=al.pm.Draw.Line._hintMarker;n&&n.on("move",(function(t){var o=e.getLatLngs();if(o.length){var l=(t=>{let e=0,n=(t=t||[])[0];return t.forEach(t=>{e+=bl(t,n),n=t}),e})(o),s=bl(o[o.length-1],t.latlng),r=(l+=s)>1e3?(l/1e3).toFixed(2)+" км":Math.ceil(l)+" м",i=s>1e3?(s/1e3).toFixed(2)+" км":Math.ceil(s)+" м";n._tooltip.setContent("Отрезок <b>("+i+")</b>участка <b>("+r+")</b>")}})),kl&&t.target.pm.Toolbar.buttons.drawPolyline.buttonsDomNode&&(xl=t.target.pm.Toolbar.buttons.drawPolyline.buttonsDomNode.children[1],xl.style.display="none")}});let jl=il.control.gmxIcon({id:"measure",className:"leaflet-bar",togglable:!0,title:"Включить/Отключить режим измерения расстояний"}).on("statechange",(function(t){kl=t.target.options.isActive,kl?al.pm.enableDraw("Line",{finishOn:"dblclick"}):(al.pm.disableDraw("Line"),xl&&(xl.style.display=""))})).addTo(al);const Ll=()=>{setTimeout(()=>{yl.options.isActive&&(yl.setActive(!1),yl._win=null,yl.setActive(!0))})};Jo._refreshFilters=St._refreshFilters=Kt._refreshFilters=ie._refreshFilters=Mn._refreshFilters=Zn._refreshFilters=Qn._refreshFilters=lo._refreshFilters=co._refreshFilters=rl._refreshFilters=Mo._refreshFilters=Bn._refreshFilters=Ll;return Jo.on("remove",Ll),St.on("remove",Ll),Kt.on("remove",Ll),ie.on("remove",Ll),Mn.on("remove",Ll),Bn.on("remove",Ll),Zn.on("remove",Ll),Qn.on("remove",Ll),lo.on("remove",Ll),co.on("remove",Ll),rl.on("remove",Ll),Mo.on("remove",Ll),al.on("zoomend",t=>{al._crpx=0,ie._map&&ie.checkZoom(al._zoom),Kt._map&&Kt.checkZoom(al._zoom),St._map&&St.checkZoom(al._zoom)}),window._map=al,al}();
//# sourceMappingURL=main.js.map
