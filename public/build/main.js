var dtp=function(){"use strict";const e=window.L;e.Control.GmxIcon=e.Control.extend({includes:e.Evented?e.Evented.prototype:e.Mixin.Events,options:{position:"topleft",id:"defaultIcon",isActive:!1},setActive:function(t,n,l){var s=this.options,o=this._container;if(s.togglable||s.toggle){var r=s.isActive,i=this._prefix,a=i+"-"+s.id;s.isActive=t,this._img&&(t&&s.activeImageUrl?this._img.src=s.activeImageUrl:!t&&s.regularImageUrl&&(this._img.src=s.regularImageUrl)),t?(e.DomUtil.addClass(o,i+"-active"),e.DomUtil.addClass(o,a+"-active"),o.children.length&&e.DomUtil.addClass(o,i+"-externalImage-active"),s.styleActive&&this.setStyle(s.styleActive)):(e.DomUtil.removeClass(o,i+"-active"),e.DomUtil.removeClass(o,a+"-active"),o.children.length&&e.DomUtil.removeClass(o,i+"-externalImage-active"),s.style&&this.setStyle(s.style)),n||r===t||this.fire("statechange",l)}if(e.gmxUtil&&e.gmxUtil.isIEOrEdge){var c=o.getElementsByTagName("use");if(c.length){var p=c[0],d=p.getAttribute("href")||p.getAttribute("xlink:href");p.setAttribute("href",d)}}},onAdd:function(t){var n=null,l=this.options,s=l.svgSprite||t.options.svgSprite,o="leaflet-gmx-icon"+(!s||l.regularImageUrl||l.text?"":"Svg"),r=o+"-"+l.id;this._prefix=o;var i=e.DomUtil.create("div",o+" "+r);if(i._id=l.id,this._container=i,l.title&&(i.title=l.title),this.setStyle=function(e){for(var t in e)i.style[t]=e[t]},l.className&&e.DomUtil.addClass(i,l.className),l.regularImageUrl)(n=e.DomUtil.create("img","",i)).src=l.regularImageUrl,this._img=n,e.DomUtil.addClass(i,o+"-img"),e.DomUtil.addClass(i,o+"-externalImage");else if(l.text)e.DomUtil.addClass(i,o+"-text"),e.DomUtil.create("span","",i).innerHTML=l.text;else if(s){e.DomUtil.addClass(i,"svgIcon");var a="#"+l.id.toLowerCase();i.innerHTML='<svg role="img" class="svgIcon"><use xlink:href="'+a+'" href="'+a+'"></use></svg>'}else e.DomUtil.addClass(i,o+"-img "+o+"-sprite");l.style&&this.setStyle(l.style),this._iconClick=function(e){i.parentNode&&i===e.toElement&&(this.setActive(!this.options.isActive,!1,e),this.fire("click",e),this.options.stateChange&&this.options.stateChange(this,e))};var c=e.DomEvent.stopPropagation;e.DomEvent.preventDefault;return e.DomEvent.on(i,"mousemove",c).on(i,"touchstart",c).on(i,"mousedown",c).on(i,"dblclick",c).on(i,"click",c).on(i,"click",this._iconClick,this),l.onAdd&&l.onAdd(this),this.fire("controladd"),t.fire("controladd",this),l.notHide&&(i._notHide=!0),t.gmxControlsManager&&t.gmxControlsManager.add(this),i},onRemove:function(t){t.gmxControlsManager&&t.gmxControlsManager.remove(this),this.fire("controlremove"),t.fire("controlremove",this);var n=this._container,l=e.DomEvent.stopPropagation;e.DomEvent.off(n,"mousemove",l).off(n,"touchstart",l).off(n,"mousedown",l).off(n,"dblclick",l).off(n,"click",l).off(n,"click",this._iconClick,this)},addTo:function(t){return e.Control.prototype.addTo.call(this,t),this.options.addBefore&&this.addBefore(this.options.addBefore),this},addBefore:function(e){var t=this._parent&&this._parent._container;if(t||(t=this._map&&this._map._controlCorners[this.getPosition()]),t)for(var n=0,l=t.childNodes.length;n<l;n++){var s=t.childNodes[n];if(e===s._id){t.insertBefore(this._container,s);break}}else this.options.addBefore=e;return this}}),e.Control.gmxIcon=e.Control.GmxIcon,e.control.gmxIcon=function(t){return new e.Control.GmxIcon(t)};const t=window.L;t.Control.GmxCenter=t.Control.extend({options:{position:"center",id:"center",notHide:!0,color:"red"},onRemove:function(e){e.gmxControlsManager&&e.gmxControlsManager.remove(this),e.fire("controlremove",this)},onAdd:function(e){var n="http://www.w3.org/2000/svg",l=t.DomUtil.create("div","leaflet-gmx-center"),s=t.DomUtil.create("div","leaflet-gmx-center"),o=document.createElementNS(n,"svg"),r=document.createElementNS(n,"g"),i=document.createElementNS(n,"path");return this._container=l,l._id=this.options.id,this.options.notHide&&(l._notHide=!0),i.setAttribute("stroke-width",2),i.setAttribute("stroke-opacity",2),i.setAttribute("d","M9 0L9 18M0 9L18 9"),this._path=i,r.appendChild(i),o.appendChild(r),o.setAttribute("width",18),o.setAttribute("height",18),s.appendChild(o),l.appendChild(s),this.setColor(this.options.color),e.fire("controladd",this),e.gmxControlsManager&&e.gmxControlsManager.add(this),l},setColor:function(e){return this.options.color=e,this._map&&this._path.setAttribute("stroke",e),this}}),t.Control.gmxCenter=t.Control.GmxCenter,t.control.gmxCenter=function(e){return new t.Control.GmxCenter(e)};const n=window.L;n.Control.FitCenter=n.Control.extend({options:{position:"topright",id:"fitcenter",notHide:!0,color:"#216b9c"},onRemove:function(e){e.gmxControlsManager&&e.gmxControlsManager.remove(this),e.off("moveend",this._update,this).fire("controlremove",this)},onAdd:function(e){var t=this.options.id,l="leaflet-gmx-"+t,s=n.DomUtil.create("div",l),o=n.DomUtil.create("input","",s),r=n.DomUtil.create("button","",s),i=n.DomUtil.create("div","results",s);return r.title="Переместить центр карты",o.placeholder="Поиск по адресам, координатам",this._input=o,this._container=s,this._results=i,s._id=t,e.on("mousemove",e=>{this._results.style.display="none"},this),n.DomEvent.on(o,"input",this._getSuggestions,this),n.DomEvent.on(o,"contextmenu",n.DomEvent.stopPropagation,this),n.DomEvent.on(s,"mousemove",n.DomEvent.stop),n.DomEvent.on(s,"mouseover",e=>{"block"!==this._results.style.display&&(this._results.style.display="block")},this),n.DomEvent.on(r,"click",(function(){let t=o.value.match(/[+-]?([0-9]*[.])?[0-9]+/g);t&&t.length>1&&e.setView([Number(t[0]),Number(t[1])])})),n.DomEvent.disableClickPropagation(s),e.on("moveend",this._update,this).fire("controladd",this),e.gmxControlsManager&&e.gmxControlsManager.add(this),s},_parseSearch:function(e){if((e=e||[]).length){this._results;let t=document.createDocumentFragment();e.forEach(e=>{let l=e.display_name,s=e.boundingbox,o=n.DomUtil.create("div","",t);o.innerHTML=l,n.DomEvent.on(o,"click",e=>{this._map.fitBounds([[s[0],s[2]],[s[1],s[3]]])},this)}),this._results.innerText="",this._results.appendChild(t),this._results.classList.add("active")}},_getSuggestions:function(e){const t=e.target.value||"калужское шоссе",n=["format=json","limit=10","polygon_text=1","bounded=1","viewbox=34,53,41,57"].join("&"),l="&q="+encodeURI(t);fetch(`//nominatim.openstreetmap.org/search?${n}${l}`,{}).then(e=>e.json()).then(this._parseSearch.bind(this))},_update:function(e){this._map&&this.setCoords(this._map.getCenter())},_trunc:function(e){return(""+(Math.round(1e7*e)/1e7+1e-8)).substring(0,9)},setCoords:function(e){return this}}),n.control.fitCenter=function(e){return new n.Control.FitCenter(e)};const l='&copy; <a href="https://n.maps.yandex.ru/?oid=1900133#!/?z=18&ll=36.860478%2C55.429679&l=nk%23map">Yandex</a> contributors',s="//inv.mvs.group/mapcache/",o=new Date,r=o.getMonth()+1,i=o.getDate(),a=(o.getFullYear(),{m1:{title:"Дороги",prefix:s+"m1/",postfix:"?x={x}&y={y}&z={z}&l=mrcss",errorTileUrlPrefix:"//core-nmaps-mrc-browser.maps.yandex.ru/tiles",options:{key:"m1",minZoom:10,maxZoom:19,attribution:l}},m2:{title:"Карта(Яндекс)",prefix:s+"m2/tiles",postfix:"?l=map&v=18.01.10-2&x={x}&y={y}&z={z}&scale=1&lang=ru_RU",errorTileUrlPrefix:"//vec01.maps.yandex.net/tiles",options:{key:"m2",maxNativeZoom:19,maxZoom:21,attribution:l}},m3:{title:"Снимки(Яндекс)",prefix:s+"m3/tiles",postfix:"?l=sat&v=3.462.0&x={x}&y={y}&z={z}&lang=ru_RU",errorTileUrlPrefix:"//sat04.maps.yandex.net/tiles",options:{key:"m3",maxNativeZoom:19,maxZoom:21,attribution:l}},m4:{title:"Скорость(Народная карта)",prefix:s+"m4/",postfix:"?x={x}&y={y}&z={z}&l=mpskl&sl=104,301135,302526,302827,5300026,5400046,70300236,70300638",errorTileUrlPrefix:"//04.core-nmaps-renderer-nmaps.maps.yandex.net/tile",options:{key:"m4",minZoom:8,maxZoom:19,attribution:l}},m5:{title:"Светофоры",prefix:s+"m5/",postfix:"?x={x}&y={y}&z={z}&l=mpskl&sl=301750",errorTileUrlPrefix:"//04.core-nmaps-renderer-nmaps.maps.yandex.net/tile",options:{key:"m4",minZoom:12,maxZoom:19,attribution:l}},m6:{title:"Дороги в стадии строительства",prefix:"//03.core-nmaps-renderer-nmaps.maps.yandex.net/",postfix:"?x={x}&y={y}&z={z}&l=mpskl&sl=70300289",errorTileUrlPrefix:"//03.core-nmaps-renderer-nmaps.maps.yandex.net/",options:{key:"m6",minZoom:10,maxZoom:19,attribution:l}}}),c={};window.URLSearchParams&&new URLSearchParams(window.location.search).forEach((e,t)=>{c[t]=e});const p=(e,t)=>{let n=e.count_lost,l=e.count_stricken;!l&&n&&(t.stricken[1]=1+(t.stricken[1]||0)),l&&!n&&(t.stricken[2]=1+(t.stricken[2]||0)),(l||n)&&(t.stricken[3]=1+(t.stricken[3]||0)),l&&n&&(t.stricken[4]=1+(t.stricken[4]||0))},d=e=>{let t=0,n=(e=e||[])[0];return e.forEach(e=>{t+=((e,t)=>{for(var n=Math.PI/180,l={lon:n*e.lng,lat:n*e.lat},s={lon:n*t.lng,lat:n*t.lat},o=6378137,r=6356752.3142,i=1/298.257223563,a=s.lon-l.lon,c=Math.atan((1-i)*Math.tan(l.lat)),p=Math.atan((1-i)*Math.tan(s.lat)),d=Math.sin(c),u=Math.cos(c),_=Math.sin(p),h=Math.cos(p),v=a,f=2*Math.PI,m=20;Math.abs(v-f)>1e-12&&--m>0;){var g=Math.sin(v),y=Math.cos(v),b=Math.sqrt(h*g*(h*g)+(u*_-d*h*y)*(u*_-d*h*y));if(0===b)return 0;var k=d*_+u*h*y,x=Math.atan2(b,k),j=u*h*g/b,C=1-j*j,L=k-2*d*_/C;isNaN(L)&&(L=0);var w=i/16*C*(4+i*(4-3*C));f=v,v=a+(1-w)*i*j*(x+w*b*(L+w*k*(2*L*L-1)))}if(0===m)return NaN;var z=C*(o*o/(r*r)-1),D=z/1024*(256+z*(z*(74-47*z)-128));return r*(1+z/16384*(4096+z*(z*(320-175*z)-768)))*(x-D*b*(L+D/4*(k*(2*L*L-1)-D/6*L*(4*b*b-3)*(4*L*L-3))))})(e,n),n=e}),t},u=window.L;let _=u.canvas();const h=function(e,t){var n=u.Projection.Mercator.project(t),l=u.Projection.Mercator.unproject(new u.Point(n.x+40,n.y+30));return 156543.033928041*Math.pow(2,-e)*((e,t)=>{for(var n=Math.PI/180,l={lon:n*e.lng,lat:n*e.lat},s={lon:n*t.lng,lat:n*t.lat},o=6378137,r=6356752.3142,i=1/298.257223563,a=s.lon-l.lon,c=Math.atan((1-i)*Math.tan(l.lat)),p=Math.atan((1-i)*Math.tan(s.lat)),d=Math.sin(c),u=Math.cos(c),_=Math.sin(p),h=Math.cos(p),v=a,f=2*Math.PI,m=20;Math.abs(v-f)>1e-12&&--m>0;){var g=Math.sin(v),y=Math.cos(v),b=Math.sqrt(h*g*(h*g)+(u*_-d*h*y)*(u*_-d*h*y));if(0===b)return 0;var k=d*_+u*h*y,x=Math.atan2(b,k),j=u*h*g/b,C=1-j*j,L=k-2*d*_/C;isNaN(L)&&(L=0);var w=i/16*C*(4+i*(4-3*C));f=v,v=a+(1-w)*i*j*(x+w*b*(L+w*k*(2*L*L-1)))}if(0===m)return NaN;var z=C*(o*o/(r*r)-1),D=z/1024*(256+z*(z*(74-47*z)-128));return r*(1+z/16384*(4096+z*(z*(320-175*z)-768)))*(x-D*b*(L+D/4*(k*(2*L*L-1)-D/6*L*(4*b*b-3)*(4*L*L-3))))})(t,l)/50},v=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix(),f=(e,t,n,l)=>{l=l||20/832;let s=new Path2D(e),o=new Path2D;return o.addPath(s,v.translate(t,n).rotate(180).scale(-l,-l)),o},m={measures:f("M 10.5 9 C 10.132813 9 9.578125 9.167969 9.1875 9.5 C 8.796875 9.832031 8.488281 10.273438 8.0625 10.96875 C 7.738281 11.496094 7.21875 12.621094 6.4375 14.28125 C 5.65625 15.941406 4.6875 18.015625 3.75 20.0625 C 1.875 24.152344 0.09375 28.09375 0.09375 28.09375 C -0.0820313 28.390625 -0.09375 28.753906 0.0625 29.0625 C 0.0703125 29.082031 0.0820313 29.105469 0.09375 29.125 C 0.148438 29.308594 0.210938 29.46875 0.3125 29.59375 C 0.496094 29.816406 0.695313 29.921875 0.84375 30 C 1.144531 30.160156 1.355469 30.226563 1.5 30.3125 C 1.789063 30.488281 2 30.527344 2 31.6875 C 2 34.023438 2.664063 36.609375 4.46875 38.625 C 6.273438 40.640625 9.199219 42 13.40625 42 C 16.816406 42 19.355469 40.886719 20.90625 38.875 C 22.457031 36.863281 23 34.121094 23 31 L 23 28.5625 C 23.351563 28.339844 23.972656 28 25 28 C 26.027344 28 26.648438 28.339844 27 28.5625 L 27 31 C 27 34.121094 27.542969 36.863281 29.09375 38.875 C 30.644531 40.886719 33.183594 42 36.59375 42 C 40.800781 42 43.726563 40.65625 45.53125 38.65625 C 47.335938 36.65625 48 34.101563 48 31.8125 C 48 30.59375 48.226563 30.53125 48.5 30.375 C 48.636719 30.296875 48.824219 30.242188 49.125 30.09375 C 49.277344 30.019531 49.460938 29.910156 49.65625 29.6875 C 49.804688 29.515625 49.917969 29.273438 49.96875 29.03125 C 50.105469 28.726563 50.082031 28.375 49.90625 28.09375 C 49.90625 28.09375 48.125 24.152344 46.25 20.0625 C 45.3125 18.015625 44.34375 15.941406 43.5625 14.28125 C 42.78125 12.621094 42.261719 11.496094 41.9375 10.96875 C 41.511719 10.273438 41.203125 9.832031 40.8125 9.5 C 40.421875 9.167969 39.867188 9 39.5 9 C 39.050781 9 38.546875 9.210938 38.1875 9.53125 C 37.828125 9.851563 37.53125 10.285156 37.15625 10.875 C 36.566406 11.859375 36.15625 12.4375 36.15625 12.4375 C 35.84375 12.902344 35.972656 13.53125 36.4375 13.84375 C 36.902344 14.15625 37.53125 14.027344 37.84375 13.5625 C 37.84375 13.5625 38.246094 12.929688 38.84375 11.9375 C 38.851563 11.921875 38.835938 11.921875 38.84375 11.90625 C 39.144531 11.433594 39.382813 11.175781 39.5 11.0625 C 39.613281 11.160156 39.882813 11.4375 40.25 12.03125 C 40.324219 12.152344 41.003906 13.476563 41.78125 15.125 C 42.558594 16.773438 43.5 18.863281 44.4375 20.90625 C 45.820313 23.917969 46.519531 25.488281 47.125 26.8125 C 46.839844 26.75 46.585938 26.683594 46.25 26.625 C 44.132813 26.257813 40.941406 26 36.40625 26 C 33.464844 26 30.472656 26.660156 28.1875 26.96875 C 27.71875 26.640625 26.699219 26 25 26 C 23.300781 26 22.28125 26.640625 21.8125 26.96875 C 19.527344 26.660156 16.535156 26 13.59375 26 C 9.058594 26 5.863281 26.242188 3.75 26.59375 C 3.414063 26.648438 3.15625 26.71875 2.875 26.78125 C 3.484375 25.449219 4.1875 23.90625 5.5625 20.90625 C 6.5 18.863281 7.441406 16.773438 8.21875 15.125 C 8.996094 13.476563 9.675781 12.152344 9.75 12.03125 L 9.75 12 C 10.105469 11.429688 10.390625 11.160156 10.5 11.0625 C 10.617188 11.175781 10.855469 11.433594 11.15625 11.90625 C 11.164063 11.921875 11.148438 11.921875 11.15625 11.9375 C 11.753906 12.929688 12.15625 13.5625 12.15625 13.5625 C 12.46875 14.027344 13.097656 14.15625 13.5625 13.84375 C 14.027344 13.53125 14.15625 12.902344 13.84375 12.4375 C 13.84375 12.4375 13.433594 11.859375 12.84375 10.875 C 12.46875 10.285156 12.171875 9.851563 11.8125 9.53125 C 11.453125 9.210938 10.949219 9 10.5 9 Z M 13.59375 28 C 16.042969 28 18.679688 28.570313 21 28.90625 L 21 31 C 21 33.878906 20.460938 36.136719 19.3125 37.625 C 18.164063 39.113281 16.398438 40 13.40625 40 C 9.613281 40 7.332031 38.839844 5.9375 37.28125 C 4.542969 35.722656 4 33.652344 4 31.6875 C 4 30.265625 3.398438 29.386719 2.78125 28.875 C 3.160156 28.769531 3.46875 28.667969 4.09375 28.5625 C 6.03125 28.238281 9.128906 28 13.59375 28 Z M 36.40625 28 C 40.871094 28 43.972656 28.261719 45.90625 28.59375 C 46.554688 28.707031 46.871094 28.820313 47.25 28.9375 C 46.613281 29.441406 46 30.34375 46 31.8125 C 46 33.722656 45.457031 35.765625 44.0625 37.3125 C 42.667969 38.859375 40.386719 40 36.59375 40 C 33.601563 40 31.835938 39.113281 30.6875 37.625 C 29.539063 36.136719 29 33.878906 29 31 L 29 28.90625 C 31.320313 28.570313 33.957031 28 36.40625 28 Z",-12,-13,.5),camera:f("M864 260H728l-32.4-90.8a32.07 32.07 0 0 0-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 260H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V340c0-44.2-35.8-80-80-80zM512 716c-88.4 0-160-71.6-160-160s71.6-160 160-160 160 71.6 160 160-71.6 160-160 160zm-96-160a96 96 0 1 0 192 0 96 96 0 1 0-192 0z",-12,-13)};u.canvas({padding:.5});u.Canvas.include({_updateMarkerPoint:function(e){if(!(!this._drawing||e._empty()||e.feature&&e.feature.properties._isHidden)){var t=e._point,n=e.options._radiusM,l=e.options.image,s=e._map,o=this._ctx,r=e.options.iconName||"border";if(s){if(l){let n=e.options.w||20,s=e.options.h||20;return void o.drawImage(l,t.x-n/2,t.y-s/2,n,s)}let i=s._zoom;n&&!s._rpx&&s._needRound&&(s._rpx=s._needRound*n/h(i,s.getCenter())),s._rpx>20&&s._needRound&&(o.save(),o.beginPath(),o.globalAlpha=.2,o.fillStyle="gray",o.arc(t.x,t.y,s._rpx,0,2*Math.PI),o.fill(),o.stroke(),o.closePath(),o.restore()),i>12&&(o.save(),o.beginPath(),o.globalAlpha=1,o.fillStyle="white",o.arc(t.x,t.y,14,0,2*Math.PI),o.fill(),o.closePath(),o.restore()),o.save(),o.beginPath(),o.translate(t.x-0,t.y-0),this._fillStroke(o,e),o.stroke(iconPaths[r].path),o.globalAlpha=e.options.fillOpacity,o.fill(iconPaths[r].path),o.closePath(),o.restore()}}},_updateCirclePoint:function(e){if(this._drawing&&!e._empty()){var t=e._point,n=e.options,l=n.radius||14,s=2*l,o=(e._map,this._ctx);if(o.save(),o.beginPath(),o.globalAlpha=1,o.fillStyle=n.fillColor||"red",n.triangle)o.moveTo(t.x,t.y+l),o.lineTo(t.x+l,t.y-l),o.lineTo(t.x-l,t.y-l),o.lineTo(t.x,t.y+l);else if(n.rhomb)o.moveTo(t.x+l,t.y),o.lineTo(t.x,t.y+l),o.lineTo(t.x-l,t.y),o.lineTo(t.x,t.y-l),o.lineTo(t.x+l,t.y);else if(n.box)o.fillRect(t.x-l,t.y-l,s,s);else if(n.path){let e=m[n.path];o.translate(t.x,t.y),o.fill(e),o.stroke(e)}else o.arc(t.x,t.y,l,0,2*Math.PI);o.fill(),n.stroke&&(o.stroke(),n.triangle?(o.moveTo(t.x,t.y+l),o.lineTo(t.x+l,t.y-l),o.lineTo(t.x-l,t.y-l),o.lineTo(t.x,t.y+l)):n.box?o.strokeRect(t.x-l,t.y-l,s,s):o.arc(t.x,t.y,l,0,2*Math.PI)),o.closePath(),o.restore()}}});u.CircleMarker.extend({_updatePath:function(){this._renderer._updateMarkerPoint(this)}});const g=u.CircleMarker.extend({options:{renderer:_},_updatePath:function(){this._renderer._updateCirclePoint(this)}});u.Rectangle.extend({options:{renderer:_}});function y(){}function b(e){return e()}function k(){return Object.create(null)}function x(e){e.forEach(b)}function j(e){return"function"==typeof e}function C(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function w(e){return null==e?"":e}function z(e,t){e.appendChild(t)}function D(e,t,n){e.insertBefore(t,n||null)}function F(e){e.parentNode.removeChild(e)}function T(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function E(e){return document.createElement(e)}function O(e){return document.createTextNode(e)}function M(){return O(" ")}function q(){return O("")}function $(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function P(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function S(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function H(e){return""===e?void 0:+e}function N(e,t){t=""+t,e.data!==t&&(e.data=t)}function B(e,t){(null!=t||e.value)&&(e.value=t)}function I(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t)return void(l.selected=!0)}}function G(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];l.selected=~t.indexOf(l.__value)}}function U(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function A(e){return[].map.call(e.querySelectorAll(":checked"),e=>e.__value)}let R;function Z(e){R=e}function Y(){if(!R)throw new Error("Function called outside component initialization");return R}function V(e){Y().$$.after_update.push(e)}function W(){const e=Y();return(t,n)=>{const l=e.$$.callbacks[t];if(l){const s=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);l.slice().forEach(t=>{t.call(e,s)})}}}const K=[],J=[],X=[],Q=[],ee=Promise.resolve();let te=!1;function ne(e){X.push(e)}let le=!1;const se=new Set;function oe(){if(!le){le=!0;do{for(let e=0;e<K.length;e+=1){const t=K[e];Z(t),re(t.$$)}for(K.length=0;J.length;)J.pop()();for(let e=0;e<X.length;e+=1){const t=X[e];se.has(t)||(se.add(t),t())}X.length=0}while(K.length);for(;Q.length;)Q.pop()();te=!1,le=!1,se.clear()}}function re(e){if(null!==e.fragment){e.update(),x(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ne)}}const ie=new Set;let ae;function ce(){ae={r:0,c:[],p:ae}}function pe(){ae.r||x(ae.c),ae=ae.p}function de(e,t){e&&e.i&&(ie.delete(e),e.i(t))}function ue(e,t,n,l){if(e&&e.o){if(ie.has(e))return;ie.add(e),ae.c.push(()=>{ie.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}}function _e(e){e&&e.c()}function he(e,t,n){const{fragment:l,on_mount:s,on_destroy:o,after_update:r}=e.$$;l&&l.m(t,n),ne(()=>{const t=s.map(b).filter(j);o?o.push(...t):x(t),e.$$.on_mount=[]}),r.forEach(ne)}function ve(e,t){const n=e.$$;null!==n.fragment&&(x(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function fe(e,t){-1===e.$$.dirty[0]&&(K.push(e),te||(te=!0,ee.then(oe)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function me(e,t,n,l,s,o,r=[-1]){const i=R;Z(e);const a=t.props||{},c=e.$$={fragment:null,ctx:null,props:o,update:y,not_equal:s,bound:k(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(i?i.$$.context:[]),callbacks:k(),dirty:r};let p=!1;if(c.ctx=n?n(e,a,(t,n,...l)=>{const o=l.length?l[0]:n;return c.ctx&&s(c.ctx[t],c.ctx[t]=o)&&(c.bound[t]&&c.bound[t](o),p&&fe(e,t)),n}):[],c.update(),p=!0,x(c.before_update),c.fragment=!!l&&l(c.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);c.fragment&&c.fragment.l(e),e.forEach(F)}else c.fragment&&c.fragment.c();t.intro&&de(e.$$.fragment),he(e,t.target,t.anchor),oe()}Z(i)}class ge{$destroy(){ve(this,1),this.$destroy=y}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function ye(e,t,n){const l=e.slice();return l[7]=t[n],l[9]=n,l}function be(e){let t,n,l,s,o;function r(...t){return e[6](e[9],...t)}return{c(){t=E("li"),S(t,"class",n="dot"+(e[9]===e[1]?" selected":"")+" svelte-jjp3es"),t.value=l=e[9],S(t,"role","button"),S(t,"tabindex","0"),S(t,"aria-label",s="slide item "+e[9])},m(e,n,l){D(e,t,n),l&&o(),o=$(t,"click",P(r))},p(l,s){e=l,2&s&&n!==(n="dot"+(e[9]===e[1]?" selected":"")+" svelte-jjp3es")&&S(t,"class",n)},d(e){e&&F(t),o()}}}function ke(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,b,k,j,C,L,w,q,H,B,I,G,U,A=(e[0][e[1]].kindName||"Фото и схемы ДТП")+"",R=e[1]+1+"",Z=e[0].length+"",Y=e[0],V=[];for(let t=0;t<Y.length;t+=1)V[t]=be(ye(e,Y,t));return{c(){t=E("div"),n=M(),l=E("div"),s=E("div"),o=M(),r=E("div"),i=E("div"),a=E("div"),c=O(A),p=M(),d=E("div"),u=E("div"),_=E("div"),h=E("button"),v=M(),f=E("div"),m=E("a"),g=E("img"),j=M(),C=E("button"),L=M(),w=E("ul");for(let e=0;e<V.length;e+=1)V[e].c();q=M(),H=E("p"),B=O(R),I=O(" из "),G=O(Z),S(t,"class","modal-background svelte-jjp3es"),S(s,"title","Закрыть"),S(s,"class","ant-modal-close svelte-jjp3es"),S(a,"class","ant-modal-title"),S(a,"id","rcDialogTitle1"),S(i,"class","ant-modal-header svelte-jjp3es"),S(h,"type","button"),S(h,"aria-label","previous slide / item"),S(h,"class","control-arrow control-prev svelte-jjp3es"),g.src!==(b=""+(xe+e[0][e[1]].guid))&&S(g,"src",b),S(g,"alt",""),S(g,"class","svelte-jjp3es"),S(m,"target","_blank"),S(m,"href",k=""+(xe+e[0][e[1]].guid)),S(m,"title","Открыть на весь экран"),S(m,"class","svelte-jjp3es"),S(f,"class","slider-wrapper axis-horizontal svelte-jjp3es"),S(C,"type","button"),S(C,"aria-label","next slide / item"),S(C,"class","control-arrow control-next svelte-jjp3es"),S(w,"class","control-dots svelte-jjp3es"),S(H,"class","carousel-status svelte-jjp3es"),S(_,"class","carousel carousel-slider svelte-jjp3es"),function(e,t,n,l){e.style.setProperty(t,n,l?"important":"")}(_,"width","100%"),S(d,"class","ant-modal-body svelte-jjp3es"),S(r,"class","ant-modal-content svelte-jjp3es"),S(l,"class","modal svelte-jjp3es"),S(l,"role","dialog"),S(l,"aria-modal","true")},m(y,b,k){D(y,t,b),D(y,n,b),D(y,l,b),z(l,s),z(l,o),z(l,r),z(r,i),z(i,a),z(a,c),z(r,p),z(r,d),z(d,u),z(u,_),z(_,h),z(_,v),z(_,f),z(f,m),z(m,g),z(_,j),z(_,C),z(_,L),z(_,w);for(let e=0;e<V.length;e+=1)V[e].m(w,null);z(_,q),z(_,H),z(H,B),z(H,I),z(H,G),k&&x(U),U=[$(t,"click",P(e[2])),$(s,"click",P(e[2])),$(h,"click",P(e[3])),$(C,"click",P(e[4])),$(l,"click",P(je))]},p(e,[t]){if(3&t&&A!==(A=(e[0][e[1]].kindName||"Фото и схемы ДТП")+"")&&N(c,A),3&t&&g.src!==(b=""+(xe+e[0][e[1]].guid))&&S(g,"src",b),3&t&&k!==(k=""+(xe+e[0][e[1]].guid))&&S(m,"href",k),3&t){let n;for(Y=e[0],n=0;n<Y.length;n+=1){const l=ye(e,Y,n);V[n]?V[n].p(l,t):(V[n]=be(l),V[n].c(),V[n].m(w,null))}for(;n<V.length;n+=1)V[n].d(1);V.length=Y.length}2&t&&R!==(R=e[1]+1+"")&&N(B,R),1&t&&Z!==(Z=e[0].length+"")&&N(G,Z)},i:y,o:y,d(e){e&&F(t),e&&F(n),e&&F(l),T(V,e),x(U)}}}const xe="//map.mvs.group/skpdi/proxy.php?guid=",je=()=>{};function Ce(e,t,n){const l=W();let{data:s}=t,o=0;return e.$set=e=>{"data"in e&&n(0,s=e.data)},[s,o,()=>{l("close")},()=>{o&&n(1,o--,o)},()=>{o<s.length-1&&n(1,o++,o)},l,e=>{n(1,o=e)}]}class Le extends ge{constructor(e){super(),me(this,e,Ce,ke,C,{data:0})}}function we(e){let t,n,l,s,o,r,i,a,c,p=e[0].title+"",d=e[0].address+"",u=e[0].contact+"";return{c(){t=E("div"),n=E("div"),l=O(p),s=E("br"),o=M(),r=E("div"),i=O(d),a=E("br"),c=O(u),S(n,"class","pLine"),S(r,"class","address svelte-1ve8gqw"),S(t,"class","mvsPopup svelte-1ve8gqw")},m(e,p){D(e,t,p),z(t,n),z(n,l),z(t,s),z(t,o),z(t,r),z(r,i),z(r,a),z(r,c)},p(e,[t]){1&t&&p!==(p=e[0].title+"")&&N(l,p),1&t&&d!==(d=e[0].address+"")&&N(i,d),1&t&&u!==(u=e[0].contact+"")&&N(c,u)},i:y,o:y,d(e){e&&F(t)}}}function ze(e,t,n){let{prp:l={}}=t;return e.$set=e=>{"prp"in e&&n(0,l=e.prp)},[l]}class De extends ge{constructor(e){super(),me(this,e,ze,we,C,{prp:0})}}function Fe(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,b,k,x,j,C,L,w,T,q,P,H,B,I,G,U,A,R,Z,Y,V,W,K,J,X,Q,ee,te,ne,le,se,oe,re,ie,ae,ce,pe,de,ue,_e,he,ve,fe,me,ge,ye,be=(e[0].kind||"")+"",ke=(e[0].type||"")+"",xe=(e[0].id||"")+"",je=(e[0].status||"")+"",Ce=e[3](e[0].date_created)+"",Le=e[3](e[0].date_finish_fact)+"",we=e[2].lat+"",ze=e[2].lon+"",De=(e[0].id_dtp||"")+"",Fe=(e[0].description||"")+"";return{c(){t=E("div"),n=E("div"),l=O("Мероприятие"),s=E("br"),o=O("("),r=O(be),i=O(")"),a=M(),c=E("div"),p=E("table"),d=E("tbody"),u=E("tr"),_=E("td"),_.textContent="Тип мероприятия:",h=M(),v=E("td"),f=O(ke),m=M(),g=E("tr"),b=E("td"),b.textContent="ID:",k=M(),x=E("td"),j=O(xe),C=M(),L=E("tr"),w=E("td"),w.textContent="Статус:",T=M(),q=E("td"),P=O(je),H=M(),B=E("tr"),I=E("td"),I.textContent="Дата добавления:",G=M(),U=E("td"),A=O(Ce),R=M(),Z=E("tr"),Y=E("td"),Y.textContent="Дата завершения:",V=M(),W=E("td"),K=O(Le),J=M(),X=E("tr"),Q=E("td"),Q.textContent="Координаты:",ee=M(),te=E("td"),ne=O(we),le=M(),se=O(ze),oe=M(),re=E("span"),ie=M(),ae=E("tr"),ce=E("td"),ce.textContent="ID ДТП СКПДИ:",pe=M(),de=E("td"),ue=O(De),_e=M(),he=E("tr"),ve=E("td"),ve.textContent="Описание:",fe=M(),me=E("td"),ge=O(Fe),S(n,"class","pLine"),S(_,"class","first svelte-1ve8gqw"),S(b,"class","first svelte-1ve8gqw"),S(w,"class","first svelte-1ve8gqw"),S(I,"class","first svelte-1ve8gqw"),S(Y,"class","first svelte-1ve8gqw"),S(Q,"class","first svelte-1ve8gqw"),S(re,"title","Скопировать в буфер обмена"),S(re,"class","leaflet-gmx-icon-copy"),S(ce,"class","first svelte-1ve8gqw"),S(ve,"class","first svelte-1ve8gqw"),S(p,"class","table svelte-1ve8gqw"),S(c,"class","featureCont"),S(t,"class","mvsPopup svelte-1ve8gqw")},m(y,F,E){D(y,t,F),z(t,n),z(n,l),z(n,s),z(n,o),z(n,r),z(n,i),z(t,a),z(t,c),z(c,p),z(p,d),z(d,u),z(u,_),z(u,h),z(u,v),z(v,f),z(d,m),z(d,g),z(g,b),z(g,k),z(g,x),z(x,j),z(d,C),z(d,L),z(L,w),z(L,T),z(L,q),z(q,P),z(d,H),z(d,B),z(B,I),z(B,G),z(B,U),z(U,A),z(d,R),z(d,Z),z(Z,Y),z(Z,V),z(Z,W),z(W,K),z(d,J),z(d,X),z(X,Q),z(X,ee),z(X,te),z(te,ne),z(te,le),z(te,se),z(te,oe),z(te,re),z(d,ie),z(d,ae),z(ae,ce),z(ae,pe),z(ae,de),z(de,ue),z(d,_e),z(d,he),z(he,ve),z(he,fe),z(he,me),z(me,ge),E&&ye(),ye=$(re,"click",e[1])},p(e,[t]){1&t&&be!==(be=(e[0].kind||"")+"")&&N(r,be),1&t&&ke!==(ke=(e[0].type||"")+"")&&N(f,ke),1&t&&xe!==(xe=(e[0].id||"")+"")&&N(j,xe),1&t&&je!==(je=(e[0].status||"")+"")&&N(P,je),1&t&&Ce!==(Ce=e[3](e[0].date_created)+"")&&N(A,Ce),1&t&&Le!==(Le=e[3](e[0].date_finish_fact)+"")&&N(K,Le),1&t&&De!==(De=(e[0].id_dtp||"")+"")&&N(ue,De),1&t&&Fe!==(Fe=(e[0].description||"")+"")&&N(ge,Fe)},i:y,o:y,d(e){e&&F(t),ye()}}}function Te(e,t,n){let{prp:l}=t;let s=l.coords[0]||{lat:l.lat,lon:l.lon};return e.$set=e=>{"prp"in e&&n(0,l=e.prp)},[l,e=>{navigator.clipboard.writeText(e.target.parentNode.textContent).catch(e=>{console.log("Something went wrong",e)})},s,e=>{if(!e)return"";let t=new Date(1e3*e);return t.toLocaleDateString()+" "+t.toLocaleTimeString()}]}class Ee extends ge{constructor(e){super(),me(this,e,Te,Fe,C,{prp:0})}}function Oe(e,t,n){const l=e.slice();return l[12]=t[n],l}function Me(e,t,n){const l=e.slice();return l[12]=t[n],l}function qe(e,t,n){const l=e.slice();return l[12]=t[n],l}function $e(e,t,n){const l=e.slice();return l[17]=t[n],l}function Pe(e){let t,n,l,s=e[12].k_uch&&(e[12].npdd||e[12].sop_npdd)&&function(e){let t,n,l=e[12].k_uch+"";return{c(){t=E("li"),n=O(l)},m(e,l){D(e,t,l),z(t,n)},p:y,d(e){e&&F(t)}}}(e),o=e[12].npdd&&function(e){let t,n,l=e[12].npdd+"";return{c(){t=E("li"),n=O(l)},m(e,l){D(e,t,l),z(t,n)},p:y,d(e){e&&F(t)}}}(e),r=e[12].sop_npdd&&function(e){let t,n,l=e[12].sop_npdd+"";return{c(){t=E("li"),n=O(l)},m(e,l){D(e,t,l),z(t,n)},p:y,d(e){e&&F(t)}}}(e);return{c(){s&&s.c(),t=M(),o&&o.c(),n=M(),r&&r.c(),l=q()},m(e,i){s&&s.m(e,i),D(e,t,i),o&&o.m(e,i),D(e,n,i),r&&r.m(e,i),D(e,l,i)},p(e,t){e[12].k_uch&&(e[12].npdd||e[12].sop_npdd)&&s.p(e,t),e[12].npdd&&o.p(e,t),e[12].sop_npdd&&r.p(e,t)},d(e){s&&s.d(e),e&&F(t),o&&o.d(e),e&&F(n),r&&r.d(e),e&&F(l)}}}function Se(e){let t,n,l=e[17].ts&&function(e){let t,n,l=e[17].ts+"";return{c(){t=E("li"),n=O(l)},m(e,l){D(e,t,l),z(t,n)},p:y,d(e){e&&F(t)}}}(e),s=e[17].arr,o=[];for(let t=0;t<s.length;t+=1)o[t]=Pe(qe(e,s,t));return{c(){l&&l.c(),t=M();for(let e=0;e<o.length;e+=1)o[e].c();n=q()},m(e,s){l&&l.m(e,s),D(e,t,s);for(let t=0;t<o.length;t+=1)o[t].m(e,s);D(e,n,s)},p(e,t){if(e[17].ts&&l.p(e,t),64&t){let l;for(s=e[17].arr,l=0;l<s.length;l+=1){const r=qe(e,s,l);o[l]?o[l].p(r,t):(o[l]=Pe(r),o[l].c(),o[l].m(n.parentNode,n))}for(;l<o.length;l+=1)o[l].d(1);o.length=s.length}},d(e){l&&l.d(e),e&&F(t),T(o,e),e&&F(n)}}}function He(e){let t,n,l,s,o,r=e[0].spog+"";return{c(){t=E("div"),n=E("div"),n.textContent="Погода:",l=M(),s=E("div"),o=O(r),S(n,"class","stitle"),S(s,"class","sval")},m(e,r){D(e,t,r),z(t,n),z(t,l),z(t,s),z(s,o)},p(e,t){1&t&&r!==(r=e[0].spog+"")&&N(o,r)},d(e){e&&F(t)}}}function Ne(e){let t,n,l,s,o,r=e[0].s_pch+"";return{c(){t=E("div"),n=E("div"),n.textContent="Покрытие:",l=M(),s=E("div"),o=O(r),S(n,"class","stitle"),S(s,"class","sval")},m(e,r){D(e,t,r),z(t,n),z(t,l),z(t,s),z(s,o)},p(e,t){1&t&&r!==(r=e[0].s_pch+"")&&N(o,r)},d(e){e&&F(t)}}}function Be(e){let t,n,l,s,o,r=e[0].osv+"";return{c(){t=E("div"),n=E("div"),n.textContent="Освещенность:",l=M(),s=E("div"),o=O(r),S(n,"class","stitle"),S(s,"class","sval")},m(e,r){D(e,t,r),z(t,n),z(t,l),z(t,s),z(s,o)},p(e,t){1&t&&r!==(r=e[0].osv+"")&&N(o,r)},d(e){e&&F(t)}}}function Ie(e){let t,n,l,s,o,r=e[0].ndu+"";return{c(){t=E("div"),n=E("div"),n.textContent="Иные условия:",l=M(),s=E("div"),o=O(r),S(n,"class","stitle"),S(s,"class","sval")},m(e,r){D(e,t,r),z(t,n),z(t,l),z(t,s),z(s,o)},p(e,t){1&t&&r!==(r=e[0].ndu+"")&&N(o,r)},d(e){e&&F(t)}}}function Ge(e){let t,n,l,s;return{c(){t=E("li"),n=O("батальон ДПС"),S(t,"class","link svelte-bxm1yk"),t.value=l=e[12]},m(l,o,r){D(l,t,o),z(t,n),r&&s(),s=$(t,"click",e[4])},p(e,n){1&n&&l!==(l=e[12])&&(t.value=l)},d(e){e&&F(t),s()}}}function Ue(e){let t,n,l,s;return{c(){t=E("li"),n=O("Мероприятие"),S(t,"class","link svelte-bxm1yk"),t.value=l=e[12]},m(l,o,r){D(l,t,o),z(t,n),r&&s(),s=$(t,"click",e[3])},p(e,n){1&n&&l!==(l=e[12])&&(t.value=l)},d(e){e&&F(t),s()}}}function Ae(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,b,k,x,j,C,L,w,q,P,H,B,I,G,U,A,R,Z,Y,V,W,K,J,X,Q,ee,te,ne,le,se,oe,re,ie,ae,ce,pe,de,ue,_e,he,ve,fe,me,ge,ye,be,ke,xe,je,Ce,Le,we,ze,De,Fe,Te,Ee,qe,Pe,Ae,Re,Ze,Ye,Ve,We,Ke,Je,Xe,Qe,et,tt,nt,lt,st,ot,rt,it,at,ct,pt=(e[0].name||e[0].dtvp||"")+"",dt=(e[0].sid||e[0].id_stat||e[0].id_skpdi||"")+"",ut=(e[0].district||"")+"",_t=(e[0].dor||"")+"",ht=(e[0].name_city||"вне населенного пункта")+"",vt=(e[0].km||0)+"",ft=(e[0].m||0)+"",mt=e[0].lat+"",gt=e[0].lon+"",yt=(e[0].collision_date||e[0].dtp_date||"")+"",bt=(e[0].dtvp||"")+"",kt=e[0].pog+"",xt=e[0].ran+"",jt=e[6],Ct=[];for(let t=0;t<jt.length;t+=1)Ct[t]=Se($e(e,jt,t));let Lt=e[0].spog&&He(e),wt=e[0].s_pch&&Ne(e),zt=e[0].osv&&Be(e),Dt=e[0].ndu&&Ie(e),Ft=e[0].dps_plk||[],Tt=[];for(let t=0;t<Ft.length;t+=1)Tt[t]=Ge(Me(e,Ft,t));let Et=e[0].event_list||[],Ot=[];for(let t=0;t<Et.length;t+=1)Ot[t]=Ue(Oe(e,Et,t));return{c(){t=E("div"),n=E("div"),l=E("b"),s=O(pt),o=M(),r=E("div"),i=E("table"),a=E("tbody"),c=E("tr"),p=E("td"),p.textContent="ID:",d=M(),u=E("td"),_=O(dt),h=M(),v=E("tr"),f=E("td"),f.textContent="Адрес:",m=M(),g=E("td"),b=O(ut),k=M(),x=O(_t),j=M(),C=E("tr"),L=E("td"),L.textContent="Населенный пункт:",w=M(),q=E("td"),P=O(ht),H=M(),B=E("tr"),I=E("td"),I.textContent="Пикетаж:",G=M(),U=E("td"),A=E("b"),R=O(vt),Z=O(" км. "),Y=E("b"),V=O(ft),W=O(" м."),K=M(),J=E("tr"),X=E("td"),X.textContent="Координаты:",Q=M(),ee=E("td"),te=O(mt),ne=M(),le=O(gt),se=M(),oe=E("span"),re=M(),ie=E("tr"),ae=E("td"),ae.textContent="Дата/время:",ce=M(),pe=E("td"),de=O(yt),ue=M(),_e=E("tr"),he=E("td"),he.textContent="Вид ДТП:",ve=M(),fe=E("td"),me=O(bt),ge=M(),ye=E("tr"),be=E("td"),be.textContent="Нарушения:",ke=M(),xe=E("td"),je=E("ul");for(let e=0;e<Ct.length;e+=1)Ct[e].c();Ce=M(),Le=E("tr"),we=E("td"),we.textContent="Условия:",ze=M(),De=E("td"),Lt&&Lt.c(),Fe=M(),wt&&wt.c(),Te=M(),zt&&zt.c(),Ee=M(),Dt&&Dt.c(),qe=M(),Pe=E("tr"),Ae=E("td"),Ae.textContent="Количество погибших/раненых:",Re=M(),Ze=E("td"),Ye=E("b"),Ve=O(kt),We=O("/"),Ke=O(xt),Je=M(),Xe=E("tr"),Qe=E("td"),et=E("div"),tt=M(),nt=E("ul");for(let e=0;e<Tt.length;e+=1)Tt[e].c();lt=M(),st=E("tr"),ot=E("td"),rt=E("div"),it=M(),at=E("ul");for(let e=0;e<Ot.length;e+=1)Ot[e].c();S(n,"class","pLine"),S(p,"class","first svelte-bxm1yk"),S(f,"class","first svelte-bxm1yk"),S(L,"class","first svelte-bxm1yk"),S(I,"class","first svelte-bxm1yk"),S(X,"class","first svelte-bxm1yk"),S(oe,"title","Скопировать в буфер обмена"),S(oe,"class","leaflet-gmx-icon-copy"),S(ae,"class","first svelte-bxm1yk"),S(he,"class","first svelte-bxm1yk"),S(be,"class","first svelte-bxm1yk"),S(we,"class","first svelte-bxm1yk"),S(Ae,"class","first svelte-bxm1yk"),S(et,"class","win leaflet-popup-content-wrapper  svelte-bxm1yk"),S(Qe,"class","first svelte-bxm1yk"),S(Qe,"colspan","2"),S(rt,"class","win leaflet-popup-content-wrapper  svelte-bxm1yk"),S(ot,"class","first svelte-bxm1yk"),S(ot,"colspan","2"),S(i,"class","table"),S(r,"class","featureCont"),S(t,"class","mvsPopup svelte-bxm1yk")},m(y,F,T){D(y,t,F),z(t,n),z(n,l),z(l,s),z(t,o),z(t,r),z(r,i),z(i,a),z(a,c),z(c,p),z(c,d),z(c,u),z(u,_),z(a,h),z(a,v),z(v,f),z(v,m),z(v,g),z(g,b),z(g,k),z(g,x),z(a,j),z(a,C),z(C,L),z(C,w),z(C,q),z(q,P),z(a,H),z(a,B),z(B,I),z(B,G),z(B,U),z(U,A),z(A,R),z(U,Z),z(U,Y),z(Y,V),z(U,W),z(a,K),z(a,J),z(J,X),z(J,Q),z(J,ee),z(ee,te),z(ee,ne),z(ee,le),z(ee,se),z(ee,oe),z(a,re),z(a,ie),z(ie,ae),z(ie,ce),z(ie,pe),z(pe,de),z(a,ue),z(a,_e),z(_e,he),z(_e,ve),z(_e,fe),z(fe,me),z(a,ge),z(a,ye),z(ye,be),z(ye,ke),z(ye,xe),z(xe,je);for(let e=0;e<Ct.length;e+=1)Ct[e].m(je,null);z(a,Ce),z(a,Le),z(Le,we),z(Le,ze),z(Le,De),Lt&&Lt.m(De,null),z(De,Fe),wt&&wt.m(De,null),z(De,Te),zt&&zt.m(De,null),z(De,Ee),Dt&&Dt.m(De,null),z(a,qe),z(a,Pe),z(Pe,Ae),z(Pe,Re),z(Pe,Ze),z(Ze,Ye),z(Ye,Ve),z(Ye,We),z(Ye,Ke),z(a,Je),z(a,Xe),z(Xe,Qe),z(Qe,et),e[10](et),z(Qe,tt),z(Qe,nt);for(let e=0;e<Tt.length;e+=1)Tt[e].m(nt,null);z(a,lt),z(a,st),z(st,ot),z(ot,rt),e[11](rt),z(ot,it),z(ot,at);for(let e=0;e<Ot.length;e+=1)Ot[e].m(at,null);T&&ct(),ct=$(oe,"click",e[5])},p(e,[t]){if(1&t&&pt!==(pt=(e[0].name||e[0].dtvp||"")+"")&&N(s,pt),1&t&&dt!==(dt=(e[0].sid||e[0].id_stat||e[0].id_skpdi||"")+"")&&N(_,dt),1&t&&ut!==(ut=(e[0].district||"")+"")&&N(b,ut),1&t&&_t!==(_t=(e[0].dor||"")+"")&&N(x,_t),1&t&&ht!==(ht=(e[0].name_city||"вне населенного пункта")+"")&&N(P,ht),1&t&&vt!==(vt=(e[0].km||0)+"")&&N(R,vt),1&t&&ft!==(ft=(e[0].m||0)+"")&&N(V,ft),1&t&&mt!==(mt=e[0].lat+"")&&N(te,mt),1&t&&gt!==(gt=e[0].lon+"")&&N(le,gt),1&t&&yt!==(yt=(e[0].collision_date||e[0].dtp_date||"")+"")&&N(de,yt),1&t&&bt!==(bt=(e[0].dtvp||"")+"")&&N(me,bt),64&t){let n;for(jt=e[6],n=0;n<jt.length;n+=1){const l=$e(e,jt,n);Ct[n]?Ct[n].p(l,t):(Ct[n]=Se(l),Ct[n].c(),Ct[n].m(je,null))}for(;n<Ct.length;n+=1)Ct[n].d(1);Ct.length=jt.length}if(e[0].spog?Lt?Lt.p(e,t):(Lt=He(e),Lt.c(),Lt.m(De,Fe)):Lt&&(Lt.d(1),Lt=null),e[0].s_pch?wt?wt.p(e,t):(wt=Ne(e),wt.c(),wt.m(De,Te)):wt&&(wt.d(1),wt=null),e[0].osv?zt?zt.p(e,t):(zt=Be(e),zt.c(),zt.m(De,Ee)):zt&&(zt.d(1),zt=null),e[0].ndu?Dt?Dt.p(e,t):(Dt=Ie(e),Dt.c(),Dt.m(De,null)):Dt&&(Dt.d(1),Dt=null),1&t&&kt!==(kt=e[0].pog+"")&&N(Ve,kt),1&t&&xt!==(xt=e[0].ran+"")&&N(Ke,xt),17&t){let n;for(Ft=e[0].dps_plk||[],n=0;n<Ft.length;n+=1){const l=Me(e,Ft,n);Tt[n]?Tt[n].p(l,t):(Tt[n]=Ge(l),Tt[n].c(),Tt[n].m(nt,null))}for(;n<Tt.length;n+=1)Tt[n].d(1);Tt.length=Ft.length}if(9&t){let n;for(Et=e[0].event_list||[],n=0;n<Et.length;n+=1){const l=Oe(e,Et,n);Ot[n]?Ot[n].p(l,t):(Ot[n]=Ue(l),Ot[n].c(),Ot[n].m(at,null))}for(;n<Ot.length;n+=1)Ot[n].d(1);Ot.length=Et.length}},i:y,o:y,d(n){n&&F(t),T(Ct,n),Lt&&Lt.d(),wt&&wt.d(),zt&&zt.d(),Dt&&Dt.d(),e[10](null),T(Tt,n),e[11](null),T(Ot,n),ct()}}}function Re(e,t,n){let l,s,o,{showModal:r=!1}=t,{prp:i}=t,a=i.skpdiFiles?"":"disabled";V(()=>{r&&(l=new Le({target:document.body,props:{data:i.skpdiFiles}}),l.$on("close",e=>{l.$destroy(),n(7,r=!1)}))});const c=(i.tsInfo||[]).map(e=>{let t=e.ts_uch||[];return{ts:"Осталось на месте ДТП"!==e.ts?e.ts:"",arr:t.map(e=>({k_uch:e.k_uch||"",npdd:"Нет нарушений"!==e.npdd?e.npdd:"",sop_npdd:"Нет нарушений"!==e.sop_npdd?e.sop_npdd:""}))}});return e.$set=e=>{"showModal"in e&&n(7,r=e.showModal),"prp"in e&&n(0,i=e.prp)},[i,s,o,e=>{let t=e.target.value;n(2,o.innerHTML="",o),fetch("https://dtp.mvs.group/scripts/events_dev/get_event_id_"+t+".txt",{}).then(e=>e.json()).then(e=>{new Ee({target:o,props:{prp:e[0]}})})},e=>{let t=e.target.value;console.log("showBat",e.target.value),n(1,s.innerHTML="",s),fetch("https://dtp.mvs.group/scripts/regiments_dev/get_plk_id"+t+".txt",{}).then(e=>e.json()).then(e=>{new De({target:s,props:{prp:e[0]}})})},e=>{navigator.clipboard.writeText(e.target.parentNode.textContent).catch(e=>{console.log("Something went wrong",e)})},c,r,l,a,function(e){J[e?"unshift":"push"](()=>{n(1,s=e)})},function(e){J[e?"unshift":"push"](()=>{n(2,o=e)})}]}class Ze extends ge{constructor(e){super(),me(this,e,Re,Ae,C,{showModal:7,prp:0})}}const Ye=window.L,Ve=Ye.popup();let We;const Ke=Ye.featureGroup([]);function Je(e,t,n){const l=e.slice();return l[9]=t[n],l}function Xe(e,t,n){const l=e.slice();return l[12]=t[n],l}function Qe(e,t,n){const l=e.slice();return l[12]=t[n],l}function et(e){let t,n=e[1].collisionTypes,l=[];for(let t=0;t<n.length;t+=1)l[t]=tt(Qe(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=q()},m(e,n){for(let t=0;t<l.length;t+=1)l[t].m(e,n);D(e,t,n)},p(e,s){if(2&s){let o;for(n=e[1].collisionTypes,o=0;o<n.length;o+=1){const r=Qe(e,n,o);l[o]?l[o].p(r,s):(l[o]=tt(r),l[o].c(),l[o].m(t.parentNode,t))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(e){T(l,e),e&&F(t)}}}function tt(e){let t,n,l=(e[12].collisionType||"")+"";return{c(){t=E("li"),n=O(l)},m(e,l){D(e,t,l),z(t,n)},p(e,t){2&t&&l!==(l=(e[12].collisionType||"")+"")&&N(n,l)},d(e){e&&F(t)}}}function nt(e){let t,n=e[1].uchs,l=[];for(let t=0;t<n.length;t+=1)l[t]=lt(Xe(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=q()},m(e,n){for(let t=0;t<l.length;t+=1)l[t].m(e,n);D(e,t,n)},p(e,s){if(2&s){let o;for(n=e[1].uchs,o=0;o<n.length;o+=1){const r=Xe(e,n,o);l[o]?l[o].p(r,s):(l[o]=lt(r),l[o].c(),l[o].m(t.parentNode,t))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(e){T(l,e),e&&F(t)}}}function lt(e){let t,n,l,s,o,r,i,a,c=(e[12].collisionPartyCategory||"")+"",p=(e[12].collisionPartyCond||"")+"";return{c(){t=E("li"),n=O(c),l=M(),s=E("b"),o=E("i"),r=O("("),i=O(p),a=O(")")},m(e,c){D(e,t,c),z(t,n),z(t,l),z(t,s),z(s,o),z(o,r),z(o,i),z(o,a)},p(e,t){2&t&&c!==(c=(e[12].collisionPartyCategory||"")+"")&&N(n,c),2&t&&p!==(p=(e[12].collisionPartyCond||"")+"")&&N(i,p)},d(e){e&&F(t)}}}function st(e){let t,n,l,s;return{c(){t=E("li"),n=O("Мероприятие"),S(t,"class","link svelte-vdxfpj"),t.value=l=e[9]},m(l,o,r){D(l,t,o),z(t,n),r&&s(),s=$(t,"click",e[4])},p(e,n){2&n&&l!==(l=e[9])&&(t.value=l)},d(e){e&&F(t),s()}}}function ot(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,b,k,j,C,L,w,q,P,H,B,I,G,U,A,R,Z,Y,V,W,K,J,X,Q,ee,te,ne,le,se,oe,re,ie,ae,ce,pe,de,ue,_e,he,ve,fe,me,ge,ye,be,ke,xe,je,Ce,Le,we,ze,De,Fe,Te,Ee,Oe,Me,qe,$e,Pe=(e[1].name||e[1].dtvp||"")+"",Se=(e[1].id||e[1].id_stat||e[1].id_skpdi||"")+"",He=(e[1].km||0)+"",Ne=(e[1].m||0)+"",Be=(e[1].name_city||"вне населенного пункта")+"",Ie=e[1].lat+"",Ge=e[1].lon+"",Ue=(e[1].collision_date||e[1].dtp_date||"")+"",Ae=(e[1].collision_context||e[1].dtp_date||"")+"",Re=e[1].collisionTypes&&e[1].collisionTypes.length&&et(e),Ze=e[1].uchs&&e[1].uchs.length&&nt(e),Ye=e[1].event_list||[],Ve=[];for(let t=0;t<Ye.length;t+=1)Ve[t]=st(Je(e,Ye,t));return{c(){t=E("div"),n=E("div"),l=E("b"),s=O(Pe),o=M(),r=E("div"),i=E("table"),a=E("tbody"),c=E("tr"),p=E("td"),p.textContent="ID:",d=M(),u=E("td"),_=O(Se),h=M(),v=E("tr"),f=E("td"),f.textContent="Пикетаж:",m=M(),g=E("td"),b=E("b"),k=O(He),j=O(" км. "),C=E("b"),L=O(Ne),w=O(" м."),q=M(),P=E("tr"),H=E("td"),H.textContent="Населенный пункт:",B=M(),I=E("td"),G=O(Be),U=M(),A=E("tr"),R=E("td"),R.textContent="Координаты:",Z=M(),Y=E("td"),V=O(Ie),W=M(),K=O(Ge),J=M(),X=E("span"),Q=M(),ee=E("tr"),te=E("td"),te.textContent="Дата/время:",ne=M(),le=E("td"),se=O(Ue),oe=M(),re=E("tr"),ie=E("td"),ae=E("div"),ae.textContent="Условия ДТП:",ce=M(),pe=E("div"),de=O(Ae),ue=M(),_e=E("tr"),he=E("td"),he.textContent="Нарушения:",ve=M(),fe=E("td"),me=E("ul"),Re&&Re.c(),ge=M(),ye=E("tr"),be=E("td"),be.textContent="Участники:",ke=M(),xe=E("td"),je=E("ul"),Ze&&Ze.c(),Ce=M(),Le=E("tr"),we=E("td"),ze=E("div"),De=M(),Fe=E("ul");for(let e=0;e<Ve.length;e+=1)Ve[e].c();Te=M(),Ee=E("tr"),Oe=E("td"),Me=E("button"),qe=O("Фото и схемы"),S(n,"class","pLine"),S(p,"class","first"),S(f,"class","first"),S(H,"class","first"),S(R,"class","first"),S(X,"title","Скопировать в буфер обмена"),S(X,"class","leaflet-gmx-icon-copy"),S(te,"class","first"),S(ae,"class","first"),S(ie,"colspan","2"),S(he,"class","first"),S(be,"class","first"),S(ze,"class","win leaflet-popup-content-wrapper  svelte-vdxfpj"),S(we,"class","first"),S(we,"colspan","2"),S(Me,"class","primary svelte-vdxfpj"),Me.disabled=e[2],S(Oe,"class","center"),S(Oe,"colspan","2"),S(i,"class","table"),S(r,"class","featureCont"),S(t,"class","mvsPopup")},m(y,F,T){D(y,t,F),z(t,n),z(n,l),z(l,s),z(t,o),z(t,r),z(r,i),z(i,a),z(a,c),z(c,p),z(c,d),z(c,u),z(u,_),z(a,h),z(a,v),z(v,f),z(v,m),z(v,g),z(g,b),z(b,k),z(g,j),z(g,C),z(C,L),z(g,w),z(a,q),z(a,P),z(P,H),z(P,B),z(P,I),z(I,G),z(a,U),z(a,A),z(A,R),z(A,Z),z(A,Y),z(Y,V),z(Y,W),z(Y,K),z(Y,J),z(Y,X),z(a,Q),z(a,ee),z(ee,te),z(ee,ne),z(ee,le),z(le,se),z(a,oe),z(a,re),z(re,ie),z(ie,ae),z(ie,ce),z(ie,pe),z(pe,de),z(a,ue),z(a,_e),z(_e,he),z(_e,ve),z(_e,fe),z(fe,me),Re&&Re.m(me,null),z(a,ge),z(a,ye),z(ye,be),z(ye,ke),z(ye,xe),z(xe,je),Ze&&Ze.m(je,null),z(a,Ce),z(a,Le),z(Le,we),z(we,ze),e[7](ze),z(we,De),z(we,Fe);for(let e=0;e<Ve.length;e+=1)Ve[e].m(Fe,null);z(a,Te),z(a,Ee),z(Ee,Oe),z(Oe,Me),z(Me,qe),T&&x($e),$e=[$(X,"click",e[5]),$(Me,"click",e[8])]},p(e,[t]){if(2&t&&Pe!==(Pe=(e[1].name||e[1].dtvp||"")+"")&&N(s,Pe),2&t&&Se!==(Se=(e[1].id||e[1].id_stat||e[1].id_skpdi||"")+"")&&N(_,Se),2&t&&He!==(He=(e[1].km||0)+"")&&N(k,He),2&t&&Ne!==(Ne=(e[1].m||0)+"")&&N(L,Ne),2&t&&Be!==(Be=(e[1].name_city||"вне населенного пункта")+"")&&N(G,Be),2&t&&Ie!==(Ie=e[1].lat+"")&&N(V,Ie),2&t&&Ge!==(Ge=e[1].lon+"")&&N(K,Ge),2&t&&Ue!==(Ue=(e[1].collision_date||e[1].dtp_date||"")+"")&&N(se,Ue),2&t&&Ae!==(Ae=(e[1].collision_context||e[1].dtp_date||"")+"")&&N(de,Ae),e[1].collisionTypes&&e[1].collisionTypes.length?Re?Re.p(e,t):(Re=et(e),Re.c(),Re.m(me,null)):Re&&(Re.d(1),Re=null),e[1].uchs&&e[1].uchs.length?Ze?Ze.p(e,t):(Ze=nt(e),Ze.c(),Ze.m(je,null)):Ze&&(Ze.d(1),Ze=null),18&t){let n;for(Ye=e[1].event_list||[],n=0;n<Ye.length;n+=1){const l=Je(e,Ye,n);Ve[n]?Ve[n].p(l,t):(Ve[n]=st(l),Ve[n].c(),Ve[n].m(Fe,null))}for(;n<Ve.length;n+=1)Ve[n].d(1);Ve.length=Ye.length}4&t&&(Me.disabled=e[2])},i:y,o:y,d(n){n&&F(t),Re&&Re.d(),Ze&&Ze.d(),e[7](null),T(Ve,n),x($e)}}}function rt(e,t,n){let l,s,{showModal:o=!1}=t,{prp:r}=t,i=r.files&&r.files.length?"":"disabled";V(()=>{n(2,i=r.files&&r.files.length?"":"disabled"),o&&(l=new Le({target:document.body,props:{data:r.files}}),l.$on("close",e=>{l.$destroy(),n(0,o=!1)}))});return e.$set=e=>{"showModal"in e&&n(0,o=e.showModal),"prp"in e&&n(1,r=e.prp)},[o,r,i,s,e=>{let t=e.target.value;n(3,s.innerHTML="",s),fetch("https://dtp.mvs.group/scripts/events_dev/get_event_id_"+t+".txt",{}).then(e=>e.json()).then(e=>{new Ee({target:s,props:{prp:e[0]}})})},e=>{navigator.clipboard.writeText(e.target.parentNode.textContent).catch(e=>{console.log("Something went wrong",e)})},l,function(e){J[e?"unshift":"push"](()=>{n(3,s=e)})},()=>n(0,o=!0)]}Ke._needHeat={radius:19,blur:11.26,minOpacity:.34},Ke.checkZoom=e=>{Object.keys(Ke._layers).length?e<12&&Ke.setFilter(We):e>11&&Ke.setFilter(We)},Ke.setFilter=e=>{if(!Ke._map)return;Ke.clearLayers(),We=e||[];let t=[],n=[];Ke._group&&Ke._map&&(Ke._group.getLayers().forEach(e=>{let l=e.options.props,s=0;We.forEach(e=>{"collision_type"===e.type?(""===e.zn[0]||e.zn.filter(e=>e===l.collision_type).length)&&s++:"evnt"===e.type?l.event?e.zn.ev1&&s++:e.zn.ev0&&s++:"dps"===e.type?l.dps?e.zn.Dps1&&s++:e.zn.Dps0&&s++:"id_dtp"===e.type?l.id==e.zn&&s++:"date"===e.type&&l.date>=e.zn[0]&&l.date<e.zn[1]&&s++}),s===We.length&&(t.push(e),n.push(e._latlng))}),Ke._needHeat?(Ke._map.addLayer(Ke._heat),Ke._heat.setLatLngs(n),Ke._heat.setOptions(Ke._needHeat),Ke._map._zoom>11&&Ke.addLayer(Ye.layerGroup(t))):(Ke.addLayer(Ye.layerGroup(t)),Ke._map.removeLayer(Ke._heat)))},Ke.on("remove",e=>{Ke._map.removeLayer(Ke._heat),Ke.clearLayers()}).on("add",e=>{Ke._heat=Ye.heatLayer([],{gradient:{.1:"blue",.4:"lime",1:"red"}}),We=[],fetch("https://dtp.mvs.group/scripts/index_dev.php?request=get_stat_gipdd",{}).then(e=>e.json()).then(e=>{let t={collision_type:{},iconType:{},event:{}},n=[],l=e.map(e=>{let l=e.iconType||0,s=!1,o="#2F4F4F";l&&(s=l%2==0,l>=1&&l<=6?o="#8B4513":7===l||8===l?o="#228B22":l>=9&&l<=14?o="#8B4513":15===l||16===l?o="#7B68EE":17!==l&&18!==l||(o="#2F4F4F")),220457693==e.id&&(e.dps=1),e.lat&&e.lon||(console.log("_______",e),e.lat=e.lon=0);let r=t.event[e.event];r?r++:r=1,t.event[e.event]=r;let i=t.collision_type[e.collision_type];i?i++:i=1,t.collision_type[e.collision_type]=i,t.iconType[e.collision_type]=l;let a=Ye.latLng(e.lat,e.lon,s?1:.5);return n.push(a),new g(a,{props:e,radius:6,stroke:s,fillColor:o}).bindPopup(Ve).on("popupopen",e=>{var t;t=e.target.options.props.id,fetch("https://dtp.mvs.group/scripts/dtp_dev/get_stat_gipdd_"+t+".txt",{}).then(e=>e.json()).then(e=>{let t=Ye.DomUtil.create("div");const n=new Ze({target:t,props:{prp:e}});Ve._svObj=n,Ve.setContent(t)})}).on("popupclose",e=>{e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)})});Ke.addLayer(Ke._heat),Ke._heat.setLatLngs(n),Ke._heat.setOptions(Ke._needHeat),Ke._opt=t,Ke._group=Ye.layerGroup(l),We?Ke.setFilter(We):Ke._map._zoom>11&&Ke.addLayer(Ke._group),Ke._refreshFilters()})});class it extends ge{constructor(e){super(),me(this,e,rt,ot,C,{showModal:0,prp:1})}}const at=window.L,ct=at.popup();let pt;const dt=at.featureGroup([]);function ut(e,t,n){const l=e.slice();return l[6]=t[n],l[8]=n,l}function _t(e){let t,n,l,s,o,r="gibdd"===e[6].type?"ГИБДД":"СКПДИ";return{c(){t=E("button"),n=O(r),S(t,"class",l=w(e[2]===e[8]?"current":"")+" svelte-txaali"),t.value=s=e[8]},m(l,s,r){D(l,t,s),z(t,n),r&&o(),o=$(t,"click",e[4])},p(e,s){1&s&&r!==(r="gibdd"===e[6].type?"ГИБДД":"СКПДИ")&&N(n,r),4&s&&l!==(l=w(e[2]===e[8]?"current":"")+" svelte-txaali")&&S(t,"class",l)},d(e){e&&F(t),o()}}}function ht(e){let t;const n=new it({props:{prp:e[3]}});return{c(){_e(n.$$.fragment)},m(e,l){he(n,e,l),t=!0},p(e,t){const l={};8&t&&(l.prp=e[3]),n.$set(l)},i(e){t||(de(n.$$.fragment,e),t=!0)},o(e){ue(n.$$.fragment,e),t=!1},d(e){ve(n,e)}}}function vt(e){let t;const n=new Ze({props:{prp:e[3]}});return{c(){_e(n.$$.fragment)},m(e,l){he(n,e,l),t=!0},p(e,t){const l={};8&t&&(l.prp=e[3]),n.$set(l)},i(e){t||(de(n.$$.fragment,e),t=!0)},o(e){ue(n.$$.fragment,e),t=!1},d(e){ve(n,e)}}}function ft(e){let t,n,l,s,o,r,i,a,c,p,d=e[0]._cur,u=[];for(let t=0;t<d.length;t+=1)u[t]=_t(ut(e,d,t));const _=[vt,ht],h=[];function v(e,t){return"gibdd"===e[0]._cur[e[2]].type?0:1}return i=v(e),a=h[i]=_[i](e),{c(){t=E("div"),n=E("div"),l=E("a"),l.textContent="×",s=M(),o=E("div");for(let e=0;e<u.length;e+=1)u[e].c();r=M(),a.c(),S(l,"class","leaflet-popup-close-button"),S(l,"href","#close"),S(n,"class","close"),S(o,"class","pLine"),S(t,"class","mvsPopup")},m(a,d,_){D(a,t,d),z(t,n),z(n,l),z(t,s),z(t,o);for(let e=0;e<u.length;e+=1)u[e].m(o,null);var v;z(t,r),h[i].m(t,null),c=!0,_&&p(),p=$(l,"click",(v=function(){j(e[1])&&e[1].apply(this,arguments)},function(e){return e.preventDefault(),v.call(this,e)}))},p(n,[l]){if(e=n,21&l){let t;for(d=e[0]._cur,t=0;t<d.length;t+=1){const n=ut(e,d,t);u[t]?u[t].p(n,l):(u[t]=_t(n),u[t].c(),u[t].m(o,null))}for(;t<u.length;t+=1)u[t].d(1);u.length=d.length}let s=i;i=v(e),i===s?h[i].p(e,l):(ce(),ue(h[s],1,1,()=>{h[s]=null}),pe(),a=h[i],a||(a=h[i]=_[i](e),a.c()),de(a,1),a.m(t,null))},i(e){c||(de(a),c=!0)},o(e){ue(a),c=!1},d(e){e&&F(t),T(u,e),h[i].d(),p()}}}function mt(e,t,n){let{prp:l}=t,{closeMe:s=(()=>{})}=t,o=0,r={};const i=e=>{let t=l._cur[e],s=t.type,o="https://dtp.mvs.group/scripts/index_dev.php?request=get_dtp_id&id="+t.id+"&type="+s;fetch(o,{}).then(e=>e.json()).then(e=>{n(3,r=e)})};return i(o),e.$set=e=>{"prp"in e&&n(0,l=e.prp),"closeMe"in e&&n(1,s=e.closeMe)},[l,s,o,r,e=>{let t=e.target,l=Number(t.value);o!==l&&(n(2,o=l),i(o))}]}dt._needHeat={radius:19,blur:11.26,minOpacity:.34},dt.checkZoom=e=>{Object.keys(dt._layers).length?e<12&&dt.setFilter(pt):e>11&&dt.setFilter(pt)},dt.setFilter=e=>{if(!dt._map)return;dt.clearLayers(),pt=e||[];let t=[],n=[];dt._group&&dt._map&&(dt._group.getLayers().forEach(e=>{let l=e.options.props,s=0;pt.forEach(e=>{"collision_type"===e.type?(""===e.zn[0]||e.zn.filter(e=>e===l.collision_type).length)&&s++:"evnt"===e.type?l.event?e.zn.ev1&&s++:e.zn.ev0&&s++:"id_dtp"===e.type?l.id==e.zn&&s++:"date"===e.type&&l.date>=e.zn[0]&&l.date<e.zn[1]&&s++}),s===pt.length&&(t.push(e),n.push(e._latlng))}),dt._needHeat?(dt._map.addLayer(dt._heat),dt._heat.setLatLngs(n),dt._heat.setOptions(dt._needHeat),dt._map._zoom>11&&dt.addLayer(at.layerGroup(t))):(dt.addLayer(at.layerGroup(t)),dt._map.removeLayer(dt._heat)))},dt.on("remove",()=>{dt._map.removeLayer(dt._heat),dt.clearLayers()}).on("add",e=>{dt._heat=at.heatLayer([]),pt=[],fetch("https://dtp.mvs.group/scripts/index_dev.php?request=get_skpdi",{}).then(e=>e.json()).then(e=>{let t={collision_type:{},iconType:{},event:{}},n=[],l=e.map(e=>{let l=e.iconType||0,s=!1,o="#2F4F4F";l&&(s=l%2==0,l>=1&&l<=6?o="#8B4513":7===l||8===l?o="#228B22":l>=9&&l<=14?o="#8B4513":15===l||16===l?o="#7B68EE":17!==l&&18!==l||(o="#2F4F4F")),e.lat&&e.lon||(console.log("_______",e),e.lat=e.lon=0);let r=t.event[e.event];r?r++:r=1,t.event[e.event]=r;let i=t.collision_type[e.collision_type];i?i++:i=1,t.collision_type[e.collision_type]=i,t.iconType[e.collision_type]=l;let a=at.latLng(e.lat,e.lon,s?1:.5);return n.push(a),new g(a,{props:e,radius:6,box:!0,stroke:s,fillColor:o}).bindPopup(ct).on("popupopen",e=>{var t;t=e.target.options.props.id,fetch("https://dtp.mvs.group/scripts/index_dev.php?request=get_dtp_id&id="+t+"&type=skpdi",{}).then(e=>e.json()).then(e=>{let t=at.DomUtil.create("div");const n=new it({target:t,props:{prp:e}});ct._svObj=n,ct.setContent(t)})}).on("popupclose",e=>{console.log("popupclose",e),e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)})});dt.addLayer(dt._heat),dt._heat.setLatLngs(n),dt._heat.setOptions(dt._needHeat),dt._opt=t,dt._group=at.layerGroup(l),pt?dt.setFilter(pt):dt.addLayer(dt._group),dt.checkZoom(dt._map._zoom),dt._refreshFilters()})});class gt extends ge{constructor(e){super(),me(this,e,mt,ft,C,{prp:0,closeMe:1})}}const yt=window.L,bt=yt.popup();let kt;const xt=yt.featureGroup([]);function jt(e,t,n){const l=e.slice();return l[190]=t[n],l}function Ct(e,t,n){const l=e.slice();return l[190]=t[n],l}function Lt(e,t,n){const l=e.slice();return l[190]=t[n],l}function wt(e,t,n){const l=e.slice();return l[190]=t[n],l}function zt(e,t,n){const l=e.slice();return l[190]=t[n],l}function Dt(e,t,n){const l=e.slice();return l[190]=t[n],l}function Ft(e,t,n){const l=e.slice();return l[205]=t[n],l}function Tt(e,t,n){const l=e.slice();return l[190]=t[n],l}function Et(e,t,n){const l=e.slice();return l[190]=t[n],l}function Ot(e,t,n){const l=e.slice();return l[190]=t[n],l}function Mt(e,t,n){const l=e.slice();return l[205]=t[n],l}function qt(e,t,n){const l=e.slice();return l[190]=t[n],l}function $t(e,t,n){const l=e.slice();return l[190]=t[n],l}function Pt(e,t,n){const l=e.slice();return l[190]=t[n],l}function St(e,t,n){const l=e.slice();return l[205]=t[n],l}function Ht(e,t,n){const l=e.slice();return l[190]=t[n],l}function Nt(e,t,n){const l=e.slice();return l[190]=t[n],l}function Bt(e,t,n){const l=e.slice();return l[190]=t[n],l}function It(e,t,n){const l=e.slice();return l[190]=t[n],l}function Gt(e,t,n){const l=e.slice();return l[190]=t[n],l}function Ut(e,t,n){const l=e.slice();return l[190]=t[n],l}function At(e,t,n){const l=e.slice();return l[190]=t[n],l}function Rt(e,t,n){const l=e.slice();return l[190]=t[n],l}function Zt(e,t,n){const l=e.slice();return l[190]=t[n],l}function Yt(e,t,n){const l=e.slice();return l[190]=t[n],l}function Vt(e,t,n){const l=e.slice();return l[190]=t[n],l}function Wt(e,t,n){const l=e.slice();return l[190]=t[n],l}function Kt(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,j,C,L,w,q,P,H,N,B,U,A,R,Z,Y,V,W,K,J,X,Q,ee,te,le,se=Object.keys(e[0]._opt.years).sort(),oe=[];for(let t=0;t<se.length;t+=1)oe[t]=Jt(Wt(e,se,t));let re=e[86],ie=[];for(let t=0;t<re.length;t+=1)ie[t]=Xt(Vt(e,re,t));return{c(){t=E("div"),t.innerHTML="Фильтры - <b>Предочаги по пикетажу</b>",n=M(),l=E("div"),s=E("div"),o=O("ID Очага: "),r=E("input"),i=M(),a=E("div"),c=O("ID ДТП: "),p=E("input"),d=M(),u=E("div"),_=E("fieldset"),h=E("legend"),h.textContent="Фильтрация по периодам:",v=M(),f=E("div"),m=E("input"),b=E("label"),b.textContent="Фильтрация по годам",k=M(),j=E("div");for(let e=0;e<oe.length;e+=1)oe[e].c();C=M(),L=E("div"),w=E("input"),P=E("label"),P.textContent="одного типа",H=M(),N=E("input"),U=E("label"),U.textContent="разного типа",A=M(),R=E("div"),Z=E("select"),Y=E("option"),Y.textContent=`\n\t\t\t\t\t\tВсе дороги (${e[86].reduce(e[140],0)})\n\t\t\t\t\t`;for(let e=0;e<ie.length;e+=1)ie[e].c();V=M(),W=E("div"),K=E("select"),J=E("option"),J.textContent=`(${e[85].stricken[0]||0}) Очаги все`,X=E("option"),X.textContent=`(${e[85].stricken[1]||0}) Только с погибшими`,Q=E("option"),Q.textContent=`(${e[85].stricken[2]||0}) Только с пострадавшими`,ee=E("option"),ee.textContent=`(${e[85].stricken[3]||0}) С пострадавшими или погибшими`,te=E("option"),te.textContent=`(${e[85].stricken[4]||0}) С пострадавшими и погибшими`,S(t,"class","pLine svelte-1jsovbn"),S(r,"type","text"),r.value=e[21],S(r,"class","svelte-1jsovbn"),S(s,"class","pLine svelte-1jsovbn"),S(p,"type","text"),p.value=e[16],S(p,"class","svelte-1jsovbn"),S(a,"class","pLine svelte-1jsovbn"),S(m,"type","radio"),m.__value=g=1,m.value=m.__value,m.checked=y=1===e[50],S(m,"id","hearths_period_type_Stat1"),S(m,"name","hearths_period_type_Stat"),S(m,"class","svelte-1jsovbn"),e[139][2].push(m),S(b,"for","hearths_period_type_Stat1"),S(b,"class","svelte-1jsovbn"),S(j,"class","pLine margin svelte-1jsovbn"),S(f,"class","pLine type svelte-1jsovbn"),S(u,"class","pLine nowrap svelte-1jsovbn"),S(w,"type","checkbox"),S(w,"id","ht_3"),w.checked=q=e[20].hearth3,S(w,"name","hearth3"),S(w,"class","svelte-1jsovbn"),S(P,"for","ht_3"),S(P,"class","svelte-1jsovbn"),S(N,"type","checkbox"),S(N,"id","ht_5"),N.checked=B=e[20].hearth5,S(N,"name","hearth5"),S(N,"class","svelte-1jsovbn"),S(U,"for","ht_5"),S(U,"class","svelte-1jsovbn"),S(L,"class","pLine svelte-1jsovbn"),Y.__value="",Y.value=Y.__value,S(Y,"class","svelte-1jsovbn"),S(Z,"class","multiple_icon_typeTmp svelte-1jsovbn"),Z.multiple=!0,void 0===e[19]&&ne(()=>e[141].call(Z)),S(R,"class","pLine svelte-1jsovbn"),J.__value="",J.value=J.__value,X.__value="1",X.value=X.__value,Q.__value="2",Q.value=Q.__value,ee.__value="3",ee.value=ee.__value,te.__value="4",te.value=te.__value,S(K,"name","stricken"),S(K,"class","svelte-1jsovbn"),void 0===e[36]&&ne(()=>e[142].call(K)),S(W,"class","pLine svelte-1jsovbn"),S(l,"class","filtersCont svelte-1jsovbn")},m(g,y,F){D(g,t,y),D(g,n,y),D(g,l,y),z(l,s),z(s,o),z(s,r),z(l,i),z(l,a),z(a,c),z(a,p),z(l,d),z(l,u),z(u,_),z(_,h),z(_,v),z(_,f),z(f,m),m.checked=m.__value===e[50],z(f,b),z(f,k),z(f,j);for(let e=0;e<oe.length;e+=1)oe[e].m(j,null);z(l,C),z(l,L),z(L,w),z(L,P),z(L,H),z(L,N),z(L,U),z(l,A),z(l,R),z(R,Z),z(Z,Y);for(let e=0;e<ie.length;e+=1)ie[e].m(Z,null);G(Z,e[19]),z(l,V),z(l,W),z(W,K),z(K,J),z(K,X),z(K,Q),z(K,ee),z(K,te),I(K,e[36]),F&&x(le),le=[$(r,"input",e[97]),$(p,"input",e[96]),$(m,"change",e[94]),$(m,"change",e[138]),$(w,"change",e[98]),$(N,"change",e[98]),$(Z,"change",e[141]),$(Z,"change",e[94]),$(K,"change",e[142]),$(K,"change",e[94])]},p(e,t){if(2097152&t[0]&&r.value!==e[21]&&(r.value=e[21]),65536&t[0]&&p.value!==e[16]&&(p.value=e[16]),524288&t[1]&&y!==(y=1===e[50])&&(m.checked=y),524288&t[1]&&(m.checked=m.__value===e[50]),1&t[0]|524352&t[1]|2&t[3]){let n;for(se=Object.keys(e[0]._opt.years).sort(),n=0;n<se.length;n+=1){const l=Wt(e,se,n);oe[n]?oe[n].p(l,t):(oe[n]=Jt(l),oe[n].c(),oe[n].m(j,null))}for(;n<oe.length;n+=1)oe[n].d(1);oe.length=se.length}if(1048576&t[0]&&q!==(q=e[20].hearth3)&&(w.checked=q),1048576&t[0]&&B!==(B=e[20].hearth5)&&(N.checked=B),25165824&t[2]){let n;for(re=e[86],n=0;n<re.length;n+=1){const l=Vt(e,re,n);ie[n]?ie[n].p(l,t):(ie[n]=Xt(l),ie[n].c(),ie[n].m(Z,null))}for(;n<ie.length;n+=1)ie[n].d(1);ie.length=re.length}524288&t[0]&&G(Z,e[19]),32&t[1]&&I(K,e[36])},d(s){s&&F(t),s&&F(n),s&&F(l),e[139][2].splice(e[139][2].indexOf(m),1),T(oe,s),T(ie,s),x(le)}}}function Jt(e){let t,n,l,s,o,r,i,a=e[190]+"";return{c(){t=E("input"),o=E("label"),r=O(a),S(t,"type","checkbox"),S(t,"id","hearths_year_Picket4"),t.checked=n=e[37][e[190]],t.disabled=l=2===e[50],S(t,"name",s=e[190]),S(t,"class","svelte-1jsovbn"),S(o,"for","hearths_year_Picket4"),S(o,"class","svelte-1jsovbn")},m(n,l,s){D(n,t,l),D(n,o,l),z(o,r),s&&i(),i=$(t,"change",e[94])},p(e,o){1&o[0]|64&o[1]&&n!==(n=e[37][e[190]])&&(t.checked=n),524288&o[1]&&l!==(l=2===e[50])&&(t.disabled=l),1&o[0]&&s!==(s=e[190])&&S(t,"name",s),1&o[0]&&a!==(a=e[190]+"")&&N(r,a)},d(e){e&&F(t),e&&F(o),i()}}}function Xt(e){let t,n,l,s,o,r,i,a,c=e[85].road[e[190]]+"",p=e[190]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[190],t.value=t.__value,S(t,"class",a="road_"+e[190]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function Qt(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,j,C,L,w,q,P,H,N,B,I,U,A,R,Z,Y,V,W,K,J,X,Q,ee,te,le,se,oe,re,ie,ae,ce=Object.keys(e[1]._opt.years).sort(),pe=[];for(let t=0;t<ce.length;t+=1)pe[t]=en(Yt(e,ce,t));let de=e[82],ue=[];for(let t=0;t<de.length;t+=1)ue[t]=tn(Zt(e,de,t));return{c(){t=E("div"),t.innerHTML="Фильтры - <b>Очаги с привязкой к городам</b>",n=M(),l=E("div"),s=E("div"),o=O("ID Очага: "),r=E("input"),i=M(),a=E("div"),c=O("ID ДТП: "),p=E("input"),d=M(),u=E("div"),_=E("fieldset"),h=E("legend"),h.textContent="Расположение очага:",v=M(),f=E("div"),m=E("div"),g=E("input"),b=E("label"),b.textContent="в населенном пункте",k=M(),j=E("input"),L=E("label"),L.textContent="вне населенного пункта",w=E("br"),q=M(),P=E("input"),N=E("label"),N.textContent="на границе населенного пункта",B=M(),I=E("div"),U=E("fieldset"),A=E("legend"),A.textContent="Фильтрация по годам:",R=M(),Z=E("div"),Y=E("div");for(let e=0;e<pe.length;e+=1)pe[e].c();V=M(),W=E("div"),K=E("input"),X=E("label"),X.textContent="одного типа",Q=M(),ee=E("input"),le=E("label"),le.textContent="разного типа",se=M(),oe=E("div"),re=E("select"),ie=E("option"),ie.textContent=`\n\t\t\t\t\t\tВсе дороги (${e[82].reduce(e[143],0)})\n\t\t\t\t\t`;for(let e=0;e<ue.length;e+=1)ue[e].c();S(t,"class","pLine svelte-1jsovbn"),S(r,"type","text"),r.value=e[21],S(r,"class","svelte-1jsovbn"),S(s,"class","pLine svelte-1jsovbn"),S(p,"type","text"),p.value=e[16],S(p,"class","svelte-1jsovbn"),S(a,"class","pLine svelte-1jsovbn"),S(g,"type","checkbox"),S(g,"id","city_1"),g.checked=y=e[34][1],S(g,"name","1"),S(g,"class","svelte-1jsovbn"),S(b,"for","city_1"),S(b,"class","svelte-1jsovbn"),S(j,"type","checkbox"),S(j,"id","city_0"),j.checked=C=e[34][0],S(j,"name","0"),S(j,"class","svelte-1jsovbn"),S(L,"for","city_0"),S(L,"class","svelte-1jsovbn"),S(P,"type","checkbox"),S(P,"id","city_2"),P.checked=H=e[34][2],S(P,"name","2"),S(P,"class","svelte-1jsovbn"),S(N,"for","city_2"),S(N,"class","svelte-1jsovbn"),S(m,"class","pLine margin svelte-1jsovbn"),S(f,"class","pLine type svelte-1jsovbn"),S(u,"class","pLine svelte-1jsovbn"),S(Y,"class","pLine margin svelte-1jsovbn"),S(Z,"class","pLine type svelte-1jsovbn"),S(I,"class","pLine nowrap svelte-1jsovbn"),S(K,"type","checkbox"),S(K,"id","ht_3"),K.checked=J=e[20].hearth3,S(K,"name","hearth3"),S(K,"class","svelte-1jsovbn"),S(X,"for","ht_3"),S(X,"class","svelte-1jsovbn"),S(ee,"type","checkbox"),S(ee,"id","ht_5"),ee.checked=te=e[20].hearth5,S(ee,"name","hearth5"),S(ee,"class","svelte-1jsovbn"),S(le,"for","ht_5"),S(le,"class","svelte-1jsovbn"),S(W,"class","pLine svelte-1jsovbn"),ie.__value="",ie.value=ie.__value,S(ie,"class","svelte-1jsovbn"),S(re,"class","multiple_icon_typeTmp svelte-1jsovbn"),re.multiple=!0,void 0===e[19]&&ne(()=>e[144].call(re)),S(oe,"class","pLine svelte-1jsovbn"),S(l,"class","filtersCont svelte-1jsovbn")},m(y,C,F){D(y,t,C),D(y,n,C),D(y,l,C),z(l,s),z(s,o),z(s,r),z(l,i),z(l,a),z(a,c),z(a,p),z(l,d),z(l,u),z(u,_),z(_,h),z(_,v),z(_,f),z(f,m),z(m,g),z(m,b),z(m,k),z(m,j),z(m,L),z(m,w),z(m,q),z(m,P),z(m,N),z(l,B),z(l,I),z(I,U),z(U,A),z(U,R),z(U,Z),z(Z,Y);for(let e=0;e<pe.length;e+=1)pe[e].m(Y,null);z(l,V),z(l,W),z(W,K),z(W,X),z(W,Q),z(W,ee),z(W,le),z(l,se),z(l,oe),z(oe,re),z(re,ie);for(let e=0;e<ue.length;e+=1)ue[e].m(re,null);G(re,e[19]),F&&x(ae),ae=[$(r,"input",e[97]),$(p,"input",e[96]),$(g,"change",e[95]),$(j,"change",e[95]),$(P,"change",e[95]),$(K,"change",e[98]),$(ee,"change",e[98]),$(re,"change",e[144]),$(re,"change",e[92])]},p(e,t){if(2097152&t[0]&&r.value!==e[21]&&(r.value=e[21]),65536&t[0]&&p.value!==e[16]&&(p.value=e[16]),8&t[1]&&y!==(y=e[34][1])&&(g.checked=y),8&t[1]&&C!==(C=e[34][0])&&(j.checked=C),8&t[1]&&H!==(H=e[34][2])&&(P.checked=H),2&t[0]|4&t[1]|1073741824&t[2]){let n;for(ce=Object.keys(e[1]._opt.years).sort(),n=0;n<ce.length;n+=1){const l=Yt(e,ce,n);pe[n]?pe[n].p(l,t):(pe[n]=en(l),pe[n].c(),pe[n].m(Y,null))}for(;n<pe.length;n+=1)pe[n].d(1);pe.length=ce.length}if(1048576&t[0]&&J!==(J=e[20].hearth3)&&(K.checked=J),1048576&t[0]&&te!==(te=e[20].hearth5)&&(ee.checked=te),1572864&t[2]){let n;for(de=e[82],n=0;n<de.length;n+=1){const l=Zt(e,de,n);ue[n]?ue[n].p(l,t):(ue[n]=tn(l),ue[n].c(),ue[n].m(re,null))}for(;n<ue.length;n+=1)ue[n].d(1);ue.length=de.length}524288&t[0]&&G(re,e[19])},d(e){e&&F(t),e&&F(n),e&&F(l),T(pe,e),T(ue,e),x(ae)}}}function en(e){let t,n,l,s,o,r,i=e[190]+"";return{c(){t=E("input"),s=E("label"),o=O(i),S(t,"type","checkbox"),S(t,"id","hearths_year_Settlements"),t.checked=n=e[33][e[190]],S(t,"name",l=e[190]),S(t,"class","svelte-1jsovbn"),S(s,"for","hearths_year_Settlements"),S(s,"class","svelte-1jsovbn")},m(n,l,i){D(n,t,l),D(n,s,l),z(s,o),i&&r(),r=$(t,"change",e[92])},p(e,s){2&s[0]|4&s[1]&&n!==(n=e[33][e[190]])&&(t.checked=n),2&s[0]&&l!==(l=e[190])&&S(t,"name",l),2&s[0]&&i!==(i=e[190]+"")&&N(o,i)},d(e){e&&F(t),e&&F(s),r()}}}function tn(e){let t,n,l,s,o,r,i,a,c=e[81].road[e[190]]+"",p=e[190]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[190],t.value=t.__value,S(t,"class",a="road_"+e[190]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function nn(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,j,C,L,w,q,P,H,N,B,I,U=Object.keys(e[2]._opt.years).sort(),A=[];for(let t=0;t<U.length;t+=1)A[t]=ln(Rt(e,U,t));let R=e[84],Z=[];for(let t=0;t<R.length;t+=1)Z[t]=sn(At(e,R,t));return{c(){t=E("div"),t.innerHTML="Фильтры - <b>ДТП Очаги(Picket)</b>",n=M(),l=E("div"),s=E("div"),o=O("ID Очага: "),r=E("input"),i=M(),a=E("div"),c=O("ID ДТП: "),p=E("input"),d=M(),u=E("div"),_=E("fieldset"),h=E("legend"),h.textContent="Фильтрация по годам:",v=M(),f=E("div"),m=E("div");for(let e=0;e<A.length;e+=1)A[e].c();g=M(),y=E("div"),b=E("input"),j=E("label"),j.textContent="одного типа",C=M(),L=E("input"),q=E("label"),q.textContent="разного типа",P=M(),H=E("div"),N=E("select"),B=E("option"),B.textContent=`\n\t\t\t\t\t\tВсе дороги (${e[84].reduce(e[145],0)})\n\t\t\t\t\t`;for(let e=0;e<Z.length;e+=1)Z[e].c();S(t,"class","pLine svelte-1jsovbn"),S(r,"type","text"),r.value=e[21],S(r,"class","svelte-1jsovbn"),S(s,"class","pLine svelte-1jsovbn"),S(p,"type","text"),p.value=e[16],S(p,"class","svelte-1jsovbn"),S(a,"class","pLine svelte-1jsovbn"),S(m,"class","pLine margin svelte-1jsovbn"),S(f,"class","pLine type svelte-1jsovbn"),S(u,"class","pLine nowrap svelte-1jsovbn"),S(b,"type","checkbox"),S(b,"id","ht_3"),b.checked=k=e[20].hearth3,S(b,"name","hearth3"),S(b,"class","svelte-1jsovbn"),S(j,"for","ht_3"),S(j,"class","svelte-1jsovbn"),S(L,"type","checkbox"),S(L,"id","ht_5"),L.checked=w=e[20].hearth5,S(L,"name","hearth5"),S(L,"class","svelte-1jsovbn"),S(q,"for","ht_5"),S(q,"class","svelte-1jsovbn"),S(y,"class","pLine svelte-1jsovbn"),B.__value="",B.value=B.__value,S(B,"class","svelte-1jsovbn"),S(N,"class","multiple_icon_typeTmp svelte-1jsovbn"),N.multiple=!0,void 0===e[19]&&ne(()=>e[146].call(N)),S(H,"class","pLine svelte-1jsovbn"),S(l,"class","filtersCont svelte-1jsovbn")},m(k,w,F){D(k,t,w),D(k,n,w),D(k,l,w),z(l,s),z(s,o),z(s,r),z(l,i),z(l,a),z(a,c),z(a,p),z(l,d),z(l,u),z(u,_),z(_,h),z(_,v),z(_,f),z(f,m);for(let e=0;e<A.length;e+=1)A[e].m(m,null);z(l,g),z(l,y),z(y,b),z(y,j),z(y,C),z(y,L),z(y,q),z(l,P),z(l,H),z(H,N),z(N,B);for(let e=0;e<Z.length;e+=1)Z[e].m(N,null);G(N,e[19]),F&&x(I),I=[$(r,"input",e[97]),$(p,"input",e[96]),$(b,"change",e[98]),$(L,"change",e[98]),$(N,"change",e[146]),$(N,"change",e[93])]},p(e,t){if(2097152&t[0]&&r.value!==e[21]&&(r.value=e[21]),65536&t[0]&&p.value!==e[16]&&(p.value=e[16]),4&t[0]|16&t[1]|1&t[3]){let n;for(U=Object.keys(e[2]._opt.years).sort(),n=0;n<U.length;n+=1){const l=Rt(e,U,n);A[n]?A[n].p(l,t):(A[n]=ln(l),A[n].c(),A[n].m(m,null))}for(;n<A.length;n+=1)A[n].d(1);A.length=U.length}if(1048576&t[0]&&k!==(k=e[20].hearth3)&&(b.checked=k),1048576&t[0]&&w!==(w=e[20].hearth5)&&(L.checked=w),6291456&t[2]){let n;for(R=e[84],n=0;n<R.length;n+=1){const l=At(e,R,n);Z[n]?Z[n].p(l,t):(Z[n]=sn(l),Z[n].c(),Z[n].m(N,null))}for(;n<Z.length;n+=1)Z[n].d(1);Z.length=R.length}524288&t[0]&&G(N,e[19])},d(e){e&&F(t),e&&F(n),e&&F(l),T(A,e),T(Z,e),x(I)}}}function ln(e){let t,n,l,s,o,r,i=e[190]+"";return{c(){t=E("input"),s=E("label"),o=O(i),S(t,"type","checkbox"),S(t,"id","hearths_year_Picket"),t.checked=n=e[35][e[190]],S(t,"name",l=e[190]),S(t,"class","svelte-1jsovbn"),S(s,"for","hearths_year_Picket"),S(s,"class","svelte-1jsovbn")},m(n,l,i){D(n,t,l),D(n,s,l),z(s,o),i&&r(),r=$(t,"change",e[93])},p(e,s){4&s[0]|16&s[1]&&n!==(n=e[35][e[190]])&&(t.checked=n),4&s[0]&&l!==(l=e[190])&&S(t,"name",l),4&s[0]&&i!==(i=e[190]+"")&&N(o,i)},d(e){e&&F(t),e&&F(s),r()}}}function sn(e){let t,n,l,s,o,r,i,a,c=e[83].road[e[190]]+"",p=e[190]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[190],t.value=t.__value,S(t,"class",a="road_"+e[190]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function on(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,j,C,L,w,q,P,H,N,B,U,A=Object.keys(e[3]._opt.years).sort(),R=[];for(let t=0;t<A.length;t+=1)R[t]=rn(Ut(e,A,t));let Z=e[80],Y=[];for(let t=0;t<Z.length;t+=1)Y[t]=an(Gt(e,Z,t));return{c(){t=E("div"),t.innerHTML="Фильтры - <b>ДТП Очаги (5)</b>",n=M(),l=E("div"),s=E("div"),o=O("ID ДТП: "),r=E("input"),i=M(),a=E("div"),c=E("fieldset"),p=E("legend"),p.textContent="Фильтрация по периодам:",d=M(),u=E("div"),_=E("input"),f=E("label"),f.textContent="Фильтрация по годам",m=M(),g=E("div");for(let e=0;e<R.length;e+=1)R[e].c();y=M(),b=E("div"),k=E("select"),j=E("option"),j.textContent=`\n\t\t\t\t\t\tВсе типы (${e[80].reduce(e[148],0)})\n\t\t\t\t\t`;for(let e=0;e<Y.length;e+=1)Y[e].c();C=M(),L=E("div"),w=E("select"),q=E("option"),q.textContent=`(${e[79].stricken[0]||0}) Очаги все`,P=E("option"),P.textContent=`(${e[79].stricken[1]||0}) Только с погибшими`,H=E("option"),H.textContent=`(${e[79].stricken[2]||0}) Только с пострадавшими`,N=E("option"),N.textContent=`(${e[79].stricken[3]||0}) С пострадавшими или погибшими`,B=E("option"),B.textContent=`(${e[79].stricken[4]||0}) С пострадавшими и погибшими`,S(t,"class","pLine svelte-1jsovbn"),S(r,"type","text"),r.value=e[16],S(r,"class","svelte-1jsovbn"),S(s,"class","pLine svelte-1jsovbn"),S(_,"type","radio"),_.__value=h=1,_.value=_.__value,_.checked=v=1===e[42],S(_,"id","hearths_period_type_51"),S(_,"name","hearths_period_type_5"),S(_,"class","svelte-1jsovbn"),e[139][4].push(_),S(f,"for","hearths_period_type_51"),S(f,"class","svelte-1jsovbn"),S(g,"class","pLine margin svelte-1jsovbn"),S(u,"class","pLine type svelte-1jsovbn"),S(a,"class","pLine nowrap svelte-1jsovbn"),j.__value="",j.value=j.__value,S(j,"class","svelte-1jsovbn"),S(k,"class","multiple_icon_typeTmp svelte-1jsovbn"),k.multiple=!0,void 0===e[41]&&ne(()=>e[149].call(k)),S(b,"class","pLine svelte-1jsovbn"),q.__value="",q.value=q.__value,P.__value="1",P.value=P.__value,H.__value="2",H.value=H.__value,N.__value="3",N.value=N.__value,B.__value="4",B.value=B.__value,S(w,"class","svelte-1jsovbn"),void 0===e[40]&&ne(()=>e[150].call(w)),S(L,"class","pLine svelte-1jsovbn"),S(l,"class","filtersCont svelte-1jsovbn")},m(h,v,F){D(h,t,v),D(h,n,v),D(h,l,v),z(l,s),z(s,o),z(s,r),z(l,i),z(l,a),z(a,c),z(c,p),z(c,d),z(c,u),z(u,_),_.checked=_.__value===e[42],z(u,f),z(u,m),z(u,g);for(let e=0;e<R.length;e+=1)R[e].m(g,null);z(l,y),z(l,b),z(b,k),z(k,j);for(let e=0;e<Y.length;e+=1)Y[e].m(k,null);G(k,e[41]),z(l,C),z(l,L),z(L,w),z(w,q),z(w,P),z(w,H),z(w,N),z(w,B),I(w,e[40]),F&&x(U),U=[$(r,"input",e[96]),$(_,"change",e[110]),$(_,"change",e[147]),$(k,"change",e[149]),$(k,"change",e[110]),$(w,"change",e[150]),$(w,"change",e[110])]},p(e,t){if(65536&t[0]&&r.value!==e[16]&&(r.value=e[16]),2048&t[1]&&v!==(v=1===e[42])&&(_.checked=v),2048&t[1]&&(_.checked=_.__value===e[42]),8&t[0]|6144&t[1]|131072&t[3]){let n;for(A=Object.keys(e[3]._opt.years).sort(),n=0;n<A.length;n+=1){const l=Ut(e,A,n);R[n]?R[n].p(l,t):(R[n]=rn(l),R[n].c(),R[n].m(g,null))}for(;n<R.length;n+=1)R[n].d(1);R.length=A.length}if(393216&t[2]){let n;for(Z=e[80],n=0;n<Z.length;n+=1){const l=Gt(e,Z,n);Y[n]?Y[n].p(l,t):(Y[n]=an(l),Y[n].c(),Y[n].m(k,null))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=Z.length}1024&t[1]&&G(k,e[41]),512&t[1]&&I(w,e[40])},d(s){s&&F(t),s&&F(n),s&&F(l),e[139][4].splice(e[139][4].indexOf(_),1),T(R,s),T(Y,s),x(U)}}}function rn(e){let t,n,l,s,o,r,i,a=e[190]+"";return{c(){t=E("input"),o=E("label"),r=O(a),S(t,"type","checkbox"),S(t,"id","hearths_year_5"),t.checked=n=e[43][e[190]],t.disabled=l=2===e[42],S(t,"name",s=e[190]),S(t,"class","svelte-1jsovbn"),S(o,"for","hearths_year_5"),S(o,"class","svelte-1jsovbn")},m(n,l,s){D(n,t,l),D(n,o,l),z(o,r),s&&i(),i=$(t,"change",e[110])},p(e,o){8&o[0]|4096&o[1]&&n!==(n=e[43][e[190]])&&(t.checked=n),2048&o[1]&&l!==(l=2===e[42])&&(t.disabled=l),8&o[0]&&s!==(s=e[190])&&S(t,"name",s),8&o[0]&&a!==(a=e[190]+"")&&N(r,a)},d(e){e&&F(t),e&&F(o),i()}}}function an(e){let t,n,l,s,o,r,i,a,c=e[79].str_icon_type[e[190]]+"",p=e[190]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[190],t.value=t.__value,S(t,"class",a="icon_type_"+e[79].iconType[e[190]]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function cn(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,j,C,L,w,q,P,H,N,B,U,A=Object.keys(e[4]._opt.years).sort(),R=[];for(let t=0;t<A.length;t+=1)R[t]=pn(It(e,A,t));let Z=e[78],Y=[];for(let t=0;t<Z.length;t+=1)Y[t]=dn(Bt(e,Z,t));return{c(){t=E("div"),t.innerHTML="Фильтры - <b>ДТП Очаги (3)</b>",n=M(),l=E("div"),s=E("div"),o=O("ID ДТП: "),r=E("input"),i=M(),a=E("div"),c=E("fieldset"),p=E("legend"),p.textContent="Фильтрация по периодам:",d=M(),u=E("div"),_=E("input"),f=E("label"),f.textContent="Фильтрация по годам",m=M(),g=E("div");for(let e=0;e<R.length;e+=1)R[e].c();y=M(),b=E("div"),k=E("select"),j=E("option"),j.textContent=`\n\t\t\t\t\t\tВсе типы (${e[78].reduce(e[152],0)})\n\t\t\t\t\t`;for(let e=0;e<Y.length;e+=1)Y[e].c();C=M(),L=E("div"),w=E("select"),q=E("option"),q.textContent=`(${e[77].stricken[0]||0}) Очаги все`,P=E("option"),P.textContent=`(${e[77].stricken[1]||0}) Только с погибшими`,H=E("option"),H.textContent=`(${e[77].stricken[2]||0}) Только с пострадавшими`,N=E("option"),N.textContent=`(${e[77].stricken[3]||0}) С пострадавшими или погибшими`,B=E("option"),B.textContent=`(${e[77].stricken[4]||0}) С пострадавшими и погибшими`,S(t,"class","pLine svelte-1jsovbn"),S(r,"type","text"),r.value=e[16],S(r,"class","svelte-1jsovbn"),S(s,"class","pLine svelte-1jsovbn"),S(_,"type","radio"),_.__value=h=1,_.value=_.__value,_.checked=v=1===e[46],S(_,"id","hearths_period_type_31"),S(_,"name","hearths_period_type_3"),S(_,"class","svelte-1jsovbn"),e[139][3].push(_),S(f,"for","hearths_period_type_31"),S(f,"class","svelte-1jsovbn"),S(g,"class","pLine margin svelte-1jsovbn"),S(u,"class","pLine type svelte-1jsovbn"),S(a,"class","pLine nowrap svelte-1jsovbn"),j.__value="",j.value=j.__value,S(j,"class","svelte-1jsovbn"),S(k,"class","multiple_icon_typeTmp svelte-1jsovbn"),k.multiple=!0,void 0===e[45]&&ne(()=>e[153].call(k)),S(b,"class","pLine svelte-1jsovbn"),q.__value="",q.value=q.__value,P.__value="1",P.value=P.__value,H.__value="2",H.value=H.__value,N.__value="3",N.value=N.__value,B.__value="4",B.value=B.__value,S(w,"class","svelte-1jsovbn"),void 0===e[44]&&ne(()=>e[154].call(w)),S(L,"class","pLine svelte-1jsovbn"),S(l,"class","filtersCont svelte-1jsovbn")},m(h,v,F){D(h,t,v),D(h,n,v),D(h,l,v),z(l,s),z(s,o),z(s,r),z(l,i),z(l,a),z(a,c),z(c,p),z(c,d),z(c,u),z(u,_),_.checked=_.__value===e[46],z(u,f),z(u,m),z(u,g);for(let e=0;e<R.length;e+=1)R[e].m(g,null);z(l,y),z(l,b),z(b,k),z(k,j);for(let e=0;e<Y.length;e+=1)Y[e].m(k,null);G(k,e[45]),z(l,C),z(l,L),z(L,w),z(w,q),z(w,P),z(w,H),z(w,N),z(w,B),I(w,e[44]),F&&x(U),U=[$(r,"input",e[96]),$(_,"change",e[111]),$(_,"change",e[151]),$(k,"change",e[153]),$(k,"change",e[111]),$(w,"change",e[154]),$(w,"change",e[111])]},p(e,t){if(65536&t[0]&&r.value!==e[16]&&(r.value=e[16]),32768&t[1]&&v!==(v=1===e[46])&&(_.checked=v),32768&t[1]&&(_.checked=_.__value===e[46]),16&t[0]|98304&t[1]|262144&t[3]){let n;for(A=Object.keys(e[4]._opt.years).sort(),n=0;n<A.length;n+=1){const l=It(e,A,n);R[n]?R[n].p(l,t):(R[n]=pn(l),R[n].c(),R[n].m(g,null))}for(;n<R.length;n+=1)R[n].d(1);R.length=A.length}if(98304&t[2]){let n;for(Z=e[78],n=0;n<Z.length;n+=1){const l=Bt(e,Z,n);Y[n]?Y[n].p(l,t):(Y[n]=dn(l),Y[n].c(),Y[n].m(k,null))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=Z.length}16384&t[1]&&G(k,e[45]),8192&t[1]&&I(w,e[44])},d(s){s&&F(t),s&&F(n),s&&F(l),e[139][3].splice(e[139][3].indexOf(_),1),T(R,s),T(Y,s),x(U)}}}function pn(e){let t,n,l,s,o,r,i,a=e[190]+"";return{c(){t=E("input"),o=E("label"),r=O(a),S(t,"type","checkbox"),S(t,"id","hearths_year_3"),t.checked=n=e[47][e[190]],t.disabled=l=2===e[46],S(t,"name",s=e[190]),S(t,"class","svelte-1jsovbn"),S(o,"for","hearths_year_3"),S(o,"class","svelte-1jsovbn")},m(n,l,s){D(n,t,l),D(n,o,l),z(o,r),s&&i(),i=$(t,"change",e[111])},p(e,o){16&o[0]|65536&o[1]&&n!==(n=e[47][e[190]])&&(t.checked=n),32768&o[1]&&l!==(l=2===e[46])&&(t.disabled=l),16&o[0]&&s!==(s=e[190])&&S(t,"name",s),16&o[0]&&a!==(a=e[190]+"")&&N(r,a)},d(e){e&&F(t),e&&F(o),i()}}}function dn(e){let t,n,l,s,o,r,i,a,c=e[77].str_icon_type[e[190]]+"",p=e[190]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[190],t.value=t.__value,S(t,"class",a="icon_type_"+e[77].iconType[e[190]]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function un(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,j,C,L,w,q,P,H,N,B,U,A,R,Z,Y,V,W,K,J=Object.keys(e[11]._opt.years).sort(),X=[];for(let t=0;t<J.length;t+=1)X[t]=_n(Nt(e,J,t));let Q=Object.keys(e[11]._opt.years).sort(),ee=[];for(let t=0;t<Q.length;t+=1)ee[t]=vn(Ht(e,Q,t));let te=e[76],le=[];for(let t=0;t<te.length;t+=1)le[t]=fn(Pt(e,te,t));return{c(){t=E("div"),t.innerHTML="Фильтры - <b>ДТП Очаги (Stat)</b>",n=M(),l=E("div"),s=E("div"),o=O("ID ДТП: "),r=E("input"),i=M(),a=E("div"),c=E("fieldset"),p=E("legend"),p.textContent="Фильтрация по периодам:",d=M(),u=E("div"),_=E("input"),f=E("label"),f.textContent="Фильтрация по годам",m=M(),g=E("div");for(let e=0;e<X.length;e+=1)X[e].c();y=M(),b=E("div"),k=E("input"),C=E("label"),C.textContent="Фильтрация по кварталам",L=M(),w=E("div");for(let e=0;e<ee.length;e+=1)ee[e].c();q=M(),P=E("div"),H=E("select"),N=E("option"),N.textContent=`\n\t\t\t\t\t\tВсе типы (${e[76].reduce(e[157],0)})\n\t\t\t\t\t`;for(let e=0;e<le.length;e+=1)le[e].c();B=M(),U=E("div"),A=E("select"),R=E("option"),R.textContent=`(${e[75].stricken[0]||0}) Очаги все`,Z=E("option"),Z.textContent=`(${e[75].stricken[1]||0}) Только с погибшими`,Y=E("option"),Y.textContent=`(${e[75].stricken[2]||0}) Только с пострадавшими`,V=E("option"),V.textContent=`(${e[75].stricken[3]||0}) С пострадавшими или погибшими`,W=E("option"),W.textContent=`(${e[75].stricken[4]||0}) С пострадавшими и погибшими`,S(t,"class","pLine svelte-1jsovbn"),S(r,"type","text"),r.value=e[16],S(r,"class","svelte-1jsovbn"),S(s,"class","pLine svelte-1jsovbn"),S(_,"type","radio"),_.__value=h=1,_.value=_.__value,_.checked=v=1===e[50],S(_,"id","hearths_period_type_Stat1"),S(_,"name","hearths_period_type_Stat"),S(_,"class","svelte-1jsovbn"),e[139][2].push(_),S(f,"for","hearths_period_type_Stat1"),S(f,"class","svelte-1jsovbn"),S(g,"class","pLine margin svelte-1jsovbn"),S(u,"class","pLine type svelte-1jsovbn"),S(k,"type","radio"),k.__value=j=2,k.value=k.__value,S(k,"id","hearths_period_type_Stat2"),S(k,"name","hearths_period_type_Stat"),S(k,"class","svelte-1jsovbn"),e[139][2].push(k),S(C,"for","hearths_period_type_Stat2"),S(C,"class","svelte-1jsovbn"),S(w,"class","pLine margin svelte-1jsovbn"),S(b,"class","pLine type svelte-1jsovbn"),S(a,"class","pLine nowrap svelte-1jsovbn"),N.__value="",N.value=N.__value,S(N,"class","svelte-1jsovbn"),S(H,"class","multiple_icon_typeTmp svelte-1jsovbn"),H.multiple=!0,void 0===e[49]&&ne(()=>e[158].call(H)),S(P,"class","pLine svelte-1jsovbn"),R.__value="",R.value=R.__value,Z.__value="1",Z.value=Z.__value,Y.__value="2",Y.value=Y.__value,V.__value="3",V.value=V.__value,W.__value="4",W.value=W.__value,S(A,"class","svelte-1jsovbn"),void 0===e[48]&&ne(()=>e[159].call(A)),S(U,"class","pLine svelte-1jsovbn"),S(l,"class","filtersCont svelte-1jsovbn")},m(h,v,j){D(h,t,v),D(h,n,v),D(h,l,v),z(l,s),z(s,o),z(s,r),z(l,i),z(l,a),z(a,c),z(c,p),z(c,d),z(c,u),z(u,_),_.checked=_.__value===e[50],z(u,f),z(u,m),z(u,g);for(let e=0;e<X.length;e+=1)X[e].m(g,null);z(c,y),z(c,b),z(b,k),k.checked=k.__value===e[50],z(b,C),z(b,L),z(b,w);for(let e=0;e<ee.length;e+=1)ee[e].m(w,null);z(l,q),z(l,P),z(P,H),z(H,N);for(let e=0;e<le.length;e+=1)le[e].m(H,null);G(H,e[49]),z(l,B),z(l,U),z(U,A),z(A,R),z(A,Z),z(A,Y),z(A,V),z(A,W),I(A,e[48]),j&&x(K),K=[$(r,"input",e[96]),$(_,"change",e[112]),$(_,"change",e[155]),$(k,"change",e[112]),$(k,"change",e[156]),$(H,"change",e[158]),$(H,"change",e[112]),$(A,"change",e[159]),$(A,"change",e[112])]},p(e,t){if(65536&t[0]&&r.value!==e[16]&&(r.value=e[16]),524288&t[1]&&v!==(v=1===e[50])&&(_.checked=v),524288&t[1]&&(_.checked=_.__value===e[50]),2048&t[0]|1572864&t[1]|524288&t[3]){let n;for(J=Object.keys(e[11]._opt.years).sort(),n=0;n<J.length;n+=1){const l=Nt(e,J,n);X[n]?X[n].p(l,t):(X[n]=_n(l),X[n].c(),X[n].m(g,null))}for(;n<X.length;n+=1)X[n].d(1);X.length=J.length}if(524288&t[1]&&(k.checked=k.__value===e[50]),2048&t[0]|2621440&t[1]|524288&t[3]){let n;for(Q=Object.keys(e[11]._opt.years).sort(),n=0;n<Q.length;n+=1){const l=Ht(e,Q,n);ee[n]?ee[n].p(l,t):(ee[n]=vn(l),ee[n].c(),ee[n].m(w,null))}for(;n<ee.length;n+=1)ee[n].d(1);ee.length=Q.length}if(24576&t[2]){let n;for(te=e[76],n=0;n<te.length;n+=1){const l=Pt(e,te,n);le[n]?le[n].p(l,t):(le[n]=fn(l),le[n].c(),le[n].m(H,null))}for(;n<le.length;n+=1)le[n].d(1);le.length=te.length}262144&t[1]&&G(H,e[49]),131072&t[1]&&I(A,e[48])},d(s){s&&F(t),s&&F(n),s&&F(l),e[139][2].splice(e[139][2].indexOf(_),1),T(X,s),e[139][2].splice(e[139][2].indexOf(k),1),T(ee,s),T(le,s),x(K)}}}function _n(e){let t,n,l,s,o,r,i,a=e[190]+"";return{c(){t=E("input"),o=E("label"),r=O(a),S(t,"type","checkbox"),S(t,"id","hearths_year_Stat"),t.checked=n=e[51][e[190]],t.disabled=l=2===e[50],S(t,"name",s=e[190]),S(t,"class","svelte-1jsovbn"),S(o,"for","hearths_year_Stat"),S(o,"class","svelte-1jsovbn")},m(n,l,s){D(n,t,l),D(n,o,l),z(o,r),s&&i(),i=$(t,"change",e[112])},p(e,o){2048&o[0]|1048576&o[1]&&n!==(n=e[51][e[190]])&&(t.checked=n),524288&o[1]&&l!==(l=2===e[50])&&(t.disabled=l),2048&o[0]&&s!==(s=e[190])&&S(t,"name",s),2048&o[0]&&a!==(a=e[190]+"")&&N(r,a)},d(e){e&&F(t),e&&F(o),i()}}}function hn(e){let t,n,l,s,o,r,i,a,c,p,d=e[205]+"",u=e[190]+"";return{c(){t=E("input"),o=E("label"),r=O(d),i=O(" кв. "),a=O(u),S(t,"type","checkbox"),S(t,"id","hearths_quarter_Stat"),t.checked=n=e[52][e[190]]&&e[52][e[190]][e[205]],t.disabled=l=1===e[50],S(t,"name",s=e[190]+"_"+e[205]),S(t,"class","svelte-1jsovbn"),S(o,"for",c="hearths_quarter_Stat_"+e[190]+"_"+e[205]),S(o,"class","svelte-1jsovbn")},m(n,l,s){D(n,t,l),D(n,o,l),z(o,r),z(o,i),z(o,a),s&&p(),p=$(t,"change",e[112])},p(e,i){2048&i[0]|2097152&i[1]&&n!==(n=e[52][e[190]]&&e[52][e[190]][e[205]])&&(t.checked=n),524288&i[1]&&l!==(l=1===e[50])&&(t.disabled=l),2048&i[0]&&s!==(s=e[190]+"_"+e[205])&&S(t,"name",s),2048&i[0]&&d!==(d=e[205]+"")&&N(r,d),2048&i[0]&&u!==(u=e[190]+"")&&N(a,u),2048&i[0]&&c!==(c="hearths_quarter_Stat_"+e[190]+"_"+e[205])&&S(o,"for",c)},d(e){e&&F(t),e&&F(o),p()}}}function vn(e){let t,n,l=Object.keys(e[11]._opt.years[e[190]]).sort(),s=[];for(let t=0;t<l.length;t+=1)s[t]=hn(St(e,l,t));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=M(),n=E("br")},m(e,l){for(let t=0;t<s.length;t+=1)s[t].m(e,l);D(e,t,l),D(e,n,l)},p(e,n){if(2048&n[0]|2621440&n[1]|524288&n[3]){let o;for(l=Object.keys(e[11]._opt.years[e[190]]).sort(),o=0;o<l.length;o+=1){const r=St(e,l,o);s[o]?s[o].p(r,n):(s[o]=hn(r),s[o].c(),s[o].m(t.parentNode,t))}for(;o<s.length;o+=1)s[o].d(1);s.length=l.length}},d(e){T(s,e),e&&F(t),e&&F(n)}}}function fn(e){let t,n,l,s,o,r,i,a,c=e[75].str_icon_type[e[190]]+"",p=e[190]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[190],t.value=t.__value,S(t,"class",a="icon_type_"+e[75].iconType[e[190]]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function mn(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,j,C,L,w,q,P,H,N,B,U,A,R,Z,Y,V,W,K,J=Object.keys(e[12]._opt.years).sort(),X=[];for(let t=0;t<J.length;t+=1)X[t]=gn($t(e,J,t));let Q=Object.keys(e[12]._opt.years).sort(),ee=[];for(let t=0;t<Q.length;t+=1)ee[t]=bn(qt(e,Q,t));let te=e[74],le=[];for(let t=0;t<te.length;t+=1)le[t]=kn(Ot(e,te,t));return{c(){t=E("div"),t.innerHTML="Фильтры - <b>ДТП Очаги (TMP)</b>",n=M(),l=E("div"),s=E("div"),o=O("ID ДТП: "),r=E("input"),i=M(),a=E("div"),c=E("fieldset"),p=E("legend"),p.textContent="Фильтрация по периодам:",d=M(),u=E("div"),_=E("input"),f=E("label"),f.textContent="Фильтрация по годам",m=M(),g=E("div");for(let e=0;e<X.length;e+=1)X[e].c();y=M(),b=E("div"),k=E("input"),C=E("label"),C.textContent="Фильтрация по кварталам",L=M(),w=E("div");for(let e=0;e<ee.length;e+=1)ee[e].c();q=M(),P=E("div"),H=E("select"),N=E("option"),N.textContent=`\n\t\t\t\t\t\tВсе типы (${e[74].reduce(e[162],0)})\n\t\t\t\t\t`;for(let e=0;e<le.length;e+=1)le[e].c();B=M(),U=E("div"),A=E("select"),R=E("option"),R.textContent=`(${e[73].stricken[0]||0}) Очаги все`,Z=E("option"),Z.textContent=`(${e[73].stricken[1]||0}) Только с погибшими`,Y=E("option"),Y.textContent=`(${e[73].stricken[2]||0}) Только с пострадавшими`,V=E("option"),V.textContent=`(${e[73].stricken[3]||0}) С пострадавшими или погибшими`,W=E("option"),W.textContent=`(${e[73].stricken[4]||0}) С пострадавшими и погибшими`,S(t,"class","pLine svelte-1jsovbn"),S(r,"type","text"),r.value=e[16],S(r,"class","svelte-1jsovbn"),S(s,"class","pLine svelte-1jsovbn"),S(_,"type","radio"),_.__value=h=1,_.value=_.__value,_.checked=v=1===e[55],S(_,"id","hearths_period_type_tmp1"),S(_,"name","hearths_period_type_tmp"),S(_,"class","svelte-1jsovbn"),e[139][1].push(_),S(f,"for","hearths_period_type_tmp1"),S(f,"class","svelte-1jsovbn"),S(g,"class","pLine margin svelte-1jsovbn"),S(u,"class","pLine type svelte-1jsovbn"),S(k,"type","radio"),k.__value=j=2,k.value=k.__value,S(k,"id","hearths_period_type_tmp2"),S(k,"name","hearths_period_type_tmp"),S(k,"class","svelte-1jsovbn"),e[139][1].push(k),S(C,"for","hearths_period_type_tmp2"),S(C,"class","svelte-1jsovbn"),S(w,"class","pLine margin svelte-1jsovbn"),S(b,"class","pLine type svelte-1jsovbn"),S(a,"class","pLine nowrap svelte-1jsovbn"),N.__value="",N.value=N.__value,S(N,"class","svelte-1jsovbn"),S(H,"class","multiple_icon_typeTmp svelte-1jsovbn"),H.multiple=!0,void 0===e[54]&&ne(()=>e[163].call(H)),S(P,"class","pLine svelte-1jsovbn"),R.__value="",R.value=R.__value,Z.__value="1",Z.value=Z.__value,Y.__value="2",Y.value=Y.__value,V.__value="3",V.value=V.__value,W.__value="4",W.value=W.__value,S(A,"class","svelte-1jsovbn"),void 0===e[53]&&ne(()=>e[164].call(A)),S(U,"class","pLine svelte-1jsovbn"),S(l,"class","filtersCont svelte-1jsovbn")},m(h,v,j){D(h,t,v),D(h,n,v),D(h,l,v),z(l,s),z(s,o),z(s,r),z(l,i),z(l,a),z(a,c),z(c,p),z(c,d),z(c,u),z(u,_),_.checked=_.__value===e[55],z(u,f),z(u,m),z(u,g);for(let e=0;e<X.length;e+=1)X[e].m(g,null);z(c,y),z(c,b),z(b,k),k.checked=k.__value===e[55],z(b,C),z(b,L),z(b,w);for(let e=0;e<ee.length;e+=1)ee[e].m(w,null);z(l,q),z(l,P),z(P,H),z(H,N);for(let e=0;e<le.length;e+=1)le[e].m(H,null);G(H,e[54]),z(l,B),z(l,U),z(U,A),z(A,R),z(A,Z),z(A,Y),z(A,V),z(A,W),I(A,e[53]),j&&x(K),K=[$(r,"input",e[96]),$(_,"change",e[113]),$(_,"change",e[160]),$(k,"change",e[113]),$(k,"change",e[161]),$(H,"change",e[163]),$(H,"change",e[113]),$(A,"change",e[164]),$(A,"change",e[113])]},p(e,t){if(65536&t[0]&&r.value!==e[16]&&(r.value=e[16]),16777216&t[1]&&v!==(v=1===e[55])&&(_.checked=v),16777216&t[1]&&(_.checked=_.__value===e[55]),4096&t[0]|50331648&t[1]|1048576&t[3]){let n;for(J=Object.keys(e[12]._opt.years).sort(),n=0;n<J.length;n+=1){const l=$t(e,J,n);X[n]?X[n].p(l,t):(X[n]=gn(l),X[n].c(),X[n].m(g,null))}for(;n<X.length;n+=1)X[n].d(1);X.length=J.length}if(16777216&t[1]&&(k.checked=k.__value===e[55]),4096&t[0]|83886080&t[1]|1048576&t[3]){let n;for(Q=Object.keys(e[12]._opt.years).sort(),n=0;n<Q.length;n+=1){const l=qt(e,Q,n);ee[n]?ee[n].p(l,t):(ee[n]=bn(l),ee[n].c(),ee[n].m(w,null))}for(;n<ee.length;n+=1)ee[n].d(1);ee.length=Q.length}if(6144&t[2]){let n;for(te=e[74],n=0;n<te.length;n+=1){const l=Ot(e,te,n);le[n]?le[n].p(l,t):(le[n]=kn(l),le[n].c(),le[n].m(H,null))}for(;n<le.length;n+=1)le[n].d(1);le.length=te.length}8388608&t[1]&&G(H,e[54]),4194304&t[1]&&I(A,e[53])},d(s){s&&F(t),s&&F(n),s&&F(l),e[139][1].splice(e[139][1].indexOf(_),1),T(X,s),e[139][1].splice(e[139][1].indexOf(k),1),T(ee,s),T(le,s),x(K)}}}function gn(e){let t,n,l,s,o,r,i,a=e[190]+"";return{c(){t=E("input"),o=E("label"),r=O(a),S(t,"type","checkbox"),S(t,"id","hearths_year_tmp"),t.checked=n=e[56][e[190]],t.disabled=l=2===e[55],S(t,"name",s=e[190]),S(t,"class","svelte-1jsovbn"),S(o,"for","hearths_year_tmp"),S(o,"class","svelte-1jsovbn")},m(n,l,s){D(n,t,l),D(n,o,l),z(o,r),s&&i(),i=$(t,"change",e[113])},p(e,o){4096&o[0]|33554432&o[1]&&n!==(n=e[56][e[190]])&&(t.checked=n),16777216&o[1]&&l!==(l=2===e[55])&&(t.disabled=l),4096&o[0]&&s!==(s=e[190])&&S(t,"name",s),4096&o[0]&&a!==(a=e[190]+"")&&N(r,a)},d(e){e&&F(t),e&&F(o),i()}}}function yn(e){let t,n,l,s,o,r,i,a,c,p,d=e[205]+"",u=e[190]+"";return{c(){t=E("input"),o=E("label"),r=O(d),i=O(" кв. "),a=O(u),S(t,"type","checkbox"),S(t,"id","hearths_quarter_tmp"),t.checked=n=e[57][e[190]]&&e[57][e[190]][e[205]],t.disabled=l=1===e[55],S(t,"name",s=e[190]+"_"+e[205]),S(t,"class","svelte-1jsovbn"),S(o,"for",c="hearths_quarter_tmp_"+e[190]+"_"+e[205]),S(o,"class","svelte-1jsovbn")},m(n,l,s){D(n,t,l),D(n,o,l),z(o,r),z(o,i),z(o,a),s&&p(),p=$(t,"change",e[113])},p(e,i){4096&i[0]|67108864&i[1]&&n!==(n=e[57][e[190]]&&e[57][e[190]][e[205]])&&(t.checked=n),16777216&i[1]&&l!==(l=1===e[55])&&(t.disabled=l),4096&i[0]&&s!==(s=e[190]+"_"+e[205])&&S(t,"name",s),4096&i[0]&&d!==(d=e[205]+"")&&N(r,d),4096&i[0]&&u!==(u=e[190]+"")&&N(a,u),4096&i[0]&&c!==(c="hearths_quarter_tmp_"+e[190]+"_"+e[205])&&S(o,"for",c)},d(e){e&&F(t),e&&F(o),p()}}}function bn(e){let t,n,l=Object.keys(e[12]._opt.years[e[190]]).sort(),s=[];for(let t=0;t<l.length;t+=1)s[t]=yn(Mt(e,l,t));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=M(),n=E("br")},m(e,l){for(let t=0;t<s.length;t+=1)s[t].m(e,l);D(e,t,l),D(e,n,l)},p(e,n){if(4096&n[0]|83886080&n[1]|1048576&n[3]){let o;for(l=Object.keys(e[12]._opt.years[e[190]]).sort(),o=0;o<l.length;o+=1){const r=Mt(e,l,o);s[o]?s[o].p(r,n):(s[o]=yn(r),s[o].c(),s[o].m(t.parentNode,t))}for(;o<s.length;o+=1)s[o].d(1);s.length=l.length}},d(e){T(s,e),e&&F(t),e&&F(n)}}}function kn(e){let t,n,l,s,o,r,i,a,c=e[73].str_icon_type[e[190]]+"",p=e[190]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[190],t.value=t.__value,S(t,"class",a="icon_type_"+e[73].iconType[e[190]]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function xn(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,j,C,L,w,q,P,H,N,B,U,A,R,Z,Y,V,W,K,J,X,Q=Object.keys(e[13]._opt.years).sort(),ee=[];for(let t=0;t<Q.length;t+=1)ee[t]=jn(Et(e,Q,t));let te=Object.keys(e[13]._opt.years).sort(),le=[];for(let t=0;t<te.length;t+=1)le[t]=Ln(Tt(e,te,t));let se=e[72],oe=[];for(let t=0;t<se.length;t+=1)oe[t]=wn(Dt(e,se,t));return{c(){t=E("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=M(),l=E("div"),l.innerHTML="Фильтры - <b>ДТП Очаги</b>",s=M(),o=E("div"),r=E("div"),i=O("ID ДТП: "),a=E("input"),c=M(),p=E("div"),d=E("fieldset"),u=E("legend"),u.textContent="Фильтрация по периодам:",_=M(),h=E("div"),v=E("input"),g=E("label"),g.textContent="Фильтрация по годам",y=M(),b=E("div");for(let e=0;e<ee.length;e+=1)ee[e].c();k=M(),j=E("div"),C=E("input"),w=E("label"),w.textContent="Фильтрация по кварталам",q=M(),P=E("div");for(let e=0;e<le.length;e+=1)le[e].c();H=M(),N=E("div"),B=E("select"),U=E("option"),U.textContent=`\n\t\t\t\t\t\tВсе типы (${e[72].reduce(e[167],0)})\n\t\t\t\t\t`;for(let e=0;e<oe.length;e+=1)oe[e].c();A=M(),R=E("div"),Z=E("select"),Y=E("option"),Y.textContent=`(${e[71].stricken[0]||0}) Очаги все`,V=E("option"),V.textContent=`(${e[71].stricken[1]||0}) Только с погибшими`,W=E("option"),W.textContent=`(${e[71].stricken[2]||0}) Только с пострадавшими`,K=E("option"),K.textContent=`(${e[71].stricken[3]||0}) С пострадавшими или погибшими`,J=E("option"),J.textContent=`(${e[71].stricken[4]||0}) С пострадавшими и погибшими`,S(t,"class","pLine svelte-1jsovbn"),S(l,"class","pLine svelte-1jsovbn"),S(a,"type","text"),a.value=e[16],S(a,"class","svelte-1jsovbn"),S(r,"class","pLine svelte-1jsovbn"),S(v,"type","radio"),v.__value=f=1,v.value=v.__value,v.checked=m=1===e[60],S(v,"id","hearths_period_type1"),S(v,"name","hearths_period_type"),S(v,"class","svelte-1jsovbn"),e[139][0].push(v),S(g,"for","hearths_period_type1"),S(g,"class","svelte-1jsovbn"),S(b,"class","pLine margin svelte-1jsovbn"),S(h,"class","pLine type svelte-1jsovbn"),S(C,"type","radio"),C.__value=L=2,C.value=C.__value,S(C,"id","hearths_period_type2"),S(C,"name","hearths_period_type"),S(C,"class","svelte-1jsovbn"),e[139][0].push(C),S(w,"for","hearths_period_type2"),S(w,"class","svelte-1jsovbn"),S(P,"class","pLine margin svelte-1jsovbn"),S(j,"class","pLine type svelte-1jsovbn"),S(p,"class","pLine nowrap svelte-1jsovbn"),U.__value="",U.value=U.__value,S(U,"class","svelte-1jsovbn"),S(B,"class","multiple_icon_typeTmp svelte-1jsovbn"),B.multiple=!0,void 0===e[59]&&ne(()=>e[168].call(B)),S(N,"class","pLine svelte-1jsovbn"),Y.__value="",Y.value=Y.__value,V.__value="1",V.value=V.__value,W.__value="2",W.value=W.__value,K.__value="3",K.value=K.__value,J.__value="4",J.value=J.__value,S(Z,"class","svelte-1jsovbn"),void 0===e[58]&&ne(()=>e[169].call(Z)),S(R,"class","pLine svelte-1jsovbn"),S(o,"class","filtersCont svelte-1jsovbn")},m(f,m,L){D(f,t,m),D(f,n,m),D(f,l,m),D(f,s,m),D(f,o,m),z(o,r),z(r,i),z(r,a),z(o,c),z(o,p),z(p,d),z(d,u),z(d,_),z(d,h),z(h,v),v.checked=v.__value===e[60],z(h,g),z(h,y),z(h,b);for(let e=0;e<ee.length;e+=1)ee[e].m(b,null);z(d,k),z(d,j),z(j,C),C.checked=C.__value===e[60],z(j,w),z(j,q),z(j,P);for(let e=0;e<le.length;e+=1)le[e].m(P,null);z(o,H),z(o,N),z(N,B),z(B,U);for(let e=0;e<oe.length;e+=1)oe[e].m(B,null);G(B,e[59]),z(o,A),z(o,R),z(R,Z),z(Z,Y),z(Z,V),z(Z,W),z(Z,K),z(Z,J),I(Z,e[58]),L&&x(X),X=[$(a,"input",e[96]),$(v,"change",e[114]),$(v,"change",e[165]),$(C,"change",e[114]),$(C,"change",e[166]),$(B,"change",e[168]),$(B,"change",e[114]),$(Z,"change",e[169]),$(Z,"change",e[114])]},p(e,t){if(65536&t[0]&&a.value!==e[16]&&(a.value=e[16]),536870912&t[1]&&m!==(m=1===e[60])&&(v.checked=m),536870912&t[1]&&(v.checked=v.__value===e[60]),8192&t[0]|1610612736&t[1]|2097152&t[3]){let n;for(Q=Object.keys(e[13]._opt.years).sort(),n=0;n<Q.length;n+=1){const l=Et(e,Q,n);ee[n]?ee[n].p(l,t):(ee[n]=jn(l),ee[n].c(),ee[n].m(b,null))}for(;n<ee.length;n+=1)ee[n].d(1);ee.length=Q.length}if(536870912&t[1]&&(C.checked=C.__value===e[60]),8192&t[0]|536870912&t[1]|1&t[2]|2097152&t[3]){let n;for(te=Object.keys(e[13]._opt.years).sort(),n=0;n<te.length;n+=1){const l=Tt(e,te,n);le[n]?le[n].p(l,t):(le[n]=Ln(l),le[n].c(),le[n].m(P,null))}for(;n<le.length;n+=1)le[n].d(1);le.length=te.length}if(1536&t[2]){let n;for(se=e[72],n=0;n<se.length;n+=1){const l=Dt(e,se,n);oe[n]?oe[n].p(l,t):(oe[n]=wn(l),oe[n].c(),oe[n].m(B,null))}for(;n<oe.length;n+=1)oe[n].d(1);oe.length=se.length}268435456&t[1]&&G(B,e[59]),134217728&t[1]&&I(Z,e[58])},d(r){r&&F(t),r&&F(n),r&&F(l),r&&F(s),r&&F(o),e[139][0].splice(e[139][0].indexOf(v),1),T(ee,r),e[139][0].splice(e[139][0].indexOf(C),1),T(le,r),T(oe,r),x(X)}}}function jn(e){let t,n,l,s,o,r,i,a,c=e[190]+"";return{c(){t=E("input"),o=E("label"),r=O(c),S(t,"type","checkbox"),S(t,"id","hearths_year"),t.checked=n=e[61][e[190]],t.disabled=l=2===e[60],S(t,"name",s=e[190]),S(t,"class","svelte-1jsovbn"),S(o,"for",i="hearths_year"+e[190]),S(o,"class","svelte-1jsovbn")},m(n,l,s){D(n,t,l),D(n,o,l),z(o,r),s&&a(),a=$(t,"change",e[114])},p(e,a){8192&a[0]|1073741824&a[1]&&n!==(n=e[61][e[190]])&&(t.checked=n),536870912&a[1]&&l!==(l=2===e[60])&&(t.disabled=l),8192&a[0]&&s!==(s=e[190])&&S(t,"name",s),8192&a[0]&&c!==(c=e[190]+"")&&N(r,c),8192&a[0]&&i!==(i="hearths_year"+e[190])&&S(o,"for",i)},d(e){e&&F(t),e&&F(o),a()}}}function Cn(e){let t,n,l,s,o,r,i,a,c,p,d=e[205]+"",u=e[190]+"";return{c(){t=E("input"),o=E("label"),r=O(d),i=O(" кв. "),a=O(u),S(t,"type","checkbox"),S(t,"id","hearths_quarter"),t.checked=n=e[62][e[190]]&&e[62][e[190]][e[205]],t.disabled=l=1===e[60],S(t,"name",s=e[190]+"_"+e[205]),S(t,"class","svelte-1jsovbn"),S(o,"for",c="hearths_quarter_"+e[190]+"_"+e[205]),S(o,"class","svelte-1jsovbn")},m(n,l,s){D(n,t,l),D(n,o,l),z(o,r),z(o,i),z(o,a),s&&p(),p=$(t,"change",e[114])},p(e,i){8192&i[0]|1&i[2]&&n!==(n=e[62][e[190]]&&e[62][e[190]][e[205]])&&(t.checked=n),536870912&i[1]&&l!==(l=1===e[60])&&(t.disabled=l),8192&i[0]&&s!==(s=e[190]+"_"+e[205])&&S(t,"name",s),8192&i[0]&&d!==(d=e[205]+"")&&N(r,d),8192&i[0]&&u!==(u=e[190]+"")&&N(a,u),8192&i[0]&&c!==(c="hearths_quarter_"+e[190]+"_"+e[205])&&S(o,"for",c)},d(e){e&&F(t),e&&F(o),p()}}}function Ln(e){let t,n,l=Object.keys(e[13]._opt.years[e[190]]).sort(),s=[];for(let t=0;t<l.length;t+=1)s[t]=Cn(Ft(e,l,t));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=M(),n=E("br")},m(e,l){for(let t=0;t<s.length;t+=1)s[t].m(e,l);D(e,t,l),D(e,n,l)},p(e,n){if(8192&n[0]|536870912&n[1]|1&n[2]|2097152&n[3]){let o;for(l=Object.keys(e[13]._opt.years[e[190]]).sort(),o=0;o<l.length;o+=1){const r=Ft(e,l,o);s[o]?s[o].p(r,n):(s[o]=Cn(r),s[o].c(),s[o].m(t.parentNode,t))}for(;o<s.length;o+=1)s[o].d(1);s.length=l.length}},d(e){T(s,e),e&&F(t),e&&F(n)}}}function wn(e){let t,n,l,s,o,r,i,a,c=e[71].str_icon_type[e[190]]+"",p=e[190]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[190],t.value=t.__value,S(t,"class",a="icon_type_"+e[71].iconType[e[190]]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function zn(e){let t;return{c(){t=E("div"),t.textContent="Нет включенных слоев",S(t,"class","pLine svelte-1jsovbn")},m(e,n){D(e,t,n)},p:y,d(e){e&&F(t)}}}function Dn(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h=(e[5]._map||e[6]._map||e[7]._map||e[8]._map)&&Fn(e);return{c(){t=E("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=M(),l=E("div"),s=E("button"),o=M(),r=E("input"),i=M(),a=E("input"),c=M(),p=E("button"),d=M(),h&&h.c(),u=q(),S(t,"class","pLine svelte-1jsovbn"),S(s,"class","pika-prev"),S(r,"type","text"),S(r,"class","begDate svelte-1jsovbn"),S(a,"type","text"),S(a,"class","endDate svelte-1jsovbn"),S(p,"class","pika-next"),S(l,"class","pikaday pLine svelte-1jsovbn")},m(v,f,m){D(v,t,f),D(v,n,f),D(v,l,f),z(l,s),z(l,o),z(l,r),e[170](r),z(l,i),z(l,a),e[171](a),z(l,c),z(l,p),D(v,d,f),h&&h.m(v,f),D(v,u,f),m&&x(_),_=[$(s,"click",e[108]),$(p,"click",e[109])]},p(e,t){e[5]._map||e[6]._map||e[7]._map||e[8]._map?h?h.p(e,t):(h=Fn(e),h.c(),h.m(u.parentNode,u)):h&&(h.d(1),h=null)},d(s){s&&F(t),s&&F(n),s&&F(l),e[170](null),e[171](null),s&&F(d),h&&h.d(s),s&&F(u),x(_)}}}function Fn(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,j,C,L,w,T,q,P,H,I,G,U,A,R,Z,Y;return{c(){t=E("div"),n=E("br"),l=M(),s=E("label"),o=E("input"),i=E("span"),a=O("Мин.яркость ("),c=O(e[28]),p=O(")"),d=M(),u=E("br"),_=M(),h=E("label"),v=E("input"),m=E("span"),g=O("Радиус ("),y=O(e[26]),b=O(")"),k=M(),j=E("br"),C=M(),L=E("label"),w=E("input"),q=E("span"),P=O("Размытие ("),H=O(e[27]),I=O(")"),G=M(),U=E("div"),A=E("input"),Z=E("label"),Z.textContent="- тепловая карта",S(o,"type","range"),S(o,"min","0.05"),S(o,"max","1"),S(o,"step","0.01"),o.disabled=r=!e[89],S(o,"class","svelte-1jsovbn"),S(s,"class","svelte-1jsovbn"),S(v,"type","range"),S(v,"min","0"),S(v,"max","100"),S(v,"step","1"),v.disabled=f=!e[89],S(v,"class","svelte-1jsovbn"),S(h,"class","svelte-1jsovbn"),S(w,"type","range"),S(w,"min","0"),S(w,"max","15"),S(w,"step","0.01"),w.disabled=T=!e[89],S(w,"class","svelte-1jsovbn"),S(L,"class","svelte-1jsovbn"),S(t,"class","pLine svelte-1jsovbn"),S(A,"type","checkbox"),A.checked=R=e[8]._needHeat||e[7]._needHeat||e[6]._needHeat||e[5]._needHeat,S(A,"name","heat"),S(A,"class","svelte-1jsovbn"),S(Z,"for","heat"),S(Z,"class","svelte-1jsovbn"),S(U,"class","pLine svelte-1jsovbn")},m(r,f,F){D(r,t,f),z(t,n),z(t,l),z(t,s),z(s,o),B(o,e[28]),z(s,i),z(i,a),z(i,c),z(i,p),z(t,d),z(t,u),z(t,_),z(t,h),z(h,v),B(v,e[26]),z(h,m),z(m,g),z(m,y),z(m,b),z(t,k),z(t,j),z(t,C),z(t,L),z(L,w),B(w,e[27]),z(L,q),z(q,P),z(q,H),z(q,I),D(r,G,f),D(r,U,f),z(U,A),e[175](A),z(U,Z),F&&x(Y),Y=[$(o,"change",e[172]),$(o,"input",e[172]),$(o,"input",e[102]),$(v,"change",e[173]),$(v,"input",e[173]),$(v,"input",e[102]),$(w,"change",e[174]),$(w,"input",e[174]),$(w,"input",e[102]),$(A,"change",e[101])]},p(e,t){268435456&t[0]&&B(o,e[28]),268435456&t[0]&&N(c,e[28]),67108864&t[0]&&B(v,e[26]),67108864&t[0]&&N(y,e[26]),134217728&t[0]&&B(w,e[27]),134217728&t[0]&&N(H,e[27]),480&t[0]&&R!==(R=e[8]._needHeat||e[7]._needHeat||e[6]._needHeat||e[5]._needHeat)&&(A.checked=R)},d(n){n&&F(t),n&&F(G),n&&F(U),e[175](null),x(Y)}}}function Tn(e){let t,n,l,s,o,r=e[87].type&&function(e){let t,n,l,s,o=e[88],r=[];for(let t=0;t<o.length;t+=1)r[t]=En(zt(e,o,t));return{c(){t=E("div"),n=E("select"),l=E("option"),l.textContent=`\n\t\t\t\t\t\tВсе типы (${e[88].reduce(e[176],0)})\n\t\t\t\t\t`;for(let e=0;e<r.length;e+=1)r[e].c();l.__value="",l.value=l.__value,S(n,"class","multiple_type svelte-1jsovbn"),n.multiple=!0,void 0===e[32]&&ne(()=>e[177].call(n)),S(t,"class","pLine svelte-1jsovbn")},m(o,i,a){D(o,t,i),z(t,n),z(n,l);for(let e=0;e<r.length;e+=1)r[e].m(n,null);G(n,e[32]),a&&x(s),s=[$(n,"change",e[177]),$(n,"change",e[90])]},p(e,t){if(100663296&t[2]){let l;for(o=e[88],l=0;l<o.length;l+=1){const s=zt(e,o,l);r[l]?r[l].p(s,t):(r[l]=En(s),r[l].c(),r[l].m(n,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=o.length}2&t[1]&&G(n,e[32])},d(e){e&&F(t),T(r,e),x(s)}}}(e);return{c(){t=E("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=M(),l=E("div"),l.innerHTML="Фильтры - <b>Мероприятий</b>",s=M(),o=E("div"),r&&r.c(),S(t,"class","pLine svelte-1jsovbn"),S(l,"class","pLine svelte-1jsovbn"),S(o,"class","filtersCont svelte-1jsovbn")},m(e,i){D(e,t,i),D(e,n,i),D(e,l,i),D(e,s,i),D(e,o,i),r&&r.m(o,null)},p(e,t){e[87].type&&r.p(e,t)},d(e){e&&F(t),e&&F(n),e&&F(l),e&&F(s),e&&F(o),r&&r.d()}}}function En(e){let t,n,l,s,o,r,i,a,c=e[87].type[e[190]]+"",p=e[190]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[190],t.value=t.__value,S(t,"class",a="type_"+e[87].type[e[190]]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function On(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,j,C,L,w,q,P,H;function N(e,t){return e[5]._arm?qn:Mn}let B=N(e),I=B(e),U=e[63].collision_type&&function(e){let t,n,l,s,o=e[64],r=[];for(let t=0;t<o.length;t+=1)r[t]=$n(wt(e,o,t));return{c(){t=E("div"),n=E("select"),l=E("option"),l.textContent=`\n\t\t\t\t\t\tВсе типы (${e[64].reduce(e[178],0)})\n\t\t\t\t\t`;for(let e=0;e<r.length;e+=1)r[e].c();l.__value="",l.value=l.__value,S(l,"class","svelte-1jsovbn"),S(n,"class","multiple_icon_type svelte-1jsovbn"),n.multiple=!0,void 0===e[22]&&ne(()=>e[179].call(n)),S(t,"class","pLine svelte-1jsovbn")},m(o,i,a){D(o,t,i),z(t,n),z(n,l);for(let e=0;e<r.length;e+=1)r[e].m(n,null);G(n,e[22]),a&&x(s),s=[$(n,"change",e[179]),$(n,"change",e[103])]},p(e,t){if(6&t[2]){let l;for(o=e[64],l=0;l<o.length;l+=1){const s=wt(e,o,l);r[l]?r[l].p(s,t):(r[l]=$n(s),r[l].c(),r[l].m(n,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=o.length}4194304&t[0]&&G(n,e[22])},d(e){e&&F(t),T(r,e),x(s)}}}(e);return{c(){t=E("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=M(),l=E("div"),l.innerHTML="Фильтры - <b>ДТП Сводный</b>",s=M(),o=E("div"),r=E("div"),i=O("ID ДТП: "),a=E("input"),c=M(),p=E("div"),d=E("input"),u=E("label"),u.textContent="Все",_=M(),I.c(),h=M(),v=E("div"),f=E("input"),m=E("label"),m.textContent="Только ГИБДД",g=M(),y=E("div"),b=E("input"),j=E("label"),j.textContent="- с мероприятиями",C=M(),L=E("input"),q=E("label"),q.textContent="- без мероприятий",P=M(),U&&U.c(),S(t,"class","pLine svelte-1jsovbn"),S(l,"class","pLine svelte-1jsovbn"),S(a,"type","text"),a.value=e[16],S(a,"class","svelte-1jsovbn"),S(r,"class","pLine svelte-1jsovbn"),S(d,"type","radio"),S(d,"id","d0"),S(d,"name","drone"),d.value="0",d.checked=!0,S(d,"class","svelte-1jsovbn"),S(u,"for","d0"),S(u,"class","svelte-1jsovbn"),S(p,"class","pLine svelte-1jsovbn"),S(f,"type","radio"),S(f,"id","d3"),S(f,"name","drone"),f.value="3",S(f,"class","svelte-1jsovbn"),S(m,"for","d3"),S(m,"class","svelte-1jsovbn"),S(v,"class","pLine svelte-1jsovbn"),S(b,"type","checkbox"),S(b,"id","ev1"),b.checked=k=e[18].ev1,S(b,"name","ev1"),S(b,"class","svelte-1jsovbn"),S(j,"for","ev1"),S(j,"class","svelte-1jsovbn"),S(L,"type","checkbox"),S(L,"id","ev0"),L.checked=w=e[18].ev0,S(L,"name","ev0"),S(L,"class","svelte-1jsovbn"),S(q,"for","ev0"),S(q,"class","svelte-1jsovbn"),S(y,"class","pLine svelte-1jsovbn"),S(o,"class","filtersCont svelte-1jsovbn")},m(k,w,F){D(k,t,w),D(k,n,w),D(k,l,w),D(k,s,w),D(k,o,w),z(o,r),z(r,i),z(r,a),z(o,c),z(o,p),z(p,d),z(p,u),z(o,_),I.m(o,null),z(o,h),z(o,v),z(v,f),z(v,m),z(o,g),z(o,y),z(y,b),z(y,j),z(y,C),z(y,L),z(y,q),z(o,P),U&&U.m(o,null),F&&x(H),H=[$(a,"input",e[96]),$(d,"click",e[107]),$(f,"click",e[107]),$(b,"change",e[100]),$(L,"change",e[100])]},p(e,t){65536&t[0]&&a.value!==e[16]&&(a.value=e[16]),B===(B=N(e))&&I?I.p(e,t):(I.d(1),I=B(e),I&&(I.c(),I.m(o,h))),262144&t[0]&&k!==(k=e[18].ev1)&&(b.checked=k),262144&t[0]&&w!==(w=e[18].ev0)&&(L.checked=w),e[63].collision_type&&U.p(e,t)},d(e){e&&F(t),e&&F(n),e&&F(l),e&&F(s),e&&F(o),I.d(),U&&U.d(),x(H)}}}function Mn(e){let t,n,l,s,o,r,i,a;return{c(){t=E("div"),n=E("input"),l=E("label"),l.textContent="Только Пересечения",s=M(),o=E("div"),r=E("input"),i=E("label"),i.textContent="Только СКПДИ",S(n,"type","radio"),S(n,"id","d1"),S(n,"name","drone"),n.value="1",S(n,"class","svelte-1jsovbn"),S(l,"for","d1"),S(l,"class","svelte-1jsovbn"),S(t,"class","pLine svelte-1jsovbn"),S(r,"type","radio"),S(r,"id","d2"),S(r,"name","drone"),r.value="2",S(r,"class","svelte-1jsovbn"),S(i,"for","d2"),S(i,"class","svelte-1jsovbn"),S(o,"class","pLine svelte-1jsovbn")},m(c,p,d){D(c,t,p),z(t,n),z(t,l),D(c,s,p),D(c,o,p),z(o,r),z(o,i),d&&x(a),a=[$(n,"click",e[107]),$(r,"click",e[107])]},p:y,d(e){e&&F(t),e&&F(s),e&&F(o),x(a)}}}function qn(e){let t,n,l,s;return{c(){t=E("div"),n=E("input"),l=E("label"),l.textContent="Только Пересечения ГИБДД и СКПДИ",S(n,"type","radio"),S(n,"id","d1"),S(n,"name","drone"),n.value="1",S(n,"class","svelte-1jsovbn"),S(l,"for","d1"),S(l,"class","svelte-1jsovbn"),S(t,"class","pLine svelte-1jsovbn")},m(o,r,i){D(o,t,r),z(t,n),z(t,l),i&&s(),s=$(n,"click",e[107])},p:y,d(e){e&&F(t),s()}}}function $n(e){let t,n,l,s,o,r,i,a,c=e[63].collision_type[e[190]]+"",p=e[190]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[190],t.value=t.__value,S(t,"class",a="icon_type_"+e[63].iconType[e[190]]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function Pn(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b=e[65].collision_type&&function(e){let t,n,l,s,o=e[66],r=[];for(let t=0;t<o.length;t+=1)r[t]=Sn(Lt(e,o,t));return{c(){t=E("div"),n=E("select"),l=E("option"),l.textContent=`\n\t\t\t\t\t\tВсе типы (${e[66].reduce(e[180],0)})\n\t\t\t\t\t`;for(let e=0;e<r.length;e+=1)r[e].c();l.__value="",l.value=l.__value,S(l,"class","svelte-1jsovbn"),S(n,"class","multiple_icon_type svelte-1jsovbn"),n.multiple=!0,void 0===e[23]&&ne(()=>e[181].call(n)),S(t,"class","pLine svelte-1jsovbn")},m(o,i,a){D(o,t,i),z(t,n),z(n,l);for(let e=0;e<r.length;e+=1)r[e].m(n,null);G(n,e[23]),a&&x(s),s=[$(n,"change",e[181]),$(n,"change",e[106])]},p(e,t){if(24&t[2]){let l;for(o=e[66],l=0;l<o.length;l+=1){const s=Lt(e,o,l);r[l]?r[l].p(s,t):(r[l]=Sn(s),r[l].c(),r[l].m(n,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=o.length}8388608&t[0]&&G(n,e[23])},d(e){e&&F(t),T(r,e),x(s)}}}(e);return{c(){t=E("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=M(),l=E("div"),l.innerHTML="Фильтры - <b>ДТП СКПДИ</b>",s=M(),o=E("div"),r=E("div"),i=O("ID ДТП: "),a=E("input"),c=M(),p=E("div"),d=E("input"),_=E("label"),_.textContent="- с мероприятиями",h=M(),v=E("input"),m=E("label"),m.textContent="- без мероприятий",g=M(),b&&b.c(),S(t,"class","pLine svelte-1jsovbn"),S(l,"class","pLine svelte-1jsovbn"),S(a,"type","text"),a.value=e[16],S(a,"class","svelte-1jsovbn"),S(r,"class","pLine svelte-1jsovbn"),S(d,"type","checkbox"),S(d,"id","ev1"),d.checked=u=e[18].ev1,S(d,"name","ev1"),S(d,"class","svelte-1jsovbn"),S(_,"for","ev1"),S(_,"class","svelte-1jsovbn"),S(v,"type","checkbox"),S(v,"id","ev0"),v.checked=f=e[18].ev0,S(v,"name","ev0"),S(v,"class","svelte-1jsovbn"),S(m,"for","ev0"),S(m,"class","svelte-1jsovbn"),S(p,"class","pLine svelte-1jsovbn"),S(o,"class","filtersCont svelte-1jsovbn")},m(u,f,k){D(u,t,f),D(u,n,f),D(u,l,f),D(u,s,f),D(u,o,f),z(o,r),z(r,i),z(r,a),z(o,c),z(o,p),z(p,d),z(p,_),z(p,h),z(p,v),z(p,m),z(o,g),b&&b.m(o,null),k&&x(y),y=[$(a,"input",e[96]),$(d,"change",e[100]),$(v,"change",e[100])]},p(e,t){65536&t[0]&&a.value!==e[16]&&(a.value=e[16]),262144&t[0]&&u!==(u=e[18].ev1)&&(d.checked=u),262144&t[0]&&f!==(f=e[18].ev0)&&(v.checked=f),e[65].collision_type&&b.p(e,t)},d(e){e&&F(t),e&&F(n),e&&F(l),e&&F(s),e&&F(o),b&&b.d(),x(y)}}}function Sn(e){let t,n,l,s,o,r,i,a,c=e[65].collision_type[e[190]]+"",p=e[190]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[190],t.value=t.__value,S(t,"class",a="icon_type_"+e[65].iconType[e[190]]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function Hn(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,j,C,L,w,q,P,H,N=e[67].collision_type&&function(e){let t,n,l,s,o=e[68],r=[];for(let t=0;t<o.length;t+=1)r[t]=Nn(Ct(e,o,t));return{c(){t=E("div"),n=E("select"),l=E("option"),l.textContent=`\n\t\t\t\t\t\tВсе типы (${e[68].reduce(e[182],0)})\n\t\t\t\t\t`;for(let e=0;e<r.length;e+=1)r[e].c();l.__value="",l.value=l.__value,S(l,"class","svelte-1jsovbn"),S(n,"class","multiple_icon_type svelte-1jsovbn"),n.multiple=!0,void 0===e[24]&&ne(()=>e[183].call(n)),S(t,"class","pLine svelte-1jsovbn")},m(o,i,a){D(o,t,i),z(t,n),z(n,l);for(let e=0;e<r.length;e+=1)r[e].m(n,null);G(n,e[24]),a&&x(s),s=[$(n,"change",e[183]),$(n,"change",e[105])]},p(e,t){if(96&t[2]){let l;for(o=e[68],l=0;l<o.length;l+=1){const s=Ct(e,o,l);r[l]?r[l].p(s,t):(r[l]=Nn(s),r[l].c(),r[l].m(n,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=o.length}16777216&t[0]&&G(n,e[24])},d(e){e&&F(t),T(r,e),x(s)}}}(e);return{c(){t=E("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=M(),l=E("div"),l.innerHTML="Фильтры - <b>ДТП ГИБДД</b>",s=M(),o=E("div"),r=E("div"),i=O("ID ДТП: "),a=E("input"),c=M(),p=E("div"),d=E("input"),_=E("label"),_.textContent="- с батальонами ДПС",h=M(),v=E("input"),m=E("label"),m.textContent="- без батальонов ДПС",g=M(),y=E("div"),b=E("input"),j=E("label"),j.textContent="- с мероприятиями",C=M(),L=E("input"),q=E("label"),q.textContent="- без мероприятий",P=M(),N&&N.c(),S(t,"class","pLine svelte-1jsovbn"),S(l,"class","pLine svelte-1jsovbn"),S(a,"type","text"),a.value=e[16],S(a,"class","svelte-1jsovbn"),S(r,"class","pLine svelte-1jsovbn"),S(d,"type","checkbox"),S(d,"id","Dps1"),d.checked=u=e[17].Dps1,S(d,"name","Dps1"),S(d,"class","svelte-1jsovbn"),S(_,"for","Dps1"),S(_,"class","svelte-1jsovbn"),S(v,"type","checkbox"),S(v,"id","Dps0"),v.checked=f=e[17].Dps0,S(v,"name","Dps0"),S(v,"class","svelte-1jsovbn"),S(m,"for","Dps0"),S(m,"class","svelte-1jsovbn"),S(p,"class","pLine svelte-1jsovbn"),S(b,"type","checkbox"),S(b,"id","ev1"),b.checked=k=e[18].ev1,S(b,"name","ev1"),S(b,"class","svelte-1jsovbn"),S(j,"for","ev1"),S(j,"class","svelte-1jsovbn"),S(L,"type","checkbox"),S(L,"id","ev0"),L.checked=w=e[18].ev0,S(L,"name","ev0"),S(L,"class","svelte-1jsovbn"),S(q,"for","ev0"),S(q,"class","svelte-1jsovbn"),S(y,"class","pLine svelte-1jsovbn"),S(o,"class","filtersCont svelte-1jsovbn")},m(u,f,k){D(u,t,f),D(u,n,f),D(u,l,f),D(u,s,f),D(u,o,f),z(o,r),z(r,i),z(r,a),z(o,c),z(o,p),z(p,d),z(p,_),z(p,h),z(p,v),z(p,m),z(o,g),z(o,y),z(y,b),z(y,j),z(y,C),z(y,L),z(y,q),z(o,P),N&&N.m(o,null),k&&x(H),H=[$(a,"input",e[96]),$(d,"change",e[99]),$(v,"change",e[99]),$(b,"change",e[100]),$(L,"change",e[100])]},p(e,t){65536&t[0]&&a.value!==e[16]&&(a.value=e[16]),131072&t[0]&&u!==(u=e[17].Dps1)&&(d.checked=u),131072&t[0]&&f!==(f=e[17].Dps0)&&(v.checked=f),262144&t[0]&&k!==(k=e[18].ev1)&&(b.checked=k),262144&t[0]&&w!==(w=e[18].ev0)&&(L.checked=w),e[67].collision_type&&N.p(e,t)},d(e){e&&F(t),e&&F(n),e&&F(l),e&&F(s),e&&F(o),N&&N.d(),x(H)}}}function Nn(e){let t,n,l,s,o,r,i,a,c=e[67].collision_type[e[190]]+"",p=e[190]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[190],t.value=t.__value,S(t,"class",a="icon_type_"+e[67].iconType[e[190]]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function Bn(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g=e[69].collision_type&&function(e){let t,n,l,s,o=e[70],r=[];for(let t=0;t<o.length;t+=1)r[t]=In(jt(e,o,t));return{c(){t=E("div"),n=E("select"),l=E("option"),l.textContent=`\n\t\t\t\t\t\tВсе типы (${e[70].reduce(e[186],0)})\n\t\t\t\t\t`;for(let e=0;e<r.length;e+=1)r[e].c();l.__value="",l.value=l.__value,S(l,"class","svelte-1jsovbn"),S(n,"class","multiple_icon_type svelte-1jsovbn"),n.multiple=!0,void 0===e[25]&&ne(()=>e[187].call(n)),S(t,"class","pLine svelte-1jsovbn")},m(o,i,a){D(o,t,i),z(t,n),z(n,l);for(let e=0;e<r.length;e+=1)r[e].m(n,null);G(n,e[25]),a&&x(s),s=[$(n,"change",e[187]),$(n,"change",e[104])]},p(e,t){if(384&t[2]){let l;for(o=e[70],l=0;l<o.length;l+=1){const s=jt(e,o,l);r[l]?r[l].p(s,t):(r[l]=In(s),r[l].c(),r[l].m(n,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=o.length}33554432&t[0]&&G(n,e[25])},d(e){e&&F(t),T(r,e),x(s)}}}(e);return{c(){t=E("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=M(),l=E("div"),l.innerHTML="Фильтры - <b>ДТП ГИБДД + Рубежи</b>",s=M(),o=E("div"),r=O("ID ДТП: "),i=E("input"),a=M(),c=E("div"),p=E("input"),d=E("label"),d.textContent="- с рубежами",u=M(),_=E("input"),h=E("label"),h.textContent="- без рубежей",v=M(),f=E("div"),g&&g.c(),S(t,"class","pLine svelte-1jsovbn"),S(l,"class","pLine svelte-1jsovbn"),S(i,"type","text"),i.value=e[16],S(i,"class","svelte-1jsovbn"),S(o,"class","pLine svelte-1jsovbn"),S(p,"type","checkbox"),S(p,"name","list_rubOn"),S(p,"class","svelte-1jsovbn"),S(d,"for","list_rubOn"),S(d,"class","svelte-1jsovbn"),S(_,"type","checkbox"),S(_,"name","list_rubOff"),S(_,"class","svelte-1jsovbn"),S(h,"for","list_rubOff"),S(h,"class","svelte-1jsovbn"),S(c,"class","pLine svelte-1jsovbn"),S(f,"class","filtersCont svelte-1jsovbn")},m(y,b,k){D(y,t,b),D(y,n,b),D(y,l,b),D(y,s,b),D(y,o,b),z(o,r),z(o,i),D(y,a,b),D(y,c,b),z(c,p),p.checked=e[38],z(c,d),z(c,u),z(c,_),_.checked=e[39],z(c,h),D(y,v,b),D(y,f,b),g&&g.m(f,null),k&&x(m),m=[$(i,"input",e[96]),$(p,"change",e[184]),$(p,"change",e[104]),$(_,"change",e[185]),$(_,"change",e[104])]},p(e,t){65536&t[0]&&i.value!==e[16]&&(i.value=e[16]),128&t[1]&&(p.checked=e[38]),256&t[1]&&(_.checked=e[39]),e[69].collision_type&&g.p(e,t)},d(e){e&&F(t),e&&F(n),e&&F(l),e&&F(s),e&&F(o),e&&F(a),e&&F(c),e&&F(v),e&&F(f),g&&g.d(),x(m)}}}function In(e){let t,n,l,s,o,r,i,a,c=e[69].collision_type[e[190]]+"",p=e[190]+"";return{c(){t=E("option"),n=O("("),l=O(c),s=O(") - "),o=O(p),r=M(),t.__value=i=e[190],t.value=t.__value,S(t,"class",a="icon_type_"+e[69].iconType[e[190]]+" svelte-1jsovbn")},m(e,i){D(e,t,i),z(t,n),z(t,l),z(t,s),z(t,o),z(t,r)},p:y,d(e){e&&F(t)}}}function Gn(e){let t,n,l,s,o,r,i,a,c,p,d,u;return{c(){t=E("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=M(),l=E("div"),l.innerHTML="Фильтры - <b>Рубежей</b>",s=M(),o=E("div"),r=E("div"),i=E("input"),a=E("label"),a.textContent="- есть комплексы",c=M(),p=E("input"),d=E("label"),d.textContent="-  нет комплексов",S(t,"class","pLine svelte-1jsovbn"),S(l,"class","pLine svelte-1jsovbn"),S(i,"type","checkbox"),S(i,"name","comp1"),S(i,"class","svelte-1jsovbn"),S(a,"for","comp1"),S(a,"class","svelte-1jsovbn"),S(p,"type","checkbox"),S(p,"name","comp"),S(p,"class","svelte-1jsovbn"),S(d,"for","comp"),S(d,"class","svelte-1jsovbn"),S(r,"class","pLine svelte-1jsovbn"),S(o,"class","filtersCont")},m(_,h,v){D(_,t,h),D(_,n,h),D(_,l,h),D(_,s,h),D(_,o,h),z(o,r),z(r,i),i.checked=e[30],z(r,a),z(r,c),z(r,p),p.checked=e[31],z(r,d),v&&x(u),u=[$(i,"change",e[188]),$(i,"change",e[91]),$(p,"change",e[189]),$(p,"change",e[91])]},p(e,t){1073741824&t[0]&&(i.checked=e[30]),1&t[1]&&(p.checked=e[31])},d(e){e&&F(t),e&&F(n),e&&F(l),e&&F(s),e&&F(o),x(u)}}}function Un(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f=e[0]._map&&e[0]._opt&&e[0]._opt.years&&Kt(e),m=e[1]._map&&e[1]._opt&&e[1]._opt.years&&Qt(e),g=e[2]._map&&e[2]._opt&&e[2]._opt.years&&nn(e),b=e[3]._map&&e[3]._opt&&e[3]._opt.years&&on(e),k=e[4]._map&&e[4]._opt&&e[4]._opt.years&&cn(e),x=e[11]._map&&e[11]._opt&&e[11]._opt.years&&un(e),j=e[12]._map&&e[12]._opt&&e[12]._opt.years&&mn(e),C=e[13]._map&&e[13]._opt&&e[13]._opt.years&&xn(e);function L(e,t){return e[5]._map||e[6]._map||e[7]._map||e[8]._map||e[10]._map?Dn:e[10]._map||e[1]._map||e[13]._map||e[11]._map||e[12]._map||e[0]._map||e[2]._map||e[4]._map||e[3]._map||e[9]._map?void 0:zn}let w=L(e),T=w&&w(e),O=e[10]._map&&Tn(e),q=e[5]._map&&On(e),$=e[6]._map&&Pn(e),P=e[7]._map&&Hn(e),H=e[8]._map&&Bn(e),N=e[9]._map&&Gn(e);return{c(){t=E("div"),f&&f.c(),n=M(),m&&m.c(),l=M(),g&&g.c(),s=M(),b&&b.c(),o=M(),k&&k.c(),r=M(),x&&x.c(),i=M(),j&&j.c(),a=M(),C&&C.c(),c=M(),T&&T.c(),p=M(),O&&O.c(),d=M(),q&&q.c(),u=M(),$&&$.c(),_=M(),P&&P.c(),h=M(),H&&H.c(),v=M(),N&&N.c(),S(t,"class","mvsFilters")},m(e,y){D(e,t,y),f&&f.m(t,null),z(t,n),m&&m.m(t,null),z(t,l),g&&g.m(t,null),z(t,s),b&&b.m(t,null),z(t,o),k&&k.m(t,null),z(t,r),x&&x.m(t,null),z(t,i),j&&j.m(t,null),z(t,a),C&&C.m(t,null),z(t,c),T&&T.m(t,null),z(t,p),O&&O.m(t,null),z(t,d),q&&q.m(t,null),z(t,u),$&&$.m(t,null),z(t,_),P&&P.m(t,null),z(t,h),H&&H.m(t,null),z(t,v),N&&N.m(t,null)},p(e,y){e[0]._map&&e[0]._opt&&e[0]._opt.years?f?f.p(e,y):(f=Kt(e),f.c(),f.m(t,n)):f&&(f.d(1),f=null),e[1]._map&&e[1]._opt&&e[1]._opt.years?m?m.p(e,y):(m=Qt(e),m.c(),m.m(t,l)):m&&(m.d(1),m=null),e[2]._map&&e[2]._opt&&e[2]._opt.years?g?g.p(e,y):(g=nn(e),g.c(),g.m(t,s)):g&&(g.d(1),g=null),e[3]._map&&e[3]._opt&&e[3]._opt.years?b?b.p(e,y):(b=on(e),b.c(),b.m(t,o)):b&&(b.d(1),b=null),e[4]._map&&e[4]._opt&&e[4]._opt.years?k?k.p(e,y):(k=cn(e),k.c(),k.m(t,r)):k&&(k.d(1),k=null),e[11]._map&&e[11]._opt&&e[11]._opt.years?x?x.p(e,y):(x=un(e),x.c(),x.m(t,i)):x&&(x.d(1),x=null),e[12]._map&&e[12]._opt&&e[12]._opt.years?j?j.p(e,y):(j=mn(e),j.c(),j.m(t,a)):j&&(j.d(1),j=null),e[13]._map&&e[13]._opt&&e[13]._opt.years?C?C.p(e,y):(C=xn(e),C.c(),C.m(t,c)):C&&(C.d(1),C=null),w===(w=L(e))&&T?T.p(e,y):(T&&T.d(1),T=w&&w(e),T&&(T.c(),T.m(t,p))),e[10]._map?O?O.p(e,y):(O=Tn(e),O.c(),O.m(t,d)):O&&(O.d(1),O=null),e[5]._map?q?q.p(e,y):(q=On(e),q.c(),q.m(t,u)):q&&(q.d(1),q=null),e[6]._map?$?$.p(e,y):($=Pn(e),$.c(),$.m(t,_)):$&&($.d(1),$=null),e[7]._map?P?P.p(e,y):(P=Hn(e),P.c(),P.m(t,h)):P&&(P.d(1),P=null),e[8]._map?H?H.p(e,y):(H=Bn(e),H.c(),H.m(t,v)):H&&(H.d(1),H=null),e[9]._map?N?N.p(e,y):(N=Gn(e),N.c(),N.m(t,null)):N&&(N.d(1),N=null)},i:y,o:y,d(e){e&&F(t),f&&f.d(),m&&m.d(),g&&g.d(),b&&b.d(),k&&k.d(),x&&x.d(),j&&j.d(),C&&C.d(),T&&T.d(),O&&O.d(),q&&q.d(),$&&$.d(),P&&P.d(),H&&H.d(),N&&N.d()}}}function An(e,t,n){let{DtpHearthsPicket4:l}=t,{DtpHearthsSettlements:s}=t,{DtpHearthsPicket:o}=t,{DtpHearths5:r}=t,{DtpHearths3:i}=t,{DtpHearthsStat:a}=t,{DtpHearthsTmp:c}=t,{DtpHearths:p}=t,{DtpVerifyed:d}=t,{DtpSkpdi:u}=t,{DtpGibdd:_}=t,{DtpGibddRub:h}=t,{Rub:v}=t,{Measures:f}=t,{control:m}=t;f||(f={}),v||(v={}),h||(h={}),l||(l={}),o||(o={}),s||(s={}),r||(r={}),i||(i={});let g,y,b=0;const k=new Date,x=new Date(new Date(k.getFullYear(),k.getMonth(),k.getDate()).getTime()),j=k,C=new Date(2019,0,1);let w,z,D,F=m._id_dtp||null,T=m._dateInterval||[C.getTime()/1e3,j.getTime()/1e3],E=d._opt||{},O=E.collision_type?Object.keys(E.collision_type).sort((e,t)=>E.collision_type[t]-E.collision_type[e]):[],M=u._opt||{},q=M.collision_type?Object.keys(M.collision_type).sort((e,t)=>M.collision_type[t]-M.collision_type[e]):[],$=_._opt||{},P=$.collision_type?Object.keys($.collision_type).sort((e,t)=>$.collision_type[t]-$.collision_type[e]):[],S={Dps1:!0,Dps0:!0},N={ev1:!0,ev0:!0},B=(h||{})._opt||{},I=B.collision_type?Object.keys(B.collision_type).sort((e,t)=>B.collision_type[t]-B.collision_type[e]):[],G=(p||{})._opt||{},R=G.str_icon_type?Object.keys(G.str_icon_type).sort((e,t)=>G.str_icon_type[t]-G.str_icon_type[e]):[],Z=(c||{})._opt||{},V=Z.str_icon_type?Object.keys(Z.str_icon_type).sort((e,t)=>Z.str_icon_type[t]-Z.str_icon_type[e]):[],W=(a||{})._opt||{},K=W.str_icon_type?Object.keys(W.str_icon_type).sort((e,t)=>W.str_icon_type[t]-W.str_icon_type[e]):[],X=(i||{})._opt||{},Q=X.str_icon_type?Object.keys(X.str_icon_type).sort((e,t)=>X.str_icon_type[t]-X.str_icon_type[e]):[],ee=(r||{})._opt||{},te=ee.str_icon_type?Object.keys(ee.str_icon_type).sort((e,t)=>ee.str_icon_type[t]-ee.str_icon_type[e]):[],ne=(s||{})._opt||{},le=ne.road?Object.keys(ne.road).sort((e,t)=>ne.road[t]-ne.road[e]):[],se=(o||{})._opt||{},oe=se.road?Object.keys(se.road).sort((e,t)=>se.road[t]-se.road[e]):[],re=(l||{})._opt||{},ie=re.road?Object.keys(re.road).sort((e,t)=>re.road[t]-re.road[e]):[],ae=f._opt||{},ce=ae.type?Object.keys(ae.type).sort((e,t)=>ae.type[t]-ae.type[e]):[],pe=[""],de={hearth3:!0,hearth5:!0},ue=null,_e=[""],he=[""],ve=[""],fe=[""],me={radius:19,blur:11.26,minOpacity:.34},ge=me.radius,ye=11.26,be=.34,ke=v&&v._argFilters?v._argFilters[0]:{type:"comp",zn:{on:!0,off:!0}},xe=ke.zn.on,je=ke.zn.off,Ce=[];const Le=()=>{if(f._map){let e=[];Ce.length&&e.push({type:"measures_type",zn:Ce}),T&&e.push({type:"date",zn:T}),f.setFilter(e)}};let we={};Object.keys(ne.years||{}).sort().forEach(e=>{n(33,we[e]=!0,we)});let ze={0:!0,1:!0,2:!0};const De=e=>{if(s._map){if(e){let t=e.target||{},l=t.checked,s=t.id,o=t.name;"stricken"!==s&&n(33,we[o]=l,we)}let t=[{type:"year",zn:we}];ze&&t.push({type:"city",zn:ze}),F&&t.push({type:"id_dtp",zn:F}),ue&&t.push({type:"id_hearth",zn:ue}),pe&&t.push({type:"roads",zn:pe}),t.push({type:"ht",zn:de}),s.setFilter(t)}};let Fe={};Object.keys(se.years||{}).sort().forEach(e=>{n(35,Fe[e]=!0,Fe)});const Te=e=>{if(o._map){if(e){let t=e.target||{},l=t.checked,s=t.id,o=t.name;"stricken"!==s&&n(35,Fe[o]=l,Fe)}let t=[{type:"year",zn:Fe}];F&&t.push({type:"id_dtp",zn:F}),ue&&t.push({type:"id_hearth",zn:ue}),pe&&t.push({type:"roads",zn:pe}),t.push({type:"ht",zn:de}),o.setFilter(t)}};let Ee,Oe={};Object.keys(re.years||{}).sort().forEach(e=>{n(37,Oe[e]=!0,Oe)});const Me=e=>{if(l._map){if(e){let t=e.target||{},l=t.checked,s=t.id,o=t.name;"stricken"!==s&&n(37,Oe[o]=l,Oe)}let t=[];F&&t.push({type:"id_dtp",zn:F}),Ee&&t.push({type:"stricken",zn:Number(Ee)}),1===rt&&t.push({type:"year",zn:Oe}),ue&&t.push({type:"id_hearth",zn:ue}),pe&&t.push({type:"roads",zn:pe}),t.push({type:"ht",zn:de}),l.setFilter(t)}},qe=()=>{Me(),De(),Te(),We({}),nt({}),jt({}),ft({}),ct({}),Ie(),Be(),Ne(),Le(),$e()},$e=()=>{if(d._map){let e=[{type:"evnt",zn:N},{type:"itemType",zn:b}];F&&e.push({type:"id_dtp",zn:F}),T&&(n(115,m._dateInterval=T,m),e.push({type:"date",zn:T})),_e&&e.push({type:"collision_type",zn:_e}),d.setFilter(e)}};let Pe=h._argFilters&&h._argFilters.length?h._argFilters[0]:{type:"list_rub",zn:{on:!0,off:!0}},Se=Pe.zn.on,He=Pe.zn.off;const Ne=()=>{if(h._map){let e=[{type:"list_rub",zn:{on:Se,off:He}}];F&&e.push({type:"id_dtp",zn:F}),T&&e.push({type:"date",zn:T}),fe&&e.push({type:"collision_type",zn:fe}),h.setFilter(e)}},Be=()=>{if(_._map){let e=[{type:"dps",zn:S},{type:"evnt",zn:N}];F&&e.push({type:"id_dtp",zn:F}),T&&e.push({type:"date",zn:T}),ve&&e.push({type:"collision_type",zn:ve}),_.setFilter(e)}},Ie=()=>{if(u._map){let e=[{type:"evnt",zn:N}];F&&e.push({type:"id_dtp",zn:F}),T&&e.push({type:"date",zn:T}),he&&e.push({type:"collision_type",zn:he}),u.setFilter(e)}};var Ge;Ge=()=>{let e={onSelect(e){this._o.field.value=this.toString(),T[this._o._dint]=this.getDate().getTime()/1e3+24*this._o._dint*60*60,$e(),Ie(),Be(),Le(),Ne()},toString(e,t){let n=e.getDate();n<10&&(n="0"+n);let l=e.getMonth()+1;return l<10&&(l="0"+l),`${n}.${l}.${e.getFullYear()}`},parse(e,t){const n=e.split("."),l=parseInt(n[0],10),s=parseInt(n[1],10)-1,o=parseInt(n[2],10);return new Date(o,s,l)},i18n:{previousMonth:"Предыдущий месяц",nextMonth:"Следующий месяц",months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],weekdays:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],weekdaysShort:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]},format:"DD.MM.YYYY",setDefaultDate:!0,yearRange:20,blurFieldOnSelect:!1};w=new Pikaday(L.extend({},e,{_dint:0,field:g,defaultDate:new Date(1e3*T[0])})),z=new Pikaday(L.extend({},e,{_dint:1,field:y,defaultDate:new Date(1e3*T[1])})),qe()},Y().$$.on_mount.push(Ge);let Ue,Ae,Re=[""],Ze=1,Ye={},Ve={};Object.keys(ee.years||{}).sort().forEach(e=>{n(43,Ye[e]=!0,Ye),Object.keys(ee.years[e]).sort().forEach(t=>{Ae={},Ae[e]={},Ae[e][t]=!0})}),Ve=Ae||{};const We=e=>{if(r._map){let t=[],l=e.target||{},s=l.checked,o=l.id,i=l.name;if("hearths_period_type_52"===o)n(42,Ze=2);else if("hearths_period_type_51"===o)n(42,Ze=1);else if("hearths_year_5"===o)s?n(43,Ye[i]=!0,Ye):delete Ye[i];else if("hearths_quarter_5"===o){let e=i.split("_");s?(Ve[e[0]]||(Ve[e[0]]={}),Ve[e[0]][e[1]]=!0):(Ve[e[0]]&&delete Ve[e[0]][e[1]],0===Object.keys(Ve[e[0]]).length&&delete Ve[e[0]])}1===Ze?t.push({type:"year",zn:Ye}):2===Ze&&t.push({type:"quarter",zn:Ve}),Ue&&t.push({type:"stricken",zn:Number(Ue)}),Re.length>0&&Re[0]&&t.push({type:"str_icon_type",zn:Re}),F&&t.push({type:"id_dtp",zn:F}),r.setFilter(t)}};let Ke,Je,Xe=[""],Qe=1,et={},tt={};Object.keys(X.years||{}).sort().forEach(e=>{n(47,et[e]=!0,et),Object.keys(X.years[e]).sort().forEach(t=>{Je={},Je[e]={},Je[e][t]=!0})}),tt=Je||{};const nt=e=>{if(i._map){let t=[],l=e.target||{},s=l.checked,o=l.id,r=l.name;if("hearths_period_type_32"===o)n(46,Qe=2);else if("hearths_period_type_31"===o)n(46,Qe=1);else if("hearths_year_3"===o)s?n(47,et[r]=!0,et):delete et[r];else if("hearths_quarter_3"===o){let e=r.split("_");s?(tt[e[0]]||(tt[e[0]]={}),tt[e[0]][e[1]]=!0):(tt[e[0]]&&delete tt[e[0]][e[1]],0===Object.keys(tt[e[0]]).length&&delete tt[e[0]])}1===Qe?t.push({type:"year",zn:et}):2===Qe&&t.push({type:"quarter",zn:tt}),Ke&&t.push({type:"stricken",zn:Number(Ke)}),Xe.length>0&&Xe[0]&&t.push({type:"str_icon_type",zn:Xe}),F&&t.push({type:"id_dtp",zn:F}),i.setFilter(t)}};let lt,st,ot=[""],rt=1,it={},at={};Object.keys(W.years||{}).sort().forEach(e=>{n(51,it[e]=!0,it),Object.keys(W.years[e]).sort().forEach(t=>{st={},st[e]={},st[e][t]=!0})}),at=st||{};const ct=e=>{if(a._map){let t=[],l=e.target||{},s=l.checked,o=l.id,r=l.name;if("hearths_period_type_Stat2"===o)n(50,rt=2);else if("hearths_period_type_Stat1"===o)n(50,rt=1);else if("hearths_year_Stat"===o)s?n(51,it[r]=!0,it):delete it[r];else if("hearths_quarter_Stat"===o){let e=r.split("_");s?(at[e[0]]||n(52,at[e[0]]={},at),n(52,at[e[0]][e[1]]=!0,at)):(at[e[0]]&&delete at[e[0]][e[1]],0===Object.keys(at[e[0]]).length&&delete at[e[0]])}1===rt?t.push({type:"year",zn:it}):2===rt&&t.push({type:"quarter",zn:at}),lt&&t.push({type:"stricken",zn:Number(lt)}),ot.length>0&&ot[0]&&t.push({type:"str_icon_type",zn:ot}),F&&t.push({type:"id_dtp",zn:F}),a.setFilter(t)}};let pt,dt,ut=[""],_t=1,ht={},vt={};Object.keys(Z.years||{}).sort().forEach(e=>{n(56,ht[e]=!0,ht),Object.keys(Z.years[e]).sort().forEach(t=>{dt={},dt[e]={},dt[e][t]=!0})}),vt=dt||{};const ft=e=>{if(c._map){let t=[],l=e.target||{},s=l.checked,o=l.id,r=l.name;if("hearths_period_type_tmp2"===o)n(55,_t=2);else if("hearths_period_type_tmp1"===o)n(55,_t=1);else if("hearths_year_tmp"===o)s?n(56,ht[r]=!0,ht):delete ht[r];else if("hearths_quarter_tmp"===o){let e=r.split("_");s?(vt[e[0]]||n(57,vt[e[0]]={},vt),n(57,vt[e[0]][e[1]]=!0,vt)):(vt[e[0]]&&delete vt[e[0]][e[1]],0===Object.keys(vt[e[0]]).length&&delete vt[e[0]])}1===_t?t.push({type:"year",zn:ht}):2===_t&&t.push({type:"quarter",zn:vt}),pt&&t.push({type:"stricken",zn:Number(pt)}),ut.length>0&&ut[0]&&t.push({type:"str_icon_type",zn:ut}),F&&t.push({type:"id_dtp",zn:F}),c.setFilter(t)}};let mt,gt,yt=[""],bt=1,kt={},xt={};Object.keys(G.years||{}).sort().forEach(e=>{n(61,kt[e]=!0,kt),Object.keys(G.years[e]).sort().forEach(t=>{gt={},gt[e]={},gt[e][t]=!0})}),xt=gt||{};const jt=e=>{if(p._map){let t=[],l=e.target||{},s=l.checked,o=l.id,r=l.name;if("hearths_period_type2"===o)n(60,bt=2);else if("hearths_period_type1"===o)n(60,bt=1);else if("hearths_year"===o)s?n(61,kt[r]=!0,kt):delete kt[r];else if("hearths_quarter"===o){let e=r.split("_");s?(xt[e[0]]||n(62,xt[e[0]]={},xt),n(62,xt[e[0]][e[1]]=!0,xt)):(xt[e[0]]&&delete xt[e[0]][e[1]],0===Object.keys(xt[e[0]]).length&&delete xt[e[0]])}1===bt?t.push({type:"year",zn:kt}):2===bt&&t.push({type:"quarter",zn:xt}),mt&&t.push({type:"stricken",zn:Number(mt)}),yt.length>0&&yt[0]&&t.push({type:"str_icon_type",zn:yt}),F&&t.push({type:"id_dtp",zn:F}),p.setFilter(t)}};return e.$set=e=>{"DtpHearthsPicket4"in e&&n(0,l=e.DtpHearthsPicket4),"DtpHearthsSettlements"in e&&n(1,s=e.DtpHearthsSettlements),"DtpHearthsPicket"in e&&n(2,o=e.DtpHearthsPicket),"DtpHearths5"in e&&n(3,r=e.DtpHearths5),"DtpHearths3"in e&&n(4,i=e.DtpHearths3),"DtpHearthsStat"in e&&n(11,a=e.DtpHearthsStat),"DtpHearthsTmp"in e&&n(12,c=e.DtpHearthsTmp),"DtpHearths"in e&&n(13,p=e.DtpHearths),"DtpVerifyed"in e&&n(5,d=e.DtpVerifyed),"DtpSkpdi"in e&&n(6,u=e.DtpSkpdi),"DtpGibdd"in e&&n(7,_=e.DtpGibdd),"DtpGibddRub"in e&&n(8,h=e.DtpGibddRub),"Rub"in e&&n(9,v=e.Rub),"Measures"in e&&n(10,f=e.Measures),"control"in e&&n(115,m=e.control)},[l,s,o,r,i,d,u,_,h,v,f,a,c,p,g,y,F,S,N,pe,de,ue,_e,he,ve,fe,ge,ye,be,D,xe,je,Ce,we,ze,Fe,Ee,Oe,Se,He,Ue,Re,Ze,Ye,Ke,Xe,Qe,et,lt,ot,rt,it,at,pt,ut,_t,ht,vt,mt,yt,bt,kt,xt,E,O,M,q,$,P,B,I,G,R,Z,V,W,K,X,Q,ee,te,ne,le,se,oe,re,ie,ae,ce,me,Le,e=>{let t=[{type:"comp",zn:{on:xe,off:je}}];v.setFilter(t)},De,Te,Me,e=>{let t=e.target,l=t.name;n(34,ze[l]=t.checked,ze),n(115,m.city=ze,m),qe()},e=>{let t=e.target.value;n(16,F=t||null),n(115,m._id_dtp=F,m),qe()},e=>{let t=e.target.value;n(21,ue=t||null),De(),Te(),Me()},e=>{let t=e.target;n(20,de[t.name]=t.checked,de),De(),Te(),Me()},e=>{let t=e.target;n(17,S[t.name]=t.checked,S),Be()},e=>{let t=e.target;n(18,N[t.name]=t.checked,N),Be(),Ie(),$e()},e=>{let t=e.target;n(8,h._needHeat=n(7,_._needHeat=n(6,u._needHeat=n(5,d._needHeat=!!t.checked&&me,d),u),_),h),Ne(),Be(),Ie(),$e()},()=>{let e={radius:ge,blur:ye,minOpacity:be};_._heat&&_._heat.setOptions(e),u._heat&&u._heat.setOptions(e),d._heat&&d._heat.setOptions(e)},$e,Ne,Be,Ie,e=>{let t=e.target;b=Number(t.value),$e()},()=>{let e=z.getDate(),t=w.getDate(),n=e-t;0===n&&(n=864e5),w.setDate(new Date(t.getTime()-n)),z.setDate(new Date(e.getTime()-n)),T=[w.getDate().getTime()/1e3,86400+z.getDate().getTime()/1e3],$e(),Ie(),Be(),Ne()},()=>{let e=z.getDate(),t=w.getDate(),n=e-t;0===n&&(n=864e5),w.setDate(new Date(t.getTime()+n)),z.setDate(new Date(e.getTime()+n)),T=[w.getDate().getTime()/1e3,86400+z.getDate().getTime()/1e3],$e(),Ie(),Be(),Ne()},We,nt,ct,ft,jt,m,b,T,w,z,Ve,Ae,tt,Je,st,dt,gt,k,x,j,C,void 0,void 0,void 0,void 0,ke,qe,Pe,function(){rt=this.__value,n(50,rt)},[[],[],[],[],[]],(e,t)=>e+=re.road[t],function(){pe=A(this),n(19,pe),n(86,ie)},function(){Ee=U(this),n(36,Ee)},(e,t)=>e+=ne.road[t],function(){pe=A(this),n(19,pe),n(86,ie)},(e,t)=>e+=se.road[t],function(){pe=A(this),n(19,pe),n(86,ie)},function(){Ze=this.__value,n(42,Ze)},(e,t)=>e+=ee.str_icon_type[t],function(){Re=A(this),n(41,Re),n(80,te)},function(){Ue=U(this),n(40,Ue)},function(){Qe=this.__value,n(46,Qe)},(e,t)=>e+=X.str_icon_type[t],function(){Xe=A(this),n(45,Xe),n(78,Q)},function(){Ke=U(this),n(44,Ke)},function(){rt=this.__value,n(50,rt)},function(){rt=this.__value,n(50,rt)},(e,t)=>e+=W.str_icon_type[t],function(){ot=A(this),n(49,ot),n(76,K)},function(){lt=U(this),n(48,lt)},function(){_t=this.__value,n(55,_t)},function(){_t=this.__value,n(55,_t)},(e,t)=>e+=Z.str_icon_type[t],function(){ut=A(this),n(54,ut),n(74,V)},function(){pt=U(this),n(53,pt)},function(){bt=this.__value,n(60,bt)},function(){bt=this.__value,n(60,bt)},(e,t)=>e+=G.str_icon_type[t],function(){yt=A(this),n(59,yt),n(72,R)},function(){mt=U(this),n(58,mt)},function(e){J[e?"unshift":"push"](()=>{n(14,g=e)})},function(e){J[e?"unshift":"push"](()=>{n(15,y=e)})},function(){be=H(this.value),n(28,be)},function(){ge=H(this.value),n(26,ge)},function(){ye=H(this.value),n(27,ye)},function(e){J[e?"unshift":"push"](()=>{n(29,D=e)})},(e,t)=>e+=ae.type[t],function(){Ce=A(this),n(32,Ce),n(88,ce)},(e,t)=>e+=E.collision_type[t],function(){_e=A(this),n(22,_e),n(64,O)},(e,t)=>e+=M.collision_type[t],function(){he=A(this),n(23,he),n(66,q)},(e,t)=>e+=$.collision_type[t],function(){ve=A(this),n(24,ve),n(68,P)},function(){Se=this.checked,n(38,Se)},function(){He=this.checked,n(39,He)},(e,t)=>e+=B.collision_type[t],function(){fe=A(this),n(25,fe),n(70,I)},function(){xe=this.checked,n(30,xe)},function(){je=this.checked,n(31,je)}]}xt._needHeat={radius:19,blur:11.26,minOpacity:.34},xt.checkZoom=e=>{Object.keys(xt._layers).length?e<12&&xt.setFilter(kt):e>11&&xt.setFilter(kt)},xt.setFilter=e=>{if(!xt._map)return;xt.clearLayers(),kt=e||[];let t=[],n=[];xt._group&&xt._map&&(xt._group.getLayers().forEach(e=>{let l=e.options.props,s=0;kt.forEach(e=>{"itemType"===e.type?(0===e.zn||1===e.zn&&l.id_stat&&l.id_skpdi||2===e.zn&&l.id_skpdi&&!l.id_stat||3===e.zn&&l.id_stat&&!l.id_skpdi)&&s++:"evnt"===e.type?l.event?e.zn.ev1&&s++:e.zn.ev0&&s++:"id_dtp"===e.type?l.id_skpdi!=e.zn&&l.id_stat!=e.zn||s++:"collision_type"===e.type?(""===e.zn[0]||e.zn.filter(e=>e===l.collision_type).length)&&s++:"date"===e.type&&l.date>=e.zn[0]&&l.date<e.zn[1]&&s++}),s===kt.length&&(t.push(e),n.push(e._latlng))}),xt._needHeat?(xt._map.addLayer(xt._heat),xt._heat.setLatLngs(n),xt._heat.setOptions(xt._needHeat),xt._map._zoom>11&&xt.addLayer(yt.layerGroup(t))):(xt.addLayer(yt.layerGroup(t)),xt._map.removeLayer(xt._heat)))},xt.on("remove",()=>{xt._map.removeLayer(xt._heat),xt.clearLayers()}).on("add",e=>{kt=[],xt._heat=yt.heatLayer([],{interactive:!1}),fetch("https://dtp.mvs.group/scripts/index_dev.php?request=get_collision",{}).then(e=>e.json()).then(e=>{let t={collision_type:{},iconType:{},event:{}},n=[],l=e.map(e=>{let l=e.iconType||0,s=[],o=!1,r="#2F4F4F";l&&(o=l%2==0,l>=1&&l<=6?r="#8B4513":7===l||8===l?r="#228B22":l>=9&&l<=14?r="#8B4513":15===l||16===l?r="#7B68EE":17!==l&&18!==l||(r="#2F4F4F")),e.id_skpdi&&s.push({type:"skpdi",id:e.id_skpdi}),e.id_stat&&s.push({type:"gibdd",id:e.id_stat}),e._cur=s,e.lat&&e.lon||(console.log("_______",e),e.lat=e.lon=0);let i=t.event[e.event];i?i++:i=1,t.event[e.event]=i;let a=t.collision_type[e.collision_type];a?a++:a=1,t.collision_type[e.collision_type]=a,t.iconType[e.collision_type]=l;let c=yt.latLng(e.lat,e.lon,o?1:.5);return n.push(c),new g(c,{props:e,radius:6,triangle:s.length>1,box:!!e.id_skpdi,stroke:o,fillColor:r}).bindPopup(bt).on("popupopen",e=>{!function(e){let t=yt.DomUtil.create("div");new gt({target:t,props:{prp:e}}),bt.setContent(t)}(e.target.options.props)}).on("popupclose",e=>{e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)})});xt.addLayer(xt._heat),xt._heat.setLatLngs(n),xt._heat.setOptions(xt._needHeat),xt._opt=t,xt._group=yt.layerGroup(l),kt?xt.setFilter(kt):xt.addLayer(xt._group),xt.checkZoom(xt._map._zoom),xt._refreshFilters()})});class Rn extends ge{constructor(e){super(),me(this,e,An,Un,C,{DtpHearthsPicket4:0,DtpHearthsSettlements:1,DtpHearthsPicket:2,DtpHearths5:3,DtpHearths3:4,DtpHearthsStat:11,DtpHearthsTmp:12,DtpHearths:13,DtpVerifyed:5,DtpSkpdi:6,DtpGibdd:7,DtpGibddRub:8,Rub:9,Measures:10,control:115},[-1,-1,-1,-1,-1,-1,-1,-1])}}function Zn(e,t,n){const l=e.slice();return l[9]=t[n],l[11]=n,l}function Yn(e){let t,n,l,s,o,r,i,a,c,p,d,u=(e[0].piketaj_start_km||0)+"",_=(e[0].piketaj_finish_km||0)+"";return{c(){t=E("tr"),n=E("td"),n.textContent="Пикетаж:",l=M(),s=E("td"),o=O("От: "),r=E("b"),i=O(u),a=O(" км. до: "),c=E("b"),p=O(_),d=O(" км."),S(n,"class","first svelte-mnr9l0")},m(e,u){D(e,t,u),z(t,n),z(t,l),z(t,s),z(s,o),z(s,r),z(r,i),z(s,a),z(s,c),z(c,p),z(s,d)},p(e,t){1&t&&u!==(u=(e[0].piketaj_start_km||0)+"")&&N(i,u),1&t&&_!==(_=(e[0].piketaj_finish_km||0)+"")&&N(p,_)},d(e){e&&F(t)}}}function Vn(e){let t,n,l,s,o,r=(e[0].str_icon_type||"")+"";return{c(){t=E("tr"),n=E("td"),n.textContent="Тип ДТП:",l=M(),s=E("td"),o=O(r),S(n,"class","first svelte-mnr9l0")},m(e,r){D(e,t,r),z(t,n),z(t,l),z(t,s),z(s,o)},p(e,t){1&t&&r!==(r=(e[0].str_icon_type||"")+"")&&N(o,r)},d(e){e&&F(t)}}}function Wn(e){let t,n;const l=new gt({props:{prp:e[9],closeMe:e[8]}});return{c(){t=E("div"),_e(l.$$.fragment),S(t,"class","win leaflet-popup-content-wrapper  svelte-mnr9l0")},m(e,s){D(e,t,s),he(l,t,null),n=!0},p(e,t){const n={};1&t&&(n.prp=e[9]),4&t&&(n.closeMe=e[8]),l.$set(n)},i(e){n||(de(l.$$.fragment,e),n=!0)},o(e){ue(l.$$.fragment,e),n=!1},d(e){e&&F(t),ve(l)}}}function Kn(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,j,C,L,w,T,q,P,H,B=Math.floor(e[9].piketaj_m/1e3)+"",I=e[9].piketaj_m%1e3+"",G=new Date(1e3*e[9].date).toLocaleDateString()+"",U=e[9].lost+"",A=e[9].stricken+"",R=e[9].address+"";function Z(...t){return e[6](e[11],...t)}function Y(...t){return e[7](e[11],...t)}let V=e[2]===e[11]&&Wn(e);return{c(){t=E("tr"),n=E("td"),l=E("ul"),s=E("li"),o=O("Пикетаж: "),r=O(B),i=O(" км. "),a=O(I),c=O(" м."),p=M(),d=E("li"),u=O(G),_=O(" погибших "),h=O(U),v=O(", раненых "),f=O(A),g=M(),y=E("tr"),b=E("td"),b.textContent="Адрес:",k=M(),j=E("td"),C=O(R),L=E("br"),w=E("span"),w.textContent="подробнее",T=M(),V&&V.c(),q=M(),S(s,"class","svelte-mnr9l0"),S(d,"title",m="id: "+e[9].id),S(d,"class","svelte-mnr9l0"),S(n,"class","first svelte-mnr9l0"),S(n,"colspan","2"),S(b,"class","first svelte-mnr9l0"),S(w,"class","link svelte-mnr9l0")},m(e,m,F){D(e,t,m),z(t,n),z(n,l),z(l,s),z(s,o),z(s,r),z(s,i),z(s,a),z(s,c),z(l,p),z(l,d),z(d,u),z(d,_),z(d,h),z(d,v),z(d,f),D(e,g,m),D(e,y,m),z(y,b),z(y,k),z(y,j),z(j,C),z(j,L),z(j,w),z(j,T),V&&V.m(j,null),z(y,q),P=!0,F&&x(H),H=[$(d,"click",Z),$(w,"click",Y)]},p(t,n){e=t,(!P||1&n)&&B!==(B=Math.floor(e[9].piketaj_m/1e3)+"")&&N(r,B),(!P||1&n)&&I!==(I=e[9].piketaj_m%1e3+"")&&N(a,I),(!P||1&n)&&G!==(G=new Date(1e3*e[9].date).toLocaleDateString()+"")&&N(u,G),(!P||1&n)&&U!==(U=e[9].lost+"")&&N(h,U),(!P||1&n)&&A!==(A=e[9].stricken+"")&&N(f,A),(!P||1&n&&m!==(m="id: "+e[9].id))&&S(d,"title",m),(!P||1&n)&&R!==(R=e[9].address+"")&&N(C,R),e[2]===e[11]?V?(V.p(e,n),de(V,1)):(V=Wn(e),V.c(),de(V,1),V.m(j,null)):V&&(ce(),ue(V,1,1,()=>{V=null}),pe())},i(e){P||(de(V),P=!0)},o(e){ue(V),P=!1},d(e){e&&F(t),e&&F(g),e&&F(y),V&&V.d(),x(H)}}}function Jn(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,x,j,C,L,w,q,$,P,H,B,I,G,U,A,R,Z,Y,V=e[1]?"Предочаг":"Очаг",W=(e[0].id||e[0].id_hearth)+"",K=e[0].quarter?e[0].quarter+" кв.":"",J=e[0].year+"",X=e[0].list_dtp.length+"",Q=e[0].count_lost+"",ee=e[0].count_stricken+"",te=e[0].piketaj_start_km&&Yn(e),ne=e[0].str_icon_type&&Vn(e),le=e[0].list_dtp,se=[];for(let t=0;t<le.length;t+=1)se[t]=Kn(Zn(e,le,t));const oe=e=>ue(se[e],1,1,()=>{se[e]=null});return{c(){t=E("div"),n=E("div"),l=O(V),s=O(" ДТП (id: "),o=O(W),r=O(")"),i=O(e[4]),a=M(),c=E("div"),p=O(K),d=M(),u=O(J),_=O("г."),h=M(),v=E("div"),f=E("table"),m=E("tbody"),te&&te.c(),g=M(),ne&&ne.c(),y=M(),b=E("tr"),k=E("td"),k.textContent="Всего ДТП:",x=M(),j=E("td"),C=O(X),L=M(),w=E("tr"),q=E("td"),q.textContent="Погибших:",$=M(),P=E("td"),H=O(Q),B=M(),I=E("tr"),G=E("td"),G.textContent="Раненых:",U=M(),A=E("td"),R=O(ee),Z=M();for(let e=0;e<se.length;e+=1)se[e].c();S(n,"class","pLine"),S(c,"class","pLine"),S(k,"class","first svelte-mnr9l0"),S(q,"class","first svelte-mnr9l0"),S(G,"class","first svelte-mnr9l0"),S(f,"class","table svelte-mnr9l0"),S(v,"class","featureCont"),S(t,"class","mvsPopup svelte-mnr9l0")},m(e,F){D(e,t,F),z(t,n),z(n,l),z(n,s),z(n,o),z(n,r),z(n,i),z(t,a),z(t,c),z(c,p),z(c,d),z(c,u),z(c,_),z(t,h),z(t,v),z(v,f),z(f,m),te&&te.m(m,null),z(m,g),ne&&ne.m(m,null),z(m,y),z(m,b),z(b,k),z(b,x),z(b,j),z(j,C),z(m,L),z(m,w),z(w,q),z(w,$),z(w,P),z(P,H),z(m,B),z(m,I),z(I,G),z(I,U),z(I,A),z(A,R),z(m,Z);for(let e=0;e<se.length;e+=1)se[e].m(m,null);Y=!0},p(e,[t]){if((!Y||2&t)&&V!==(V=e[1]?"Предочаг":"Очаг")&&N(l,V),(!Y||1&t)&&W!==(W=(e[0].id||e[0].id_hearth)+"")&&N(o,W),(!Y||1&t)&&K!==(K=e[0].quarter?e[0].quarter+" кв.":"")&&N(p,K),(!Y||1&t)&&J!==(J=e[0].year+"")&&N(u,J),e[0].piketaj_start_km?te?te.p(e,t):(te=Yn(e),te.c(),te.m(m,g)):te&&(te.d(1),te=null),e[0].str_icon_type?ne?ne.p(e,t):(ne=Vn(e),ne.c(),ne.m(m,y)):ne&&(ne.d(1),ne=null),(!Y||1&t)&&X!==(X=e[0].list_dtp.length+"")&&N(C,X),(!Y||1&t)&&Q!==(Q=e[0].count_lost+"")&&N(H,Q),(!Y||1&t)&&ee!==(ee=e[0].count_stricken+"")&&N(R,ee),13&t){let n;for(le=e[0].list_dtp,n=0;n<le.length;n+=1){const l=Zn(e,le,n);se[n]?(se[n].p(l,t),de(se[n],1)):(se[n]=Kn(l),se[n].c(),de(se[n],1),se[n].m(m,null))}for(ce(),n=le.length;n<se.length;n+=1)oe(n);pe()}},i(e){if(!Y){for(let e=0;e<le.length;e+=1)de(se[e]);Y=!0}},o(e){se=se.filter(Boolean);for(let e=0;e<se.length;e+=1)ue(se[e]);Y=!1},d(e){e&&F(t),te&&te.d(),ne&&ne.d(),T(se,e)}}}function Xn(e,t,n){let l,{prp:s}=t,{predochag:o}=t;const r=e=>{let t=s._bounds.options.items[e];t&&t._map&&t._map.panTo(t._latlng)};let i="city"in s?" (city: "+s.city+")":"";return e.$set=e=>{"prp"in e&&n(0,s=e.prp),"predochag"in e&&n(1,o=e.predochag)},[s,o,l,r,i,e=>{console.log("showDtpInfo ",e)},e=>{r(e)},e=>{n(2,l=e)},()=>{n(2,l=null)}]}class Qn extends ge{constructor(e){super(),me(this,e,Xn,Jn,C,{prp:0,predochag:1})}}const el=window.L,tl=(el.popup(),el.popup({minWidth:200}));let nl;const ll=el.featureGroup([]);ll.setFilter=e=>{ll.clearLayers(),nl=e;let t=[];ll._group&&ll._map&&(ll._group.getLayers().forEach(e=>{let n=e.options.cluster,l=n.list_dtp||[],s=0;nl.forEach(e=>{if("quarter"===e.type)e.zn[n.year]&&e.zn[n.year][n.quarter]&&s++;else if("id_dtp"===e.type)l.filter(t=>t.id==e.zn||t.id_skpdi==e.zn||t.id_stat==e.zn).length&&s++;else if("year"===e.type)e.zn[n.year]&&s++;else if("str_icon_type"===e.type)e.zn.filter(e=>e===n.str_icon_type).length&&s++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&!n.count_stricken&&n.count_lost||2===t&&n.count_stricken&&!n.count_lost||3===t&&(n.count_stricken||n.count_lost)||4===t&&n.count_stricken&&n.count_lost)&&s++:s++}}),s===nl.length&&t.push(e)}),ll.addLayer(el.layerGroup(t)))},ll.on("remove",()=>{ll.clearLayers()}).on("add",e=>{nl=[];let t={str_icon_type:{},iconType:{},years:{},dtps:{},stricken:{0:0}},n=[];Promise.all([2019,2020].map(e=>fetch("https://dtp.mvs.group/scripts/hearths_dev/"+e+".txt",{}).then(e=>e.json()))).then(e=>{e.forEach(e=>{t.stricken[0]+=e.length,e.forEach(e=>{let l=e.icon_type||1,s=el.latLngBounds(),o=e.list_dtp,r=!1,i="#FF0000";if(p(e,t),o.length){Number(e.year),Number(e.quarter);let a=t.years[e.year];a||(a=t.years[e.year]={}),t.years[e.year]=a;let c=a[e.quarter];e.quarter in a?c++:c=a[e.quarter]=1,a[e.quarter]=c;let p=t.str_icon_type[e.str_icon_type];p?p++:p=1,t.str_icon_type[e.str_icon_type]=p,t.iconType[e.str_icon_type]=l,l&&(r=l%2==0,1===l||2===l?i="#FFA500":3===l||4===l?i="#B8860B":5===l||6===l?i="#CD853F":7===l||8===l?i="#228B22":9===l||10===l?i="#FF8C00":11===l||12===l?i="#D2691E":13===l||14===l?i="#DEB887":15===l||16===l?i="#7B68EE":17!==l&&18!==l||(i="#2F4F4F"));let d=o.map(n=>{n.iconType;let l=n.coords||{lat:0,lon:0},o=el.latLng(l.lat,l.lon),a=[];s.extend(o),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let c=t.dtps[n.id];return c?c[e.id]?c[e.id]++:c[e.id]=1:(c={},c[e.id]=1),t.dtps[n.id]=c,new g(el.latLng(l.lat,l.lon),{cluster:e,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:r,fillColor:i})});e._bounds=el.rectangle(s,{items:d,cluster:e,fill:!0,color:i,dashArray:"8 3 1"}).on("mouseover",e=>{let t=e.target;t._color=t.options.color,t.options.color="red",t._renderer._updateStyle(t)}).on("mouseout",e=>{let t=e.target;t.options.color=t._color,t._renderer._updateStyle(t)}).on("click",t=>{el.DomEvent.stopPropagation(t);let n=t.target,l=t.latlng;t.originalEvent.ctrlKey&&n.bringToBack(),function(e){let t=el.DomUtil.create("div");new Qn({target:t,props:{prp:e}}),tl.setContent(t)}(e),tl.setLatLng(l).openOn(ll._map)}),n.push(e._bounds),n=n.concat(d)}}),ll._opt=t,ll._group=el.layerGroup(n),nl?ll.setFilter(nl):ll.addLayer(ll._group),ll._refreshFilters()})})});const sl=window.L,ol=(sl.popup(),sl.popup({minWidth:200}));let rl;const il=sl.featureGroup([]);il.setFilter=e=>{il.clearLayers(),rl=e;let t=[];il._group&&il._map&&(il._group.getLayers().forEach(e=>{let n=e.options.cluster,l=n.list_dtp||[],s=0;rl.forEach(e=>{if("quarter"===e.type)e.zn[n.year]&&e.zn[n.year][n.quarter]&&s++;else if("id_dtp"===e.type)l.filter(t=>t.id==e.zn||t.id_skpdi==e.zn||t.id_stat==e.zn).length&&s++;else if("year"===e.type)e.zn[n.year]&&s++;else if("str_icon_type"===e.type)e.zn.filter(e=>e===n.str_icon_type).length&&s++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&!n.count_stricken&&n.count_lost||2===t&&n.count_stricken&&!n.count_lost||3===t&&(n.count_stricken||n.count_lost)||4===t&&n.count_stricken&&n.count_lost)&&s++:s++}}),s===rl.length&&t.push(e)}),il.addLayer(sl.layerGroup(t)))},il.on("remove",()=>{il.clearLayers()}).on("add",e=>{rl=[];let t={str_icon_type:{},iconType:{},years:{},dtps:{},stricken:{0:0}},n=[];Promise.all([2019,2020].map(e=>fetch("https://dtp.mvs.group/scripts/hearthstmp_dev/"+e+".txt",{}).then(e=>e.json()))).then(e=>{e.forEach(e=>{t.stricken[0]+=e.length,e.forEach(e=>{let l=e.icon_type||1,s=sl.latLngBounds(),o=e.list_dtp,r=!1,i="#FF0000";if(p(e,t),o.length){Number(e.year),Number(e.quarter);let a=t.years[e.year];a||(a=t.years[e.year]={}),t.years[e.year]=a;let c=a[e.quarter];e.quarter in a?c++:c=a[e.quarter]=1,a[e.quarter]=c;let p=t.str_icon_type[e.str_icon_type];p?p++:p=1,t.str_icon_type[e.str_icon_type]=p,t.iconType[e.str_icon_type]=l,l&&(r=l%2==0,1===l||2===l?i="#FFA500":3===l||4===l?i="#B8860B":5===l||6===l?i="#CD853F":7===l||8===l?i="#228B22":9===l||10===l?i="#FF8C00":11===l||12===l?i="#D2691E":13===l||14===l?i="#DEB887":15===l||16===l?i="#7B68EE":17!==l&&18!==l||(i="#2F4F4F"));let d=o.map(n=>{n.iconType;let l=n.coords||{lat:0,lon:0},o=sl.latLng(l.lat,l.lon),a=[];s.extend(o),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let c=t.dtps[n.id];return c?c[e.id]?c[e.id]++:c[e.id]=1:(c={},c[e.id]=1),t.dtps[n.id]=c,new g(sl.latLng(l.lat,l.lon),{cluster:e,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:r,fillColor:i})});e._bounds=sl.rectangle(s,{items:d,cluster:e,fill:!0,color:i,dashArray:"8 3 1"}).on("mouseover",e=>{let t=e.target;t._color=t.options.color,t.options.color="red",t._renderer._updateStyle(t)}).on("mouseout",e=>{let t=e.target;t.options.color=t._color,t._renderer._updateStyle(t)}).on("click",t=>{sl.DomEvent.stopPropagation(t);let n=t.target,l=t.latlng;t.originalEvent.ctrlKey&&n.bringToBack(),function(e){let t=sl.DomUtil.create("div");new Qn({target:t,props:{prp:e}}),ol.setContent(t)}(e),ol.setLatLng(l).openOn(il._map)}),n.push(e._bounds),n=n.concat(d)}}),il._opt=t,il._group=sl.layerGroup(n),rl?il.setFilter(rl):il.addLayer(il._group),il._refreshFilters()})})});const al=window.L,cl=(al.popup(),al.popup({minWidth:200}));let pl;const dl=al.featureGroup([]);dl.setFilter=e=>{dl.clearLayers(),pl=e;let t=[];dl._group&&dl._map&&(dl._group.getLayers().forEach(e=>{let n=e.options.cluster,l=n.list_dtp||[],s=0;pl.forEach(e=>{if("quarter"===e.type)e.zn[n.year]&&e.zn[n.year][n.quarter]&&s++;else if("id_dtp"===e.type)l.filter(t=>t.id==e.zn||t.id_skpdi==e.zn||t.id_stat==e.zn).length&&s++;else if("year"===e.type)e.zn[n.year]&&s++;else if("str_icon_type"===e.type)e.zn.filter(e=>e===n.str_icon_type).length&&s++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&!n.count_stricken&&n.count_lost||2===t&&n.count_stricken&&!n.count_lost||3===t&&(n.count_stricken||n.count_lost)||4===t&&n.count_stricken&&n.count_lost)&&s++:s++}}),s===pl.length&&t.push(e)}),dl.addLayer(al.layerGroup(t)))},dl.on("remove",()=>{dl.clearLayers()}).on("add",e=>{pl=[];let t={str_icon_type:{},iconType:{},years:{},dtps:{},stricken:{0:0}},n=[];Promise.all([2019,2020].map(e=>fetch("https://dtp.mvs.group/scripts/hearthsstat_dev/"+e+".txt",{}).then(e=>e.json()))).then(e=>{e.forEach(e=>{t.stricken[0]+=e.length,e.forEach(e=>{let l=e.icon_type||1,s=al.latLngBounds(),o=e.list_dtp,r=!1,i="#FF0000";if(p(e,t),o.length){Number(e.year),Number(e.quarter);let a=t.years[e.year];a||(a=t.years[e.year]={}),t.years[e.year]=a;let c=a[e.quarter];e.quarter in a?c++:c=a[e.quarter]=1,a[e.quarter]=c;let p=t.str_icon_type[e.str_icon_type];p?p++:p=1,t.str_icon_type[e.str_icon_type]=p,t.iconType[e.str_icon_type]=l,l&&(r=l%2==0,1===l||2===l?i="#FFA500":3===l||4===l?i="#B8860B":5===l||6===l?i="#CD853F":7===l||8===l?i="#228B22":9===l||10===l?i="#FF8C00":11===l||12===l?i="#D2691E":13===l||14===l?i="#DEB887":15===l||16===l?i="#7B68EE":17!==l&&18!==l||(i="#2F4F4F"));let d=o.map(n=>{n.iconType;let l=n.coords||{lat:0,lon:0},o=al.latLng(l.lat,l.lon),a=[];s.extend(o),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let c=t.dtps[n.id];return c?c[e.id]?c[e.id]++:c[e.id]=1:(c={},c[e.id]=1),t.dtps[n.id]=c,new g(al.latLng(l.lat,l.lon),{cluster:e,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:r,fillColor:i})});e._bounds=al.rectangle(s,{items:d,cluster:e,fill:!0,color:i,dashArray:"8 3 1"}).on("mouseover",e=>{let t=e.target;t._color=t.options.color,t.options.color="red",t._renderer._updateStyle(t)}).on("mouseout",e=>{let t=e.target;t.options.color=t._color,t._renderer._updateStyle(t)}).on("click",t=>{al.DomEvent.stopPropagation(t);let n=t.target,l=t.latlng;t.layerPoint;t.originalEvent.ctrlKey&&n.bringToBack(),function(e){let t=al.DomUtil.create("div");new Qn({target:t,props:{prp:e}}),cl.setContent(t)}(e),cl.setLatLng(l).openOn(dl._map)}),n.push(e._bounds),n=n.concat(d)}}),dl._opt=t,dl._group=al.layerGroup(n),pl?dl.setFilter(pl):dl.addLayer(dl._group),dl._refreshFilters()})})});const ul=window.L,_l=(ul.popup(),ul.popup({minWidth:200}));let hl;const vl=ul.featureGroup([]);vl.setFilter=e=>{vl.clearLayers(),hl=e;let t=[];vl._group&&vl._map&&(vl._group.getLayers().forEach(e=>{let n=e.options.cluster,l=n.list_dtp||[],s=0;hl.forEach(e=>{if("quarter"===e.type)e.zn[n.year]&&e.zn[n.year][n.quarter]&&s++;else if("id_dtp"===e.type)l.filter(t=>t.id==e.zn||t.id_skpdi==e.zn||t.id_stat==e.zn).length&&s++;else if("year"===e.type)e.zn[n.year]&&s++;else if("str_icon_type"===e.type)e.zn.filter(e=>e===n.str_icon_type).length&&s++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&!n.count_stricken&&n.count_lost||2===t&&n.count_stricken&&!n.count_lost||3===t&&(n.count_stricken||n.count_lost)||4===t&&n.count_stricken&&n.count_lost)&&s++:s++}}),s===hl.length&&t.push(e)}),vl.addLayer(ul.layerGroup(t)))},vl.on("remove",()=>{vl.clearLayers()}).on("add",e=>{hl=[];let t={str_icon_type:{},iconType:{},years:{},dtps:{},stricken:{0:0}},n=[];Promise.all([2019,2020].map(e=>fetch("https://dtp.mvs.group/scripts/hearths3_dev/"+e+".txt",{}).then(e=>e.json()))).then(e=>{e.forEach(e=>{t.stricken[0]+=e.length,e.forEach(e=>{let l=e.icon_type||1,s=ul.latLngBounds(),o=e.list_dtp,r=!1,i=(p(e,t),"#FF0000");if(o.length){Number(e.year),Number(e.quarter);let a=t.years[e.year];a||(a=t.years[e.year]={}),t.years[e.year]=a;let c=a[e.quarter];e.quarter in a?c++:c=a[e.quarter]=1,a[e.quarter]=c;let p,d=t.str_icon_type[e.str_icon_type];d?d++:d=1,t.str_icon_type[e.str_icon_type]=d,t.iconType[e.str_icon_type]=l,l&&(r=l%2==0,1===l||2===l?i="#FFA500":3===l||4===l?i="#B8860B":5===l||6===l?i="#CD853F":7===l||8===l?i="#228B22":9===l||10===l?i="#FF8C00":11===l||12===l?i="#D2691E":13===l||14===l?i="#DEB887":15===l||16===l?i="#7B68EE":17!==l&&18!==l||(i="#2F4F4F"));let u=o.map(n=>{n.iconType;let l=n.coords||{lat:0,lon:0},o=ul.latLng(l.lat,l.lon),a=[];s.extend(o),n.id===e.head&&(p=n),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let c=t.dtps[n.id];return c?c[e.id]?c[e.id]++:c[e.id]=1:(c={},c[e.id]=1),t.dtps[n.id]=c,new g(ul.latLng(l.lat,l.lon),{cluster:e,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:r,fillColor:i})});e._bounds=p?ul.circle(ul.latLng(p.coords.lat,p.coords.lon),{radius:e.radius||500,items:u,cluster:e,color:i}):ul.rectangle(s,{items:u,cluster:e,fill:!0,color:i,dashArray:"8 3 1"}),e._bounds.on("mouseover",e=>{let t=e.target;t._color=t.options.color,t.options.color="red",t._renderer._updateStyle(t)}).on("mouseout",e=>{let t=e.target;t.options.color=t._color,t._renderer._updateStyle(t)}).on("click",t=>{ul.DomEvent.stopPropagation(t);let n=t.target,l=t.latlng;t.layerPoint;t.originalEvent.ctrlKey&&n.bringToBack(),function(e){let t=ul.DomUtil.create("div");new Qn({target:t,props:{prp:e}}),_l.setContent(t)}(e),_l.setLatLng(l).openOn(vl._map)}),n.push(e._bounds),n=n.concat(u)}}),vl._opt=t,vl._group=ul.layerGroup(n),hl?vl.setFilter(hl):vl.addLayer(vl._group),vl._refreshFilters()}),console.log("__DtpHearths3_____",e,vl._opt)})});const fl=window.L,ml=(fl.popup(),fl.popup({minWidth:200}));let gl;const yl=fl.featureGroup([]);yl.setFilter=e=>{yl.clearLayers(),gl=e;let t=[];yl._group&&yl._map&&(yl._group.getLayers().forEach(e=>{let n=e.options.cluster,l=n.list_dtp||[],s=0;gl.forEach(e=>{if("quarter"===e.type)e.zn[n.year]&&e.zn[n.year][n.quarter]&&s++;else if("id_dtp"===e.type)l.filter(t=>t.id==e.zn||t.id_skpdi==e.zn||t.id_stat==e.zn).length&&s++;else if("year"===e.type)e.zn[n.year]&&s++;else if("str_icon_type"===e.type)e.zn.filter(e=>e===n.str_icon_type).length&&s++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&!n.count_stricken&&n.count_lost||2===t&&n.count_stricken&&!n.count_lost||3===t&&(n.count_stricken||n.count_lost)||4===t&&n.count_stricken&&n.count_lost)&&s++:s++}}),s===gl.length&&t.push(e)}),yl.addLayer(fl.layerGroup(t)))},yl.on("remove",()=>{yl.clearLayers()}).on("add",e=>{gl=[];let t={str_icon_type:{},iconType:{},years:{},dtps:{},stricken:{0:0}},n=[];Promise.all([2019,2020].map(e=>fetch("https://dtp.mvs.group/scripts/hearths5_dev/"+e+".txt",{}).then(e=>e.json()))).then(e=>{e.forEach(e=>{t.stricken[0]+=e.length,e.forEach(e=>{let l=e.icon_type||1,s=fl.latLngBounds(),o=e.list_dtp,r=!1,i="#FF0000";if(p(e,t),o.length){Number(e.year),Number(e.quarter);let a=t.years[e.year];a||(a=t.years[e.year]={}),t.years[e.year]=a;let c=a[e.quarter];e.quarter in a?c++:c=a[e.quarter]=1,a[e.quarter]=c;let p,d=t.str_icon_type[e.str_icon_type];d?d++:d=1,t.str_icon_type[e.str_icon_type]=d,t.iconType[e.str_icon_type]=l,l&&(r=l%2==0,1===l||2===l?i="#FFA500":3===l||4===l?i="#B8860B":5===l||6===l?i="#CD853F":7===l||8===l?i="#228B22":9===l||10===l?i="#FF8C00":11===l||12===l?i="#D2691E":13===l||14===l?i="#DEB887":15===l||16===l?i="#7B68EE":17!==l&&18!==l||(i="#2F4F4F"));let u=o.map(n=>{n.iconType;let l=n.coords||{lat:0,lon:0},o=fl.latLng(l.lat,l.lon),a=[];s.extend(o),n.id===e.head&&(p=n),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let c=t.dtps[n.id];return c?c[e.id]?c[e.id]++:c[e.id]=1:(c={},c[e.id]=1),t.dtps[n.id]=c,new g(fl.latLng(l.lat,l.lon),{cluster:e,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:r,fillColor:i})});e._bounds=p?fl.circle(fl.latLng(p.coords.lat,p.coords.lon),{radius:e.radius||500,items:u,cluster:e,color:i}):fl.rectangle(s,{items:u,cluster:e,fill:!0,color:i,dashArray:"8 3 1"}),e._bounds.on("mouseover",e=>{let t=e.target;t._color=t.options.color,t.options.color="red",t._renderer._updateStyle(t)}).on("mouseout",e=>{let t=e.target;t.options.color=t._color,t._renderer._updateStyle(t)}).on("click",t=>{fl.DomEvent.stopPropagation(t);let n=t.target,l=t.latlng;t.layerPoint;t.originalEvent.ctrlKey&&n.bringToBack(),function(e){let t=fl.DomUtil.create("div");new Qn({target:t,props:{prp:e}}),ml.setContent(t)}(e),ml.setLatLng(l).openOn(yl._map)}),n.push(e._bounds),n=n.concat(u)}}),yl._opt=t,yl._group=fl.layerGroup(n),gl?yl.setFilter(gl):yl.addLayer(yl._group),yl._refreshFilters()})})});const bl=window.L,kl=(bl.popup(),bl.popup({minWidth:200}));let xl=[];const jl=bl.featureGroup([]);jl.setFilter=e=>{if(!jl._map)return;jl.clearLayers(),xl=e.length?e:[];let t=xl.length,n=[];jl._group&&(jl._group.getLayers().forEach(e=>{let l=e.options.cluster,s=0;xl.forEach(e=>{if("ht"===e.type)e.zn[l.ht]&&s++;else if("roads"===e.type)(e.zn.filter(e=>e===l.road).length||1===e.zn.length&&""===e.zn[0])&&s++;else if("id_dtp"===e.type)!l.list_dtp.filter(t=>t.id==e.zn).length&&e.zn.length||s++;else if("id_hearth"===e.type)e.zn==l.id_hearth&&s++;else if("year"===e.type)e.zn[l.year]&&s++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&!l.count_stricken&&l.count_lost||2===t&&l.count_stricken&&!l.count_lost||3===t&&(l.count_stricken||l.count_lost)||4===t&&l.count_stricken&&l.count_lost)&&s++:s++}}),s===t&&n.push(e)}),jl.addLayer(bl.layerGroup(n)))},jl.on("remove",()=>{jl.clearLayers()}).on("add",e=>{let t={road:{},str_icon_type:{},iconType:{},years:{},dtps:{}},n=[],l=(e,l)=>{let s=e.icon_type||1,o=bl.latLngBounds(),r=[],i=e.list_dtp,a=!1,c="#FF0000";if(e.ht=l,i.length){Number(e.year),Number(e.quarter);let l=t.years[e.year];l||(l=t.years[e.year]={}),t.years[e.year]=l;let p=l[e.quarter];e.quarter in l?p++:p=l[e.quarter]=1,l[e.quarter]=p;let d,u=t.str_icon_type[e.str_icon_type];u?u++:u=1,t.str_icon_type[e.str_icon_type]=u,t.iconType[e.str_icon_type]=s,e.road in t.road?t.road[e.road]++:t.road[e.road]=1,s&&(a=s%2==0,1===s||2===s?c="#FFA500":3===s||4===s?c="#B8860B":5===s||6===s?c="#CD853F":7===s||8===s?c="#228B22":9===s||10===s?c="#FF8C00":11===s||12===s?c="#D2691E":13===s||14===s?c="#DEB887":15===s||16===s?c="#7B68EE":17!==s&&18!==s||(c="#2F4F4F"));let _=i.map(n=>{n.iconType;let l=n.coords||{lat:0,lon:0},s=bl.latLng(l.lat,l.lon),i=[];o.extend(s),r.push(s),n.id===e.head&&(d=n),n.id_skpdi&&i.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&i.push({type:"gibdd",id:n.id_stat}),n._cur=i;let p=t.dtps[n.id]||{},u=e.id||e.id_hearth;return p?p[u]?p[u]++:p[u]=1:(p={},p[u]=1),t.dtps[n.id]=p,new g(bl.latLng(l.lat,l.lon),{cluster:e,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:a,fillColor:c})});d?e._bounds=bl.circle(bl.latLng(d.coords.lat,d.coords.lon),{radius:e.radius||500,items:_,cluster:e,color:c}):r.length?e._bounds=bl.polyline(r,{items:_,cluster:e,color:c,weight:4}):e._bounds=bl.rectangle(o,{items:_,cluster:e,fill:!0,color:c,dashArray:"8 3 1"}),e._bounds.on("mouseover",e=>{let t=e.target;t._weight=t.options.weight,t._color=t.options.color,t.options.weight=8,t.options.color="red",t._renderer._updateStyle(t)}).on("mouseout",e=>{let t=e.target;t.options.weight=t._weight,t.options.color=t._color,t._renderer._updateStyle(t)}).on("click",t=>{bl.DomEvent.stopPropagation(t);let n=t.target,l=t.latlng;t.layerPoint;t.originalEvent.ctrlKey&&n.bringToBack(),function(e){let t=bl.DomUtil.create("div");new Qn({target:t,props:{prp:e}}),kl.setContent(t)}(e),kl.setLatLng(l).openOn(jl._map)}),n.push(e._bounds),n=n.concat(_)}};Promise.all([2019,2020].map(e=>fetch("https://dtp.mvs.group/scripts/hearths_picket_dev/"+e+".txt",{}).then(e=>e.json()))).then(e=>{e.forEach(e=>{e.forEach(e=>{(e.hearth3||[]).forEach(e=>{l(e,"hearth3")}),(e.hearth5||[]).forEach(e=>{l(e,"hearth5")})}),jl._opt=t,jl._group=bl.layerGroup(n),xl?jl.setFilter(xl):jl.addLayer(jl._group),jl._refreshFilters()}),console.log("__allJson_____",e,jl._opt)})});const Cl=window.L,Ll=(Cl.popup(),Cl.popup({minWidth:200}));let wl=[];const zl=Cl.featureGroup([]);function Dl(e,t,n){const l=e.slice();return l[4]=t[n],l[6]=n,l}function Fl(e,t,n){const l=e.slice();return l[4]=t[n],l[6]=n,l}function Tl(e){let t,n,l,s,o=e[4].complexName+"";return{c(){t=E("button"),n=O(o),S(t,"class",l="tab "+e[6]+" "+(0===e[6]?"active":"")+" svelte-h8luxq")},m(l,o,r){D(l,t,o),z(t,n),r&&s(),s=$(t,"click",e[2])},p:y,d(e){e&&F(t),s()}}}function El(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,y,b,k,x,j,C,L,w,T,q,$,P,H,B,I,G,U,A=e[4].complexName+"",R=e[4].complexSid+"",Z=e[4].complexModelName+"",Y=e[4].complexTypeName+"",V=e[4].complexStageName+"",W=(e[4].kvfStatus||"")+"",K=(e[4].roadName||e[0].roadName||"")+"";return{c(){t=E("table"),n=E("tr"),l=E("td"),l.textContent="Комплекс:",s=E("td"),o=O(A),r=O(" (id: "),i=O(R),a=O(")"),c=M(),p=E("tr"),d=E("td"),d.textContent="Модель:",u=E("td"),_=O(Z),h=M(),v=E("tr"),f=E("td"),f.textContent="Тип:",m=E("td"),g=O(Y),y=M(),b=E("tr"),k=E("td"),k.textContent="Этап:",x=E("td"),j=O(V),C=M(),L=E("tr"),w=E("td"),w.textContent="Работоспособность:",T=E("td"),q=O(W),$=M(),P=E("tr"),H=E("td"),H.textContent="Дорога:",B=E("td"),I=O(K),G=M(),S(l,"class","first svelte-h8luxq"),S(d,"class","first svelte-h8luxq"),S(f,"class","first svelte-h8luxq"),S(k,"class","first svelte-h8luxq"),S(w,"class","first svelte-h8luxq"),S(H,"class","first svelte-h8luxq"),S(t,"class",U="tabCont "+e[6]+" "+(0===e[6]?"":"hidden")+" svelte-h8luxq")},m(e,F){D(e,t,F),z(t,n),z(n,l),z(n,s),z(s,o),z(s,r),z(s,i),z(s,a),z(t,c),z(t,p),z(p,d),z(p,u),z(u,_),z(t,h),z(t,v),z(v,f),z(v,m),z(m,g),z(t,y),z(t,b),z(b,k),z(b,x),z(x,j),z(t,C),z(t,L),z(L,w),z(L,T),z(T,q),z(t,$),z(t,P),z(P,H),z(P,B),z(B,I),z(t,G)},p(e,t){1&t&&K!==(K=(e[4].roadName||e[0].roadName||"")+"")&&N(I,K)},d(e){e&&F(t)}}}function Ol(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,b,k,x,j,C,L,w,q,P,H,B,I,G,U,A,R,Z,Y,V,W,K,J,X=(e[0].id||e[0].lineSid)+"",Q=(e[0].roadName||"")+"",ee=e[0].lat+"",te=e[0].lon+"",ne=(e[0].lineAddress||"")+"",le=e[3],se=[];for(let t=0;t<le.length;t+=1)se[t]=Tl(Fl(e,le,t));let oe=e[3],re=[];for(let t=0;t<oe.length;t+=1)re[t]=El(Dl(e,oe,t));return{c(){t=E("div"),n=E("div"),l=O("Рубеж (id: "),s=O(X),o=O(")"),r=M(),i=E("div"),a=E("table"),c=E("tbody"),p=E("tr"),d=E("td"),d.textContent="Дорога:",u=M(),_=E("td"),h=O(Q),v=M(),f=E("tr"),m=E("td"),m.textContent="Координаты:",g=M(),b=E("td"),k=O(ee),x=M(),j=O(te),C=M(),L=E("span"),w=M(),q=E("tr"),P=E("td"),P.textContent="Адрес:",H=M(),B=E("td"),I=O(ne),G=M(),U=E("tr"),A=E("td"),A.textContent="Комплексов:",R=M(),Z=E("td"),Z.textContent=`${e[3].length}`,Y=M(),V=E("tr"),W=E("td");for(let e=0;e<se.length;e+=1)se[e].c();K=M();for(let e=0;e<re.length;e+=1)re[e].c();S(n,"class","pLine"),S(d,"class","first svelte-h8luxq"),S(m,"class","first svelte-h8luxq"),S(L,"title","Скопировать в буфер обмена"),S(L,"class","leaflet-gmx-icon-copy"),S(P,"class","first svelte-h8luxq"),S(A,"class","first svelte-h8luxq"),S(W,"class","tabs svelte-h8luxq"),S(W,"colspan","2"),S(a,"class","table svelte-h8luxq"),S(i,"class","featureCont"),S(t,"class","mvsPopup svelte-h8luxq")},m(y,F,T){D(y,t,F),z(t,n),z(n,l),z(n,s),z(n,o),z(t,r),z(t,i),z(i,a),z(a,c),z(c,p),z(p,d),z(p,u),z(p,_),z(_,h),z(c,v),z(c,f),z(f,m),z(f,g),z(f,b),z(b,k),z(b,x),z(b,j),z(b,C),z(b,L),z(c,w),z(c,q),z(q,P),z(q,H),z(q,B),z(B,I),z(c,G),z(c,U),z(U,A),z(U,R),z(U,Z),z(c,Y),z(c,V),z(V,W);for(let e=0;e<se.length;e+=1)se[e].m(W,null);z(W,K);for(let e=0;e<re.length;e+=1)re[e].m(W,null);T&&J(),J=$(L,"click",e[1])},p(e,[t]){if(1&t&&X!==(X=(e[0].id||e[0].lineSid)+"")&&N(s,X),1&t&&Q!==(Q=(e[0].roadName||"")+"")&&N(h,Q),1&t&&ee!==(ee=e[0].lat+"")&&N(k,ee),1&t&&te!==(te=e[0].lon+"")&&N(j,te),1&t&&ne!==(ne=(e[0].lineAddress||"")+"")&&N(I,ne),12&t){let n;for(le=e[3],n=0;n<le.length;n+=1){const l=Fl(e,le,n);se[n]?se[n].p(l,t):(se[n]=Tl(l),se[n].c(),se[n].m(W,K))}for(;n<se.length;n+=1)se[n].d(1);se.length=le.length}if(9&t){let n;for(oe=e[3],n=0;n<oe.length;n+=1){const l=Dl(e,oe,n);re[n]?re[n].p(l,t):(re[n]=El(l),re[n].c(),re[n].m(W,null))}for(;n<re.length;n+=1)re[n].d(1);re.length=oe.length}},i:y,o:y,d(e){e&&F(t),T(se,e),T(re,e),J()}}}function Ml(e,t,n){let{prp:l}=t;let s=l&&l.complexes?l.complexes:[];return console.log("complexes ",s),e.$set=e=>{"prp"in e&&n(0,l=e.prp)},[l,e=>{navigator.clipboard.writeText(e.target.parentNode.textContent).catch(e=>{console.log("Something went wrong",e)})},e=>{let t=e.target,n=/tab (\d)/.exec(t.className),l=n&&2===n.length?n[1]:0,s=t.parentNode;for(let e=0,t=s.childNodes.length;e<t;e++){let t=s.childNodes[e];if(t.classList){let e=t.classList.contains(l);"BUTTON"===t.tagName?t.classList[e?"add":"remove"]("active"):"TABLE"===t.tagName&&t.classList[e?"remove":"add"]("hidden")}}},s]}zl.setFilter=e=>{if(!zl._map)return;zl.clearLayers(),wl=e.length?e:[];let t=wl.length,n=[];zl._group&&(zl._group.getLayers().forEach(e=>{let l=e.options.cluster,s=0;wl.forEach(e=>{if("ht"===e.type)e.zn[l.ht]&&s++;else if("roads"===e.type)(e.zn.filter(e=>e===l.road).length||1===e.zn.length&&""===e.zn[0])&&s++;else if("id_dtp"===e.type)!l.list_dtp.filter(t=>t.id==e.zn).length&&e.zn.length||s++;else if("city"===e.type)e.zn[l.city]&&s++;else if("id_hearth"===e.type)e.zn==l.id_hearth&&s++;else if("year"===e.type)e.zn[l.year]&&s++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&!l.count_stricken&&l.count_lost||2===t&&l.count_stricken&&!l.count_lost||3===t&&(l.count_stricken||l.count_lost)||4===t&&l.count_stricken&&l.count_lost)&&s++:s++}}),s===t&&n.push(e)}),zl.addLayer(Cl.layerGroup(n)))},zl.on("remove",()=>{zl.clearLayers()}).on("add",e=>{let t={road:{},str_icon_type:{},iconType:{},id_city:{},city:{},years:{},dtps:{}},n=[],l=(e,l)=>{let s=e.icon_type||1,o=Cl.latLngBounds(),r=[],i=e.list_dtp,a=!1,c="#FF0000";if(e.ht=l,i.length){Number(e.year),Number(e.quarter);let l=t.years[e.year];l||(l=t.years[e.year]={}),t.years[e.year]=l;let p=l[e.quarter];e.quarter in l?p++:p=l[e.quarter]=1,l[e.quarter]=p;let d=t.str_icon_type[e.str_icon_type];d?d++:d=1,t.str_icon_type[e.str_icon_type]=d,t.iconType[e.str_icon_type]=s,e.road in t.road?t.road[e.road]++:t.road[e.road]=1;let u,_=e.city||0,h=t.city[_]||0;t.city[_]=h+1,s&&(a=s%2==0,1===s||2===s?c="#FFA500":3===s||4===s?c="#B8860B":5===s||6===s?c="#CD853F":7===s||8===s?c="#228B22":9===s||10===s?c="#FF8C00":11===s||12===s?c="#D2691E":13===s||14===s?c="#DEB887":15===s||16===s?c="#7B68EE":17!==s&&18!==s||(c="#2F4F4F"));let v=i.map(n=>{n.iconType;let l=n.coords||{lat:0,lon:0},s=Cl.latLng(l.lat,l.lon),i=[];o.extend(s),r.push(s),n.id===e.head&&(u=n),n.id_skpdi&&i.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&i.push({type:"gibdd",id:n.id_stat}),n._cur=i;let p=t.id_city[n.id_city]||0;t.id_city[n.id_city]=p+1;let d=t.dtps[n.id]||{},_=e.id||e.id_hearth;return d?d[_]?d[_]++:d[_]=1:(d={},d[_]=1),t.dtps[n.id]=d,new g(Cl.latLng(l.lat,l.lon),{cluster:e,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:a,fillColor:c})});u?e._bounds=Cl.circle(Cl.latLng(u.coords.lat,u.coords.lon),{radius:e.radius||500,items:v,cluster:e,color:c}):r.length?e._bounds=Cl.polyline(r,{items:v,cluster:e,color:c,weight:4}):e._bounds=Cl.rectangle(o,{items:v,cluster:e,fill:!0,color:c,dashArray:"8 3 1"}),e._bounds.on("mouseover",e=>{let t=e.target;t._weight=t.options.weight,t._color=t.options.color,t.options.weight=8,t.options.color="red",t._renderer._updateStyle(t)}).on("mouseout",e=>{let t=e.target;t.options.weight=t._weight,t.options.color=t._color,t._renderer._updateStyle(t)}).on("click",t=>{Cl.DomEvent.stopPropagation(t);let n=t.target,l=t.latlng;t.layerPoint;t.originalEvent.ctrlKey&&n.bringToBack(),function(e){let t=Cl.DomUtil.create("div");new Qn({target:t,props:{prp:e}}),Ll.setContent(t)}(e),Ll.setLatLng(l).openOn(zl._map)}),n.push(e._bounds),n=n.concat(v)}};Promise.all([2019,2020].map(e=>fetch("https://dtp.mvs.group/scripts/hearthssettlements_dev/"+e+".txt",{}).then(e=>e.json()))).then(e=>{e.forEach(e=>{e.forEach(e=>{(e.hearth3||[]).forEach(e=>{l(e,"hearth3")}),(e.hearth5||[]).forEach(e=>{l(e,"hearth5")})}),zl._opt=t,zl._group=Cl.layerGroup(n),wl?zl.setFilter(wl):zl.addLayer(zl._group),zl._refreshFilters()}),console.log("__allJson_____",e,zl._opt)})});class ql extends ge{constructor(e){super(),me(this,e,Ml,Ol,C,{prp:0})}}const $l=window.L,Pl=$l.popup();$l.popup({minWidth:200});let Sl;const Hl=$l.featureGroup([]);function Nl(e,t,n){const l=e.slice();return l[4]=t[n],l[6]=n,l}function Bl(e,t,n){const l=e.slice();return l[4]=t[n],l[6]=n,l}function Il(e){let t,n,l,s,o=e[4].complex_name+"";return{c(){t=E("button"),n=O(o),S(t,"class",l="tab "+e[6]+" "+(0===e[6]?"active":"")+" svelte-h8luxq")},m(l,o,r){D(l,t,o),z(t,n),r&&s(),s=$(t,"click",e[2])},p:y,d(e){e&&F(t),s()}}}function Gl(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,b,k,x,j,C,L,w,T=e[4].complex_name+"",q=e[4].complex_sid+"",$=e[4].complex_model_name+"",P=e[4].complex_type_name+"",H=(e[4].cafap_status||"")+"";return{c(){t=E("table"),n=E("tr"),l=E("td"),l.textContent="Комплекс:",s=E("td"),o=O(T),r=O(" (id: "),i=O(q),a=O(")"),c=M(),p=E("tr"),d=E("td"),d.textContent="Модель:",u=E("td"),_=O($),h=M(),v=E("tr"),f=E("td"),f.textContent="Тип:",m=E("td"),g=O(P),b=M(),k=E("tr"),x=E("td"),x.textContent="Работоспособность:",j=E("td"),C=O(H),L=M(),S(l,"class","first svelte-h8luxq"),S(d,"class","first svelte-h8luxq"),S(f,"class","first svelte-h8luxq"),S(x,"class","first svelte-h8luxq"),S(t,"class",w="tabCont "+e[6]+" "+(0===e[6]?"":"hidden")+" svelte-h8luxq")},m(e,y){D(e,t,y),z(t,n),z(n,l),z(n,s),z(s,o),z(s,r),z(s,i),z(s,a),z(t,c),z(t,p),z(p,d),z(p,u),z(u,_),z(t,h),z(t,v),z(v,f),z(v,m),z(m,g),z(t,b),z(t,k),z(k,x),z(k,j),z(j,C),z(t,L)},p:y,d(e){e&&F(t)}}}function Ul(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,b,k,x,j,C,L,w,q,P,H,B,I,G,U,A,R,Z,Y,V,W,K,J,X,Q,ee,te,ne,le,se=(e[0].id||e[0].line_id)+"",oe=(e[0].stage_name||"")+"",re=(e[0].road_name||"")+"",ie=e[0].lat+"",ae=e[0].lon+"",ce=(e[0].address||"")+"",pe=e[3],de=[];for(let t=0;t<pe.length;t+=1)de[t]=Il(Bl(e,pe,t));let ue=e[3],_e=[];for(let t=0;t<ue.length;t+=1)_e[t]=Gl(Nl(e,ue,t));return{c(){t=E("div"),n=E("div"),l=O("Рубеж (id: "),s=O(se),o=O(")"),r=M(),i=E("div"),a=E("table"),c=E("tbody"),p=E("tr"),d=E("td"),d.textContent="Этап:",u=M(),_=E("td"),h=O(oe),v=M(),f=E("tr"),m=E("td"),m.textContent="Дорога:",g=M(),b=E("td"),k=O(re),x=M(),j=E("tr"),C=E("td"),C.textContent="Координаты:",L=M(),w=E("td"),q=O(ie),P=M(),H=O(ae),B=M(),I=E("span"),G=M(),U=E("tr"),A=E("td"),A.textContent="Адрес:",R=M(),Z=E("td"),Y=O(ce),V=M(),W=E("tr"),K=E("td"),K.textContent="Комплексов:",J=M(),X=E("td"),X.textContent=`${e[3].length}`,Q=M(),ee=E("tr"),te=E("td");for(let e=0;e<de.length;e+=1)de[e].c();ne=M();for(let e=0;e<_e.length;e+=1)_e[e].c();S(n,"class","pLine"),S(d,"class","first svelte-h8luxq"),S(m,"class","first svelte-h8luxq"),S(C,"class","first svelte-h8luxq"),S(I,"title","Скопировать в буфер обмена"),S(I,"class","leaflet-gmx-icon-copy"),S(A,"class","first svelte-h8luxq"),S(K,"class","first svelte-h8luxq"),S(te,"class","tabs svelte-h8luxq"),S(te,"colspan","2"),S(a,"class","table svelte-h8luxq"),S(i,"class","featureCont"),S(t,"class","mvsPopup svelte-h8luxq")},m(y,F,T){D(y,t,F),z(t,n),z(n,l),z(n,s),z(n,o),z(t,r),z(t,i),z(i,a),z(a,c),z(c,p),z(p,d),z(p,u),z(p,_),z(_,h),z(c,v),z(c,f),z(f,m),z(f,g),z(f,b),z(b,k),z(c,x),z(c,j),z(j,C),z(j,L),z(j,w),z(w,q),z(w,P),z(w,H),z(w,B),z(w,I),z(c,G),z(c,U),z(U,A),z(U,R),z(U,Z),z(Z,Y),z(c,V),z(c,W),z(W,K),z(W,J),z(W,X),z(c,Q),z(c,ee),z(ee,te);for(let e=0;e<de.length;e+=1)de[e].m(te,null);z(te,ne);for(let e=0;e<_e.length;e+=1)_e[e].m(te,null);T&&le(),le=$(I,"click",e[1])},p(e,[t]){if(1&t&&se!==(se=(e[0].id||e[0].line_id)+"")&&N(s,se),1&t&&oe!==(oe=(e[0].stage_name||"")+"")&&N(h,oe),1&t&&re!==(re=(e[0].road_name||"")+"")&&N(k,re),1&t&&ie!==(ie=e[0].lat+"")&&N(q,ie),1&t&&ae!==(ae=e[0].lon+"")&&N(H,ae),1&t&&ce!==(ce=(e[0].address||"")+"")&&N(Y,ce),12&t){let n;for(pe=e[3],n=0;n<pe.length;n+=1){const l=Bl(e,pe,n);de[n]?de[n].p(l,t):(de[n]=Il(l),de[n].c(),de[n].m(te,ne))}for(;n<de.length;n+=1)de[n].d(1);de.length=pe.length}if(8&t){let n;for(ue=e[3],n=0;n<ue.length;n+=1){const l=Nl(e,ue,n);_e[n]?_e[n].p(l,t):(_e[n]=Gl(l),_e[n].c(),_e[n].m(te,null))}for(;n<_e.length;n+=1)_e[n].d(1);_e.length=ue.length}},i:y,o:y,d(e){e&&F(t),T(de,e),T(_e,e),le()}}}function Al(e,t,n){let{prp:l}=t;let s=l&&l.list_complex?l.list_complex:[];return console.log("complexes ",s),e.$set=e=>{"prp"in e&&n(0,l=e.prp)},[l,e=>{navigator.clipboard.writeText(e.target.parentNode.textContent).catch(e=>{console.log("Something went wrong",e)})},e=>{let t=e.target,n=/tab (\d)/.exec(t.className),l=n&&2===n.length?n[1]:0,s=t.parentNode;for(let e=0,t=s.childNodes.length;e<t;e++){let t=s.childNodes[e];if(t.classList){let e=t.classList.contains(l);"BUTTON"===t.tagName?t.classList[e?"add":"remove"]("active"):"TABLE"===t.tagName&&t.classList[e?"remove":"add"]("hidden")}}},s]}Hl.setFilter=e=>{if(!Hl._map)return;Hl.clearLayers(),Sl=e;let t=[];Hl._group&&(Hl._group.getLayers().forEach(e=>{let n=e.options.cluster,l=0;Sl.forEach(e=>{if("ht"===e.type)e.zn[n.ht]&&l++;else if("roads"===e.type)(e.zn.filter(e=>e===n.road).length||1===e.zn.length&&""===e.zn[0])&&l++;else if("id_dtp"===e.type)!n.list_dtp.filter(t=>t.id==e.zn).length&&e.zn.length||l++;else if("id_hearth"===e.type)e.zn==n.id_hearth&&l++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&!n.count_stricken&&n.count_lost||2===t&&n.count_stricken&&!n.count_lost||3===t&&(n.count_stricken||n.count_lost)||4===t&&n.count_stricken&&n.count_lost)&&l++:l++}}),l===Sl.length&&t.push(e)}),Hl.addLayer($l.layerGroup(t)))},Hl.on("remove",()=>{Hl.clearLayers()}).on("add",e=>{let t=e=>{let t=$l.latLngBounds(),n="#FF0000";e.complexes&&(1===e.complexes.length?n="#FFA500":e.complexes.length>1&&(n="#0000FF"));let l=e.coords||{lat:e.lat,lon:e.lon},s=$l.latLng(l.lat,l.lon);return t.extend(s),new g($l.latLng(l.lat,l.lon),{props:e,radius:6,zIndexOffset:5e4,stroke:!1,fillColor:n}).bindPopup(Pl).on("popupopen",e=>{!function(e){let t=$l.DomUtil.create("div");new ql({target:t,props:{prp:e}}),Pl.setContent(t)}(e.target.options.props)}).on("popupclose",e=>{e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)})};fetch("./static/rub.geojson",{}).then(e=>e.json()).then(e=>{let n=e.map(t);Hl._group=$l.layerGroup(n),Hl.addLayer(Hl._group)})});class Rl extends ge{constructor(e){super(),me(this,e,Al,Ul,C,{prp:0})}}const Zl=window.L,Yl=Zl.popup();Zl.popup({minWidth:200});let Vl,Wl="https://dtp.mvs.group/scripts/rubez_dev/";const Kl=Zl.featureGroup([]);function Jl(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,b,k,x,j,C,L,w,T,q,P,H,B,I,G,U,A,R,Z,Y,V,W,K,J,X,Q,ee,te,ne,le,se,oe,re,ie,ae,ce,pe,de,ue,_e,he,ve,fe,me,ge,ye,be=(e[0].kind||"")+"",ke=(e[0].type||"")+"",xe=(e[0].id||"")+"",je=(e[0].status||"")+"",Ce=e[3](e[0].date_created)+"",Le=e[3](e[0].date_finish_fact)+"",we=e[2].lat+"",ze=e[2].lon+"",De=(e[0].id_dtp||"")+"",Fe=(e[0].description||"")+"";return{c(){t=E("div"),n=E("div"),l=O("Мероприятие"),s=E("br"),o=O("("),r=O(be),i=O(")"),a=M(),c=E("div"),p=E("table"),d=E("tbody"),u=E("tr"),_=E("td"),_.textContent="Тип мероприятия:",h=M(),v=E("td"),f=O(ke),m=M(),g=E("tr"),b=E("td"),b.textContent="ID:",k=M(),x=E("td"),j=O(xe),C=M(),L=E("tr"),w=E("td"),w.textContent="Статус:",T=M(),q=E("td"),P=O(je),H=M(),B=E("tr"),I=E("td"),I.textContent="Дата добавления:",G=M(),U=E("td"),A=O(Ce),R=M(),Z=E("tr"),Y=E("td"),Y.textContent="Дата завершения:",V=M(),W=E("td"),K=O(Le),J=M(),X=E("tr"),Q=E("td"),Q.textContent="Координаты:",ee=M(),te=E("td"),ne=O(we),le=M(),se=O(ze),oe=M(),re=E("span"),ie=M(),ae=E("tr"),ce=E("td"),ce.textContent="ID ДТП СКПДИ:",pe=M(),de=E("td"),ue=O(De),_e=M(),he=E("tr"),ve=E("td"),ve.textContent="Описание:",fe=M(),me=E("td"),ge=O(Fe),S(n,"class","pLine"),S(_,"class","first svelte-h8luxq"),S(b,"class","first svelte-h8luxq"),S(w,"class","first svelte-h8luxq"),S(I,"class","first svelte-h8luxq"),S(Y,"class","first svelte-h8luxq"),S(Q,"class","first svelte-h8luxq"),S(re,"title","Скопировать в буфер обмена"),S(re,"class","leaflet-gmx-icon-copy"),S(ce,"class","first svelte-h8luxq"),S(ve,"class","first svelte-h8luxq"),S(p,"class","table svelte-h8luxq"),S(c,"class","featureCont"),S(t,"class","mvsPopup svelte-h8luxq")},m(y,F,E){D(y,t,F),z(t,n),z(n,l),z(n,s),z(n,o),z(n,r),z(n,i),z(t,a),z(t,c),z(c,p),z(p,d),z(d,u),z(u,_),z(u,h),z(u,v),z(v,f),z(d,m),z(d,g),z(g,b),z(g,k),z(g,x),z(x,j),z(d,C),z(d,L),z(L,w),z(L,T),z(L,q),z(q,P),z(d,H),z(d,B),z(B,I),z(B,G),z(B,U),z(U,A),z(d,R),z(d,Z),z(Z,Y),z(Z,V),z(Z,W),z(W,K),z(d,J),z(d,X),z(X,Q),z(X,ee),z(X,te),z(te,ne),z(te,le),z(te,se),z(te,oe),z(te,re),z(d,ie),z(d,ae),z(ae,ce),z(ae,pe),z(ae,de),z(de,ue),z(d,_e),z(d,he),z(he,ve),z(he,fe),z(he,me),z(me,ge),E&&ye(),ye=$(re,"click",e[1])},p(e,[t]){1&t&&be!==(be=(e[0].kind||"")+"")&&N(r,be),1&t&&ke!==(ke=(e[0].type||"")+"")&&N(f,ke),1&t&&xe!==(xe=(e[0].id||"")+"")&&N(j,xe),1&t&&je!==(je=(e[0].status||"")+"")&&N(P,je),1&t&&Ce!==(Ce=e[3](e[0].date_created)+"")&&N(A,Ce),1&t&&Le!==(Le=e[3](e[0].date_finish_fact)+"")&&N(K,Le),1&t&&De!==(De=(e[0].id_dtp||"")+"")&&N(ue,De),1&t&&Fe!==(Fe=(e[0].description||"")+"")&&N(ge,Fe)},i:y,o:y,d(e){e&&F(t),ye()}}}function Xl(e,t,n){let{prp:l}=t;let s=l.coords[0]||{lat:l.lat,lon:l.lon};return e.$set=e=>{"prp"in e&&n(0,l=e.prp)},[l,e=>{navigator.clipboard.writeText(e.target.parentNode.textContent).catch(e=>{console.log("Something went wrong",e)})},s,e=>{if(!e)return"";let t=new Date(1e3*e);return t.toLocaleDateString()+" "+t.toLocaleTimeString()}]}Kl.setFilter=e=>{if(!Kl._map)return;Kl.clearLayers(),Vl=e,Kl._argFilters=Vl;let t=[];Kl._group&&(Kl._group.getLayers().forEach(e=>{let n=e.options.props,l=0;Vl.forEach(e=>{"comp"===e.type&&(n.rub_flag?e.zn.on&&l++:e.zn.off&&l++)}),l===Vl.length&&t.push(e)}),Kl.addLayer(Zl.layerGroup(t)))},Kl.on("remove",()=>{Kl.clearLayers()}).on("add",e=>{let t={road:{},bad:[]},n=[],l={},s=e=>{let s=Zl.latLngBounds(),o="gray";if(e.rub_flag&&(o="#00FF00"),l[e.line_sid]?console.log("___Дубль____",e):l[e.line_sid]=e,!e.lat||!e.lon)return void t.bad.push(e);let r=e.coords||{lat:e.lat,lon:e.lon},i=Zl.latLng(r.lat,r.lon);s.extend(i),n.push(new g(Zl.latLng(r.lat,r.lon),{props:e,radius:6,zIndexOffset:5e4,path:"camera",stroke:!1,fillColor:o}).bindPopup(Yl).on("popupopen",e=>{!function(e){let t=Zl.DomUtil.create("div"),n=e.line_sid;fetch(Wl+"rubez-complex-"+n+".txt",{}).then(e=>e.json()).then(e=>{new Rl({target:t,props:{prp:e[0]}}),Yl.setContent(t)}),Yl.setContent(t)}(e.target.options.props)}).on("popupclose",e=>{e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)}))};fetch(Wl+"rubez.txt",{}).then(e=>e.json()).then(e=>{e.forEach(s),Kl._group=Zl.layerGroup(n),Kl.addLayer(Kl._group),console.log("opt",t)})});class Ql extends ge{constructor(e){super(),me(this,e,Xl,Jl,C,{prp:0})}}const es=window.L,ts=es.popup();let ns;const ls=es.featureGroup([]);function ss(e,t,n){const l=e.slice();return l[9]=t[n],l[11]=n,l}function os(e,t,n){const l=e.slice();return l[14]=t[n],l}function rs(e,t,n){const l=e.slice();return l[9]=t[n],l}function is(e){let t,n,l,s=e[14].k_uch&&(e[14].npdd||e[14].sop_npdd)&&function(e){let t,n,l=e[14].k_uch+"";return{c(){t=E("li"),n=O(l)},m(e,l){D(e,t,l),z(t,n)},p:y,d(e){e&&F(t)}}}(e),o=e[14].npdd&&function(e){let t,n,l=e[14].npdd+"";return{c(){t=E("li"),n=O(l)},m(e,l){D(e,t,l),z(t,n)},p:y,d(e){e&&F(t)}}}(e),r=e[14].sop_npdd&&function(e){let t,n,l=e[14].sop_npdd+"";return{c(){t=E("li"),n=O(l)},m(e,l){D(e,t,l),z(t,n)},p:y,d(e){e&&F(t)}}}(e);return{c(){s&&s.c(),t=M(),o&&o.c(),n=M(),r&&r.c(),l=q()},m(e,i){s&&s.m(e,i),D(e,t,i),o&&o.m(e,i),D(e,n,i),r&&r.m(e,i),D(e,l,i)},p(e,t){e[14].k_uch&&(e[14].npdd||e[14].sop_npdd)&&s.p(e,t),e[14].npdd&&o.p(e,t),e[14].sop_npdd&&r.p(e,t)},d(e){s&&s.d(e),e&&F(t),o&&o.d(e),e&&F(n),r&&r.d(e),e&&F(l)}}}function as(e){let t,n,l=e[9].ts&&function(e){let t,n,l=e[9].ts+"";return{c(){t=E("li"),n=O(l)},m(e,l){D(e,t,l),z(t,n)},p:y,d(e){e&&F(t)}}}(e),s=e[9].arr,o=[];for(let t=0;t<s.length;t+=1)o[t]=is(os(e,s,t));return{c(){l&&l.c(),t=M();for(let e=0;e<o.length;e+=1)o[e].c();n=q()},m(e,s){l&&l.m(e,s),D(e,t,s);for(let t=0;t<o.length;t+=1)o[t].m(e,s);D(e,n,s)},p(e,t){if(e[9].ts&&l.p(e,t),16&t){let l;for(s=e[9].arr,l=0;l<s.length;l+=1){const r=os(e,s,l);o[l]?o[l].p(r,t):(o[l]=is(r),o[l].c(),o[l].m(n.parentNode,n))}for(;l<o.length;l+=1)o[l].d(1);o.length=s.length}},d(e){l&&l.d(e),e&&F(t),T(o,e),e&&F(n)}}}function cs(e){let t,n,l,s,o,r=e[0].spog+"";return{c(){t=E("div"),n=E("div"),n.textContent="Погода:",l=M(),s=E("div"),o=O(r),S(n,"class","stitle"),S(s,"class","sval")},m(e,r){D(e,t,r),z(t,n),z(t,l),z(t,s),z(s,o)},p(e,t){1&t&&r!==(r=e[0].spog+"")&&N(o,r)},d(e){e&&F(t)}}}function ps(e){let t,n,l,s,o,r=e[0].s_pch+"";return{c(){t=E("div"),n=E("div"),n.textContent="Покрытие:",l=M(),s=E("div"),o=O(r),S(n,"class","stitle"),S(s,"class","sval")},m(e,r){D(e,t,r),z(t,n),z(t,l),z(t,s),z(s,o)},p(e,t){1&t&&r!==(r=e[0].s_pch+"")&&N(o,r)},d(e){e&&F(t)}}}function ds(e){let t,n,l,s,o,r=e[0].osv+"";return{c(){t=E("div"),n=E("div"),n.textContent="Освещенность:",l=M(),s=E("div"),o=O(r),S(n,"class","stitle"),S(s,"class","sval")},m(e,r){D(e,t,r),z(t,n),z(t,l),z(t,s),z(s,o)},p(e,t){1&t&&r!==(r=e[0].osv+"")&&N(o,r)},d(e){e&&F(t)}}}function us(e){let t,n,l,s,o,r=e[0].ndu+"";return{c(){t=E("div"),n=E("div"),n.textContent="Иные условия:",l=M(),s=E("div"),o=O(r),S(n,"class","stitle"),S(s,"class","sval")},m(e,r){D(e,t,r),z(t,n),z(t,l),z(t,s),z(s,o)},p(e,t){1&t&&r!==(r=e[0].ndu+"")&&N(o,r)},d(e){e&&F(t)}}}function _s(e){let t,n,l,s,o,r,i,a=e[9].line_id+"",c=e[9].range+"";return{c(){t=E("li"),n=O(a),l=O(" ("),s=O(c),o=O(" м.)"),S(t,"class","link svelte-vw4d3d"),t.value=r=e[9].line_id},m(r,a,c){D(r,t,a),z(t,n),z(t,l),z(t,s),z(t,o),c&&i(),i=$(t,"click",e[2])},p(e,l){1&l&&a!==(a=e[9].line_id+"")&&N(n,a),1&l&&c!==(c=e[9].range+"")&&N(s,c),1&l&&r!==(r=e[9].line_id)&&(t.value=r)},d(e){e&&F(t),i()}}}function hs(e){let t,n,l,s,o,r,i,a,c,p,d,u,_,h,v,f,m,g,b,k,x,j,C,L,w,q,P,H,B,I,G,U,A,R,Z,Y,V,W,K,J,X,Q,ee,te,ne,le,se,oe,re,ie,ae,ce,pe,de,ue,_e,he,ve,fe,me,ge,ye,be,ke,xe,je,Ce,Le,we,ze,De,Fe,Te,Ee,Oe,Me,qe,$e,Pe,Se,He,Ne,Be,Ie,Ge,Ue,Ae=(e[0].name||e[0].dtvp||"")+"",Re=(e[0].sid||e[0].id_stat||e[0].id_skpdi||"")+"",Ze=(e[0].district||"")+"",Ye=(e[0].dor||"")+"",Ve=(e[0].km||0)+"",We=(e[0].m||0)+"",Ke=e[0].lat+"",Je=e[0].lon+"",Xe=(e[0].collision_date||e[0].dtp_date||"")+"",Qe=(e[0].dtvp||"")+"",et=e[0].pog+"",tt=e[0].ran+"",nt=e[4],lt=[];for(let t=0;t<nt.length;t+=1)lt[t]=as(rs(e,nt,t));let st=e[0].spog&&cs(e),ot=e[0].s_pch&&ps(e),rt=e[0].osv&&ds(e),it=e[0].ndu&&us(e),at=e[0].list_rub||[],ct=[];for(let t=0;t<at.length;t+=1)ct[t]=_s(ss(e,at,t));return{c(){t=E("div"),n=E("div"),l=E("b"),s=O(Ae),o=M(),r=E("div"),i=E("table"),a=E("tbody"),c=E("tr"),p=E("td"),p.textContent="ID:",d=M(),u=E("td"),_=O(Re),h=M(),v=E("tr"),f=E("td"),f.textContent="Адрес:",m=M(),g=E("td"),b=O(Ze),k=M(),x=O(Ye),j=M(),C=E("tr"),L=E("td"),L.textContent="Пикетаж:",w=M(),q=E("td"),P=E("b"),H=O(Ve),B=O(" км. "),I=E("b"),G=O(We),U=O(" м."),A=M(),R=E("tr"),Z=E("td"),Z.textContent="Координаты:",Y=M(),V=E("td"),W=O(Ke),K=M(),J=O(Je),X=M(),Q=E("span"),ee=M(),te=E("tr"),ne=E("td"),ne.textContent="Дата/время:",le=M(),se=E("td"),oe=O(Xe),re=M(),ie=E("tr"),ae=E("td"),ae.textContent="Вид ДТП:",ce=M(),pe=E("td"),de=O(Qe),ue=M(),_e=E("tr"),he=E("td"),he.textContent="Нарушения:",ve=M(),fe=E("td"),me=E("ul");for(let e=0;e<lt.length;e+=1)lt[e].c();ge=M(),ye=E("tr"),be=E("td"),be.textContent="Условия:",ke=M(),xe=E("td"),st&&st.c(),je=M(),ot&&ot.c(),Ce=M(),rt&&rt.c(),Le=M(),it&&it.c(),we=M(),ze=E("tr"),De=E("td"),De.textContent="Количество погибших/раненых:",Fe=M(),Te=E("td"),Ee=E("b"),Oe=O(et),Me=O("/"),qe=O(tt),$e=M(),Pe=E("tr"),Se=E("td"),Se.textContent="Рубежи:",He=M(),Ne=E("td"),Be=E("div"),Ie=M(),Ge=E("ul");for(let e=0;e<ct.length;e+=1)ct[e].c();S(n,"class","pLine"),S(p,"class","first svelte-vw4d3d"),S(f,"class","first svelte-vw4d3d"),S(L,"class","first svelte-vw4d3d"),S(Z,"class","first svelte-vw4d3d"),S(Q,"title","Скопировать в буфер обмена"),S(Q,"class","leaflet-gmx-icon-copy"),S(ne,"class","first svelte-vw4d3d"),S(ae,"class","first svelte-vw4d3d"),S(he,"class","first svelte-vw4d3d"),S(be,"class","first svelte-vw4d3d"),S(De,"class","first svelte-vw4d3d"),S(Se,"class","first svelte-vw4d3d"),S(Be,"class","win leaflet-popup-content-wrapper  svelte-vw4d3d"),S(i,"class","table"),S(r,"class","featureCont"),S(t,"class","mvsPopup svelte-vw4d3d")},m(y,F,T){D(y,t,F),z(t,n),z(n,l),z(l,s),z(t,o),z(t,r),z(r,i),z(i,a),z(a,c),z(c,p),z(c,d),z(c,u),z(u,_),z(a,h),z(a,v),z(v,f),z(v,m),z(v,g),z(g,b),z(g,k),z(g,x),z(a,j),z(a,C),z(C,L),z(C,w),z(C,q),z(q,P),z(P,H),z(q,B),z(q,I),z(I,G),z(q,U),z(a,A),z(a,R),z(R,Z),z(R,Y),z(R,V),z(V,W),z(V,K),z(V,J),z(V,X),z(V,Q),z(a,ee),z(a,te),z(te,ne),z(te,le),z(te,se),z(se,oe),z(a,re),z(a,ie),z(ie,ae),z(ie,ce),z(ie,pe),z(pe,de),z(a,ue),z(a,_e),z(_e,he),z(_e,ve),z(_e,fe),z(fe,me);for(let e=0;e<lt.length;e+=1)lt[e].m(me,null);z(a,ge),z(a,ye),z(ye,be),z(ye,ke),z(ye,xe),st&&st.m(xe,null),z(xe,je),ot&&ot.m(xe,null),z(xe,Ce),rt&&rt.m(xe,null),z(xe,Le),it&&it.m(xe,null),z(a,we),z(a,ze),z(ze,De),z(ze,Fe),z(ze,Te),z(Te,Ee),z(Ee,Oe),z(Ee,Me),z(Ee,qe),z(a,$e),z(a,Pe),z(Pe,Se),z(Pe,He),z(Pe,Ne),z(Ne,Be),e[8](Be),z(Ne,Ie),z(Ne,Ge);for(let e=0;e<ct.length;e+=1)ct[e].m(Ge,null);T&&Ue(),Ue=$(Q,"click",e[3])},p(e,[t]){if(1&t&&Ae!==(Ae=(e[0].name||e[0].dtvp||"")+"")&&N(s,Ae),1&t&&Re!==(Re=(e[0].sid||e[0].id_stat||e[0].id_skpdi||"")+"")&&N(_,Re),1&t&&Ze!==(Ze=(e[0].district||"")+"")&&N(b,Ze),1&t&&Ye!==(Ye=(e[0].dor||"")+"")&&N(x,Ye),1&t&&Ve!==(Ve=(e[0].km||0)+"")&&N(H,Ve),1&t&&We!==(We=(e[0].m||0)+"")&&N(G,We),1&t&&Ke!==(Ke=e[0].lat+"")&&N(W,Ke),1&t&&Je!==(Je=e[0].lon+"")&&N(J,Je),1&t&&Xe!==(Xe=(e[0].collision_date||e[0].dtp_date||"")+"")&&N(oe,Xe),1&t&&Qe!==(Qe=(e[0].dtvp||"")+"")&&N(de,Qe),16&t){let n;for(nt=e[4],n=0;n<nt.length;n+=1){const l=rs(e,nt,n);lt[n]?lt[n].p(l,t):(lt[n]=as(l),lt[n].c(),lt[n].m(me,null))}for(;n<lt.length;n+=1)lt[n].d(1);lt.length=nt.length}if(e[0].spog?st?st.p(e,t):(st=cs(e),st.c(),st.m(xe,je)):st&&(st.d(1),st=null),e[0].s_pch?ot?ot.p(e,t):(ot=ps(e),ot.c(),ot.m(xe,Ce)):ot&&(ot.d(1),ot=null),e[0].osv?rt?rt.p(e,t):(rt=ds(e),rt.c(),rt.m(xe,Le)):rt&&(rt.d(1),rt=null),e[0].ndu?it?it.p(e,t):(it=us(e),it.c(),it.m(xe,null)):it&&(it.d(1),it=null),1&t&&et!==(et=e[0].pog+"")&&N(Oe,et),1&t&&tt!==(tt=e[0].ran+"")&&N(qe,tt),5&t){let n;for(at=e[0].list_rub||[],n=0;n<at.length;n+=1){const l=ss(e,at,n);ct[n]?ct[n].p(l,t):(ct[n]=_s(l),ct[n].c(),ct[n].m(Ge,null))}for(;n<ct.length;n+=1)ct[n].d(1);ct.length=at.length}},i:y,o:y,d(n){n&&F(t),T(lt,n),st&&st.d(),ot&&ot.d(),rt&&rt.d(),it&&it.d(),e[8](null),T(ct,n),Ue()}}}function vs(e,t,n){let l,s,{showModal:o=!1}=t,{prp:r}=t,i=r.skpdiFiles?"":"disabled";V(()=>{o&&(l=new Le({target:document.body,props:{data:r.skpdiFiles}}),l.$on("close",e=>{l.$destroy(),n(5,o=!1)}))});const a=(r.tsInfo||[]).map(e=>{let t=e.ts_uch||[];return{ts:"Осталось на месте ДТП"!==e.ts?e.ts:"",arr:t.map(e=>({k_uch:e.k_uch||"",npdd:"Нет нарушений"!==e.npdd?e.npdd:"",sop_npdd:"Нет нарушений"!==e.sop_npdd?e.sop_npdd:""}))}});return console.log("ddddd",r),e.$set=e=>{"showModal"in e&&n(5,o=e.showModal),"prp"in e&&n(0,r=e.prp)},[r,s,e=>{let t=e.target.value;console.log("showRub",e.target.value),n(1,s.innerHTML="",s),fetch("https://dtp.mvs.group/scripts/rubez_dev/rubez-complex-"+t+".txt",{}).then(e=>e.json()).then(e=>{new Rl({target:s,props:{prp:e[0]}})})},e=>{navigator.clipboard.writeText(e.target.parentNode.textContent).catch(e=>{console.log("Something went wrong",e)})},a,o,l,i,function(e){J[e?"unshift":"push"](()=>{n(1,s=e)})}]}ls.setFilter=e=>{if(!ls._map)return;ls.clearLayers(),ns=e,ls._argFilters=ns;let t=[];ls._group&&(ls._group.getLayers().forEach(e=>{let n=e.options.props,l=0;ns.forEach(e=>{"measures_type"===e.type?(""===e.zn[0]||e.zn.filter(e=>e===n.type).length)&&l++:"id_dtp"===e.type?n.id_dtp==e.zn&&l++:"date"===e.type&&n.date_created>=e.zn[0]&&n.date_created<e.zn[1]&&l++}),l===ns.length&&t.push(e)}),ls.addLayer(es.layerGroup(t)))},ls.on("remove",()=>{ls.clearLayers()}).on("add",e=>{let t={type:{},bad:[]},n=[],l={},s=e=>{es.latLngBounds();let s="gray";e.rub_flag&&(s="#00FF00"),l[e.id]?console.log("___Дубль____",e):l[e.id]=e;let o=e.coords[0]||{lat:e.lat,lon:e.lon},r=es.latLng(o.lat,o.lon);if(!o.lat||!o.lon||!e.id_dtp)return void t.bad.push(e);let i=e.type||" ";e.type=i;let a=t.type[i];a?a++:a=1,t.type[i]=a,n.push(new g(r,{props:e,radius:9,zIndexOffset:5e4,stroke:!1,fillColor:s}).bindPopup(ts).on("popupopen",e=>{!function(e){let t=es.DomUtil.create("div");e.id;new Ql({target:t,props:{prp:e}}),ts.setContent(t)}(e.target.options.props)}).on("popupclose",e=>{e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)}))};fetch("https://dtp.mvs.group/scripts/events_dev/get_event.txt",{}).then(e=>e.json()).then(e=>{e.forEach(s),ls._opt=t,ls._group=es.layerGroup(n),ls.addLayer(ls._group),console.log("opt",t)})});class fs extends ge{constructor(e){super(),me(this,e,vs,hs,C,{showModal:5,prp:0})}}const ms=window.L,gs=ms.popup();let ys;const bs=ms.featureGroup([]);bs._needHeat={radius:19,blur:11.26,minOpacity:.34},bs.checkZoom=e=>{Object.keys(bs._layers).length?e<12&&bs.setFilter(ys):e>11&&bs.setFilter(ys)},bs.setFilter=e=>{if(!bs._map)return;bs.clearLayers(),ys=e||[],bs._argFilters=ys;let t=[],n=[];bs._group&&bs._map&&(bs._group.getLayers().forEach(e=>{let l=e.options.props,s=0;ys.forEach(e=>{"collision_type"===e.type?(""===e.zn[0]||e.zn.filter(e=>e===l.collision_type).length)&&s++:"id_dtp"===e.type?l.id==e.zn&&s++:"list_rub"===e.type?l.list_rub.length?e.zn.on&&s++:e.zn.off&&s++:"date"===e.type&&l.date>=e.zn[0]&&l.date<e.zn[1]&&s++}),s===ys.length&&(t.push(e),n.push(e._latlng))}),bs._needHeat?(bs._map.addLayer(bs._heat),bs._heat.setLatLngs(n),bs._heat.setOptions(bs._needHeat),bs._map._zoom>11&&bs.addLayer(ms.layerGroup(t))):(bs.addLayer(ms.layerGroup(t)),bs._map.removeLayer(bs._heat)))},bs.on("remove",e=>{bs._map.removeLayer(bs._heat),bs.clearLayers()}).on("add",e=>{bs._heat=ms.heatLayer([],{gradient:{.1:"blue",.4:"lime",1:"red"}}),ys=null,fetch("https://dtp.mvs.group/scripts/dtprubez_dev/get_stat_gipdd_with_rub.txt",{}).then(e=>e.json()).then(e=>{let t={collision_type:{},iconType:{}},n=[],l=e.map(e=>{let l=e.iconType||0,s=!1,o="#2F4F4F";l&&(s=l%2==0,l>=1&&l<=6?o="#8B4513":7===l||8===l?o="#228B22":l>=9&&l<=14?o="#8B4513":15===l||16===l?o="#7B68EE":17!==l&&18!==l||(o="#2F4F4F")),e.list_rub||(e.list_rub=[]),e.lat&&e.lon||(console.log("_______",e),e.lat=e.lon=0);let r=t.collision_type[e.collision_type];r?r++:r=1,t.collision_type[e.collision_type]=r,t.iconType[e.collision_type]=l;let i=ms.latLng(e.lat,e.lon,s?1:.5);return n.push(i),new g(i,{props:e,radius:6,stroke:s,fillColor:o}).bindPopup(gs).on("popupopen",e=>{var t;t=e.target.options.props.id,fetch("https://dtp.mvs.group/scripts/dtprubez_dev/get_stat_gipdd_with_rub_"+t+".txt",{}).then(e=>e.json()).then(e=>{let t=ms.DomUtil.create("div");const n=new fs({target:t,props:{prp:e}});gs._svObj=n,gs.setContent(t)})}).on("popupclose",e=>{e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)})});bs.addLayer(bs._heat),bs._heat.setLatLngs(n),bs._heat.setOptions(bs._needHeat),bs._opt=t,bs._group=ms.layerGroup(l),bs.setFilter(),bs._map._zoom>11&&bs.addLayer(bs._group),bs._refreshFilters()})});const ks=window.L;ks.popup();let xs;const js=ks.featureGroup([]);js._needHeat={radius:19,blur:11.26,minOpacity:.34},js.checkZoom=e=>{Object.keys(js._layers).length?e<12&&js.setFilter(xs):e>11&&js.setFilter(xs)},js.setFilter=e=>{if(!js._map)return;js.clearLayers(),xs=e||[],js._argFilters=xs;let t=[],n=[];js._group&&(js._group.getLayers().forEach(e=>{let l=e.options.props,s=0;xs.forEach(e=>{"collision_type"===e.type?(""===e.zn[0]||e.zn.filter(e=>e===l.collision_type).length)&&s++:"list_rub"===e.type?l.list_rub.length?e.zn.on&&s++:e.zn.off&&s++:"date"===e.type&&l.date>=e.zn[0]&&l.date<e.zn[1]&&s++}),s===xs.length&&(t.push(e),n.push(e._latlng))}),js.addLayer(ks.layerGroup(t)))},js.on("remove",e=>{js.clearLayers()}).on("add",e=>{fetch("https://dtp.mvs.group/static/proxy.php?url=https://graphql.dev.mvs.group/graphql",{body:'{"operationName":null,"variables":{},"query":"{\\n  allVMapLineInfos(filter: {lon: {isNull: false}, lat: {isNull: false}}) {\\n    totalCount\\n    nodes {\\n      lineSid: sid\\n      lineName: name\\n      lineAddress: address\\n      roadName\\n      stage\\n      lat\\n      lon\\n      yield\\n      complexes\\n      __typename\\n    }\\n    __typename\\n  }\\n}\\n"}',method:"POST",mode:"cors"}).then(e=>e.json()).then(e=>{console.log("json",e)})});const Cs=window.L,Ls=(Cs.popup(),Cs.popup({minWidth:200}));let ws;const zs=Cs.featureGroup([]);zs.setFilter=e=>{if(!zs._map)return;zs.clearLayers(),ws=e;let t=[];zs._group&&(zs._group.getLayers().forEach(e=>{let n=e.options.cluster,l=0;ws.forEach(e=>{if("ht"===e.type)e.zn[n.ht]&&l++;else if("roads"===e.type)(e.zn.filter(e=>e===n.road).length||1===e.zn.length&&""===e.zn[0])&&l++;else if("id_dtp"===e.type)!n.list_dtp.filter(t=>t.id_skpdi==e.zn||t.id_stat==e.zn).length&&e.zn.length||l++;else if("id_hearth"===e.type)e.zn==n.id&&l++;else if("year"===e.type)e.zn[n.year]&&l++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&!n.count_stricken&&n.count_lost||2===t&&n.count_stricken&&!n.count_lost||3===t&&(n.count_stricken||n.count_lost)||4===t&&n.count_stricken&&n.count_lost)&&l++:l++}}),l===ws.length&&t.push(e)}),zs.addLayer(Cs.layerGroup(t)))},zs.on("remove",()=>{zs.clearLayers()}).on("add",e=>{let t={road:{},str_icon_type:{},lost:0,stricken:{0:0},iconType:{},years:{},dtps:{}},n=[],l=(e,l)=>{let s=e.icon_type||1,o=Cs.latLngBounds(),r=[],i=e.list_dtp,a=!1,c="#FF0000";if(p(e,t),e.ht=l<2?"hearth3":"hearth5",i.length){t.years[e.year]=!0;let l=t.str_icon_type[e.str_icon_type];l?l++:l=1,t.str_icon_type[e.str_icon_type]=l,t.iconType[e.str_icon_type]=s,e.road in t.road?t.road[e.road]++:t.road[e.road]=1,s&&(a=s%2==0,1===s||2===s?c="#FFA500":3===s||4===s?c="#B8860B":5===s||6===s?c="#CD853F":7===s||8===s?c="#228B22":9===s||10===s?c="#FF8C00":11===s||12===s?c="#D2691E":13===s||14===s?c="#DEB887":15===s||16===s?c="#7B68EE":17!==s&&18!==s||(c="#2F4F4F"));let p=i.map(n=>{n.iconType;let l=n.coords||{lat:0,lon:0},s=Cs.latLng(l.lat,l.lon),i=[];o.extend(s),r.push(s),n.id_skpdi&&i.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&i.push({type:"gibdd",id:n.id_stat}),n._cur=i;let p=n.id||n.id_stat||n.id_skpdi,d=t.dtps[p]||{},u=e.id||e.id_hearth;return d?d[u]?d[u]++:d[u]=1:(d={},d[u]=1),t.dtps[p]=d,a=!1,n.lost&&(t.lost++,a=!0),new g(Cs.latLng(l.lat,l.lon),{cluster:e,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:a,fillColor:c})});r.length?e._bounds=Cs.polyline(r,{items:p,cluster:e,color:c,weight:4}):e._bounds=Cs.rectangle(o,{items:p,cluster:e,fill:!0,color:c,dashArray:"8 3 1"}),e._bounds.on("mouseover",e=>{let t=e.target;t._weight=t.options.weight,t._color=t.options.color,t.options.weight=8,t.options.color="red",t._renderer._updateStyle(t)}).on("mouseout",e=>{let t=e.target;t.options.weight=t._weight,t.options.color=t._color,t._renderer._updateStyle(t)}).on("click",t=>{Cs.DomEvent.stopPropagation(t);let n=t.target,l=t.latlng;t.layerPoint;t.originalEvent.ctrlKey&&n.bringToBack(),function(e){let t=Cs.DomUtil.create("div");new Qn({target:t,props:{predochag:1,prp:e}}),Ls.setContent(t)}(e),Ls.setLatLng(l).openOn(zs._map)}),n.push(e._bounds),n=n.concat(p)}};Promise.all(["https://dtp.mvs.group/scripts/prehearths2_dev/2019.txt","https://dtp.mvs.group/scripts/prehearths2_dev/2020.txt","https://dtp.mvs.group/scripts/prehearths4_dev/2019.txt","https://dtp.mvs.group/scripts/prehearths4_dev/2020.txt"].map(e=>fetch(e,{}).then(e=>e.json()))).then(e=>{e.forEach((e,s)=>{t.stricken[0]+=e.length,e.forEach(e=>{l(e,s)}),zs._opt=t,zs._group=Cs.layerGroup(n),ws?zs.setFilter(ws):zs.addLayer(zs._group),zs._refreshFilters()}),console.log("__allJson_____",e,zs._opt)})});const Ds=window.L;let Fs;Ds.canvas();const Ts=Ds.featureGroup([]);Ts.on("remove",e=>{Ts.clearLayers()}).on("add",e=>{Fs=Ts._map,fetch("static/m4.geojson",{}).then(e=>e.json()).then(e=>{let t,n=Ds.geoJson(e,{style:()=>({weight:6})}).on("mouseout",e=>{t&&t._map&&t._map.removeLayer(t)}).on("mousemove",e=>{t&&t._map&&t._map.removeLayer(t);let n,l=e.layer,s=Number.MAX_VALUE,o=e.layerPoint,r=e.latlng,i=l._rings[0];for(let e=0,t=i.length-1;e<t;e++){let t=Ds.LineUtil._sqClosestPointOnSegment(o,i[e],i[e+1],!0);t<s&&(s=t,n=e)}let a=l._latlngs.slice(0,n);a.push(r),t=Ds.polyline(a,{color:"red",weight:6,interactive:!1}).bindTooltip("").addTo(Fs),t.openTooltip(r);let c=Math.floor(d(a)),p=Math.floor(c/1e3),u=c-1e3*p;t.setTooltipContent(p+" км. "+u+" м.")});Ts.clearLayers(),Ts.addLayer(n)})});const Es=window.L;let Os,Ms=Es.canvas();const qs=Es.featureGroup([]);qs.on("remove",e=>{qs.clearLayers()}).on("add",e=>{Os=qs._map,fetch("https://dtp.mvs.group/scripts/settlements_dev/0000.txt",{}).then(e=>e.json()).then(e=>{let t=Es.geoJson(e,{renderer:Ms,style:e=>({weight:1})}).bindPopup((function(e){return e.feature.properties.name}));qs.clearLayers(),qs.addLayer(t)})});const $s=window.L,Ps=$s.map(document.body,{center:[55.758031,37.611694],minZoom:1,zoom:8,maxZoom:21,attributionControl:!1,trackResize:!0,fadeAnimation:!0,zoomAnimation:!0,distanceUnit:"auto",squareUnit:"auto"});var Ss=Ps._controlCorners,Hs=Ps._controlContainer,Ns="leaflet-top leaflet-bottom",Bs="leaflet-left leaflet-right",Is={bottom:"leaflet-bottom "+Bs,gmxbottomleft:"leaflet-bottom leaflet-left",gmxbottomcenter:"leaflet-bottom "+Bs,gmxbottomright:"leaflet-bottom leaflet-right",center:Ns+" "+Bs,right:"leaflet-right "+Ns,left:"leaflet-left "+Ns,top:"leaflet-top "+Bs};for(var Gs in Is)Ss[Gs]||(Ss[Gs]=$s.DomUtil.create("div",Is[Gs],Hs));Ps.addControl($s.control.gmxCenter()).addControl($s.control.fitCenter());var Us=$s.TileLayer.extend({options:{tilesCRS:$s.CRS.EPSG3395},_getTiledPixelBounds:function(e){var t=$s.TileLayer.prototype._getTiledPixelBounds.call(this,e);return this._shiftY=this._getShiftY(this._tileZoom),t.min.y+=this._shiftY,t.max.y+=this._shiftY,t},_tileOnError:function(e,t,n){var l=t.getAttribute("src"),s=l.indexOf("/mapcache/");if(s>-1){var o=new URL("http:"+l).searchParams,r=l.substr(s+1).split("/"),i=a[r[1]];t.src=$s.Util.template(i.errorTileUrlPrefix+i.postfix,{z:o.get("z"),x:o.get("x"),y:o.get("y")})}e(n,t)},_getTilePos:function(e){return $s.TileLayer.prototype._getTilePos.call(this,e).subtract([0,this._shiftY])},_getShiftY:function(e){var t=this._map,n=t.getCenter(),l=t.options.crs.project(n).y-this.options.tilesCRS.project(n).y;return Math.floor($s.CRS.scale(e)*l/40075016.685578495)}});$s.TileLayer.Mercator=Us,$s.tileLayer.Mercator=function(e,t){return new Us(e,t)};let As={};c.b||(c.b="m2"),["m2","m3"].forEach(e=>{let t=a[e],n=$s.tileLayer.Mercator(t.prefix+t.postfix,t.options);As[t.title]=n,c.b===t.options.key&&n.addTo(Ps)}),As.OpenStreetMap=$s.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:21,maxNativeZoom:18});let Rs={"Трассы":Ts,"Населенные пункты":qs,"Мероприятия":ls,"Рубежи":Kl,"Очаги с привязкой к городам":zl,"Предочаги по пикетажу":zs,"Очаги ГИБДД по пикетажу":jl,"Очаги ГИБДД разные типы, геометрия":yl,"Очаги ГИБДД одного типа, геометрия":vl,"ДТП Очаги(Stat)":dl,"ДТП Очаги(tmp)":il,"Очаги ГИБДД+СКПДИ по кварталам геометрия":ll,"ДТП  ГИБДД+СКПДИ (объединение)":xt,"ДТП СКПДИ + тепловая карта":dt,"ДТП ГИБДД + тепловая карта":Ke,"ДТП ГИБДД + тепловая карта + Рубежи":bs},Zs=c.o?c.o.split(",").reduce((e,t)=>(e[t]=!0,e),{}):{};["m1","m4","m5"].forEach(e=>{let t=a[e],n=$s.tileLayer.Mercator(t.prefix+t.postfix,t.options);Rs[t.title]=n,Zs[t.options.key]&&n.addTo(Ps)});$s.control.layers(As,Rs).addTo(Ps);let Ys,Vs,Ws=$s.control.gmxIcon({id:"filters",className:"leaflet-bar",togglable:!0,title:"Фильтры"}).on("statechange",(function(e){let t=e.target,n=t._container,l=t._win;t.options.isActive?l||(l=t._win=$s.DomUtil.create("div","win leaflet-control-layers",n),$s.DomEvent.disableScrollPropagation(l),l._Filters=new Rn({target:l,props:{control:t,DtpGibddRub:bs,DtpGibdd:Ke,DtpSkpdi:dt,Measures:ls,Rub:Kl,DtpHearthsPicket4:zs,DtpHearthsSettlements:zl,DtpHearthsPicket:jl,DtpHearths5:yl,DtpHearths3:vl,DtpHearthsStat:dl,DtpHearthsTmp:il,DtpHearths:ll,DtpVerifyed:xt}})):(t._win.parentNode.removeChild(t._win),t._win=null)})).addTo(Ps);Ps.pm.setLang("customName",{tooltips:{finishLine:"Щелкните любой существующий маркер для завершения"}},"ru"),Ps.pm.setLang("ru"),Ps.on("pm:create",e=>{Ps.removeLayer(e.layer),Ks.setActive(!1)}).on("pm:drawstart",e=>{let t=e.workingLayer;if("Line"===e.shape){let n=Ps.pm.Draw.Line._hintMarker;n&&n.on("move",(function(e){var l=t.getLatLngs();if(l.length){var s=d(l),o=distVincenty(l[l.length-1],e.latlng),r=(s+=o)>1e3?(s/1e3).toFixed(2)+" км":Math.ceil(s)+" м",i=o>1e3?(o/1e3).toFixed(2)+" км":Math.ceil(o)+" м";n._tooltip.setContent("Отрезок <b>("+i+")</b>участка <b>("+r+")</b>")}})),Ys&&e.target.pm.Toolbar.buttons.drawPolyline.buttonsDomNode&&(Vs=e.target.pm.Toolbar.buttons.drawPolyline.buttonsDomNode.children[1],Vs.style.display="none")}});let Ks=$s.control.gmxIcon({id:"measure",className:"leaflet-bar",togglable:!0,title:"Включить/Отключить режим измерения расстояний"}).on("statechange",(function(e){Ys=e.target.options.isActive,Ys?Ps.pm.enableDraw("Line",{finishOn:"dblclick"}):(Ps.pm.disableDraw("Line"),Vs&&(Vs.style.display=""))})).addTo(Ps);const Js=()=>{setTimeout(()=>{Ws.options.isActive&&(Ws.setActive(!1),Ws._win=null,Ws.setActive(!0))})};bs._refreshFilters=Ke._refreshFilters=dt._refreshFilters=ls._refreshFilters=xt._refreshFilters=ll._refreshFilters=dl._refreshFilters=vl._refreshFilters=yl._refreshFilters=jl._refreshFilters=zl._refreshFilters=zs._refreshFilters=Kl._refreshFilters=il._refreshFilters=Js;return bs.on("remove",Js),Ke.on("remove",Js),dt.on("remove",Js),ls.on("remove",Js),xt.on("remove",Js),ll.on("remove",Js),il.on("remove",Js),dl.on("remove",Js),vl.on("remove",Js),yl.on("remove",Js),jl.on("remove",Js),zl.on("remove",Js),zs.on("remove",Js),Kl.on("remove",Js),Ps.on("zoomend",e=>{Ps._crpx=0,xt._map&&xt.checkZoom(Ps._zoom),dt._map&&dt.checkZoom(Ps._zoom),Ke._map&&Ke.checkZoom(Ps._zoom)}),window._map=Ps,Ps}();
//# sourceMappingURL=main.js.map
