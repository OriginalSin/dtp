var dtp=function(){"use strict";const t=window.L;t.Control.GmxIcon=t.Control.extend({includes:t.Evented?t.Evented.prototype:t.Mixin.Events,options:{position:"topleft",id:"defaultIcon",isActive:!1},setActive:function(e,n,s){var l=this.options,o=this._container;if(l.togglable||l.toggle){var r=l.isActive,i=this._prefix,a=i+"-"+l.id;l.isActive=e,this._img&&(e&&l.activeImageUrl?this._img.src=l.activeImageUrl:!e&&l.regularImageUrl&&(this._img.src=l.regularImageUrl)),e?(t.DomUtil.addClass(o,i+"-active"),t.DomUtil.addClass(o,a+"-active"),o.children.length&&t.DomUtil.addClass(o,i+"-externalImage-active"),l.styleActive&&this.setStyle(l.styleActive)):(t.DomUtil.removeClass(o,i+"-active"),t.DomUtil.removeClass(o,a+"-active"),o.children.length&&t.DomUtil.removeClass(o,i+"-externalImage-active"),l.style&&this.setStyle(l.style)),n||r===e||this.fire("statechange",s)}if(t.gmxUtil&&t.gmxUtil.isIEOrEdge){var p=o.getElementsByTagName("use");if(p.length){var c=p[0],d=c.getAttribute("href")||c.getAttribute("xlink:href");c.setAttribute("href",d)}}},onAdd:function(e){var n=null,s=this.options,l=s.svgSprite||e.options.svgSprite,o="leaflet-gmx-icon"+(!l||s.regularImageUrl||s.text?"":"Svg"),r=o+"-"+s.id;this._prefix=o;var i=t.DomUtil.create("div",o+" "+r);if(i._id=s.id,this._container=i,s.title&&(i.title=s.title),this.setStyle=function(t){for(var e in t)i.style[e]=t[e]},s.className&&t.DomUtil.addClass(i,s.className),s.regularImageUrl)(n=t.DomUtil.create("img","",i)).src=s.regularImageUrl,this._img=n,t.DomUtil.addClass(i,o+"-img"),t.DomUtil.addClass(i,o+"-externalImage");else if(s.text)t.DomUtil.addClass(i,o+"-text"),t.DomUtil.create("span","",i).innerHTML=s.text;else if(l){t.DomUtil.addClass(i,"svgIcon");var a="#"+s.id.toLowerCase();i.innerHTML='<svg role="img" class="svgIcon"><use xlink:href="'+a+'" href="'+a+'"></use></svg>'}else t.DomUtil.addClass(i,o+"-img "+o+"-sprite");s.style&&this.setStyle(s.style),this._iconClick=function(t){i.parentNode&&i===t.toElement&&(this.setActive(!this.options.isActive,!1,t),this.fire("click",t),this.options.stateChange&&this.options.stateChange(this,t))};var p=t.DomEvent.stopPropagation;t.DomEvent.preventDefault;return t.DomEvent.on(i,"mousemove",p).on(i,"touchstart",p).on(i,"mousedown",p).on(i,"dblclick",p).on(i,"click",p).on(i,"click",this._iconClick,this),s.onAdd&&s.onAdd(this),this.fire("controladd"),e.fire("controladd",this),s.notHide&&(i._notHide=!0),e.gmxControlsManager&&e.gmxControlsManager.add(this),i},onRemove:function(e){e.gmxControlsManager&&e.gmxControlsManager.remove(this),this.fire("controlremove"),e.fire("controlremove",this);var n=this._container,s=t.DomEvent.stopPropagation;t.DomEvent.off(n,"mousemove",s).off(n,"touchstart",s).off(n,"mousedown",s).off(n,"dblclick",s).off(n,"click",s).off(n,"click",this._iconClick,this)},addTo:function(e){return t.Control.prototype.addTo.call(this,e),this.options.addBefore&&this.addBefore(this.options.addBefore),this},addBefore:function(t){var e=this._parent&&this._parent._container;if(e||(e=this._map&&this._map._controlCorners[this.getPosition()]),e)for(var n=0,s=e.childNodes.length;n<s;n++){var l=e.childNodes[n];if(t===l._id){e.insertBefore(this._container,l);break}}else this.options.addBefore=t;return this}}),t.Control.gmxIcon=t.Control.GmxIcon,t.control.gmxIcon=function(e){return new t.Control.GmxIcon(e)};const e=window.L;e.Control.GmxCenter=e.Control.extend({options:{position:"center",id:"center",notHide:!0,color:"red"},onRemove:function(t){t.gmxControlsManager&&t.gmxControlsManager.remove(this),t.fire("controlremove",this)},onAdd:function(t){var n="http://www.w3.org/2000/svg",s=e.DomUtil.create("div","leaflet-gmx-center"),l=e.DomUtil.create("div","leaflet-gmx-center"),o=document.createElementNS(n,"svg"),r=document.createElementNS(n,"g"),i=document.createElementNS(n,"path");return this._container=s,s._id=this.options.id,this.options.notHide&&(s._notHide=!0),i.setAttribute("stroke-width",2),i.setAttribute("stroke-opacity",2),i.setAttribute("d","M9 0L9 18M0 9L18 9"),this._path=i,r.appendChild(i),o.appendChild(r),o.setAttribute("width",18),o.setAttribute("height",18),l.appendChild(o),s.appendChild(l),this.setColor(this.options.color),t.fire("controladd",this),t.gmxControlsManager&&t.gmxControlsManager.add(this),s},setColor:function(t){return this.options.color=t,this._map&&this._path.setAttribute("stroke",t),this}}),e.Control.gmxCenter=e.Control.GmxCenter,e.control.gmxCenter=function(t){return new e.Control.GmxCenter(t)};const n=window.L;n.Control.FitCenter=n.Control.extend({options:{position:"topright",id:"fitcenter",notHide:!0,color:"#216b9c"},onRemove:function(t){t.gmxControlsManager&&t.gmxControlsManager.remove(this),t.off("moveend",this._update,this).fire("controlremove",this)},onAdd:function(t){var e=this.options.id,s="leaflet-gmx-"+e,l=n.DomUtil.create("div",s),o=n.DomUtil.create("input","",l),r=n.DomUtil.create("button","",l),i=n.DomUtil.create("div","results",l);return r.title="Переместить центр карты",o.placeholder="Поиск по адресам, координатам",this._input=o,this._container=l,this._results=i,l._id=e,t.on("mousemove",t=>{this._results.style.display="none"},this),n.DomEvent.on(o,"input",this._getSuggestions,this),n.DomEvent.on(o,"contextmenu",n.DomEvent.stopPropagation,this),n.DomEvent.on(l,"mousemove",n.DomEvent.stop),n.DomEvent.on(l,"mouseover",t=>{"block"!==this._results.style.display&&(this._results.style.display="block")},this),n.DomEvent.on(r,"click",(function(){let e=o.value.match(/[+-]?([0-9]*[.])?[0-9]+/g);e&&e.length>1&&t.setView([Number(e[0]),Number(e[1])])})),n.DomEvent.disableClickPropagation(l),t.on("moveend",this._update,this).fire("controladd",this),t.gmxControlsManager&&t.gmxControlsManager.add(this),l},_parseSearch:function(t){if((t=t||[]).length){this._results;let e=document.createDocumentFragment();t.forEach(t=>{let s=t.display_name,l=t.boundingbox,o=n.DomUtil.create("div","",e);o.innerHTML=s,n.DomEvent.on(o,"click",t=>{this._map.fitBounds([[l[0],l[2]],[l[1],l[3]]])},this)}),this._results.innerText="",this._results.appendChild(e),this._results.classList.add("active")}},_getSuggestions:function(t){const e=t.target.value||"калужское шоссе",n=["format=json","limit=10","polygon_text=1","bounded=1","viewbox=34,53,41,57"].join("&"),s="&q="+encodeURI(e);fetch(`//nominatim.openstreetmap.org/search?${n}${s}`,{}).then(t=>t.json()).then(this._parseSearch.bind(this))},_update:function(t){this._map&&this.setCoords(this._map.getCenter())},_trunc:function(t){return(""+(Math.round(1e7*t)/1e7+1e-8)).substring(0,9)},setCoords:function(t){return this}}),n.control.fitCenter=function(t){return new n.Control.FitCenter(t)};const s='&copy; <a href="https://n.maps.yandex.ru/?oid=1900133#!/?z=18&ll=36.860478%2C55.429679&l=nk%23map">Yandex</a> contributors',l="//inv.mvs.group/mapcache/",o=new Date,r=o.getMonth()+1,i=o.getDate(),a=(o.getFullYear(),{m1:{title:"Дороги",prefix:l+"m1/",postfix:"?x={x}&y={y}&z={z}&l=mrcss",errorTileUrlPrefix:"//core-nmaps-mrc-browser.maps.yandex.ru/tiles",options:{key:"m1",minZoom:10,maxZoom:19,attribution:s}},m2:{title:"Карта(Яндекс)",prefix:l+"m2/tiles",postfix:"?l=map&v=18.01.10-2&x={x}&y={y}&z={z}&scale=1&lang=ru_RU",errorTileUrlPrefix:"//vec01.maps.yandex.net/tiles",options:{key:"m2",maxNativeZoom:19,maxZoom:21,attribution:s}},m3:{title:"Снимки(Яндекс)",prefix:l+"m3/tiles",postfix:"?l=sat&v=3.462.0&x={x}&y={y}&z={z}&lang=ru_RU",errorTileUrlPrefix:"//sat04.maps.yandex.net/tiles",options:{key:"m3",maxNativeZoom:19,maxZoom:21,attribution:s}},m4:{title:"Скорость(Народная карта)",prefix:l+"m4/",postfix:"?x={x}&y={y}&z={z}&l=mpskl&sl=104,301135,302526,302827,5300026,5400046,70300236,70300638",errorTileUrlPrefix:"//04.core-nmaps-renderer-nmaps.maps.yandex.net/tile",options:{key:"m4",minZoom:8,maxZoom:19,attribution:s}},m5:{title:"Светофоры",prefix:l+"m5/",postfix:"?x={x}&y={y}&z={z}&l=mpskl&sl=301750",errorTileUrlPrefix:"//04.core-nmaps-renderer-nmaps.maps.yandex.net/tile",options:{key:"m4",minZoom:12,maxZoom:19,attribution:s}},m6:{title:"Дороги в стадии строительства",prefix:"//03.core-nmaps-renderer-nmaps.maps.yandex.net/",postfix:"?x={x}&y={y}&z={z}&l=mpskl&sl=70300289",errorTileUrlPrefix:"//03.core-nmaps-renderer-nmaps.maps.yandex.net/",options:{key:"m6",minZoom:10,maxZoom:19,attribution:s}}}),p={};window.URLSearchParams&&new URLSearchParams(window.location.search).forEach((t,e)=>{p[e]=t});const c=(t,e)=>{let n=t.count_lost,s=t.count_stricken;!s&&n&&(e.stricken[1]=1+(e.stricken[1]||0)),s&&!n&&(e.stricken[2]=1+(e.stricken[2]||0)),(s||n)&&(e.stricken[3]=1+(e.stricken[3]||0)),s&&n&&(e.stricken[4]=1+(e.stricken[4]||0))},d=t=>{let e=0,n=(t=t||[])[0];return t.forEach(t=>{e+=((t,e)=>{for(var n=Math.PI/180,s={lon:n*t.lng,lat:n*t.lat},l={lon:n*e.lng,lat:n*e.lat},o=6378137,r=6356752.3142,i=1/298.257223563,a=l.lon-s.lon,p=Math.atan((1-i)*Math.tan(s.lat)),c=Math.atan((1-i)*Math.tan(l.lat)),d=Math.sin(p),u=Math.cos(p),_=Math.sin(c),h=Math.cos(c),v=a,f=2*Math.PI,m=20;Math.abs(v-f)>1e-12&&--m>0;){var g=Math.sin(v),y=Math.cos(v),b=Math.sqrt(h*g*(h*g)+(u*_-d*h*y)*(u*_-d*h*y));if(0===b)return 0;var k=d*_+u*h*y,x=Math.atan2(b,k),j=u*h*g/b,C=1-j*j,L=k-2*d*_/C;isNaN(L)&&(L=0);var w=i/16*C*(4+i*(4-3*C));f=v,v=a+(1-w)*i*j*(x+w*b*(L+w*k*(2*L*L-1)))}if(0===m)return NaN;var z=C*(o*o/(r*r)-1),D=z/1024*(256+z*(z*(74-47*z)-128));return r*(1+z/16384*(4096+z*(z*(320-175*z)-768)))*(x-D*b*(L+D/4*(k*(2*L*L-1)-D/6*L*(4*b*b-3)*(4*L*L-3))))})(t,n),n=t}),e},u=window.L;let _=u.canvas();const h=function(t,e){var n=u.Projection.Mercator.project(e),s=u.Projection.Mercator.unproject(new u.Point(n.x+40,n.y+30));return 156543.033928041*Math.pow(2,-t)*((t,e)=>{for(var n=Math.PI/180,s={lon:n*t.lng,lat:n*t.lat},l={lon:n*e.lng,lat:n*e.lat},o=6378137,r=6356752.3142,i=1/298.257223563,a=l.lon-s.lon,p=Math.atan((1-i)*Math.tan(s.lat)),c=Math.atan((1-i)*Math.tan(l.lat)),d=Math.sin(p),u=Math.cos(p),_=Math.sin(c),h=Math.cos(c),v=a,f=2*Math.PI,m=20;Math.abs(v-f)>1e-12&&--m>0;){var g=Math.sin(v),y=Math.cos(v),b=Math.sqrt(h*g*(h*g)+(u*_-d*h*y)*(u*_-d*h*y));if(0===b)return 0;var k=d*_+u*h*y,x=Math.atan2(b,k),j=u*h*g/b,C=1-j*j,L=k-2*d*_/C;isNaN(L)&&(L=0);var w=i/16*C*(4+i*(4-3*C));f=v,v=a+(1-w)*i*j*(x+w*b*(L+w*k*(2*L*L-1)))}if(0===m)return NaN;var z=C*(o*o/(r*r)-1),D=z/1024*(256+z*(z*(74-47*z)-128));return r*(1+z/16384*(4096+z*(z*(320-175*z)-768)))*(x-D*b*(L+D/4*(k*(2*L*L-1)-D/6*L*(4*b*b-3)*(4*L*L-3))))})(e,s)/50},v=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix(),f=(t,e,n,s)=>{s=s||20/832;let l=new Path2D(t),o=new Path2D;return o.addPath(l,v.translate(e,n).rotate(180).scale(-s,-s)),o},m={measures:f("M 10.5 9 C 10.132813 9 9.578125 9.167969 9.1875 9.5 C 8.796875 9.832031 8.488281 10.273438 8.0625 10.96875 C 7.738281 11.496094 7.21875 12.621094 6.4375 14.28125 C 5.65625 15.941406 4.6875 18.015625 3.75 20.0625 C 1.875 24.152344 0.09375 28.09375 0.09375 28.09375 C -0.0820313 28.390625 -0.09375 28.753906 0.0625 29.0625 C 0.0703125 29.082031 0.0820313 29.105469 0.09375 29.125 C 0.148438 29.308594 0.210938 29.46875 0.3125 29.59375 C 0.496094 29.816406 0.695313 29.921875 0.84375 30 C 1.144531 30.160156 1.355469 30.226563 1.5 30.3125 C 1.789063 30.488281 2 30.527344 2 31.6875 C 2 34.023438 2.664063 36.609375 4.46875 38.625 C 6.273438 40.640625 9.199219 42 13.40625 42 C 16.816406 42 19.355469 40.886719 20.90625 38.875 C 22.457031 36.863281 23 34.121094 23 31 L 23 28.5625 C 23.351563 28.339844 23.972656 28 25 28 C 26.027344 28 26.648438 28.339844 27 28.5625 L 27 31 C 27 34.121094 27.542969 36.863281 29.09375 38.875 C 30.644531 40.886719 33.183594 42 36.59375 42 C 40.800781 42 43.726563 40.65625 45.53125 38.65625 C 47.335938 36.65625 48 34.101563 48 31.8125 C 48 30.59375 48.226563 30.53125 48.5 30.375 C 48.636719 30.296875 48.824219 30.242188 49.125 30.09375 C 49.277344 30.019531 49.460938 29.910156 49.65625 29.6875 C 49.804688 29.515625 49.917969 29.273438 49.96875 29.03125 C 50.105469 28.726563 50.082031 28.375 49.90625 28.09375 C 49.90625 28.09375 48.125 24.152344 46.25 20.0625 C 45.3125 18.015625 44.34375 15.941406 43.5625 14.28125 C 42.78125 12.621094 42.261719 11.496094 41.9375 10.96875 C 41.511719 10.273438 41.203125 9.832031 40.8125 9.5 C 40.421875 9.167969 39.867188 9 39.5 9 C 39.050781 9 38.546875 9.210938 38.1875 9.53125 C 37.828125 9.851563 37.53125 10.285156 37.15625 10.875 C 36.566406 11.859375 36.15625 12.4375 36.15625 12.4375 C 35.84375 12.902344 35.972656 13.53125 36.4375 13.84375 C 36.902344 14.15625 37.53125 14.027344 37.84375 13.5625 C 37.84375 13.5625 38.246094 12.929688 38.84375 11.9375 C 38.851563 11.921875 38.835938 11.921875 38.84375 11.90625 C 39.144531 11.433594 39.382813 11.175781 39.5 11.0625 C 39.613281 11.160156 39.882813 11.4375 40.25 12.03125 C 40.324219 12.152344 41.003906 13.476563 41.78125 15.125 C 42.558594 16.773438 43.5 18.863281 44.4375 20.90625 C 45.820313 23.917969 46.519531 25.488281 47.125 26.8125 C 46.839844 26.75 46.585938 26.683594 46.25 26.625 C 44.132813 26.257813 40.941406 26 36.40625 26 C 33.464844 26 30.472656 26.660156 28.1875 26.96875 C 27.71875 26.640625 26.699219 26 25 26 C 23.300781 26 22.28125 26.640625 21.8125 26.96875 C 19.527344 26.660156 16.535156 26 13.59375 26 C 9.058594 26 5.863281 26.242188 3.75 26.59375 C 3.414063 26.648438 3.15625 26.71875 2.875 26.78125 C 3.484375 25.449219 4.1875 23.90625 5.5625 20.90625 C 6.5 18.863281 7.441406 16.773438 8.21875 15.125 C 8.996094 13.476563 9.675781 12.152344 9.75 12.03125 L 9.75 12 C 10.105469 11.429688 10.390625 11.160156 10.5 11.0625 C 10.617188 11.175781 10.855469 11.433594 11.15625 11.90625 C 11.164063 11.921875 11.148438 11.921875 11.15625 11.9375 C 11.753906 12.929688 12.15625 13.5625 12.15625 13.5625 C 12.46875 14.027344 13.097656 14.15625 13.5625 13.84375 C 14.027344 13.53125 14.15625 12.902344 13.84375 12.4375 C 13.84375 12.4375 13.433594 11.859375 12.84375 10.875 C 12.46875 10.285156 12.171875 9.851563 11.8125 9.53125 C 11.453125 9.210938 10.949219 9 10.5 9 Z M 13.59375 28 C 16.042969 28 18.679688 28.570313 21 28.90625 L 21 31 C 21 33.878906 20.460938 36.136719 19.3125 37.625 C 18.164063 39.113281 16.398438 40 13.40625 40 C 9.613281 40 7.332031 38.839844 5.9375 37.28125 C 4.542969 35.722656 4 33.652344 4 31.6875 C 4 30.265625 3.398438 29.386719 2.78125 28.875 C 3.160156 28.769531 3.46875 28.667969 4.09375 28.5625 C 6.03125 28.238281 9.128906 28 13.59375 28 Z M 36.40625 28 C 40.871094 28 43.972656 28.261719 45.90625 28.59375 C 46.554688 28.707031 46.871094 28.820313 47.25 28.9375 C 46.613281 29.441406 46 30.34375 46 31.8125 C 46 33.722656 45.457031 35.765625 44.0625 37.3125 C 42.667969 38.859375 40.386719 40 36.59375 40 C 33.601563 40 31.835938 39.113281 30.6875 37.625 C 29.539063 36.136719 29 33.878906 29 31 L 29 28.90625 C 31.320313 28.570313 33.957031 28 36.40625 28 Z",-12,-13,.5),camera:f("M864 260H728l-32.4-90.8a32.07 32.07 0 0 0-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 260H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V340c0-44.2-35.8-80-80-80zM512 716c-88.4 0-160-71.6-160-160s71.6-160 160-160 160 71.6 160 160-71.6 160-160 160zm-96-160a96 96 0 1 0 192 0 96 96 0 1 0-192 0z",-12,-13)};u.canvas({padding:.5});u.Canvas.include({_updateMarkerPoint:function(t){if(!(!this._drawing||t._empty()||t.feature&&t.feature.properties._isHidden)){var e=t._point,n=t.options._radiusM,s=t.options.image,l=t._map,o=this._ctx,r=t.options.iconName||"border";if(l){if(s){let n=t.options.w||20,l=t.options.h||20;return void o.drawImage(s,e.x-n/2,e.y-l/2,n,l)}let i=l._zoom;n&&!l._rpx&&l._needRound&&(l._rpx=l._needRound*n/h(i,l.getCenter())),l._rpx>20&&l._needRound&&(o.save(),o.beginPath(),o.globalAlpha=.2,o.fillStyle="gray",o.arc(e.x,e.y,l._rpx,0,2*Math.PI),o.fill(),o.stroke(),o.closePath(),o.restore()),i>12&&(o.save(),o.beginPath(),o.globalAlpha=1,o.fillStyle="white",o.arc(e.x,e.y,14,0,2*Math.PI),o.fill(),o.closePath(),o.restore()),o.save(),o.beginPath(),o.translate(e.x-0,e.y-0),this._fillStroke(o,t),o.stroke(iconPaths[r].path),o.globalAlpha=t.options.fillOpacity,o.fill(iconPaths[r].path),o.closePath(),o.restore()}}},_updateCirclePoint:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=t.options,s=n.radius||14,l=2*s,o=(t._map,this._ctx);if(o.save(),o.beginPath(),o.globalAlpha=1,o.fillStyle=n.fillColor||"red",n.triangle)o.moveTo(e.x,e.y+s),o.lineTo(e.x+s,e.y-s),o.lineTo(e.x-s,e.y-s),o.lineTo(e.x,e.y+s);else if(n.rhomb)o.moveTo(e.x+s,e.y),o.lineTo(e.x,e.y+s),o.lineTo(e.x-s,e.y),o.lineTo(e.x,e.y-s),o.lineTo(e.x+s,e.y);else if(n.box)o.fillRect(e.x-s,e.y-s,l,l);else if(n.path){let t=m[n.path];o.translate(e.x,e.y),o.fill(t),o.stroke(t)}else o.arc(e.x,e.y,s,0,2*Math.PI);o.fill(),n.stroke&&(o.stroke(),n.triangle?(o.moveTo(e.x,e.y+s),o.lineTo(e.x+s,e.y-s),o.lineTo(e.x-s,e.y-s),o.lineTo(e.x,e.y+s)):n.box?o.strokeRect(e.x-s,e.y-s,l,l):o.arc(e.x,e.y,s,0,2*Math.PI)),o.closePath(),o.restore()}}});u.CircleMarker.extend({_updatePath:function(){this._renderer._updateMarkerPoint(this)}});const g=u.CircleMarker.extend({options:{renderer:_},_updatePath:function(){this._renderer._updateCirclePoint(this)}});u.Rectangle.extend({options:{renderer:_}});function y(){}function b(t){return t()}function k(){return Object.create(null)}function x(t){t.forEach(b)}function j(t){return"function"==typeof t}function C(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function w(t){return null==t?"":t}function z(t,e){t.appendChild(e)}function D(t,e,n){t.insertBefore(e,n||null)}function F(t){t.parentNode.removeChild(t)}function T(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function O(t){return document.createElement(t)}function E(t){return document.createTextNode(t)}function M(){return E(" ")}function $(){return E("")}function q(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function P(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function S(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function H(t){return""===t?void 0:+t}function N(t,e){e=""+e,t.data!==e&&(t.data=e)}function B(t,e){(null!=e||t.value)&&(t.value=e)}function U(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e)return void(s.selected=!0)}}function I(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];s.selected=~e.indexOf(s.__value)}}function G(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function A(t){return[].map.call(t.querySelectorAll(":checked"),t=>t.__value)}let R;function Z(t){R=t}function Y(){if(!R)throw new Error("Function called outside component initialization");return R}function V(t){Y().$$.after_update.push(t)}function W(){const t=Y();return(e,n)=>{const s=t.$$.callbacks[e];if(s){const l=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);s.slice().forEach(e=>{e.call(t,l)})}}}const K=[],J=[],X=[],Q=[],tt=Promise.resolve();let et=!1;function nt(t){X.push(t)}let st=!1;const lt=new Set;function ot(){if(!st){st=!0;do{for(let t=0;t<K.length;t+=1){const e=K[t];Z(e),rt(e.$$)}for(K.length=0;J.length;)J.pop()();for(let t=0;t<X.length;t+=1){const e=X[t];lt.has(e)||(lt.add(e),e())}X.length=0}while(K.length);for(;Q.length;)Q.pop()();et=!1,st=!1,lt.clear()}}function rt(t){if(null!==t.fragment){t.update(),x(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(nt)}}const it=new Set;let at;function pt(){at={r:0,c:[],p:at}}function ct(){at.r||x(at.c),at=at.p}function dt(t,e){t&&t.i&&(it.delete(t),t.i(e))}function ut(t,e,n,s){if(t&&t.o){if(it.has(t))return;it.add(t),at.c.push(()=>{it.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}}function _t(t){t&&t.c()}function ht(t,e,n){const{fragment:s,on_mount:l,on_destroy:o,after_update:r}=t.$$;s&&s.m(e,n),nt(()=>{const e=l.map(b).filter(j);o?o.push(...e):x(e),t.$$.on_mount=[]}),r.forEach(nt)}function vt(t,e){const n=t.$$;null!==n.fragment&&(x(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ft(t,e){-1===t.$$.dirty[0]&&(K.push(t),et||(et=!0,tt.then(ot)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function mt(t,e,n,s,l,o,r=[-1]){const i=R;Z(t);const a=e.props||{},p=t.$$={fragment:null,ctx:null,props:o,update:y,not_equal:l,bound:k(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(i?i.$$.context:[]),callbacks:k(),dirty:r};let c=!1;if(p.ctx=n?n(t,a,(e,n,...s)=>{const o=s.length?s[0]:n;return p.ctx&&l(p.ctx[e],p.ctx[e]=o)&&(p.bound[e]&&p.bound[e](o),c&&ft(t,e)),n}):[],p.update(),c=!0,x(p.before_update),p.fragment=!!s&&s(p.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);p.fragment&&p.fragment.l(t),t.forEach(F)}else p.fragment&&p.fragment.c();e.intro&&dt(t.$$.fragment),ht(t,e.target,e.anchor),ot()}Z(i)}class gt{$destroy(){vt(this,1),this.$destroy=y}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function yt(t,e,n){const s=t.slice();return s[7]=e[n],s[9]=n,s}function bt(t){let e,n,s,l,o;function r(...e){return t[6](t[9],...e)}return{c(){e=O("li"),S(e,"class",n="dot"+(t[9]===t[1]?" selected":"")+" svelte-jjp3es"),e.value=s=t[9],S(e,"role","button"),S(e,"tabindex","0"),S(e,"aria-label",l="slide item "+t[9])},m(t,n,s){D(t,e,n),s&&o(),o=q(e,"click",P(r))},p(s,l){t=s,2&l&&n!==(n="dot"+(t[9]===t[1]?" selected":"")+" svelte-jjp3es")&&S(e,"class",n)},d(t){t&&F(e),o()}}}function kt(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f,m,g,b,k,j,C,L,w,$,H,B,U,I,G,A=(t[0][t[1]].kindName||"Фото и схемы ДТП")+"",R=t[1]+1+"",Z=t[0].length+"",Y=t[0],V=[];for(let e=0;e<Y.length;e+=1)V[e]=bt(yt(t,Y,e));return{c(){e=O("div"),n=M(),s=O("div"),l=O("div"),o=M(),r=O("div"),i=O("div"),a=O("div"),p=E(A),c=M(),d=O("div"),u=O("div"),_=O("div"),h=O("button"),v=M(),f=O("div"),m=O("a"),g=O("img"),j=M(),C=O("button"),L=M(),w=O("ul");for(let t=0;t<V.length;t+=1)V[t].c();$=M(),H=O("p"),B=E(R),U=E(" из "),I=E(Z),S(e,"class","modal-background svelte-jjp3es"),S(l,"title","Закрыть"),S(l,"class","ant-modal-close svelte-jjp3es"),S(a,"class","ant-modal-title"),S(a,"id","rcDialogTitle1"),S(i,"class","ant-modal-header svelte-jjp3es"),S(h,"type","button"),S(h,"aria-label","previous slide / item"),S(h,"class","control-arrow control-prev svelte-jjp3es"),g.src!==(b=""+(xt+t[0][t[1]].guid))&&S(g,"src",b),S(g,"alt",""),S(g,"class","svelte-jjp3es"),S(m,"target","_blank"),S(m,"href",k=""+(xt+t[0][t[1]].guid)),S(m,"title","Открыть на весь экран"),S(m,"class","svelte-jjp3es"),S(f,"class","slider-wrapper axis-horizontal svelte-jjp3es"),S(C,"type","button"),S(C,"aria-label","next slide / item"),S(C,"class","control-arrow control-next svelte-jjp3es"),S(w,"class","control-dots svelte-jjp3es"),S(H,"class","carousel-status svelte-jjp3es"),S(_,"class","carousel carousel-slider svelte-jjp3es"),function(t,e,n,s){t.style.setProperty(e,n,s?"important":"")}(_,"width","100%"),S(d,"class","ant-modal-body svelte-jjp3es"),S(r,"class","ant-modal-content svelte-jjp3es"),S(s,"class","modal svelte-jjp3es"),S(s,"role","dialog"),S(s,"aria-modal","true")},m(y,b,k){D(y,e,b),D(y,n,b),D(y,s,b),z(s,l),z(s,o),z(s,r),z(r,i),z(i,a),z(a,p),z(r,c),z(r,d),z(d,u),z(u,_),z(_,h),z(_,v),z(_,f),z(f,m),z(m,g),z(_,j),z(_,C),z(_,L),z(_,w);for(let t=0;t<V.length;t+=1)V[t].m(w,null);z(_,$),z(_,H),z(H,B),z(H,U),z(H,I),k&&x(G),G=[q(e,"click",P(t[2])),q(l,"click",P(t[2])),q(h,"click",P(t[3])),q(C,"click",P(t[4])),q(s,"click",P(jt))]},p(t,[e]){if(3&e&&A!==(A=(t[0][t[1]].kindName||"Фото и схемы ДТП")+"")&&N(p,A),3&e&&g.src!==(b=""+(xt+t[0][t[1]].guid))&&S(g,"src",b),3&e&&k!==(k=""+(xt+t[0][t[1]].guid))&&S(m,"href",k),3&e){let n;for(Y=t[0],n=0;n<Y.length;n+=1){const s=yt(t,Y,n);V[n]?V[n].p(s,e):(V[n]=bt(s),V[n].c(),V[n].m(w,null))}for(;n<V.length;n+=1)V[n].d(1);V.length=Y.length}2&e&&R!==(R=t[1]+1+"")&&N(B,R),1&e&&Z!==(Z=t[0].length+"")&&N(I,Z)},i:y,o:y,d(t){t&&F(e),t&&F(n),t&&F(s),T(V,t),x(G)}}}const xt="//map.mvs.group/skpdi/proxy.php?guid=",jt=()=>{};function Ct(t,e,n){const s=W();let{data:l}=e,o=0;return t.$set=t=>{"data"in t&&n(0,l=t.data)},[l,o,()=>{s("close")},()=>{o&&n(1,o--,o)},()=>{o<l.length-1&&n(1,o++,o)},s,t=>{n(1,o=t)}]}class Lt extends gt{constructor(t){super(),mt(this,t,Ct,kt,C,{data:0})}}function wt(t){let e,n,s,l,o,r,i,a,p,c=t[0].title+"",d=t[0].address+"",u=t[0].contact+"";return{c(){e=O("div"),n=O("div"),s=E(c),l=O("br"),o=M(),r=O("div"),i=E(d),a=O("br"),p=E(u),S(n,"class","pLine"),S(r,"class","address svelte-1ve8gqw"),S(e,"class","mvsPopup svelte-1ve8gqw")},m(t,c){D(t,e,c),z(e,n),z(n,s),z(e,l),z(e,o),z(e,r),z(r,i),z(r,a),z(r,p)},p(t,[e]){1&e&&c!==(c=t[0].title+"")&&N(s,c),1&e&&d!==(d=t[0].address+"")&&N(i,d),1&e&&u!==(u=t[0].contact+"")&&N(p,u)},i:y,o:y,d(t){t&&F(e)}}}function zt(t,e,n){let{prp:s={}}=e;return t.$set=t=>{"prp"in t&&n(0,s=t.prp)},[s]}class Dt extends gt{constructor(t){super(),mt(this,t,zt,wt,C,{prp:0})}}function Ft(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f,m,g,b,k,x,j,C,L,w,T,$,P,H,B,U,I,G,A,R,Z,Y,V,W,K,J,X,Q,tt,et,nt,st,lt,ot,rt,it,at,pt,ct,dt,ut,_t,ht,vt,ft,mt,gt,yt,bt,kt=(t[0].type||"")+"",xt=(t[0].id||"")+"",jt=(t[0].dor||"")+"",Ct=(t[0].status||"")+"",Lt=t[3](t[0].date_created)+"",wt=t[3](t[0].date_finish_fact)+"",zt=t[2].lat+"",Dt=t[2].lon+"",Ft=(t[0].id_dtp||"")+"",Tt=(t[0].client||"")+"";return{c(){e=O("div"),n=O("div"),n.textContent="Мероприятие",s=M(),l=O("div"),o=O("table"),r=O("tbody"),i=O("tr"),a=O("td"),a.textContent="Тип мероприятия:",p=M(),c=O("td"),d=E(kt),u=M(),_=O("tr"),h=O("td"),h.textContent="ID:",v=M(),f=O("td"),m=E(xt),g=M(),b=O("tr"),k=O("td"),k.textContent="Участок дороги:",x=M(),j=O("td"),C=E(jt),L=M(),w=O("tr"),T=O("td"),T.textContent="Статус:",$=M(),P=O("td"),H=E(Ct),B=M(),U=O("tr"),I=O("td"),I.textContent="Дата добавления:",G=M(),A=O("td"),R=E(Lt),Z=M(),Y=O("tr"),V=O("td"),V.textContent="Дата завершения:",W=M(),K=O("td"),J=E(wt),X=M(),Q=O("tr"),tt=O("td"),tt.textContent="Координаты:",et=M(),nt=O("td"),st=E(zt),lt=M(),ot=E(Dt),rt=M(),it=O("span"),at=M(),pt=O("tr"),ct=O("td"),ct.textContent="ID ДТП СКПДИ:",dt=M(),ut=O("td"),_t=E(Ft),ht=M(),vt=O("tr"),ft=O("td"),ft.textContent="Заказчик:",mt=M(),gt=O("td"),yt=E(Tt),S(n,"class","pLine"),S(a,"class","first svelte-1ve8gqw"),S(h,"class","first svelte-1ve8gqw"),S(k,"class","first svelte-1ve8gqw"),S(T,"class","first svelte-1ve8gqw"),S(I,"class","first svelte-1ve8gqw"),S(V,"class","first svelte-1ve8gqw"),S(tt,"class","first svelte-1ve8gqw"),S(it,"title","Скопировать в буфер обмена"),S(it,"class","leaflet-gmx-icon-copy"),S(ct,"class","first svelte-1ve8gqw"),S(ft,"class","first svelte-1ve8gqw"),S(o,"class","table svelte-1ve8gqw"),S(l,"class","featureCont"),S(e,"class","mvsPopup svelte-1ve8gqw")},m(y,F,O){D(y,e,F),z(e,n),z(e,s),z(e,l),z(l,o),z(o,r),z(r,i),z(i,a),z(i,p),z(i,c),z(c,d),z(r,u),z(r,_),z(_,h),z(_,v),z(_,f),z(f,m),z(r,g),z(r,b),z(b,k),z(b,x),z(b,j),z(j,C),z(r,L),z(r,w),z(w,T),z(w,$),z(w,P),z(P,H),z(r,B),z(r,U),z(U,I),z(U,G),z(U,A),z(A,R),z(r,Z),z(r,Y),z(Y,V),z(Y,W),z(Y,K),z(K,J),z(r,X),z(r,Q),z(Q,tt),z(Q,et),z(Q,nt),z(nt,st),z(nt,lt),z(nt,ot),z(nt,rt),z(nt,it),z(r,at),z(r,pt),z(pt,ct),z(pt,dt),z(pt,ut),z(ut,_t),z(r,ht),z(r,vt),z(vt,ft),z(vt,mt),z(vt,gt),z(gt,yt),O&&bt(),bt=q(it,"click",t[1])},p(t,[e]){1&e&&kt!==(kt=(t[0].type||"")+"")&&N(d,kt),1&e&&xt!==(xt=(t[0].id||"")+"")&&N(m,xt),1&e&&jt!==(jt=(t[0].dor||"")+"")&&N(C,jt),1&e&&Ct!==(Ct=(t[0].status||"")+"")&&N(H,Ct),1&e&&Lt!==(Lt=t[3](t[0].date_created)+"")&&N(R,Lt),1&e&&wt!==(wt=t[3](t[0].date_finish_fact)+"")&&N(J,wt),1&e&&Ft!==(Ft=(t[0].id_dtp||"")+"")&&N(_t,Ft),1&e&&Tt!==(Tt=(t[0].client||"")+"")&&N(yt,Tt)},i:y,o:y,d(t){t&&F(e),bt()}}}function Tt(t,e,n){let{prp:s}=e;let l=s.coords[0]||{lat:s.lat,lon:s.lon};return t.$set=t=>{"prp"in t&&n(0,s=t.prp)},[s,t=>{navigator.clipboard.writeText(t.target.parentNode.textContent).catch(t=>{console.log("Something went wrong",t)})},l,t=>{if(!t)return"";let e=new Date(1e3*t);return e.toLocaleDateString()+" "+e.toLocaleTimeString()}]}class Ot extends gt{constructor(t){super(),mt(this,t,Tt,Ft,C,{prp:0})}}function Et(t,e,n){const s=t.slice();return s[12]=e[n],s}function Mt(t,e,n){const s=t.slice();return s[12]=e[n],s}function $t(t,e,n){const s=t.slice();return s[12]=e[n],s}function qt(t,e,n){const s=t.slice();return s[17]=e[n],s}function Pt(t){let e,n,s,l=t[12].k_uch&&(t[12].npdd||t[12].sop_npdd)&&function(t){let e,n,s=t[12].k_uch+"";return{c(){e=O("li"),n=E(s)},m(t,s){D(t,e,s),z(e,n)},p:y,d(t){t&&F(e)}}}(t),o=t[12].npdd&&function(t){let e,n,s=t[12].npdd+"";return{c(){e=O("li"),n=E(s)},m(t,s){D(t,e,s),z(e,n)},p:y,d(t){t&&F(e)}}}(t),r=t[12].sop_npdd&&function(t){let e,n,s=t[12].sop_npdd+"";return{c(){e=O("li"),n=E(s)},m(t,s){D(t,e,s),z(e,n)},p:y,d(t){t&&F(e)}}}(t);return{c(){l&&l.c(),e=M(),o&&o.c(),n=M(),r&&r.c(),s=$()},m(t,i){l&&l.m(t,i),D(t,e,i),o&&o.m(t,i),D(t,n,i),r&&r.m(t,i),D(t,s,i)},p(t,e){t[12].k_uch&&(t[12].npdd||t[12].sop_npdd)&&l.p(t,e),t[12].npdd&&o.p(t,e),t[12].sop_npdd&&r.p(t,e)},d(t){l&&l.d(t),t&&F(e),o&&o.d(t),t&&F(n),r&&r.d(t),t&&F(s)}}}function St(t){let e,n,s=t[17].ts&&function(t){let e,n,s=t[17].ts+"";return{c(){e=O("li"),n=E(s)},m(t,s){D(t,e,s),z(e,n)},p:y,d(t){t&&F(e)}}}(t),l=t[17].arr,o=[];for(let e=0;e<l.length;e+=1)o[e]=Pt($t(t,l,e));return{c(){s&&s.c(),e=M();for(let t=0;t<o.length;t+=1)o[t].c();n=$()},m(t,l){s&&s.m(t,l),D(t,e,l);for(let e=0;e<o.length;e+=1)o[e].m(t,l);D(t,n,l)},p(t,e){if(t[17].ts&&s.p(t,e),64&e){let s;for(l=t[17].arr,s=0;s<l.length;s+=1){const r=$t(t,l,s);o[s]?o[s].p(r,e):(o[s]=Pt(r),o[s].c(),o[s].m(n.parentNode,n))}for(;s<o.length;s+=1)o[s].d(1);o.length=l.length}},d(t){s&&s.d(t),t&&F(e),T(o,t),t&&F(n)}}}function Ht(t){let e,n,s,l,o,r=t[0].spog+"";return{c(){e=O("div"),n=O("div"),n.textContent="Погода:",s=M(),l=O("div"),o=E(r),S(n,"class","stitle"),S(l,"class","sval")},m(t,r){D(t,e,r),z(e,n),z(e,s),z(e,l),z(l,o)},p(t,e){1&e&&r!==(r=t[0].spog+"")&&N(o,r)},d(t){t&&F(e)}}}function Nt(t){let e,n,s,l,o,r=t[0].s_pch+"";return{c(){e=O("div"),n=O("div"),n.textContent="Покрытие:",s=M(),l=O("div"),o=E(r),S(n,"class","stitle"),S(l,"class","sval")},m(t,r){D(t,e,r),z(e,n),z(e,s),z(e,l),z(l,o)},p(t,e){1&e&&r!==(r=t[0].s_pch+"")&&N(o,r)},d(t){t&&F(e)}}}function Bt(t){let e,n,s,l,o,r=t[0].osv+"";return{c(){e=O("div"),n=O("div"),n.textContent="Освещенность:",s=M(),l=O("div"),o=E(r),S(n,"class","stitle"),S(l,"class","sval")},m(t,r){D(t,e,r),z(e,n),z(e,s),z(e,l),z(l,o)},p(t,e){1&e&&r!==(r=t[0].osv+"")&&N(o,r)},d(t){t&&F(e)}}}function Ut(t){let e,n,s,l,o,r=t[0].ndu+"";return{c(){e=O("div"),n=O("div"),n.textContent="Иные условия:",s=M(),l=O("div"),o=E(r),S(n,"class","stitle"),S(l,"class","sval")},m(t,r){D(t,e,r),z(e,n),z(e,s),z(e,l),z(l,o)},p(t,e){1&e&&r!==(r=t[0].ndu+"")&&N(o,r)},d(t){t&&F(e)}}}function It(t){let e,n,s,l;return{c(){e=O("li"),n=E("батальон ДПС"),S(e,"class","link svelte-bxm1yk"),e.value=s=t[12]},m(s,o,r){D(s,e,o),z(e,n),r&&l(),l=q(e,"click",t[4])},p(t,n){1&n&&s!==(s=t[12])&&(e.value=s)},d(t){t&&F(e),l()}}}function Gt(t){let e,n,s,l;return{c(){e=O("li"),n=E("Мероприятие"),S(e,"class","link svelte-bxm1yk"),e.value=s=t[12]},m(s,o,r){D(s,e,o),z(e,n),r&&l(),l=q(e,"click",t[3])},p(t,n){1&n&&s!==(s=t[12])&&(e.value=s)},d(t){t&&F(e),l()}}}function At(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f,m,g,b,k,x,j,C,L,w,$,P,H,B,U,I,G,A,R,Z,Y,V,W,K,J,X,Q,tt,et,nt,st,lt,ot,rt,it,at,pt,ct,dt,ut,_t,ht,vt,ft,mt,gt,yt,bt,kt,xt,jt,Ct,Lt,wt,zt,Dt,Ft,Tt,Ot,$t,Pt,At,Rt,Zt,Yt,Vt,Wt,Kt,Jt,Xt,Qt,te,ee,ne,se,le=(t[0].name||t[0].dtvp||"")+"",oe=(t[0].sid||t[0].id_stat||t[0].id_skpdi||"")+"",re=(t[0].district||"")+"",ie=(t[0].dor||"")+"",ae=(t[0].km||0)+"",pe=(t[0].m||0)+"",ce=t[0].lat+"",de=t[0].lon+"",ue=(t[0].collision_date||t[0].dtp_date||"")+"",_e=(t[0].dtvp||"")+"",he=t[0].pog+"",ve=t[0].ran+"",fe=t[6],me=[];for(let e=0;e<fe.length;e+=1)me[e]=St(qt(t,fe,e));let ge=t[0].spog&&Ht(t),ye=t[0].s_pch&&Nt(t),be=t[0].osv&&Bt(t),ke=t[0].ndu&&Ut(t),xe=t[0].dps_plk||[],je=[];for(let e=0;e<xe.length;e+=1)je[e]=It(Mt(t,xe,e));let Ce=t[0].event_list||[],Le=[];for(let e=0;e<Ce.length;e+=1)Le[e]=Gt(Et(t,Ce,e));return{c(){e=O("div"),n=O("div"),s=O("b"),l=E(le),o=M(),r=O("div"),i=O("table"),a=O("tbody"),p=O("tr"),c=O("td"),c.textContent="ID:",d=M(),u=O("td"),_=E(oe),h=M(),v=O("tr"),f=O("td"),f.textContent="Адрес:",m=M(),g=O("td"),b=E(re),k=M(),x=E(ie),j=M(),C=O("tr"),L=O("td"),L.textContent="Пикетаж:",w=M(),$=O("td"),P=O("b"),H=E(ae),B=E(" км. "),U=O("b"),I=E(pe),G=E(" м."),A=M(),R=O("tr"),Z=O("td"),Z.textContent="Координаты:",Y=M(),V=O("td"),W=E(ce),K=M(),J=E(de),X=M(),Q=O("span"),tt=M(),et=O("tr"),nt=O("td"),nt.textContent="Дата/время:",st=M(),lt=O("td"),ot=E(ue),rt=M(),it=O("tr"),at=O("td"),at.textContent="Вид ДТП:",pt=M(),ct=O("td"),dt=E(_e),ut=M(),_t=O("tr"),ht=O("td"),ht.textContent="Нарушения:",vt=M(),ft=O("td"),mt=O("ul");for(let t=0;t<me.length;t+=1)me[t].c();gt=M(),yt=O("tr"),bt=O("td"),bt.textContent="Условия:",kt=M(),xt=O("td"),ge&&ge.c(),jt=M(),ye&&ye.c(),Ct=M(),be&&be.c(),Lt=M(),ke&&ke.c(),wt=M(),zt=O("tr"),Dt=O("td"),Dt.textContent="Количество погибших/раненых:",Ft=M(),Tt=O("td"),Ot=O("b"),$t=E(he),Pt=E("/"),At=E(ve),Rt=M(),Zt=O("tr"),Yt=O("td"),Vt=O("div"),Wt=M(),Kt=O("ul");for(let t=0;t<je.length;t+=1)je[t].c();Jt=M(),Xt=O("tr"),Qt=O("td"),te=O("div"),ee=M(),ne=O("ul");for(let t=0;t<Le.length;t+=1)Le[t].c();S(n,"class","pLine"),S(c,"class","first svelte-bxm1yk"),S(f,"class","first svelte-bxm1yk"),S(L,"class","first svelte-bxm1yk"),S(Z,"class","first svelte-bxm1yk"),S(Q,"title","Скопировать в буфер обмена"),S(Q,"class","leaflet-gmx-icon-copy"),S(nt,"class","first svelte-bxm1yk"),S(at,"class","first svelte-bxm1yk"),S(ht,"class","first svelte-bxm1yk"),S(bt,"class","first svelte-bxm1yk"),S(Dt,"class","first svelte-bxm1yk"),S(Vt,"class","win leaflet-popup-content-wrapper  svelte-bxm1yk"),S(Yt,"class","first svelte-bxm1yk"),S(Yt,"colspan","2"),S(te,"class","win leaflet-popup-content-wrapper  svelte-bxm1yk"),S(Qt,"class","first svelte-bxm1yk"),S(Qt,"colspan","2"),S(i,"class","table"),S(r,"class","featureCont"),S(e,"class","mvsPopup svelte-bxm1yk")},m(y,F,T){D(y,e,F),z(e,n),z(n,s),z(s,l),z(e,o),z(e,r),z(r,i),z(i,a),z(a,p),z(p,c),z(p,d),z(p,u),z(u,_),z(a,h),z(a,v),z(v,f),z(v,m),z(v,g),z(g,b),z(g,k),z(g,x),z(a,j),z(a,C),z(C,L),z(C,w),z(C,$),z($,P),z(P,H),z($,B),z($,U),z(U,I),z($,G),z(a,A),z(a,R),z(R,Z),z(R,Y),z(R,V),z(V,W),z(V,K),z(V,J),z(V,X),z(V,Q),z(a,tt),z(a,et),z(et,nt),z(et,st),z(et,lt),z(lt,ot),z(a,rt),z(a,it),z(it,at),z(it,pt),z(it,ct),z(ct,dt),z(a,ut),z(a,_t),z(_t,ht),z(_t,vt),z(_t,ft),z(ft,mt);for(let t=0;t<me.length;t+=1)me[t].m(mt,null);z(a,gt),z(a,yt),z(yt,bt),z(yt,kt),z(yt,xt),ge&&ge.m(xt,null),z(xt,jt),ye&&ye.m(xt,null),z(xt,Ct),be&&be.m(xt,null),z(xt,Lt),ke&&ke.m(xt,null),z(a,wt),z(a,zt),z(zt,Dt),z(zt,Ft),z(zt,Tt),z(Tt,Ot),z(Ot,$t),z(Ot,Pt),z(Ot,At),z(a,Rt),z(a,Zt),z(Zt,Yt),z(Yt,Vt),t[10](Vt),z(Yt,Wt),z(Yt,Kt);for(let t=0;t<je.length;t+=1)je[t].m(Kt,null);z(a,Jt),z(a,Xt),z(Xt,Qt),z(Qt,te),t[11](te),z(Qt,ee),z(Qt,ne);for(let t=0;t<Le.length;t+=1)Le[t].m(ne,null);T&&se(),se=q(Q,"click",t[5])},p(t,[e]){if(1&e&&le!==(le=(t[0].name||t[0].dtvp||"")+"")&&N(l,le),1&e&&oe!==(oe=(t[0].sid||t[0].id_stat||t[0].id_skpdi||"")+"")&&N(_,oe),1&e&&re!==(re=(t[0].district||"")+"")&&N(b,re),1&e&&ie!==(ie=(t[0].dor||"")+"")&&N(x,ie),1&e&&ae!==(ae=(t[0].km||0)+"")&&N(H,ae),1&e&&pe!==(pe=(t[0].m||0)+"")&&N(I,pe),1&e&&ce!==(ce=t[0].lat+"")&&N(W,ce),1&e&&de!==(de=t[0].lon+"")&&N(J,de),1&e&&ue!==(ue=(t[0].collision_date||t[0].dtp_date||"")+"")&&N(ot,ue),1&e&&_e!==(_e=(t[0].dtvp||"")+"")&&N(dt,_e),64&e){let n;for(fe=t[6],n=0;n<fe.length;n+=1){const s=qt(t,fe,n);me[n]?me[n].p(s,e):(me[n]=St(s),me[n].c(),me[n].m(mt,null))}for(;n<me.length;n+=1)me[n].d(1);me.length=fe.length}if(t[0].spog?ge?ge.p(t,e):(ge=Ht(t),ge.c(),ge.m(xt,jt)):ge&&(ge.d(1),ge=null),t[0].s_pch?ye?ye.p(t,e):(ye=Nt(t),ye.c(),ye.m(xt,Ct)):ye&&(ye.d(1),ye=null),t[0].osv?be?be.p(t,e):(be=Bt(t),be.c(),be.m(xt,Lt)):be&&(be.d(1),be=null),t[0].ndu?ke?ke.p(t,e):(ke=Ut(t),ke.c(),ke.m(xt,null)):ke&&(ke.d(1),ke=null),1&e&&he!==(he=t[0].pog+"")&&N($t,he),1&e&&ve!==(ve=t[0].ran+"")&&N(At,ve),17&e){let n;for(xe=t[0].dps_plk||[],n=0;n<xe.length;n+=1){const s=Mt(t,xe,n);je[n]?je[n].p(s,e):(je[n]=It(s),je[n].c(),je[n].m(Kt,null))}for(;n<je.length;n+=1)je[n].d(1);je.length=xe.length}if(9&e){let n;for(Ce=t[0].event_list||[],n=0;n<Ce.length;n+=1){const s=Et(t,Ce,n);Le[n]?Le[n].p(s,e):(Le[n]=Gt(s),Le[n].c(),Le[n].m(ne,null))}for(;n<Le.length;n+=1)Le[n].d(1);Le.length=Ce.length}},i:y,o:y,d(n){n&&F(e),T(me,n),ge&&ge.d(),ye&&ye.d(),be&&be.d(),ke&&ke.d(),t[10](null),T(je,n),t[11](null),T(Le,n),se()}}}function Rt(t,e,n){let s,l,o,{showModal:r=!1}=e,{prp:i}=e,a=i.skpdiFiles?"":"disabled";V(()=>{r&&(s=new Lt({target:document.body,props:{data:i.skpdiFiles}}),s.$on("close",t=>{s.$destroy(),n(7,r=!1)}))});const p=(i.tsInfo||[]).map(t=>{let e=t.ts_uch||[];return{ts:"Осталось на месте ДТП"!==t.ts?t.ts:"",arr:e.map(t=>({k_uch:t.k_uch||"",npdd:"Нет нарушений"!==t.npdd?t.npdd:"",sop_npdd:"Нет нарушений"!==t.sop_npdd?t.sop_npdd:""}))}});return t.$set=t=>{"showModal"in t&&n(7,r=t.showModal),"prp"in t&&n(0,i=t.prp)},[i,l,o,t=>{let e=t.target.value;n(2,o.innerHTML="",o),fetch("https://dtp.mvs.group/scripts/events_dev/get_event_id_"+e+".txt",{}).then(t=>t.json()).then(t=>{new Ot({target:o,props:{prp:t[0]}})})},t=>{let e=t.target.value;console.log("showBat",t.target.value),n(1,l.innerHTML="",l),fetch("https://dtp.mvs.group/scripts/regiments_dev/get_plk_id"+e+".txt",{}).then(t=>t.json()).then(t=>{new Dt({target:l,props:{prp:t[0]}})})},t=>{navigator.clipboard.writeText(t.target.parentNode.textContent).catch(t=>{console.log("Something went wrong",t)})},p,r,s,a,function(t){J[t?"unshift":"push"](()=>{n(1,l=t)})},function(t){J[t?"unshift":"push"](()=>{n(2,o=t)})}]}class Zt extends gt{constructor(t){super(),mt(this,t,Rt,At,C,{showModal:7,prp:0})}}const Yt=window.L,Vt=Yt.popup();let Wt;const Kt=Yt.featureGroup([]);function Jt(t,e,n){const s=t.slice();return s[9]=e[n],s}function Xt(t,e,n){const s=t.slice();return s[12]=e[n],s}function Qt(t,e,n){const s=t.slice();return s[12]=e[n],s}function te(t){let e,n=t[1].collisionTypes,s=[];for(let e=0;e<n.length;e+=1)s[e]=ee(Qt(t,n,e));return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=$()},m(t,n){for(let e=0;e<s.length;e+=1)s[e].m(t,n);D(t,e,n)},p(t,l){if(2&l){let o;for(n=t[1].collisionTypes,o=0;o<n.length;o+=1){const r=Qt(t,n,o);s[o]?s[o].p(r,l):(s[o]=ee(r),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(t){T(s,t),t&&F(e)}}}function ee(t){let e,n,s=(t[12].collisionType||"")+"";return{c(){e=O("li"),n=E(s)},m(t,s){D(t,e,s),z(e,n)},p(t,e){2&e&&s!==(s=(t[12].collisionType||"")+"")&&N(n,s)},d(t){t&&F(e)}}}function ne(t){let e,n=t[1].uchs,s=[];for(let e=0;e<n.length;e+=1)s[e]=se(Xt(t,n,e));return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=$()},m(t,n){for(let e=0;e<s.length;e+=1)s[e].m(t,n);D(t,e,n)},p(t,l){if(2&l){let o;for(n=t[1].uchs,o=0;o<n.length;o+=1){const r=Xt(t,n,o);s[o]?s[o].p(r,l):(s[o]=se(r),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(t){T(s,t),t&&F(e)}}}function se(t){let e,n,s,l,o,r,i,a,p=(t[12].collisionPartyCategory||"")+"",c=(t[12].collisionPartyCond||"")+"";return{c(){e=O("li"),n=E(p),s=M(),l=O("b"),o=O("i"),r=E("("),i=E(c),a=E(")")},m(t,p){D(t,e,p),z(e,n),z(e,s),z(e,l),z(l,o),z(o,r),z(o,i),z(o,a)},p(t,e){2&e&&p!==(p=(t[12].collisionPartyCategory||"")+"")&&N(n,p),2&e&&c!==(c=(t[12].collisionPartyCond||"")+"")&&N(i,c)},d(t){t&&F(e)}}}function le(t){let e,n,s,l;return{c(){e=O("li"),n=E("Мероприятие"),S(e,"class","link svelte-vdxfpj"),e.value=s=t[9]},m(s,o,r){D(s,e,o),z(e,n),r&&l(),l=q(e,"click",t[4])},p(t,n){2&n&&s!==(s=t[9])&&(e.value=s)},d(t){t&&F(e),l()}}}function oe(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f,m,g,b,k,j,C,L,w,$,P,H,B,U,I,G,A,R,Z,Y,V,W,K,J,X,Q,tt,et,nt,st,lt,ot,rt,it,at,pt,ct,dt,ut,_t,ht,vt,ft,mt,gt,yt,bt,kt,xt,jt,Ct,Lt,wt,zt,Dt,Ft,Tt=(t[1].name||t[1].dtvp||"")+"",Ot=(t[1].id||t[1].id_stat||t[1].id_skpdi||"")+"",Et=(t[1].km||0)+"",Mt=(t[1].m||0)+"",$t=t[1].lat+"",qt=t[1].lon+"",Pt=(t[1].collision_date||t[1].dtp_date||"")+"",St=(t[1].collision_context||t[1].dtp_date||"")+"",Ht=t[1].collisionTypes&&t[1].collisionTypes.length&&te(t),Nt=t[1].uchs&&t[1].uchs.length&&ne(t),Bt=t[1].event_list||[],Ut=[];for(let e=0;e<Bt.length;e+=1)Ut[e]=le(Jt(t,Bt,e));return{c(){e=O("div"),n=O("div"),s=O("b"),l=E(Tt),o=M(),r=O("div"),i=O("table"),a=O("tbody"),p=O("tr"),c=O("td"),c.textContent="ID:",d=M(),u=O("td"),_=E(Ot),h=M(),v=O("tr"),f=O("td"),f.textContent="Пикетаж:",m=M(),g=O("td"),b=O("b"),k=E(Et),j=E(" км. "),C=O("b"),L=E(Mt),w=E(" м."),$=M(),P=O("tr"),H=O("td"),H.textContent="Координаты:",B=M(),U=O("td"),I=E($t),G=M(),A=E(qt),R=M(),Z=O("span"),Y=M(),V=O("tr"),W=O("td"),W.textContent="Дата/время:",K=M(),J=O("td"),X=E(Pt),Q=M(),tt=O("tr"),et=O("td"),nt=O("div"),nt.textContent="Условия ДТП:",st=M(),lt=O("div"),ot=E(St),rt=M(),it=O("tr"),at=O("td"),at.textContent="Нарушения:",pt=M(),ct=O("td"),dt=O("ul"),Ht&&Ht.c(),ut=M(),_t=O("tr"),ht=O("td"),ht.textContent="Участники:",vt=M(),ft=O("td"),mt=O("ul"),Nt&&Nt.c(),gt=M(),yt=O("tr"),bt=O("td"),kt=O("div"),xt=M(),jt=O("ul");for(let t=0;t<Ut.length;t+=1)Ut[t].c();Ct=M(),Lt=O("tr"),wt=O("td"),zt=O("button"),Dt=E("Фото и схемы"),S(n,"class","pLine"),S(c,"class","first"),S(f,"class","first"),S(H,"class","first"),S(Z,"title","Скопировать в буфер обмена"),S(Z,"class","leaflet-gmx-icon-copy"),S(W,"class","first"),S(nt,"class","first"),S(et,"colspan","2"),S(at,"class","first"),S(ht,"class","first"),S(kt,"class","win leaflet-popup-content-wrapper  svelte-vdxfpj"),S(bt,"class","first"),S(bt,"colspan","2"),S(zt,"class","primary svelte-vdxfpj"),zt.disabled=t[2],S(wt,"class","center"),S(wt,"colspan","2"),S(i,"class","table"),S(r,"class","featureCont"),S(e,"class","mvsPopup")},m(y,F,T){D(y,e,F),z(e,n),z(n,s),z(s,l),z(e,o),z(e,r),z(r,i),z(i,a),z(a,p),z(p,c),z(p,d),z(p,u),z(u,_),z(a,h),z(a,v),z(v,f),z(v,m),z(v,g),z(g,b),z(b,k),z(g,j),z(g,C),z(C,L),z(g,w),z(a,$),z(a,P),z(P,H),z(P,B),z(P,U),z(U,I),z(U,G),z(U,A),z(U,R),z(U,Z),z(a,Y),z(a,V),z(V,W),z(V,K),z(V,J),z(J,X),z(a,Q),z(a,tt),z(tt,et),z(et,nt),z(et,st),z(et,lt),z(lt,ot),z(a,rt),z(a,it),z(it,at),z(it,pt),z(it,ct),z(ct,dt),Ht&&Ht.m(dt,null),z(a,ut),z(a,_t),z(_t,ht),z(_t,vt),z(_t,ft),z(ft,mt),Nt&&Nt.m(mt,null),z(a,gt),z(a,yt),z(yt,bt),z(bt,kt),t[7](kt),z(bt,xt),z(bt,jt);for(let t=0;t<Ut.length;t+=1)Ut[t].m(jt,null);z(a,Ct),z(a,Lt),z(Lt,wt),z(wt,zt),z(zt,Dt),T&&x(Ft),Ft=[q(Z,"click",t[5]),q(zt,"click",t[8])]},p(t,[e]){if(2&e&&Tt!==(Tt=(t[1].name||t[1].dtvp||"")+"")&&N(l,Tt),2&e&&Ot!==(Ot=(t[1].id||t[1].id_stat||t[1].id_skpdi||"")+"")&&N(_,Ot),2&e&&Et!==(Et=(t[1].km||0)+"")&&N(k,Et),2&e&&Mt!==(Mt=(t[1].m||0)+"")&&N(L,Mt),2&e&&$t!==($t=t[1].lat+"")&&N(I,$t),2&e&&qt!==(qt=t[1].lon+"")&&N(A,qt),2&e&&Pt!==(Pt=(t[1].collision_date||t[1].dtp_date||"")+"")&&N(X,Pt),2&e&&St!==(St=(t[1].collision_context||t[1].dtp_date||"")+"")&&N(ot,St),t[1].collisionTypes&&t[1].collisionTypes.length?Ht?Ht.p(t,e):(Ht=te(t),Ht.c(),Ht.m(dt,null)):Ht&&(Ht.d(1),Ht=null),t[1].uchs&&t[1].uchs.length?Nt?Nt.p(t,e):(Nt=ne(t),Nt.c(),Nt.m(mt,null)):Nt&&(Nt.d(1),Nt=null),18&e){let n;for(Bt=t[1].event_list||[],n=0;n<Bt.length;n+=1){const s=Jt(t,Bt,n);Ut[n]?Ut[n].p(s,e):(Ut[n]=le(s),Ut[n].c(),Ut[n].m(jt,null))}for(;n<Ut.length;n+=1)Ut[n].d(1);Ut.length=Bt.length}4&e&&(zt.disabled=t[2])},i:y,o:y,d(n){n&&F(e),Ht&&Ht.d(),Nt&&Nt.d(),t[7](null),T(Ut,n),x(Ft)}}}function re(t,e,n){let s,l,{showModal:o=!1}=e,{prp:r}=e,i=r.files&&r.files.length?"":"disabled";V(()=>{n(2,i=r.files&&r.files.length?"":"disabled"),o&&(s=new Lt({target:document.body,props:{data:r.files}}),s.$on("close",t=>{s.$destroy(),n(0,o=!1)}))});return t.$set=t=>{"showModal"in t&&n(0,o=t.showModal),"prp"in t&&n(1,r=t.prp)},[o,r,i,l,t=>{let e=t.target.value;n(3,l.innerHTML="",l),fetch("https://dtp.mvs.group/scripts/events_dev/get_event_id_"+e+".txt",{}).then(t=>t.json()).then(t=>{new Ot({target:l,props:{prp:t[0]}})})},t=>{navigator.clipboard.writeText(t.target.parentNode.textContent).catch(t=>{console.log("Something went wrong",t)})},s,function(t){J[t?"unshift":"push"](()=>{n(3,l=t)})},()=>n(0,o=!0)]}Kt._needHeat={radius:19,blur:11.26,minOpacity:.34},Kt.checkZoom=t=>{Object.keys(Kt._layers).length?t<12&&Kt.setFilter(Wt):t>11&&Kt.setFilter(Wt)},Kt.setFilter=t=>{if(!Kt._map)return;Kt.clearLayers(),Wt=t||[];let e=[],n=[];Kt._group&&Kt._map&&(Kt._group.getLayers().forEach(t=>{let s=t.options.props,l=0;Wt.forEach(t=>{"collision_type"===t.type?(""===t.zn[0]||t.zn.filter(t=>t===s.collision_type).length)&&l++:"evnt"===t.type?s.event?t.zn.ev1&&l++:t.zn.ev0&&l++:"dps"===t.type?s.dps?t.zn.Dps1&&l++:t.zn.Dps0&&l++:"id_dtp"===t.type?s.id==t.zn&&l++:"date"===t.type&&s.date>=t.zn[0]&&s.date<t.zn[1]&&l++}),l===Wt.length&&(e.push(t),n.push(t._latlng))}),Kt._needHeat?(Kt._map.addLayer(Kt._heat),Kt._heat.setLatLngs(n),Kt._heat.setOptions(Kt._needHeat),Kt._map._zoom>11&&Kt.addLayer(Yt.layerGroup(e))):(Kt.addLayer(Yt.layerGroup(e)),Kt._map.removeLayer(Kt._heat)))},Kt.on("remove",t=>{Kt._map.removeLayer(Kt._heat),Kt.clearLayers()}).on("add",t=>{Kt._heat=Yt.heatLayer([],{gradient:{.1:"blue",.4:"lime",1:"red"}}),Wt=[],fetch("https://dtp.mvs.group/scripts/index_dev.php?request=get_stat_gipdd",{}).then(t=>t.json()).then(t=>{let e={collision_type:{},iconType:{},event:{}},n=[],s=t.map(t=>{let s=t.iconType||0,l=!1,o="#2F4F4F";s&&(l=s%2==0,s>=1&&s<=6?o="#8B4513":7===s||8===s?o="#228B22":s>=9&&s<=14?o="#8B4513":15===s||16===s?o="#7B68EE":17!==s&&18!==s||(o="#2F4F4F")),220457693==t.id&&(t.dps=1),t.lat&&t.lon||(console.log("_______",t),t.lat=t.lon=0);let r=e.event[t.event];r?r++:r=1,e.event[t.event]=r;let i=e.collision_type[t.collision_type];i?i++:i=1,e.collision_type[t.collision_type]=i,e.iconType[t.collision_type]=s;let a=Yt.latLng(t.lat,t.lon,l?1:.5);return n.push(a),new g(a,{props:t,radius:6,stroke:l,fillColor:o}).bindPopup(Vt).on("popupopen",t=>{var e;e=t.target.options.props.id,fetch("https://dtp.mvs.group/scripts/dtp_dev/get_stat_gipdd_"+e+".txt",{}).then(t=>t.json()).then(t=>{let e=Yt.DomUtil.create("div");const n=new Zt({target:e,props:{prp:t}});Vt._svObj=n,Vt.setContent(e)})}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})});Kt.addLayer(Kt._heat),Kt._heat.setLatLngs(n),Kt._heat.setOptions(Kt._needHeat),Kt._opt=e,Kt._group=Yt.layerGroup(s),Wt?Kt.setFilter(Wt):Kt._map._zoom>11&&Kt.addLayer(Kt._group),Kt._refreshFilters()})});class ie extends gt{constructor(t){super(),mt(this,t,re,oe,C,{showModal:0,prp:1})}}const ae=window.L,pe=ae.popup();let ce;const de=ae.featureGroup([]);function ue(t,e,n){const s=t.slice();return s[6]=e[n],s[8]=n,s}function _e(t){let e,n,s,l,o,r="gibdd"===t[6].type?"ГИБДД":"СКПДИ";return{c(){e=O("button"),n=E(r),S(e,"class",s=w(t[2]===t[8]?"current":"")+" svelte-txaali"),e.value=l=t[8]},m(s,l,r){D(s,e,l),z(e,n),r&&o(),o=q(e,"click",t[4])},p(t,l){1&l&&r!==(r="gibdd"===t[6].type?"ГИБДД":"СКПДИ")&&N(n,r),4&l&&s!==(s=w(t[2]===t[8]?"current":"")+" svelte-txaali")&&S(e,"class",s)},d(t){t&&F(e),o()}}}function he(t){let e;const n=new ie({props:{prp:t[3]}});return{c(){_t(n.$$.fragment)},m(t,s){ht(n,t,s),e=!0},p(t,e){const s={};8&e&&(s.prp=t[3]),n.$set(s)},i(t){e||(dt(n.$$.fragment,t),e=!0)},o(t){ut(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function ve(t){let e;const n=new Zt({props:{prp:t[3]}});return{c(){_t(n.$$.fragment)},m(t,s){ht(n,t,s),e=!0},p(t,e){const s={};8&e&&(s.prp=t[3]),n.$set(s)},i(t){e||(dt(n.$$.fragment,t),e=!0)},o(t){ut(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function fe(t){let e,n,s,l,o,r,i,a,p,c,d=t[0]._cur,u=[];for(let e=0;e<d.length;e+=1)u[e]=_e(ue(t,d,e));const _=[ve,he],h=[];function v(t,e){return"gibdd"===t[0]._cur[t[2]].type?0:1}return i=v(t),a=h[i]=_[i](t),{c(){e=O("div"),n=O("div"),s=O("a"),s.textContent="×",l=M(),o=O("div");for(let t=0;t<u.length;t+=1)u[t].c();r=M(),a.c(),S(s,"class","leaflet-popup-close-button"),S(s,"href","#close"),S(n,"class","close"),S(o,"class","pLine"),S(e,"class","mvsPopup")},m(a,d,_){D(a,e,d),z(e,n),z(n,s),z(e,l),z(e,o);for(let t=0;t<u.length;t+=1)u[t].m(o,null);var v;z(e,r),h[i].m(e,null),p=!0,_&&c(),c=q(s,"click",(v=function(){j(t[1])&&t[1].apply(this,arguments)},function(t){return t.preventDefault(),v.call(this,t)}))},p(n,[s]){if(t=n,21&s){let e;for(d=t[0]._cur,e=0;e<d.length;e+=1){const n=ue(t,d,e);u[e]?u[e].p(n,s):(u[e]=_e(n),u[e].c(),u[e].m(o,null))}for(;e<u.length;e+=1)u[e].d(1);u.length=d.length}let l=i;i=v(t),i===l?h[i].p(t,s):(pt(),ut(h[l],1,1,()=>{h[l]=null}),ct(),a=h[i],a||(a=h[i]=_[i](t),a.c()),dt(a,1),a.m(e,null))},i(t){p||(dt(a),p=!0)},o(t){ut(a),p=!1},d(t){t&&F(e),T(u,t),h[i].d(),c()}}}function me(t,e,n){let{prp:s}=e,{closeMe:l=(()=>{})}=e,o=0,r={};const i=t=>{let e=s._cur[t],l=e.type,o="https://dtp.mvs.group/scripts/index_dev.php?request=get_dtp_id&id="+e.id+"&type="+l;fetch(o,{}).then(t=>t.json()).then(t=>{n(3,r=t)})};return i(o),t.$set=t=>{"prp"in t&&n(0,s=t.prp),"closeMe"in t&&n(1,l=t.closeMe)},[s,l,o,r,t=>{let e=t.target,s=Number(e.value);o!==s&&(n(2,o=s),i(o))}]}de._needHeat={radius:19,blur:11.26,minOpacity:.34},de.checkZoom=t=>{Object.keys(de._layers).length?t<12&&de.setFilter(ce):t>11&&de.setFilter(ce)},de.setFilter=t=>{if(!de._map)return;de.clearLayers(),ce=t||[];let e=[],n=[];de._group&&de._map&&(de._group.getLayers().forEach(t=>{let s=t.options.props,l=0;ce.forEach(t=>{"collision_type"===t.type?(""===t.zn[0]||t.zn.filter(t=>t===s.collision_type).length)&&l++:"evnt"===t.type?s.event?t.zn.ev1&&l++:t.zn.ev0&&l++:"id_dtp"===t.type?s.id==t.zn&&l++:"date"===t.type&&s.date>=t.zn[0]&&s.date<t.zn[1]&&l++}),l===ce.length&&(e.push(t),n.push(t._latlng))}),de._needHeat?(de._map.addLayer(de._heat),de._heat.setLatLngs(n),de._heat.setOptions(de._needHeat),de._map._zoom>11&&de.addLayer(ae.layerGroup(e))):(de.addLayer(ae.layerGroup(e)),de._map.removeLayer(de._heat)))},de.on("remove",()=>{de._map.removeLayer(de._heat),de.clearLayers()}).on("add",t=>{de._heat=ae.heatLayer([]),ce=[],fetch("https://dtp.mvs.group/scripts/index_dev.php?request=get_skpdi",{}).then(t=>t.json()).then(t=>{let e={collision_type:{},iconType:{},event:{}},n=[],s=t.map(t=>{let s=t.iconType||0,l=!1,o="#2F4F4F";s&&(l=s%2==0,s>=1&&s<=6?o="#8B4513":7===s||8===s?o="#228B22":s>=9&&s<=14?o="#8B4513":15===s||16===s?o="#7B68EE":17!==s&&18!==s||(o="#2F4F4F")),t.lat&&t.lon||(console.log("_______",t),t.lat=t.lon=0);let r=e.event[t.event];r?r++:r=1,e.event[t.event]=r;let i=e.collision_type[t.collision_type];i?i++:i=1,e.collision_type[t.collision_type]=i,e.iconType[t.collision_type]=s;let a=ae.latLng(t.lat,t.lon,l?1:.5);return n.push(a),new g(a,{props:t,radius:6,box:!0,stroke:l,fillColor:o}).bindPopup(pe).on("popupopen",t=>{var e;e=t.target.options.props.id,fetch("https://dtp.mvs.group/scripts/index_dev.php?request=get_dtp_id&id="+e+"&type=skpdi",{}).then(t=>t.json()).then(t=>{let e=ae.DomUtil.create("div");const n=new ie({target:e,props:{prp:t}});pe._svObj=n,pe.setContent(e)})}).on("popupclose",t=>{console.log("popupclose",t),t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})});de.addLayer(de._heat),de._heat.setLatLngs(n),de._heat.setOptions(de._needHeat),de._opt=e,de._group=ae.layerGroup(s),ce?de.setFilter(ce):de.addLayer(de._group),de.checkZoom(de._map._zoom),de._refreshFilters()})});class ge extends gt{constructor(t){super(),mt(this,t,me,fe,C,{prp:0,closeMe:1})}}const ye=window.L,be=ye.popup();let ke;const xe=ye.featureGroup([]);function je(t,e,n){const s=t.slice();return s[190]=e[n],s}function Ce(t,e,n){const s=t.slice();return s[190]=e[n],s}function Le(t,e,n){const s=t.slice();return s[190]=e[n],s}function we(t,e,n){const s=t.slice();return s[190]=e[n],s}function ze(t,e,n){const s=t.slice();return s[190]=e[n],s}function De(t,e,n){const s=t.slice();return s[190]=e[n],s}function Fe(t,e,n){const s=t.slice();return s[205]=e[n],s}function Te(t,e,n){const s=t.slice();return s[190]=e[n],s}function Oe(t,e,n){const s=t.slice();return s[190]=e[n],s}function Ee(t,e,n){const s=t.slice();return s[190]=e[n],s}function Me(t,e,n){const s=t.slice();return s[205]=e[n],s}function $e(t,e,n){const s=t.slice();return s[190]=e[n],s}function qe(t,e,n){const s=t.slice();return s[190]=e[n],s}function Pe(t,e,n){const s=t.slice();return s[190]=e[n],s}function Se(t,e,n){const s=t.slice();return s[205]=e[n],s}function He(t,e,n){const s=t.slice();return s[190]=e[n],s}function Ne(t,e,n){const s=t.slice();return s[190]=e[n],s}function Be(t,e,n){const s=t.slice();return s[190]=e[n],s}function Ue(t,e,n){const s=t.slice();return s[190]=e[n],s}function Ie(t,e,n){const s=t.slice();return s[190]=e[n],s}function Ge(t,e,n){const s=t.slice();return s[190]=e[n],s}function Ae(t,e,n){const s=t.slice();return s[190]=e[n],s}function Re(t,e,n){const s=t.slice();return s[190]=e[n],s}function Ze(t,e,n){const s=t.slice();return s[190]=e[n],s}function Ye(t,e,n){const s=t.slice();return s[190]=e[n],s}function Ve(t,e,n){const s=t.slice();return s[190]=e[n],s}function We(t,e,n){const s=t.slice();return s[190]=e[n],s}function Ke(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f,m,g,y,b,k,j,C,L,w,$,P,H,N,B,G,A,R,Z,Y,V,W,K,J,X,Q,tt,et,st,lt=Object.keys(t[0]._opt.years).sort(),ot=[];for(let e=0;e<lt.length;e+=1)ot[e]=Je(We(t,lt,e));let rt=t[86],it=[];for(let e=0;e<rt.length;e+=1)it[e]=Xe(Ve(t,rt,e));return{c(){e=O("div"),e.innerHTML="Фильтры - <b>Предочаги по пикетажу</b>",n=M(),s=O("div"),l=O("div"),o=E("ID Очага: "),r=O("input"),i=M(),a=O("div"),p=E("ID ДТП: "),c=O("input"),d=M(),u=O("div"),_=O("fieldset"),h=O("legend"),h.textContent="Фильтрация по периодам:",v=M(),f=O("div"),m=O("input"),b=O("label"),b.textContent="Фильтрация по годам",k=M(),j=O("div");for(let t=0;t<ot.length;t+=1)ot[t].c();C=M(),L=O("div"),w=O("input"),P=O("label"),P.textContent="одного типа",H=M(),N=O("input"),G=O("label"),G.textContent="разного типа",A=M(),R=O("div"),Z=O("select"),Y=O("option"),Y.textContent=`\n\t\t\t\t\t\tВсе дороги (${t[86].reduce(t[140],0)})\n\t\t\t\t\t`;for(let t=0;t<it.length;t+=1)it[t].c();V=M(),W=O("div"),K=O("select"),J=O("option"),J.textContent=`(${t[85].stricken[0]||0}) Очаги все`,X=O("option"),X.textContent=`(${t[85].stricken[1]||0}) Только с погибшими`,Q=O("option"),Q.textContent=`(${t[85].stricken[2]||0}) Только с пострадавшими`,tt=O("option"),tt.textContent=`(${t[85].stricken[3]||0}) С пострадавшими или погибшими`,et=O("option"),et.textContent=`(${t[85].stricken[4]||0}) С пострадавшими и погибшими`,S(e,"class","pLine svelte-1jsovbn"),S(r,"type","text"),r.value=t[21],S(r,"class","svelte-1jsovbn"),S(l,"class","pLine svelte-1jsovbn"),S(c,"type","text"),c.value=t[16],S(c,"class","svelte-1jsovbn"),S(a,"class","pLine svelte-1jsovbn"),S(m,"type","radio"),m.__value=g=1,m.value=m.__value,m.checked=y=1===t[50],S(m,"id","hearths_period_type_Stat1"),S(m,"name","hearths_period_type_Stat"),S(m,"class","svelte-1jsovbn"),t[139][2].push(m),S(b,"for","hearths_period_type_Stat1"),S(b,"class","svelte-1jsovbn"),S(j,"class","pLine margin svelte-1jsovbn"),S(f,"class","pLine type svelte-1jsovbn"),S(u,"class","pLine nowrap svelte-1jsovbn"),S(w,"type","checkbox"),S(w,"id","ht_3"),w.checked=$=t[20].hearth3,S(w,"name","hearth3"),S(w,"class","svelte-1jsovbn"),S(P,"for","ht_3"),S(P,"class","svelte-1jsovbn"),S(N,"type","checkbox"),S(N,"id","ht_5"),N.checked=B=t[20].hearth5,S(N,"name","hearth5"),S(N,"class","svelte-1jsovbn"),S(G,"for","ht_5"),S(G,"class","svelte-1jsovbn"),S(L,"class","pLine svelte-1jsovbn"),Y.__value="",Y.value=Y.__value,S(Y,"class","svelte-1jsovbn"),S(Z,"class","multiple_icon_typeTmp svelte-1jsovbn"),Z.multiple=!0,void 0===t[19]&&nt(()=>t[141].call(Z)),S(R,"class","pLine svelte-1jsovbn"),J.__value="",J.value=J.__value,X.__value="1",X.value=X.__value,Q.__value="2",Q.value=Q.__value,tt.__value="3",tt.value=tt.__value,et.__value="4",et.value=et.__value,S(K,"name","stricken"),S(K,"class","svelte-1jsovbn"),void 0===t[36]&&nt(()=>t[142].call(K)),S(W,"class","pLine svelte-1jsovbn"),S(s,"class","filtersCont svelte-1jsovbn")},m(g,y,F){D(g,e,y),D(g,n,y),D(g,s,y),z(s,l),z(l,o),z(l,r),z(s,i),z(s,a),z(a,p),z(a,c),z(s,d),z(s,u),z(u,_),z(_,h),z(_,v),z(_,f),z(f,m),m.checked=m.__value===t[50],z(f,b),z(f,k),z(f,j);for(let t=0;t<ot.length;t+=1)ot[t].m(j,null);z(s,C),z(s,L),z(L,w),z(L,P),z(L,H),z(L,N),z(L,G),z(s,A),z(s,R),z(R,Z),z(Z,Y);for(let t=0;t<it.length;t+=1)it[t].m(Z,null);I(Z,t[19]),z(s,V),z(s,W),z(W,K),z(K,J),z(K,X),z(K,Q),z(K,tt),z(K,et),U(K,t[36]),F&&x(st),st=[q(r,"input",t[97]),q(c,"input",t[96]),q(m,"change",t[94]),q(m,"change",t[138]),q(w,"change",t[98]),q(N,"change",t[98]),q(Z,"change",t[141]),q(Z,"change",t[94]),q(K,"change",t[142]),q(K,"change",t[94])]},p(t,e){if(2097152&e[0]&&r.value!==t[21]&&(r.value=t[21]),65536&e[0]&&c.value!==t[16]&&(c.value=t[16]),524288&e[1]&&y!==(y=1===t[50])&&(m.checked=y),524288&e[1]&&(m.checked=m.__value===t[50]),1&e[0]|524352&e[1]|2&e[3]){let n;for(lt=Object.keys(t[0]._opt.years).sort(),n=0;n<lt.length;n+=1){const s=We(t,lt,n);ot[n]?ot[n].p(s,e):(ot[n]=Je(s),ot[n].c(),ot[n].m(j,null))}for(;n<ot.length;n+=1)ot[n].d(1);ot.length=lt.length}if(1048576&e[0]&&$!==($=t[20].hearth3)&&(w.checked=$),1048576&e[0]&&B!==(B=t[20].hearth5)&&(N.checked=B),25165824&e[2]){let n;for(rt=t[86],n=0;n<rt.length;n+=1){const s=Ve(t,rt,n);it[n]?it[n].p(s,e):(it[n]=Xe(s),it[n].c(),it[n].m(Z,null))}for(;n<it.length;n+=1)it[n].d(1);it.length=rt.length}524288&e[0]&&I(Z,t[19]),32&e[1]&&U(K,t[36])},d(l){l&&F(e),l&&F(n),l&&F(s),t[139][2].splice(t[139][2].indexOf(m),1),T(ot,l),T(it,l),x(st)}}}function Je(t){let e,n,s,l,o,r,i,a=t[190]+"";return{c(){e=O("input"),o=O("label"),r=E(a),S(e,"type","checkbox"),S(e,"id","hearths_year_Picket4"),e.checked=n=t[37][t[190]],e.disabled=s=2===t[50],S(e,"name",l=t[190]),S(e,"class","svelte-1jsovbn"),S(o,"for","hearths_year_Picket4"),S(o,"class","svelte-1jsovbn")},m(n,s,l){D(n,e,s),D(n,o,s),z(o,r),l&&i(),i=q(e,"change",t[94])},p(t,o){1&o[0]|64&o[1]&&n!==(n=t[37][t[190]])&&(e.checked=n),524288&o[1]&&s!==(s=2===t[50])&&(e.disabled=s),1&o[0]&&l!==(l=t[190])&&S(e,"name",l),1&o[0]&&a!==(a=t[190]+"")&&N(r,a)},d(t){t&&F(e),t&&F(o),i()}}}function Xe(t){let e,n,s,l,o,r,i,a,p=t[85].road[t[190]]+"",c=t[190]+"";return{c(){e=O("option"),n=E("("),s=E(p),l=E(") - "),o=E(c),r=M(),e.__value=i=t[190],e.value=e.__value,S(e,"class",a="road_"+t[190]+" svelte-1jsovbn")},m(t,i){D(t,e,i),z(e,n),z(e,s),z(e,l),z(e,o),z(e,r)},p:y,d(t){t&&F(e)}}}function Qe(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f,m,g,y,b,k,j,C,L,w,$,P,H,N,B,U,G,A,R,Z,Y,V=Object.keys(t[1]._opt.years).sort(),W=[];for(let e=0;e<V.length;e+=1)W[e]=tn(Ye(t,V,e));let K=t[82],J=[];for(let e=0;e<K.length;e+=1)J[e]=en(Ze(t,K,e));return{c(){e=O("div"),e.innerHTML="Фильтры - <b>Очаги с привязкой к городам</b>",n=M(),s=O("div"),l=O("div"),o=E("ID Очага: "),r=O("input"),i=M(),a=O("div"),p=E("ID ДТП: "),c=O("input"),d=M(),u=O("div"),_=E("ID города: "),h=O("input"),f=M(),m=O("div"),g=O("fieldset"),y=O("legend"),y.textContent="Фильтрация по годам:",b=M(),k=O("div"),j=O("div");for(let t=0;t<W.length;t+=1)W[t].c();C=M(),L=O("div"),w=O("input"),P=O("label"),P.textContent="одного типа",H=M(),N=O("input"),U=O("label"),U.textContent="разного типа",G=M(),A=O("div"),R=O("select"),Z=O("option"),Z.textContent=`\n\t\t\t\t\t\tВсе дороги (${t[82].reduce(t[143],0)})\n\t\t\t\t\t`;for(let t=0;t<J.length;t+=1)J[t].c();S(e,"class","pLine svelte-1jsovbn"),S(r,"type","text"),r.value=t[21],S(r,"class","svelte-1jsovbn"),S(l,"class","pLine svelte-1jsovbn"),S(c,"type","text"),c.value=t[16],S(c,"class","svelte-1jsovbn"),S(a,"class","pLine svelte-1jsovbn"),S(h,"type","text"),h.value=v=t[34]||"",S(h,"class","svelte-1jsovbn"),S(u,"class","pLine svelte-1jsovbn"),S(j,"class","pLine margin svelte-1jsovbn"),S(k,"class","pLine type svelte-1jsovbn"),S(m,"class","pLine nowrap svelte-1jsovbn"),S(w,"type","checkbox"),S(w,"id","ht_3"),w.checked=$=t[20].hearth3,S(w,"name","hearth3"),S(w,"class","svelte-1jsovbn"),S(P,"for","ht_3"),S(P,"class","svelte-1jsovbn"),S(N,"type","checkbox"),S(N,"id","ht_5"),N.checked=B=t[20].hearth5,S(N,"name","hearth5"),S(N,"class","svelte-1jsovbn"),S(U,"for","ht_5"),S(U,"class","svelte-1jsovbn"),S(L,"class","pLine svelte-1jsovbn"),Z.__value="",Z.value=Z.__value,S(Z,"class","svelte-1jsovbn"),S(R,"class","multiple_icon_typeTmp svelte-1jsovbn"),R.multiple=!0,void 0===t[19]&&nt(()=>t[144].call(R)),S(A,"class","pLine svelte-1jsovbn"),S(s,"class","filtersCont svelte-1jsovbn")},m(v,F,T){D(v,e,F),D(v,n,F),D(v,s,F),z(s,l),z(l,o),z(l,r),z(s,i),z(s,a),z(a,p),z(a,c),z(s,d),z(s,u),z(u,_),z(u,h),z(s,f),z(s,m),z(m,g),z(g,y),z(g,b),z(g,k),z(k,j);for(let t=0;t<W.length;t+=1)W[t].m(j,null);z(s,C),z(s,L),z(L,w),z(L,P),z(L,H),z(L,N),z(L,U),z(s,G),z(s,A),z(A,R),z(R,Z);for(let t=0;t<J.length;t+=1)J[t].m(R,null);I(R,t[19]),T&&x(Y),Y=[q(r,"input",t[97]),q(c,"input",t[96]),q(h,"input",t[95]),q(w,"change",t[98]),q(N,"change",t[98]),q(R,"change",t[144]),q(R,"change",t[92])]},p(t,e){if(2097152&e[0]&&r.value!==t[21]&&(r.value=t[21]),65536&e[0]&&c.value!==t[16]&&(c.value=t[16]),8&e[1]&&v!==(v=t[34]||"")&&h.value!==v&&(h.value=v),2&e[0]|4&e[1]|1073741824&e[2]){let n;for(V=Object.keys(t[1]._opt.years).sort(),n=0;n<V.length;n+=1){const s=Ye(t,V,n);W[n]?W[n].p(s,e):(W[n]=tn(s),W[n].c(),W[n].m(j,null))}for(;n<W.length;n+=1)W[n].d(1);W.length=V.length}if(1048576&e[0]&&$!==($=t[20].hearth3)&&(w.checked=$),1048576&e[0]&&B!==(B=t[20].hearth5)&&(N.checked=B),1572864&e[2]){let n;for(K=t[82],n=0;n<K.length;n+=1){const s=Ze(t,K,n);J[n]?J[n].p(s,e):(J[n]=en(s),J[n].c(),J[n].m(R,null))}for(;n<J.length;n+=1)J[n].d(1);J.length=K.length}524288&e[0]&&I(R,t[19])},d(t){t&&F(e),t&&F(n),t&&F(s),T(W,t),T(J,t),x(Y)}}}function tn(t){let e,n,s,l,o,r,i=t[190]+"";return{c(){e=O("input"),l=O("label"),o=E(i),S(e,"type","checkbox"),S(e,"id","hearths_year_Settlements"),e.checked=n=t[33][t[190]],S(e,"name",s=t[190]),S(e,"class","svelte-1jsovbn"),S(l,"for","hearths_year_Settlements"),S(l,"class","svelte-1jsovbn")},m(n,s,i){D(n,e,s),D(n,l,s),z(l,o),i&&r(),r=q(e,"change",t[92])},p(t,l){2&l[0]|4&l[1]&&n!==(n=t[33][t[190]])&&(e.checked=n),2&l[0]&&s!==(s=t[190])&&S(e,"name",s),2&l[0]&&i!==(i=t[190]+"")&&N(o,i)},d(t){t&&F(e),t&&F(l),r()}}}function en(t){let e,n,s,l,o,r,i,a,p=t[81].road[t[190]]+"",c=t[190]+"";return{c(){e=O("option"),n=E("("),s=E(p),l=E(") - "),o=E(c),r=M(),e.__value=i=t[190],e.value=e.__value,S(e,"class",a="road_"+t[190]+" svelte-1jsovbn")},m(t,i){D(t,e,i),z(e,n),z(e,s),z(e,l),z(e,o),z(e,r)},p:y,d(t){t&&F(e)}}}function nn(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f,m,g,y,b,k,j,C,L,w,$,P,H,N,B,U,G=Object.keys(t[2]._opt.years).sort(),A=[];for(let e=0;e<G.length;e+=1)A[e]=sn(Re(t,G,e));let R=t[84],Z=[];for(let e=0;e<R.length;e+=1)Z[e]=ln(Ae(t,R,e));return{c(){e=O("div"),e.innerHTML="Фильтры - <b>ДТП Очаги(Picket)</b>",n=M(),s=O("div"),l=O("div"),o=E("ID Очага: "),r=O("input"),i=M(),a=O("div"),p=E("ID ДТП: "),c=O("input"),d=M(),u=O("div"),_=O("fieldset"),h=O("legend"),h.textContent="Фильтрация по годам:",v=M(),f=O("div"),m=O("div");for(let t=0;t<A.length;t+=1)A[t].c();g=M(),y=O("div"),b=O("input"),j=O("label"),j.textContent="одного типа",C=M(),L=O("input"),$=O("label"),$.textContent="разного типа",P=M(),H=O("div"),N=O("select"),B=O("option"),B.textContent=`\n\t\t\t\t\t\tВсе дороги (${t[84].reduce(t[145],0)})\n\t\t\t\t\t`;for(let t=0;t<Z.length;t+=1)Z[t].c();S(e,"class","pLine svelte-1jsovbn"),S(r,"type","text"),r.value=t[21],S(r,"class","svelte-1jsovbn"),S(l,"class","pLine svelte-1jsovbn"),S(c,"type","text"),c.value=t[16],S(c,"class","svelte-1jsovbn"),S(a,"class","pLine svelte-1jsovbn"),S(m,"class","pLine margin svelte-1jsovbn"),S(f,"class","pLine type svelte-1jsovbn"),S(u,"class","pLine nowrap svelte-1jsovbn"),S(b,"type","checkbox"),S(b,"id","ht_3"),b.checked=k=t[20].hearth3,S(b,"name","hearth3"),S(b,"class","svelte-1jsovbn"),S(j,"for","ht_3"),S(j,"class","svelte-1jsovbn"),S(L,"type","checkbox"),S(L,"id","ht_5"),L.checked=w=t[20].hearth5,S(L,"name","hearth5"),S(L,"class","svelte-1jsovbn"),S($,"for","ht_5"),S($,"class","svelte-1jsovbn"),S(y,"class","pLine svelte-1jsovbn"),B.__value="",B.value=B.__value,S(B,"class","svelte-1jsovbn"),S(N,"class","multiple_icon_typeTmp svelte-1jsovbn"),N.multiple=!0,void 0===t[19]&&nt(()=>t[146].call(N)),S(H,"class","pLine svelte-1jsovbn"),S(s,"class","filtersCont svelte-1jsovbn")},m(k,w,F){D(k,e,w),D(k,n,w),D(k,s,w),z(s,l),z(l,o),z(l,r),z(s,i),z(s,a),z(a,p),z(a,c),z(s,d),z(s,u),z(u,_),z(_,h),z(_,v),z(_,f),z(f,m);for(let t=0;t<A.length;t+=1)A[t].m(m,null);z(s,g),z(s,y),z(y,b),z(y,j),z(y,C),z(y,L),z(y,$),z(s,P),z(s,H),z(H,N),z(N,B);for(let t=0;t<Z.length;t+=1)Z[t].m(N,null);I(N,t[19]),F&&x(U),U=[q(r,"input",t[97]),q(c,"input",t[96]),q(b,"change",t[98]),q(L,"change",t[98]),q(N,"change",t[146]),q(N,"change",t[93])]},p(t,e){if(2097152&e[0]&&r.value!==t[21]&&(r.value=t[21]),65536&e[0]&&c.value!==t[16]&&(c.value=t[16]),4&e[0]|16&e[1]|1&e[3]){let n;for(G=Object.keys(t[2]._opt.years).sort(),n=0;n<G.length;n+=1){const s=Re(t,G,n);A[n]?A[n].p(s,e):(A[n]=sn(s),A[n].c(),A[n].m(m,null))}for(;n<A.length;n+=1)A[n].d(1);A.length=G.length}if(1048576&e[0]&&k!==(k=t[20].hearth3)&&(b.checked=k),1048576&e[0]&&w!==(w=t[20].hearth5)&&(L.checked=w),6291456&e[2]){let n;for(R=t[84],n=0;n<R.length;n+=1){const s=Ae(t,R,n);Z[n]?Z[n].p(s,e):(Z[n]=ln(s),Z[n].c(),Z[n].m(N,null))}for(;n<Z.length;n+=1)Z[n].d(1);Z.length=R.length}524288&e[0]&&I(N,t[19])},d(t){t&&F(e),t&&F(n),t&&F(s),T(A,t),T(Z,t),x(U)}}}function sn(t){let e,n,s,l,o,r,i=t[190]+"";return{c(){e=O("input"),l=O("label"),o=E(i),S(e,"type","checkbox"),S(e,"id","hearths_year_Picket"),e.checked=n=t[35][t[190]],S(e,"name",s=t[190]),S(e,"class","svelte-1jsovbn"),S(l,"for","hearths_year_Picket"),S(l,"class","svelte-1jsovbn")},m(n,s,i){D(n,e,s),D(n,l,s),z(l,o),i&&r(),r=q(e,"change",t[93])},p(t,l){4&l[0]|16&l[1]&&n!==(n=t[35][t[190]])&&(e.checked=n),4&l[0]&&s!==(s=t[190])&&S(e,"name",s),4&l[0]&&i!==(i=t[190]+"")&&N(o,i)},d(t){t&&F(e),t&&F(l),r()}}}function ln(t){let e,n,s,l,o,r,i,a,p=t[83].road[t[190]]+"",c=t[190]+"";return{c(){e=O("option"),n=E("("),s=E(p),l=E(") - "),o=E(c),r=M(),e.__value=i=t[190],e.value=e.__value,S(e,"class",a="road_"+t[190]+" svelte-1jsovbn")},m(t,i){D(t,e,i),z(e,n),z(e,s),z(e,l),z(e,o),z(e,r)},p:y,d(t){t&&F(e)}}}function on(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f,m,g,y,b,k,j,C,L,w,$,P,H,N,B,G,A=Object.keys(t[3]._opt.years).sort(),R=[];for(let e=0;e<A.length;e+=1)R[e]=rn(Ge(t,A,e));let Z=t[80],Y=[];for(let e=0;e<Z.length;e+=1)Y[e]=an(Ie(t,Z,e));return{c(){e=O("div"),e.innerHTML="Фильтры - <b>ДТП Очаги (5)</b>",n=M(),s=O("div"),l=O("div"),o=E("ID ДТП: "),r=O("input"),i=M(),a=O("div"),p=O("fieldset"),c=O("legend"),c.textContent="Фильтрация по периодам:",d=M(),u=O("div"),_=O("input"),f=O("label"),f.textContent="Фильтрация по годам",m=M(),g=O("div");for(let t=0;t<R.length;t+=1)R[t].c();y=M(),b=O("div"),k=O("select"),j=O("option"),j.textContent=`\n\t\t\t\t\t\tВсе типы (${t[80].reduce(t[148],0)})\n\t\t\t\t\t`;for(let t=0;t<Y.length;t+=1)Y[t].c();C=M(),L=O("div"),w=O("select"),$=O("option"),$.textContent=`(${t[79].stricken[0]||0}) Очаги все`,P=O("option"),P.textContent=`(${t[79].stricken[1]||0}) Только с погибшими`,H=O("option"),H.textContent=`(${t[79].stricken[2]||0}) Только с пострадавшими`,N=O("option"),N.textContent=`(${t[79].stricken[3]||0}) С пострадавшими или погибшими`,B=O("option"),B.textContent=`(${t[79].stricken[4]||0}) С пострадавшими и погибшими`,S(e,"class","pLine svelte-1jsovbn"),S(r,"type","text"),r.value=t[16],S(r,"class","svelte-1jsovbn"),S(l,"class","pLine svelte-1jsovbn"),S(_,"type","radio"),_.__value=h=1,_.value=_.__value,_.checked=v=1===t[42],S(_,"id","hearths_period_type_51"),S(_,"name","hearths_period_type_5"),S(_,"class","svelte-1jsovbn"),t[139][4].push(_),S(f,"for","hearths_period_type_51"),S(f,"class","svelte-1jsovbn"),S(g,"class","pLine margin svelte-1jsovbn"),S(u,"class","pLine type svelte-1jsovbn"),S(a,"class","pLine nowrap svelte-1jsovbn"),j.__value="",j.value=j.__value,S(j,"class","svelte-1jsovbn"),S(k,"class","multiple_icon_typeTmp svelte-1jsovbn"),k.multiple=!0,void 0===t[41]&&nt(()=>t[149].call(k)),S(b,"class","pLine svelte-1jsovbn"),$.__value="",$.value=$.__value,P.__value="1",P.value=P.__value,H.__value="2",H.value=H.__value,N.__value="3",N.value=N.__value,B.__value="4",B.value=B.__value,S(w,"class","svelte-1jsovbn"),void 0===t[40]&&nt(()=>t[150].call(w)),S(L,"class","pLine svelte-1jsovbn"),S(s,"class","filtersCont svelte-1jsovbn")},m(h,v,F){D(h,e,v),D(h,n,v),D(h,s,v),z(s,l),z(l,o),z(l,r),z(s,i),z(s,a),z(a,p),z(p,c),z(p,d),z(p,u),z(u,_),_.checked=_.__value===t[42],z(u,f),z(u,m),z(u,g);for(let t=0;t<R.length;t+=1)R[t].m(g,null);z(s,y),z(s,b),z(b,k),z(k,j);for(let t=0;t<Y.length;t+=1)Y[t].m(k,null);I(k,t[41]),z(s,C),z(s,L),z(L,w),z(w,$),z(w,P),z(w,H),z(w,N),z(w,B),U(w,t[40]),F&&x(G),G=[q(r,"input",t[96]),q(_,"change",t[110]),q(_,"change",t[147]),q(k,"change",t[149]),q(k,"change",t[110]),q(w,"change",t[150]),q(w,"change",t[110])]},p(t,e){if(65536&e[0]&&r.value!==t[16]&&(r.value=t[16]),2048&e[1]&&v!==(v=1===t[42])&&(_.checked=v),2048&e[1]&&(_.checked=_.__value===t[42]),8&e[0]|6144&e[1]|131072&e[3]){let n;for(A=Object.keys(t[3]._opt.years).sort(),n=0;n<A.length;n+=1){const s=Ge(t,A,n);R[n]?R[n].p(s,e):(R[n]=rn(s),R[n].c(),R[n].m(g,null))}for(;n<R.length;n+=1)R[n].d(1);R.length=A.length}if(393216&e[2]){let n;for(Z=t[80],n=0;n<Z.length;n+=1){const s=Ie(t,Z,n);Y[n]?Y[n].p(s,e):(Y[n]=an(s),Y[n].c(),Y[n].m(k,null))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=Z.length}1024&e[1]&&I(k,t[41]),512&e[1]&&U(w,t[40])},d(l){l&&F(e),l&&F(n),l&&F(s),t[139][4].splice(t[139][4].indexOf(_),1),T(R,l),T(Y,l),x(G)}}}function rn(t){let e,n,s,l,o,r,i,a=t[190]+"";return{c(){e=O("input"),o=O("label"),r=E(a),S(e,"type","checkbox"),S(e,"id","hearths_year_5"),e.checked=n=t[43][t[190]],e.disabled=s=2===t[42],S(e,"name",l=t[190]),S(e,"class","svelte-1jsovbn"),S(o,"for","hearths_year_5"),S(o,"class","svelte-1jsovbn")},m(n,s,l){D(n,e,s),D(n,o,s),z(o,r),l&&i(),i=q(e,"change",t[110])},p(t,o){8&o[0]|4096&o[1]&&n!==(n=t[43][t[190]])&&(e.checked=n),2048&o[1]&&s!==(s=2===t[42])&&(e.disabled=s),8&o[0]&&l!==(l=t[190])&&S(e,"name",l),8&o[0]&&a!==(a=t[190]+"")&&N(r,a)},d(t){t&&F(e),t&&F(o),i()}}}function an(t){let e,n,s,l,o,r,i,a,p=t[79].str_icon_type[t[190]]+"",c=t[190]+"";return{c(){e=O("option"),n=E("("),s=E(p),l=E(") - "),o=E(c),r=M(),e.__value=i=t[190],e.value=e.__value,S(e,"class",a="icon_type_"+t[79].iconType[t[190]]+" svelte-1jsovbn")},m(t,i){D(t,e,i),z(e,n),z(e,s),z(e,l),z(e,o),z(e,r)},p:y,d(t){t&&F(e)}}}function pn(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f,m,g,y,b,k,j,C,L,w,$,P,H,N,B,G,A=Object.keys(t[4]._opt.years).sort(),R=[];for(let e=0;e<A.length;e+=1)R[e]=cn(Ue(t,A,e));let Z=t[78],Y=[];for(let e=0;e<Z.length;e+=1)Y[e]=dn(Be(t,Z,e));return{c(){e=O("div"),e.innerHTML="Фильтры - <b>ДТП Очаги (3)</b>",n=M(),s=O("div"),l=O("div"),o=E("ID ДТП: "),r=O("input"),i=M(),a=O("div"),p=O("fieldset"),c=O("legend"),c.textContent="Фильтрация по периодам:",d=M(),u=O("div"),_=O("input"),f=O("label"),f.textContent="Фильтрация по годам",m=M(),g=O("div");for(let t=0;t<R.length;t+=1)R[t].c();y=M(),b=O("div"),k=O("select"),j=O("option"),j.textContent=`\n\t\t\t\t\t\tВсе типы (${t[78].reduce(t[152],0)})\n\t\t\t\t\t`;for(let t=0;t<Y.length;t+=1)Y[t].c();C=M(),L=O("div"),w=O("select"),$=O("option"),$.textContent=`(${t[77].stricken[0]||0}) Очаги все`,P=O("option"),P.textContent=`(${t[77].stricken[1]||0}) Только с погибшими`,H=O("option"),H.textContent=`(${t[77].stricken[2]||0}) Только с пострадавшими`,N=O("option"),N.textContent=`(${t[77].stricken[3]||0}) С пострадавшими или погибшими`,B=O("option"),B.textContent=`(${t[77].stricken[4]||0}) С пострадавшими и погибшими`,S(e,"class","pLine svelte-1jsovbn"),S(r,"type","text"),r.value=t[16],S(r,"class","svelte-1jsovbn"),S(l,"class","pLine svelte-1jsovbn"),S(_,"type","radio"),_.__value=h=1,_.value=_.__value,_.checked=v=1===t[46],S(_,"id","hearths_period_type_31"),S(_,"name","hearths_period_type_3"),S(_,"class","svelte-1jsovbn"),t[139][3].push(_),S(f,"for","hearths_period_type_31"),S(f,"class","svelte-1jsovbn"),S(g,"class","pLine margin svelte-1jsovbn"),S(u,"class","pLine type svelte-1jsovbn"),S(a,"class","pLine nowrap svelte-1jsovbn"),j.__value="",j.value=j.__value,S(j,"class","svelte-1jsovbn"),S(k,"class","multiple_icon_typeTmp svelte-1jsovbn"),k.multiple=!0,void 0===t[45]&&nt(()=>t[153].call(k)),S(b,"class","pLine svelte-1jsovbn"),$.__value="",$.value=$.__value,P.__value="1",P.value=P.__value,H.__value="2",H.value=H.__value,N.__value="3",N.value=N.__value,B.__value="4",B.value=B.__value,S(w,"class","svelte-1jsovbn"),void 0===t[44]&&nt(()=>t[154].call(w)),S(L,"class","pLine svelte-1jsovbn"),S(s,"class","filtersCont svelte-1jsovbn")},m(h,v,F){D(h,e,v),D(h,n,v),D(h,s,v),z(s,l),z(l,o),z(l,r),z(s,i),z(s,a),z(a,p),z(p,c),z(p,d),z(p,u),z(u,_),_.checked=_.__value===t[46],z(u,f),z(u,m),z(u,g);for(let t=0;t<R.length;t+=1)R[t].m(g,null);z(s,y),z(s,b),z(b,k),z(k,j);for(let t=0;t<Y.length;t+=1)Y[t].m(k,null);I(k,t[45]),z(s,C),z(s,L),z(L,w),z(w,$),z(w,P),z(w,H),z(w,N),z(w,B),U(w,t[44]),F&&x(G),G=[q(r,"input",t[96]),q(_,"change",t[111]),q(_,"change",t[151]),q(k,"change",t[153]),q(k,"change",t[111]),q(w,"change",t[154]),q(w,"change",t[111])]},p(t,e){if(65536&e[0]&&r.value!==t[16]&&(r.value=t[16]),32768&e[1]&&v!==(v=1===t[46])&&(_.checked=v),32768&e[1]&&(_.checked=_.__value===t[46]),16&e[0]|98304&e[1]|262144&e[3]){let n;for(A=Object.keys(t[4]._opt.years).sort(),n=0;n<A.length;n+=1){const s=Ue(t,A,n);R[n]?R[n].p(s,e):(R[n]=cn(s),R[n].c(),R[n].m(g,null))}for(;n<R.length;n+=1)R[n].d(1);R.length=A.length}if(98304&e[2]){let n;for(Z=t[78],n=0;n<Z.length;n+=1){const s=Be(t,Z,n);Y[n]?Y[n].p(s,e):(Y[n]=dn(s),Y[n].c(),Y[n].m(k,null))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=Z.length}16384&e[1]&&I(k,t[45]),8192&e[1]&&U(w,t[44])},d(l){l&&F(e),l&&F(n),l&&F(s),t[139][3].splice(t[139][3].indexOf(_),1),T(R,l),T(Y,l),x(G)}}}function cn(t){let e,n,s,l,o,r,i,a=t[190]+"";return{c(){e=O("input"),o=O("label"),r=E(a),S(e,"type","checkbox"),S(e,"id","hearths_year_3"),e.checked=n=t[47][t[190]],e.disabled=s=2===t[46],S(e,"name",l=t[190]),S(e,"class","svelte-1jsovbn"),S(o,"for","hearths_year_3"),S(o,"class","svelte-1jsovbn")},m(n,s,l){D(n,e,s),D(n,o,s),z(o,r),l&&i(),i=q(e,"change",t[111])},p(t,o){16&o[0]|65536&o[1]&&n!==(n=t[47][t[190]])&&(e.checked=n),32768&o[1]&&s!==(s=2===t[46])&&(e.disabled=s),16&o[0]&&l!==(l=t[190])&&S(e,"name",l),16&o[0]&&a!==(a=t[190]+"")&&N(r,a)},d(t){t&&F(e),t&&F(o),i()}}}function dn(t){let e,n,s,l,o,r,i,a,p=t[77].str_icon_type[t[190]]+"",c=t[190]+"";return{c(){e=O("option"),n=E("("),s=E(p),l=E(") - "),o=E(c),r=M(),e.__value=i=t[190],e.value=e.__value,S(e,"class",a="icon_type_"+t[77].iconType[t[190]]+" svelte-1jsovbn")},m(t,i){D(t,e,i),z(e,n),z(e,s),z(e,l),z(e,o),z(e,r)},p:y,d(t){t&&F(e)}}}function un(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f,m,g,y,b,k,j,C,L,w,$,P,H,N,B,G,A,R,Z,Y,V,W,K,J=Object.keys(t[11]._opt.years).sort(),X=[];for(let e=0;e<J.length;e+=1)X[e]=_n(Ne(t,J,e));let Q=Object.keys(t[11]._opt.years).sort(),tt=[];for(let e=0;e<Q.length;e+=1)tt[e]=vn(He(t,Q,e));let et=t[76],st=[];for(let e=0;e<et.length;e+=1)st[e]=fn(Pe(t,et,e));return{c(){e=O("div"),e.innerHTML="Фильтры - <b>ДТП Очаги (Stat)</b>",n=M(),s=O("div"),l=O("div"),o=E("ID ДТП: "),r=O("input"),i=M(),a=O("div"),p=O("fieldset"),c=O("legend"),c.textContent="Фильтрация по периодам:",d=M(),u=O("div"),_=O("input"),f=O("label"),f.textContent="Фильтрация по годам",m=M(),g=O("div");for(let t=0;t<X.length;t+=1)X[t].c();y=M(),b=O("div"),k=O("input"),C=O("label"),C.textContent="Фильтрация по кварталам",L=M(),w=O("div");for(let t=0;t<tt.length;t+=1)tt[t].c();$=M(),P=O("div"),H=O("select"),N=O("option"),N.textContent=`\n\t\t\t\t\t\tВсе типы (${t[76].reduce(t[157],0)})\n\t\t\t\t\t`;for(let t=0;t<st.length;t+=1)st[t].c();B=M(),G=O("div"),A=O("select"),R=O("option"),R.textContent=`(${t[75].stricken[0]||0}) Очаги все`,Z=O("option"),Z.textContent=`(${t[75].stricken[1]||0}) Только с погибшими`,Y=O("option"),Y.textContent=`(${t[75].stricken[2]||0}) Только с пострадавшими`,V=O("option"),V.textContent=`(${t[75].stricken[3]||0}) С пострадавшими или погибшими`,W=O("option"),W.textContent=`(${t[75].stricken[4]||0}) С пострадавшими и погибшими`,S(e,"class","pLine svelte-1jsovbn"),S(r,"type","text"),r.value=t[16],S(r,"class","svelte-1jsovbn"),S(l,"class","pLine svelte-1jsovbn"),S(_,"type","radio"),_.__value=h=1,_.value=_.__value,_.checked=v=1===t[50],S(_,"id","hearths_period_type_Stat1"),S(_,"name","hearths_period_type_Stat"),S(_,"class","svelte-1jsovbn"),t[139][2].push(_),S(f,"for","hearths_period_type_Stat1"),S(f,"class","svelte-1jsovbn"),S(g,"class","pLine margin svelte-1jsovbn"),S(u,"class","pLine type svelte-1jsovbn"),S(k,"type","radio"),k.__value=j=2,k.value=k.__value,S(k,"id","hearths_period_type_Stat2"),S(k,"name","hearths_period_type_Stat"),S(k,"class","svelte-1jsovbn"),t[139][2].push(k),S(C,"for","hearths_period_type_Stat2"),S(C,"class","svelte-1jsovbn"),S(w,"class","pLine margin svelte-1jsovbn"),S(b,"class","pLine type svelte-1jsovbn"),S(a,"class","pLine nowrap svelte-1jsovbn"),N.__value="",N.value=N.__value,S(N,"class","svelte-1jsovbn"),S(H,"class","multiple_icon_typeTmp svelte-1jsovbn"),H.multiple=!0,void 0===t[49]&&nt(()=>t[158].call(H)),S(P,"class","pLine svelte-1jsovbn"),R.__value="",R.value=R.__value,Z.__value="1",Z.value=Z.__value,Y.__value="2",Y.value=Y.__value,V.__value="3",V.value=V.__value,W.__value="4",W.value=W.__value,S(A,"class","svelte-1jsovbn"),void 0===t[48]&&nt(()=>t[159].call(A)),S(G,"class","pLine svelte-1jsovbn"),S(s,"class","filtersCont svelte-1jsovbn")},m(h,v,j){D(h,e,v),D(h,n,v),D(h,s,v),z(s,l),z(l,o),z(l,r),z(s,i),z(s,a),z(a,p),z(p,c),z(p,d),z(p,u),z(u,_),_.checked=_.__value===t[50],z(u,f),z(u,m),z(u,g);for(let t=0;t<X.length;t+=1)X[t].m(g,null);z(p,y),z(p,b),z(b,k),k.checked=k.__value===t[50],z(b,C),z(b,L),z(b,w);for(let t=0;t<tt.length;t+=1)tt[t].m(w,null);z(s,$),z(s,P),z(P,H),z(H,N);for(let t=0;t<st.length;t+=1)st[t].m(H,null);I(H,t[49]),z(s,B),z(s,G),z(G,A),z(A,R),z(A,Z),z(A,Y),z(A,V),z(A,W),U(A,t[48]),j&&x(K),K=[q(r,"input",t[96]),q(_,"change",t[112]),q(_,"change",t[155]),q(k,"change",t[112]),q(k,"change",t[156]),q(H,"change",t[158]),q(H,"change",t[112]),q(A,"change",t[159]),q(A,"change",t[112])]},p(t,e){if(65536&e[0]&&r.value!==t[16]&&(r.value=t[16]),524288&e[1]&&v!==(v=1===t[50])&&(_.checked=v),524288&e[1]&&(_.checked=_.__value===t[50]),2048&e[0]|1572864&e[1]|524288&e[3]){let n;for(J=Object.keys(t[11]._opt.years).sort(),n=0;n<J.length;n+=1){const s=Ne(t,J,n);X[n]?X[n].p(s,e):(X[n]=_n(s),X[n].c(),X[n].m(g,null))}for(;n<X.length;n+=1)X[n].d(1);X.length=J.length}if(524288&e[1]&&(k.checked=k.__value===t[50]),2048&e[0]|2621440&e[1]|524288&e[3]){let n;for(Q=Object.keys(t[11]._opt.years).sort(),n=0;n<Q.length;n+=1){const s=He(t,Q,n);tt[n]?tt[n].p(s,e):(tt[n]=vn(s),tt[n].c(),tt[n].m(w,null))}for(;n<tt.length;n+=1)tt[n].d(1);tt.length=Q.length}if(24576&e[2]){let n;for(et=t[76],n=0;n<et.length;n+=1){const s=Pe(t,et,n);st[n]?st[n].p(s,e):(st[n]=fn(s),st[n].c(),st[n].m(H,null))}for(;n<st.length;n+=1)st[n].d(1);st.length=et.length}262144&e[1]&&I(H,t[49]),131072&e[1]&&U(A,t[48])},d(l){l&&F(e),l&&F(n),l&&F(s),t[139][2].splice(t[139][2].indexOf(_),1),T(X,l),t[139][2].splice(t[139][2].indexOf(k),1),T(tt,l),T(st,l),x(K)}}}function _n(t){let e,n,s,l,o,r,i,a=t[190]+"";return{c(){e=O("input"),o=O("label"),r=E(a),S(e,"type","checkbox"),S(e,"id","hearths_year_Stat"),e.checked=n=t[51][t[190]],e.disabled=s=2===t[50],S(e,"name",l=t[190]),S(e,"class","svelte-1jsovbn"),S(o,"for","hearths_year_Stat"),S(o,"class","svelte-1jsovbn")},m(n,s,l){D(n,e,s),D(n,o,s),z(o,r),l&&i(),i=q(e,"change",t[112])},p(t,o){2048&o[0]|1048576&o[1]&&n!==(n=t[51][t[190]])&&(e.checked=n),524288&o[1]&&s!==(s=2===t[50])&&(e.disabled=s),2048&o[0]&&l!==(l=t[190])&&S(e,"name",l),2048&o[0]&&a!==(a=t[190]+"")&&N(r,a)},d(t){t&&F(e),t&&F(o),i()}}}function hn(t){let e,n,s,l,o,r,i,a,p,c,d=t[205]+"",u=t[190]+"";return{c(){e=O("input"),o=O("label"),r=E(d),i=E(" кв. "),a=E(u),S(e,"type","checkbox"),S(e,"id","hearths_quarter_Stat"),e.checked=n=t[52][t[190]]&&t[52][t[190]][t[205]],e.disabled=s=1===t[50],S(e,"name",l=t[190]+"_"+t[205]),S(e,"class","svelte-1jsovbn"),S(o,"for",p="hearths_quarter_Stat_"+t[190]+"_"+t[205]),S(o,"class","svelte-1jsovbn")},m(n,s,l){D(n,e,s),D(n,o,s),z(o,r),z(o,i),z(o,a),l&&c(),c=q(e,"change",t[112])},p(t,i){2048&i[0]|2097152&i[1]&&n!==(n=t[52][t[190]]&&t[52][t[190]][t[205]])&&(e.checked=n),524288&i[1]&&s!==(s=1===t[50])&&(e.disabled=s),2048&i[0]&&l!==(l=t[190]+"_"+t[205])&&S(e,"name",l),2048&i[0]&&d!==(d=t[205]+"")&&N(r,d),2048&i[0]&&u!==(u=t[190]+"")&&N(a,u),2048&i[0]&&p!==(p="hearths_quarter_Stat_"+t[190]+"_"+t[205])&&S(o,"for",p)},d(t){t&&F(e),t&&F(o),c()}}}function vn(t){let e,n,s=Object.keys(t[11]._opt.years[t[190]]).sort(),l=[];for(let e=0;e<s.length;e+=1)l[e]=hn(Se(t,s,e));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=M(),n=O("br")},m(t,s){for(let e=0;e<l.length;e+=1)l[e].m(t,s);D(t,e,s),D(t,n,s)},p(t,n){if(2048&n[0]|2621440&n[1]|524288&n[3]){let o;for(s=Object.keys(t[11]._opt.years[t[190]]).sort(),o=0;o<s.length;o+=1){const r=Se(t,s,o);l[o]?l[o].p(r,n):(l[o]=hn(r),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=s.length}},d(t){T(l,t),t&&F(e),t&&F(n)}}}function fn(t){let e,n,s,l,o,r,i,a,p=t[75].str_icon_type[t[190]]+"",c=t[190]+"";return{c(){e=O("option"),n=E("("),s=E(p),l=E(") - "),o=E(c),r=M(),e.__value=i=t[190],e.value=e.__value,S(e,"class",a="icon_type_"+t[75].iconType[t[190]]+" svelte-1jsovbn")},m(t,i){D(t,e,i),z(e,n),z(e,s),z(e,l),z(e,o),z(e,r)},p:y,d(t){t&&F(e)}}}function mn(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f,m,g,y,b,k,j,C,L,w,$,P,H,N,B,G,A,R,Z,Y,V,W,K,J=Object.keys(t[12]._opt.years).sort(),X=[];for(let e=0;e<J.length;e+=1)X[e]=gn(qe(t,J,e));let Q=Object.keys(t[12]._opt.years).sort(),tt=[];for(let e=0;e<Q.length;e+=1)tt[e]=bn($e(t,Q,e));let et=t[74],st=[];for(let e=0;e<et.length;e+=1)st[e]=kn(Ee(t,et,e));return{c(){e=O("div"),e.innerHTML="Фильтры - <b>ДТП Очаги (TMP)</b>",n=M(),s=O("div"),l=O("div"),o=E("ID ДТП: "),r=O("input"),i=M(),a=O("div"),p=O("fieldset"),c=O("legend"),c.textContent="Фильтрация по периодам:",d=M(),u=O("div"),_=O("input"),f=O("label"),f.textContent="Фильтрация по годам",m=M(),g=O("div");for(let t=0;t<X.length;t+=1)X[t].c();y=M(),b=O("div"),k=O("input"),C=O("label"),C.textContent="Фильтрация по кварталам",L=M(),w=O("div");for(let t=0;t<tt.length;t+=1)tt[t].c();$=M(),P=O("div"),H=O("select"),N=O("option"),N.textContent=`\n\t\t\t\t\t\tВсе типы (${t[74].reduce(t[162],0)})\n\t\t\t\t\t`;for(let t=0;t<st.length;t+=1)st[t].c();B=M(),G=O("div"),A=O("select"),R=O("option"),R.textContent=`(${t[73].stricken[0]||0}) Очаги все`,Z=O("option"),Z.textContent=`(${t[73].stricken[1]||0}) Только с погибшими`,Y=O("option"),Y.textContent=`(${t[73].stricken[2]||0}) Только с пострадавшими`,V=O("option"),V.textContent=`(${t[73].stricken[3]||0}) С пострадавшими или погибшими`,W=O("option"),W.textContent=`(${t[73].stricken[4]||0}) С пострадавшими и погибшими`,S(e,"class","pLine svelte-1jsovbn"),S(r,"type","text"),r.value=t[16],S(r,"class","svelte-1jsovbn"),S(l,"class","pLine svelte-1jsovbn"),S(_,"type","radio"),_.__value=h=1,_.value=_.__value,_.checked=v=1===t[55],S(_,"id","hearths_period_type_tmp1"),S(_,"name","hearths_period_type_tmp"),S(_,"class","svelte-1jsovbn"),t[139][1].push(_),S(f,"for","hearths_period_type_tmp1"),S(f,"class","svelte-1jsovbn"),S(g,"class","pLine margin svelte-1jsovbn"),S(u,"class","pLine type svelte-1jsovbn"),S(k,"type","radio"),k.__value=j=2,k.value=k.__value,S(k,"id","hearths_period_type_tmp2"),S(k,"name","hearths_period_type_tmp"),S(k,"class","svelte-1jsovbn"),t[139][1].push(k),S(C,"for","hearths_period_type_tmp2"),S(C,"class","svelte-1jsovbn"),S(w,"class","pLine margin svelte-1jsovbn"),S(b,"class","pLine type svelte-1jsovbn"),S(a,"class","pLine nowrap svelte-1jsovbn"),N.__value="",N.value=N.__value,S(N,"class","svelte-1jsovbn"),S(H,"class","multiple_icon_typeTmp svelte-1jsovbn"),H.multiple=!0,void 0===t[54]&&nt(()=>t[163].call(H)),S(P,"class","pLine svelte-1jsovbn"),R.__value="",R.value=R.__value,Z.__value="1",Z.value=Z.__value,Y.__value="2",Y.value=Y.__value,V.__value="3",V.value=V.__value,W.__value="4",W.value=W.__value,S(A,"class","svelte-1jsovbn"),void 0===t[53]&&nt(()=>t[164].call(A)),S(G,"class","pLine svelte-1jsovbn"),S(s,"class","filtersCont svelte-1jsovbn")},m(h,v,j){D(h,e,v),D(h,n,v),D(h,s,v),z(s,l),z(l,o),z(l,r),z(s,i),z(s,a),z(a,p),z(p,c),z(p,d),z(p,u),z(u,_),_.checked=_.__value===t[55],z(u,f),z(u,m),z(u,g);for(let t=0;t<X.length;t+=1)X[t].m(g,null);z(p,y),z(p,b),z(b,k),k.checked=k.__value===t[55],z(b,C),z(b,L),z(b,w);for(let t=0;t<tt.length;t+=1)tt[t].m(w,null);z(s,$),z(s,P),z(P,H),z(H,N);for(let t=0;t<st.length;t+=1)st[t].m(H,null);I(H,t[54]),z(s,B),z(s,G),z(G,A),z(A,R),z(A,Z),z(A,Y),z(A,V),z(A,W),U(A,t[53]),j&&x(K),K=[q(r,"input",t[96]),q(_,"change",t[113]),q(_,"change",t[160]),q(k,"change",t[113]),q(k,"change",t[161]),q(H,"change",t[163]),q(H,"change",t[113]),q(A,"change",t[164]),q(A,"change",t[113])]},p(t,e){if(65536&e[0]&&r.value!==t[16]&&(r.value=t[16]),16777216&e[1]&&v!==(v=1===t[55])&&(_.checked=v),16777216&e[1]&&(_.checked=_.__value===t[55]),4096&e[0]|50331648&e[1]|1048576&e[3]){let n;for(J=Object.keys(t[12]._opt.years).sort(),n=0;n<J.length;n+=1){const s=qe(t,J,n);X[n]?X[n].p(s,e):(X[n]=gn(s),X[n].c(),X[n].m(g,null))}for(;n<X.length;n+=1)X[n].d(1);X.length=J.length}if(16777216&e[1]&&(k.checked=k.__value===t[55]),4096&e[0]|83886080&e[1]|1048576&e[3]){let n;for(Q=Object.keys(t[12]._opt.years).sort(),n=0;n<Q.length;n+=1){const s=$e(t,Q,n);tt[n]?tt[n].p(s,e):(tt[n]=bn(s),tt[n].c(),tt[n].m(w,null))}for(;n<tt.length;n+=1)tt[n].d(1);tt.length=Q.length}if(6144&e[2]){let n;for(et=t[74],n=0;n<et.length;n+=1){const s=Ee(t,et,n);st[n]?st[n].p(s,e):(st[n]=kn(s),st[n].c(),st[n].m(H,null))}for(;n<st.length;n+=1)st[n].d(1);st.length=et.length}8388608&e[1]&&I(H,t[54]),4194304&e[1]&&U(A,t[53])},d(l){l&&F(e),l&&F(n),l&&F(s),t[139][1].splice(t[139][1].indexOf(_),1),T(X,l),t[139][1].splice(t[139][1].indexOf(k),1),T(tt,l),T(st,l),x(K)}}}function gn(t){let e,n,s,l,o,r,i,a=t[190]+"";return{c(){e=O("input"),o=O("label"),r=E(a),S(e,"type","checkbox"),S(e,"id","hearths_year_tmp"),e.checked=n=t[56][t[190]],e.disabled=s=2===t[55],S(e,"name",l=t[190]),S(e,"class","svelte-1jsovbn"),S(o,"for","hearths_year_tmp"),S(o,"class","svelte-1jsovbn")},m(n,s,l){D(n,e,s),D(n,o,s),z(o,r),l&&i(),i=q(e,"change",t[113])},p(t,o){4096&o[0]|33554432&o[1]&&n!==(n=t[56][t[190]])&&(e.checked=n),16777216&o[1]&&s!==(s=2===t[55])&&(e.disabled=s),4096&o[0]&&l!==(l=t[190])&&S(e,"name",l),4096&o[0]&&a!==(a=t[190]+"")&&N(r,a)},d(t){t&&F(e),t&&F(o),i()}}}function yn(t){let e,n,s,l,o,r,i,a,p,c,d=t[205]+"",u=t[190]+"";return{c(){e=O("input"),o=O("label"),r=E(d),i=E(" кв. "),a=E(u),S(e,"type","checkbox"),S(e,"id","hearths_quarter_tmp"),e.checked=n=t[57][t[190]]&&t[57][t[190]][t[205]],e.disabled=s=1===t[55],S(e,"name",l=t[190]+"_"+t[205]),S(e,"class","svelte-1jsovbn"),S(o,"for",p="hearths_quarter_tmp_"+t[190]+"_"+t[205]),S(o,"class","svelte-1jsovbn")},m(n,s,l){D(n,e,s),D(n,o,s),z(o,r),z(o,i),z(o,a),l&&c(),c=q(e,"change",t[113])},p(t,i){4096&i[0]|67108864&i[1]&&n!==(n=t[57][t[190]]&&t[57][t[190]][t[205]])&&(e.checked=n),16777216&i[1]&&s!==(s=1===t[55])&&(e.disabled=s),4096&i[0]&&l!==(l=t[190]+"_"+t[205])&&S(e,"name",l),4096&i[0]&&d!==(d=t[205]+"")&&N(r,d),4096&i[0]&&u!==(u=t[190]+"")&&N(a,u),4096&i[0]&&p!==(p="hearths_quarter_tmp_"+t[190]+"_"+t[205])&&S(o,"for",p)},d(t){t&&F(e),t&&F(o),c()}}}function bn(t){let e,n,s=Object.keys(t[12]._opt.years[t[190]]).sort(),l=[];for(let e=0;e<s.length;e+=1)l[e]=yn(Me(t,s,e));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=M(),n=O("br")},m(t,s){for(let e=0;e<l.length;e+=1)l[e].m(t,s);D(t,e,s),D(t,n,s)},p(t,n){if(4096&n[0]|83886080&n[1]|1048576&n[3]){let o;for(s=Object.keys(t[12]._opt.years[t[190]]).sort(),o=0;o<s.length;o+=1){const r=Me(t,s,o);l[o]?l[o].p(r,n):(l[o]=yn(r),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=s.length}},d(t){T(l,t),t&&F(e),t&&F(n)}}}function kn(t){let e,n,s,l,o,r,i,a,p=t[73].str_icon_type[t[190]]+"",c=t[190]+"";return{c(){e=O("option"),n=E("("),s=E(p),l=E(") - "),o=E(c),r=M(),e.__value=i=t[190],e.value=e.__value,S(e,"class",a="icon_type_"+t[73].iconType[t[190]]+" svelte-1jsovbn")},m(t,i){D(t,e,i),z(e,n),z(e,s),z(e,l),z(e,o),z(e,r)},p:y,d(t){t&&F(e)}}}function xn(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f,m,g,y,b,k,j,C,L,w,$,P,H,N,B,G,A,R,Z,Y,V,W,K,J,X,Q=Object.keys(t[13]._opt.years).sort(),tt=[];for(let e=0;e<Q.length;e+=1)tt[e]=jn(Oe(t,Q,e));let et=Object.keys(t[13]._opt.years).sort(),st=[];for(let e=0;e<et.length;e+=1)st[e]=Ln(Te(t,et,e));let lt=t[72],ot=[];for(let e=0;e<lt.length;e+=1)ot[e]=wn(De(t,lt,e));return{c(){e=O("div"),e.innerHTML='<hr class="svelte-1jsovbn">',n=M(),s=O("div"),s.innerHTML="Фильтры - <b>ДТП Очаги</b>",l=M(),o=O("div"),r=O("div"),i=E("ID ДТП: "),a=O("input"),p=M(),c=O("div"),d=O("fieldset"),u=O("legend"),u.textContent="Фильтрация по периодам:",_=M(),h=O("div"),v=O("input"),g=O("label"),g.textContent="Фильтрация по годам",y=M(),b=O("div");for(let t=0;t<tt.length;t+=1)tt[t].c();k=M(),j=O("div"),C=O("input"),w=O("label"),w.textContent="Фильтрация по кварталам",$=M(),P=O("div");for(let t=0;t<st.length;t+=1)st[t].c();H=M(),N=O("div"),B=O("select"),G=O("option"),G.textContent=`\n\t\t\t\t\t\tВсе типы (${t[72].reduce(t[167],0)})\n\t\t\t\t\t`;for(let t=0;t<ot.length;t+=1)ot[t].c();A=M(),R=O("div"),Z=O("select"),Y=O("option"),Y.textContent=`(${t[71].stricken[0]||0}) Очаги все`,V=O("option"),V.textContent=`(${t[71].stricken[1]||0}) Только с погибшими`,W=O("option"),W.textContent=`(${t[71].stricken[2]||0}) Только с пострадавшими`,K=O("option"),K.textContent=`(${t[71].stricken[3]||0}) С пострадавшими или погибшими`,J=O("option"),J.textContent=`(${t[71].stricken[4]||0}) С пострадавшими и погибшими`,S(e,"class","pLine svelte-1jsovbn"),S(s,"class","pLine svelte-1jsovbn"),S(a,"type","text"),a.value=t[16],S(a,"class","svelte-1jsovbn"),S(r,"class","pLine svelte-1jsovbn"),S(v,"type","radio"),v.__value=f=1,v.value=v.__value,v.checked=m=1===t[60],S(v,"id","hearths_period_type1"),S(v,"name","hearths_period_type"),S(v,"class","svelte-1jsovbn"),t[139][0].push(v),S(g,"for","hearths_period_type1"),S(g,"class","svelte-1jsovbn"),S(b,"class","pLine margin svelte-1jsovbn"),S(h,"class","pLine type svelte-1jsovbn"),S(C,"type","radio"),C.__value=L=2,C.value=C.__value,S(C,"id","hearths_period_type2"),S(C,"name","hearths_period_type"),S(C,"class","svelte-1jsovbn"),t[139][0].push(C),S(w,"for","hearths_period_type2"),S(w,"class","svelte-1jsovbn"),S(P,"class","pLine margin svelte-1jsovbn"),S(j,"class","pLine type svelte-1jsovbn"),S(c,"class","pLine nowrap svelte-1jsovbn"),G.__value="",G.value=G.__value,S(G,"class","svelte-1jsovbn"),S(B,"class","multiple_icon_typeTmp svelte-1jsovbn"),B.multiple=!0,void 0===t[59]&&nt(()=>t[168].call(B)),S(N,"class","pLine svelte-1jsovbn"),Y.__value="",Y.value=Y.__value,V.__value="1",V.value=V.__value,W.__value="2",W.value=W.__value,K.__value="3",K.value=K.__value,J.__value="4",J.value=J.__value,S(Z,"class","svelte-1jsovbn"),void 0===t[58]&&nt(()=>t[169].call(Z)),S(R,"class","pLine svelte-1jsovbn"),S(o,"class","filtersCont svelte-1jsovbn")},m(f,m,L){D(f,e,m),D(f,n,m),D(f,s,m),D(f,l,m),D(f,o,m),z(o,r),z(r,i),z(r,a),z(o,p),z(o,c),z(c,d),z(d,u),z(d,_),z(d,h),z(h,v),v.checked=v.__value===t[60],z(h,g),z(h,y),z(h,b);for(let t=0;t<tt.length;t+=1)tt[t].m(b,null);z(d,k),z(d,j),z(j,C),C.checked=C.__value===t[60],z(j,w),z(j,$),z(j,P);for(let t=0;t<st.length;t+=1)st[t].m(P,null);z(o,H),z(o,N),z(N,B),z(B,G);for(let t=0;t<ot.length;t+=1)ot[t].m(B,null);I(B,t[59]),z(o,A),z(o,R),z(R,Z),z(Z,Y),z(Z,V),z(Z,W),z(Z,K),z(Z,J),U(Z,t[58]),L&&x(X),X=[q(a,"input",t[96]),q(v,"change",t[114]),q(v,"change",t[165]),q(C,"change",t[114]),q(C,"change",t[166]),q(B,"change",t[168]),q(B,"change",t[114]),q(Z,"change",t[169]),q(Z,"change",t[114])]},p(t,e){if(65536&e[0]&&a.value!==t[16]&&(a.value=t[16]),536870912&e[1]&&m!==(m=1===t[60])&&(v.checked=m),536870912&e[1]&&(v.checked=v.__value===t[60]),8192&e[0]|1610612736&e[1]|2097152&e[3]){let n;for(Q=Object.keys(t[13]._opt.years).sort(),n=0;n<Q.length;n+=1){const s=Oe(t,Q,n);tt[n]?tt[n].p(s,e):(tt[n]=jn(s),tt[n].c(),tt[n].m(b,null))}for(;n<tt.length;n+=1)tt[n].d(1);tt.length=Q.length}if(536870912&e[1]&&(C.checked=C.__value===t[60]),8192&e[0]|536870912&e[1]|1&e[2]|2097152&e[3]){let n;for(et=Object.keys(t[13]._opt.years).sort(),n=0;n<et.length;n+=1){const s=Te(t,et,n);st[n]?st[n].p(s,e):(st[n]=Ln(s),st[n].c(),st[n].m(P,null))}for(;n<st.length;n+=1)st[n].d(1);st.length=et.length}if(1536&e[2]){let n;for(lt=t[72],n=0;n<lt.length;n+=1){const s=De(t,lt,n);ot[n]?ot[n].p(s,e):(ot[n]=wn(s),ot[n].c(),ot[n].m(B,null))}for(;n<ot.length;n+=1)ot[n].d(1);ot.length=lt.length}268435456&e[1]&&I(B,t[59]),134217728&e[1]&&U(Z,t[58])},d(r){r&&F(e),r&&F(n),r&&F(s),r&&F(l),r&&F(o),t[139][0].splice(t[139][0].indexOf(v),1),T(tt,r),t[139][0].splice(t[139][0].indexOf(C),1),T(st,r),T(ot,r),x(X)}}}function jn(t){let e,n,s,l,o,r,i,a,p=t[190]+"";return{c(){e=O("input"),o=O("label"),r=E(p),S(e,"type","checkbox"),S(e,"id","hearths_year"),e.checked=n=t[61][t[190]],e.disabled=s=2===t[60],S(e,"name",l=t[190]),S(e,"class","svelte-1jsovbn"),S(o,"for",i="hearths_year"+t[190]),S(o,"class","svelte-1jsovbn")},m(n,s,l){D(n,e,s),D(n,o,s),z(o,r),l&&a(),a=q(e,"change",t[114])},p(t,a){8192&a[0]|1073741824&a[1]&&n!==(n=t[61][t[190]])&&(e.checked=n),536870912&a[1]&&s!==(s=2===t[60])&&(e.disabled=s),8192&a[0]&&l!==(l=t[190])&&S(e,"name",l),8192&a[0]&&p!==(p=t[190]+"")&&N(r,p),8192&a[0]&&i!==(i="hearths_year"+t[190])&&S(o,"for",i)},d(t){t&&F(e),t&&F(o),a()}}}function Cn(t){let e,n,s,l,o,r,i,a,p,c,d=t[205]+"",u=t[190]+"";return{c(){e=O("input"),o=O("label"),r=E(d),i=E(" кв. "),a=E(u),S(e,"type","checkbox"),S(e,"id","hearths_quarter"),e.checked=n=t[62][t[190]]&&t[62][t[190]][t[205]],e.disabled=s=1===t[60],S(e,"name",l=t[190]+"_"+t[205]),S(e,"class","svelte-1jsovbn"),S(o,"for",p="hearths_quarter_"+t[190]+"_"+t[205]),S(o,"class","svelte-1jsovbn")},m(n,s,l){D(n,e,s),D(n,o,s),z(o,r),z(o,i),z(o,a),l&&c(),c=q(e,"change",t[114])},p(t,i){8192&i[0]|1&i[2]&&n!==(n=t[62][t[190]]&&t[62][t[190]][t[205]])&&(e.checked=n),536870912&i[1]&&s!==(s=1===t[60])&&(e.disabled=s),8192&i[0]&&l!==(l=t[190]+"_"+t[205])&&S(e,"name",l),8192&i[0]&&d!==(d=t[205]+"")&&N(r,d),8192&i[0]&&u!==(u=t[190]+"")&&N(a,u),8192&i[0]&&p!==(p="hearths_quarter_"+t[190]+"_"+t[205])&&S(o,"for",p)},d(t){t&&F(e),t&&F(o),c()}}}function Ln(t){let e,n,s=Object.keys(t[13]._opt.years[t[190]]).sort(),l=[];for(let e=0;e<s.length;e+=1)l[e]=Cn(Fe(t,s,e));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=M(),n=O("br")},m(t,s){for(let e=0;e<l.length;e+=1)l[e].m(t,s);D(t,e,s),D(t,n,s)},p(t,n){if(8192&n[0]|536870912&n[1]|1&n[2]|2097152&n[3]){let o;for(s=Object.keys(t[13]._opt.years[t[190]]).sort(),o=0;o<s.length;o+=1){const r=Fe(t,s,o);l[o]?l[o].p(r,n):(l[o]=Cn(r),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=s.length}},d(t){T(l,t),t&&F(e),t&&F(n)}}}function wn(t){let e,n,s,l,o,r,i,a,p=t[71].str_icon_type[t[190]]+"",c=t[190]+"";return{c(){e=O("option"),n=E("("),s=E(p),l=E(") - "),o=E(c),r=M(),e.__value=i=t[190],e.value=e.__value,S(e,"class",a="icon_type_"+t[71].iconType[t[190]]+" svelte-1jsovbn")},m(t,i){D(t,e,i),z(e,n),z(e,s),z(e,l),z(e,o),z(e,r)},p:y,d(t){t&&F(e)}}}function zn(t){let e;return{c(){e=O("div"),e.textContent="Нет включенных слоев",S(e,"class","pLine svelte-1jsovbn")},m(t,n){D(t,e,n)},p:y,d(t){t&&F(e)}}}function Dn(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h=(t[5]._map||t[6]._map||t[7]._map||t[8]._map)&&Fn(t);return{c(){e=O("div"),e.innerHTML='<hr class="svelte-1jsovbn">',n=M(),s=O("div"),l=O("button"),o=M(),r=O("input"),i=M(),a=O("input"),p=M(),c=O("button"),d=M(),h&&h.c(),u=$(),S(e,"class","pLine svelte-1jsovbn"),S(l,"class","pika-prev"),S(r,"type","text"),S(r,"class","begDate svelte-1jsovbn"),S(a,"type","text"),S(a,"class","endDate svelte-1jsovbn"),S(c,"class","pika-next"),S(s,"class","pikaday pLine svelte-1jsovbn")},m(v,f,m){D(v,e,f),D(v,n,f),D(v,s,f),z(s,l),z(s,o),z(s,r),t[170](r),z(s,i),z(s,a),t[171](a),z(s,p),z(s,c),D(v,d,f),h&&h.m(v,f),D(v,u,f),m&&x(_),_=[q(l,"click",t[108]),q(c,"click",t[109])]},p(t,e){t[5]._map||t[6]._map||t[7]._map||t[8]._map?h?h.p(t,e):(h=Fn(t),h.c(),h.m(u.parentNode,u)):h&&(h.d(1),h=null)},d(l){l&&F(e),l&&F(n),l&&F(s),t[170](null),t[171](null),l&&F(d),h&&h.d(l),l&&F(u),x(_)}}}function Fn(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f,m,g,y,b,k,j,C,L,w,T,$,P,H,U,I,G,A,R,Z,Y;return{c(){e=O("div"),n=O("br"),s=M(),l=O("label"),o=O("input"),i=O("span"),a=E("Мин.яркость ("),p=E(t[28]),c=E(")"),d=M(),u=O("br"),_=M(),h=O("label"),v=O("input"),m=O("span"),g=E("Радиус ("),y=E(t[26]),b=E(")"),k=M(),j=O("br"),C=M(),L=O("label"),w=O("input"),$=O("span"),P=E("Размытие ("),H=E(t[27]),U=E(")"),I=M(),G=O("div"),A=O("input"),Z=O("label"),Z.textContent="- тепловая карта",S(o,"type","range"),S(o,"min","0.05"),S(o,"max","1"),S(o,"step","0.01"),o.disabled=r=!t[89],S(o,"class","svelte-1jsovbn"),S(l,"class","svelte-1jsovbn"),S(v,"type","range"),S(v,"min","0"),S(v,"max","100"),S(v,"step","1"),v.disabled=f=!t[89],S(v,"class","svelte-1jsovbn"),S(h,"class","svelte-1jsovbn"),S(w,"type","range"),S(w,"min","0"),S(w,"max","15"),S(w,"step","0.01"),w.disabled=T=!t[89],S(w,"class","svelte-1jsovbn"),S(L,"class","svelte-1jsovbn"),S(e,"class","pLine svelte-1jsovbn"),S(A,"type","checkbox"),A.checked=R=t[8]._needHeat||t[7]._needHeat||t[6]._needHeat||t[5]._needHeat,S(A,"name","heat"),S(A,"class","svelte-1jsovbn"),S(Z,"for","heat"),S(Z,"class","svelte-1jsovbn"),S(G,"class","pLine svelte-1jsovbn")},m(r,f,F){D(r,e,f),z(e,n),z(e,s),z(e,l),z(l,o),B(o,t[28]),z(l,i),z(i,a),z(i,p),z(i,c),z(e,d),z(e,u),z(e,_),z(e,h),z(h,v),B(v,t[26]),z(h,m),z(m,g),z(m,y),z(m,b),z(e,k),z(e,j),z(e,C),z(e,L),z(L,w),B(w,t[27]),z(L,$),z($,P),z($,H),z($,U),D(r,I,f),D(r,G,f),z(G,A),t[175](A),z(G,Z),F&&x(Y),Y=[q(o,"change",t[172]),q(o,"input",t[172]),q(o,"input",t[102]),q(v,"change",t[173]),q(v,"input",t[173]),q(v,"input",t[102]),q(w,"change",t[174]),q(w,"input",t[174]),q(w,"input",t[102]),q(A,"change",t[101])]},p(t,e){268435456&e[0]&&B(o,t[28]),268435456&e[0]&&N(p,t[28]),67108864&e[0]&&B(v,t[26]),67108864&e[0]&&N(y,t[26]),134217728&e[0]&&B(w,t[27]),134217728&e[0]&&N(H,t[27]),480&e[0]&&R!==(R=t[8]._needHeat||t[7]._needHeat||t[6]._needHeat||t[5]._needHeat)&&(A.checked=R)},d(n){n&&F(e),n&&F(I),n&&F(G),t[175](null),x(Y)}}}function Tn(t){let e,n,s,l,o,r=t[87].type&&function(t){let e,n,s,l,o=t[88],r=[];for(let e=0;e<o.length;e+=1)r[e]=On(ze(t,o,e));return{c(){e=O("div"),n=O("select"),s=O("option"),s.textContent=`\n\t\t\t\t\t\tВсе типы (${t[88].reduce(t[176],0)})\n\t\t\t\t\t`;for(let t=0;t<r.length;t+=1)r[t].c();s.__value="",s.value=s.__value,S(n,"class","multiple_type svelte-1jsovbn"),n.multiple=!0,void 0===t[32]&&nt(()=>t[177].call(n)),S(e,"class","pLine svelte-1jsovbn")},m(o,i,a){D(o,e,i),z(e,n),z(n,s);for(let t=0;t<r.length;t+=1)r[t].m(n,null);I(n,t[32]),a&&x(l),l=[q(n,"change",t[177]),q(n,"change",t[90])]},p(t,e){if(100663296&e[2]){let s;for(o=t[88],s=0;s<o.length;s+=1){const l=ze(t,o,s);r[s]?r[s].p(l,e):(r[s]=On(l),r[s].c(),r[s].m(n,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=o.length}2&e[1]&&I(n,t[32])},d(t){t&&F(e),T(r,t),x(l)}}}(t);return{c(){e=O("div"),e.innerHTML='<hr class="svelte-1jsovbn">',n=M(),s=O("div"),s.innerHTML="Фильтры - <b>Мероприятий</b>",l=M(),o=O("div"),r&&r.c(),S(e,"class","pLine svelte-1jsovbn"),S(s,"class","pLine svelte-1jsovbn"),S(o,"class","filtersCont svelte-1jsovbn")},m(t,i){D(t,e,i),D(t,n,i),D(t,s,i),D(t,l,i),D(t,o,i),r&&r.m(o,null)},p(t,e){t[87].type&&r.p(t,e)},d(t){t&&F(e),t&&F(n),t&&F(s),t&&F(l),t&&F(o),r&&r.d()}}}function On(t){let e,n,s,l,o,r,i,a,p=t[87].type[t[190]]+"",c=t[190]+"";return{c(){e=O("option"),n=E("("),s=E(p),l=E(") - "),o=E(c),r=M(),e.__value=i=t[190],e.value=e.__value,S(e,"class",a="type_"+t[87].type[t[190]]+" svelte-1jsovbn")},m(t,i){D(t,e,i),z(e,n),z(e,s),z(e,l),z(e,o),z(e,r)},p:y,d(t){t&&F(e)}}}function En(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f,m,g,y,b,k,j,C,L,w,$,P,H;function N(t,e){return t[5]._arm?$n:Mn}let B=N(t),U=B(t),G=t[63].collision_type&&function(t){let e,n,s,l,o=t[64],r=[];for(let e=0;e<o.length;e+=1)r[e]=qn(we(t,o,e));return{c(){e=O("div"),n=O("select"),s=O("option"),s.textContent=`\n\t\t\t\t\t\tВсе типы (${t[64].reduce(t[178],0)})\n\t\t\t\t\t`;for(let t=0;t<r.length;t+=1)r[t].c();s.__value="",s.value=s.__value,S(s,"class","svelte-1jsovbn"),S(n,"class","multiple_icon_type svelte-1jsovbn"),n.multiple=!0,void 0===t[22]&&nt(()=>t[179].call(n)),S(e,"class","pLine svelte-1jsovbn")},m(o,i,a){D(o,e,i),z(e,n),z(n,s);for(let t=0;t<r.length;t+=1)r[t].m(n,null);I(n,t[22]),a&&x(l),l=[q(n,"change",t[179]),q(n,"change",t[103])]},p(t,e){if(6&e[2]){let s;for(o=t[64],s=0;s<o.length;s+=1){const l=we(t,o,s);r[s]?r[s].p(l,e):(r[s]=qn(l),r[s].c(),r[s].m(n,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=o.length}4194304&e[0]&&I(n,t[22])},d(t){t&&F(e),T(r,t),x(l)}}}(t);return{c(){e=O("div"),e.innerHTML='<hr class="svelte-1jsovbn">',n=M(),s=O("div"),s.innerHTML="Фильтры - <b>ДТП Сводный</b>",l=M(),o=O("div"),r=O("div"),i=E("ID ДТП: "),a=O("input"),p=M(),c=O("div"),d=O("input"),u=O("label"),u.textContent="Все",_=M(),U.c(),h=M(),v=O("div"),f=O("input"),m=O("label"),m.textContent="Только ГИБДД",g=M(),y=O("div"),b=O("input"),j=O("label"),j.textContent="- с мероприятиями",C=M(),L=O("input"),$=O("label"),$.textContent="- без мероприятий",P=M(),G&&G.c(),S(e,"class","pLine svelte-1jsovbn"),S(s,"class","pLine svelte-1jsovbn"),S(a,"type","text"),a.value=t[16],S(a,"class","svelte-1jsovbn"),S(r,"class","pLine svelte-1jsovbn"),S(d,"type","radio"),S(d,"id","d0"),S(d,"name","drone"),d.value="0",d.checked=!0,S(d,"class","svelte-1jsovbn"),S(u,"for","d0"),S(u,"class","svelte-1jsovbn"),S(c,"class","pLine svelte-1jsovbn"),S(f,"type","radio"),S(f,"id","d3"),S(f,"name","drone"),f.value="3",S(f,"class","svelte-1jsovbn"),S(m,"for","d3"),S(m,"class","svelte-1jsovbn"),S(v,"class","pLine svelte-1jsovbn"),S(b,"type","checkbox"),S(b,"id","ev1"),b.checked=k=t[18].ev1,S(b,"name","ev1"),S(b,"class","svelte-1jsovbn"),S(j,"for","ev1"),S(j,"class","svelte-1jsovbn"),S(L,"type","checkbox"),S(L,"id","ev0"),L.checked=w=t[18].ev0,S(L,"name","ev0"),S(L,"class","svelte-1jsovbn"),S($,"for","ev0"),S($,"class","svelte-1jsovbn"),S(y,"class","pLine svelte-1jsovbn"),S(o,"class","filtersCont svelte-1jsovbn")},m(k,w,F){D(k,e,w),D(k,n,w),D(k,s,w),D(k,l,w),D(k,o,w),z(o,r),z(r,i),z(r,a),z(o,p),z(o,c),z(c,d),z(c,u),z(o,_),U.m(o,null),z(o,h),z(o,v),z(v,f),z(v,m),z(o,g),z(o,y),z(y,b),z(y,j),z(y,C),z(y,L),z(y,$),z(o,P),G&&G.m(o,null),F&&x(H),H=[q(a,"input",t[96]),q(d,"click",t[107]),q(f,"click",t[107]),q(b,"change",t[100]),q(L,"change",t[100])]},p(t,e){65536&e[0]&&a.value!==t[16]&&(a.value=t[16]),B===(B=N(t))&&U?U.p(t,e):(U.d(1),U=B(t),U&&(U.c(),U.m(o,h))),262144&e[0]&&k!==(k=t[18].ev1)&&(b.checked=k),262144&e[0]&&w!==(w=t[18].ev0)&&(L.checked=w),t[63].collision_type&&G.p(t,e)},d(t){t&&F(e),t&&F(n),t&&F(s),t&&F(l),t&&F(o),U.d(),G&&G.d(),x(H)}}}function Mn(t){let e,n,s,l,o,r,i,a;return{c(){e=O("div"),n=O("input"),s=O("label"),s.textContent="Только Пересечения",l=M(),o=O("div"),r=O("input"),i=O("label"),i.textContent="Только СКПДИ",S(n,"type","radio"),S(n,"id","d1"),S(n,"name","drone"),n.value="1",S(n,"class","svelte-1jsovbn"),S(s,"for","d1"),S(s,"class","svelte-1jsovbn"),S(e,"class","pLine svelte-1jsovbn"),S(r,"type","radio"),S(r,"id","d2"),S(r,"name","drone"),r.value="2",S(r,"class","svelte-1jsovbn"),S(i,"for","d2"),S(i,"class","svelte-1jsovbn"),S(o,"class","pLine svelte-1jsovbn")},m(p,c,d){D(p,e,c),z(e,n),z(e,s),D(p,l,c),D(p,o,c),z(o,r),z(o,i),d&&x(a),a=[q(n,"click",t[107]),q(r,"click",t[107])]},p:y,d(t){t&&F(e),t&&F(l),t&&F(o),x(a)}}}function $n(t){let e,n,s,l;return{c(){e=O("div"),n=O("input"),s=O("label"),s.textContent="Только Пересечения ГИБДД и СКПДИ",S(n,"type","radio"),S(n,"id","d1"),S(n,"name","drone"),n.value="1",S(n,"class","svelte-1jsovbn"),S(s,"for","d1"),S(s,"class","svelte-1jsovbn"),S(e,"class","pLine svelte-1jsovbn")},m(o,r,i){D(o,e,r),z(e,n),z(e,s),i&&l(),l=q(n,"click",t[107])},p:y,d(t){t&&F(e),l()}}}function qn(t){let e,n,s,l,o,r,i,a,p=t[63].collision_type[t[190]]+"",c=t[190]+"";return{c(){e=O("option"),n=E("("),s=E(p),l=E(") - "),o=E(c),r=M(),e.__value=i=t[190],e.value=e.__value,S(e,"class",a="icon_type_"+t[63].iconType[t[190]]+" svelte-1jsovbn")},m(t,i){D(t,e,i),z(e,n),z(e,s),z(e,l),z(e,o),z(e,r)},p:y,d(t){t&&F(e)}}}function Pn(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f,m,g,y,b=t[65].collision_type&&function(t){let e,n,s,l,o=t[66],r=[];for(let e=0;e<o.length;e+=1)r[e]=Sn(Le(t,o,e));return{c(){e=O("div"),n=O("select"),s=O("option"),s.textContent=`\n\t\t\t\t\t\tВсе типы (${t[66].reduce(t[180],0)})\n\t\t\t\t\t`;for(let t=0;t<r.length;t+=1)r[t].c();s.__value="",s.value=s.__value,S(s,"class","svelte-1jsovbn"),S(n,"class","multiple_icon_type svelte-1jsovbn"),n.multiple=!0,void 0===t[23]&&nt(()=>t[181].call(n)),S(e,"class","pLine svelte-1jsovbn")},m(o,i,a){D(o,e,i),z(e,n),z(n,s);for(let t=0;t<r.length;t+=1)r[t].m(n,null);I(n,t[23]),a&&x(l),l=[q(n,"change",t[181]),q(n,"change",t[106])]},p(t,e){if(24&e[2]){let s;for(o=t[66],s=0;s<o.length;s+=1){const l=Le(t,o,s);r[s]?r[s].p(l,e):(r[s]=Sn(l),r[s].c(),r[s].m(n,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=o.length}8388608&e[0]&&I(n,t[23])},d(t){t&&F(e),T(r,t),x(l)}}}(t);return{c(){e=O("div"),e.innerHTML='<hr class="svelte-1jsovbn">',n=M(),s=O("div"),s.innerHTML="Фильтры - <b>ДТП СКПДИ</b>",l=M(),o=O("div"),r=O("div"),i=E("ID ДТП: "),a=O("input"),p=M(),c=O("div"),d=O("input"),_=O("label"),_.textContent="- с мероприятиями",h=M(),v=O("input"),m=O("label"),m.textContent="- без мероприятий",g=M(),b&&b.c(),S(e,"class","pLine svelte-1jsovbn"),S(s,"class","pLine svelte-1jsovbn"),S(a,"type","text"),a.value=t[16],S(a,"class","svelte-1jsovbn"),S(r,"class","pLine svelte-1jsovbn"),S(d,"type","checkbox"),S(d,"id","ev1"),d.checked=u=t[18].ev1,S(d,"name","ev1"),S(d,"class","svelte-1jsovbn"),S(_,"for","ev1"),S(_,"class","svelte-1jsovbn"),S(v,"type","checkbox"),S(v,"id","ev0"),v.checked=f=t[18].ev0,S(v,"name","ev0"),S(v,"class","svelte-1jsovbn"),S(m,"for","ev0"),S(m,"class","svelte-1jsovbn"),S(c,"class","pLine svelte-1jsovbn"),S(o,"class","filtersCont svelte-1jsovbn")},m(u,f,k){D(u,e,f),D(u,n,f),D(u,s,f),D(u,l,f),D(u,o,f),z(o,r),z(r,i),z(r,a),z(o,p),z(o,c),z(c,d),z(c,_),z(c,h),z(c,v),z(c,m),z(o,g),b&&b.m(o,null),k&&x(y),y=[q(a,"input",t[96]),q(d,"change",t[100]),q(v,"change",t[100])]},p(t,e){65536&e[0]&&a.value!==t[16]&&(a.value=t[16]),262144&e[0]&&u!==(u=t[18].ev1)&&(d.checked=u),262144&e[0]&&f!==(f=t[18].ev0)&&(v.checked=f),t[65].collision_type&&b.p(t,e)},d(t){t&&F(e),t&&F(n),t&&F(s),t&&F(l),t&&F(o),b&&b.d(),x(y)}}}function Sn(t){let e,n,s,l,o,r,i,a,p=t[65].collision_type[t[190]]+"",c=t[190]+"";return{c(){e=O("option"),n=E("("),s=E(p),l=E(") - "),o=E(c),r=M(),e.__value=i=t[190],e.value=e.__value,S(e,"class",a="icon_type_"+t[65].iconType[t[190]]+" svelte-1jsovbn")},m(t,i){D(t,e,i),z(e,n),z(e,s),z(e,l),z(e,o),z(e,r)},p:y,d(t){t&&F(e)}}}function Hn(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f,m,g,y,b,k,j,C,L,w,$,P,H,N=t[67].collision_type&&function(t){let e,n,s,l,o=t[68],r=[];for(let e=0;e<o.length;e+=1)r[e]=Nn(Ce(t,o,e));return{c(){e=O("div"),n=O("select"),s=O("option"),s.textContent=`\n\t\t\t\t\t\tВсе типы (${t[68].reduce(t[182],0)})\n\t\t\t\t\t`;for(let t=0;t<r.length;t+=1)r[t].c();s.__value="",s.value=s.__value,S(s,"class","svelte-1jsovbn"),S(n,"class","multiple_icon_type svelte-1jsovbn"),n.multiple=!0,void 0===t[24]&&nt(()=>t[183].call(n)),S(e,"class","pLine svelte-1jsovbn")},m(o,i,a){D(o,e,i),z(e,n),z(n,s);for(let t=0;t<r.length;t+=1)r[t].m(n,null);I(n,t[24]),a&&x(l),l=[q(n,"change",t[183]),q(n,"change",t[105])]},p(t,e){if(96&e[2]){let s;for(o=t[68],s=0;s<o.length;s+=1){const l=Ce(t,o,s);r[s]?r[s].p(l,e):(r[s]=Nn(l),r[s].c(),r[s].m(n,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=o.length}16777216&e[0]&&I(n,t[24])},d(t){t&&F(e),T(r,t),x(l)}}}(t);return{c(){e=O("div"),e.innerHTML='<hr class="svelte-1jsovbn">',n=M(),s=O("div"),s.innerHTML="Фильтры - <b>ДТП ГИБДД</b>",l=M(),o=O("div"),r=O("div"),i=E("ID ДТП: "),a=O("input"),p=M(),c=O("div"),d=O("input"),_=O("label"),_.textContent="- с батальонами ДПС",h=M(),v=O("input"),m=O("label"),m.textContent="- без батальонов ДПС",g=M(),y=O("div"),b=O("input"),j=O("label"),j.textContent="- с мероприятиями",C=M(),L=O("input"),$=O("label"),$.textContent="- без мероприятий",P=M(),N&&N.c(),S(e,"class","pLine svelte-1jsovbn"),S(s,"class","pLine svelte-1jsovbn"),S(a,"type","text"),a.value=t[16],S(a,"class","svelte-1jsovbn"),S(r,"class","pLine svelte-1jsovbn"),S(d,"type","checkbox"),S(d,"id","Dps1"),d.checked=u=t[17].Dps1,S(d,"name","Dps1"),S(d,"class","svelte-1jsovbn"),S(_,"for","Dps1"),S(_,"class","svelte-1jsovbn"),S(v,"type","checkbox"),S(v,"id","Dps0"),v.checked=f=t[17].Dps0,S(v,"name","Dps0"),S(v,"class","svelte-1jsovbn"),S(m,"for","Dps0"),S(m,"class","svelte-1jsovbn"),S(c,"class","pLine svelte-1jsovbn"),S(b,"type","checkbox"),S(b,"id","ev1"),b.checked=k=t[18].ev1,S(b,"name","ev1"),S(b,"class","svelte-1jsovbn"),S(j,"for","ev1"),S(j,"class","svelte-1jsovbn"),S(L,"type","checkbox"),S(L,"id","ev0"),L.checked=w=t[18].ev0,S(L,"name","ev0"),S(L,"class","svelte-1jsovbn"),S($,"for","ev0"),S($,"class","svelte-1jsovbn"),S(y,"class","pLine svelte-1jsovbn"),S(o,"class","filtersCont svelte-1jsovbn")},m(u,f,k){D(u,e,f),D(u,n,f),D(u,s,f),D(u,l,f),D(u,o,f),z(o,r),z(r,i),z(r,a),z(o,p),z(o,c),z(c,d),z(c,_),z(c,h),z(c,v),z(c,m),z(o,g),z(o,y),z(y,b),z(y,j),z(y,C),z(y,L),z(y,$),z(o,P),N&&N.m(o,null),k&&x(H),H=[q(a,"input",t[96]),q(d,"change",t[99]),q(v,"change",t[99]),q(b,"change",t[100]),q(L,"change",t[100])]},p(t,e){65536&e[0]&&a.value!==t[16]&&(a.value=t[16]),131072&e[0]&&u!==(u=t[17].Dps1)&&(d.checked=u),131072&e[0]&&f!==(f=t[17].Dps0)&&(v.checked=f),262144&e[0]&&k!==(k=t[18].ev1)&&(b.checked=k),262144&e[0]&&w!==(w=t[18].ev0)&&(L.checked=w),t[67].collision_type&&N.p(t,e)},d(t){t&&F(e),t&&F(n),t&&F(s),t&&F(l),t&&F(o),N&&N.d(),x(H)}}}function Nn(t){let e,n,s,l,o,r,i,a,p=t[67].collision_type[t[190]]+"",c=t[190]+"";return{c(){e=O("option"),n=E("("),s=E(p),l=E(") - "),o=E(c),r=M(),e.__value=i=t[190],e.value=e.__value,S(e,"class",a="icon_type_"+t[67].iconType[t[190]]+" svelte-1jsovbn")},m(t,i){D(t,e,i),z(e,n),z(e,s),z(e,l),z(e,o),z(e,r)},p:y,d(t){t&&F(e)}}}function Bn(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f,m,g=t[69].collision_type&&function(t){let e,n,s,l,o=t[70],r=[];for(let e=0;e<o.length;e+=1)r[e]=Un(je(t,o,e));return{c(){e=O("div"),n=O("select"),s=O("option"),s.textContent=`\n\t\t\t\t\t\tВсе типы (${t[70].reduce(t[186],0)})\n\t\t\t\t\t`;for(let t=0;t<r.length;t+=1)r[t].c();s.__value="",s.value=s.__value,S(s,"class","svelte-1jsovbn"),S(n,"class","multiple_icon_type svelte-1jsovbn"),n.multiple=!0,void 0===t[25]&&nt(()=>t[187].call(n)),S(e,"class","pLine svelte-1jsovbn")},m(o,i,a){D(o,e,i),z(e,n),z(n,s);for(let t=0;t<r.length;t+=1)r[t].m(n,null);I(n,t[25]),a&&x(l),l=[q(n,"change",t[187]),q(n,"change",t[104])]},p(t,e){if(384&e[2]){let s;for(o=t[70],s=0;s<o.length;s+=1){const l=je(t,o,s);r[s]?r[s].p(l,e):(r[s]=Un(l),r[s].c(),r[s].m(n,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=o.length}33554432&e[0]&&I(n,t[25])},d(t){t&&F(e),T(r,t),x(l)}}}(t);return{c(){e=O("div"),e.innerHTML='<hr class="svelte-1jsovbn">',n=M(),s=O("div"),s.innerHTML="Фильтры - <b>ДТП ГИБДД + Рубежи</b>",l=M(),o=O("div"),r=E("ID ДТП: "),i=O("input"),a=M(),p=O("div"),c=O("input"),d=O("label"),d.textContent="- с рубежами",u=M(),_=O("input"),h=O("label"),h.textContent="- без рубежей",v=M(),f=O("div"),g&&g.c(),S(e,"class","pLine svelte-1jsovbn"),S(s,"class","pLine svelte-1jsovbn"),S(i,"type","text"),i.value=t[16],S(i,"class","svelte-1jsovbn"),S(o,"class","pLine svelte-1jsovbn"),S(c,"type","checkbox"),S(c,"name","list_rubOn"),S(c,"class","svelte-1jsovbn"),S(d,"for","list_rubOn"),S(d,"class","svelte-1jsovbn"),S(_,"type","checkbox"),S(_,"name","list_rubOff"),S(_,"class","svelte-1jsovbn"),S(h,"for","list_rubOff"),S(h,"class","svelte-1jsovbn"),S(p,"class","pLine svelte-1jsovbn"),S(f,"class","filtersCont svelte-1jsovbn")},m(y,b,k){D(y,e,b),D(y,n,b),D(y,s,b),D(y,l,b),D(y,o,b),z(o,r),z(o,i),D(y,a,b),D(y,p,b),z(p,c),c.checked=t[38],z(p,d),z(p,u),z(p,_),_.checked=t[39],z(p,h),D(y,v,b),D(y,f,b),g&&g.m(f,null),k&&x(m),m=[q(i,"input",t[96]),q(c,"change",t[184]),q(c,"change",t[104]),q(_,"change",t[185]),q(_,"change",t[104])]},p(t,e){65536&e[0]&&i.value!==t[16]&&(i.value=t[16]),128&e[1]&&(c.checked=t[38]),256&e[1]&&(_.checked=t[39]),t[69].collision_type&&g.p(t,e)},d(t){t&&F(e),t&&F(n),t&&F(s),t&&F(l),t&&F(o),t&&F(a),t&&F(p),t&&F(v),t&&F(f),g&&g.d(),x(m)}}}function Un(t){let e,n,s,l,o,r,i,a,p=t[69].collision_type[t[190]]+"",c=t[190]+"";return{c(){e=O("option"),n=E("("),s=E(p),l=E(") - "),o=E(c),r=M(),e.__value=i=t[190],e.value=e.__value,S(e,"class",a="icon_type_"+t[69].iconType[t[190]]+" svelte-1jsovbn")},m(t,i){D(t,e,i),z(e,n),z(e,s),z(e,l),z(e,o),z(e,r)},p:y,d(t){t&&F(e)}}}function In(t){let e,n,s,l,o,r,i,a,p,c,d,u;return{c(){e=O("div"),e.innerHTML='<hr class="svelte-1jsovbn">',n=M(),s=O("div"),s.innerHTML="Фильтры - <b>Рубежей</b>",l=M(),o=O("div"),r=O("div"),i=O("input"),a=O("label"),a.textContent="- есть комплексы",p=M(),c=O("input"),d=O("label"),d.textContent="-  нет комплексов",S(e,"class","pLine svelte-1jsovbn"),S(s,"class","pLine svelte-1jsovbn"),S(i,"type","checkbox"),S(i,"name","comp1"),S(i,"class","svelte-1jsovbn"),S(a,"for","comp1"),S(a,"class","svelte-1jsovbn"),S(c,"type","checkbox"),S(c,"name","comp"),S(c,"class","svelte-1jsovbn"),S(d,"for","comp"),S(d,"class","svelte-1jsovbn"),S(r,"class","pLine svelte-1jsovbn"),S(o,"class","filtersCont")},m(_,h,v){D(_,e,h),D(_,n,h),D(_,s,h),D(_,l,h),D(_,o,h),z(o,r),z(r,i),i.checked=t[30],z(r,a),z(r,p),z(r,c),c.checked=t[31],z(r,d),v&&x(u),u=[q(i,"change",t[188]),q(i,"change",t[91]),q(c,"change",t[189]),q(c,"change",t[91])]},p(t,e){1073741824&e[0]&&(i.checked=t[30]),1&e[1]&&(c.checked=t[31])},d(t){t&&F(e),t&&F(n),t&&F(s),t&&F(l),t&&F(o),x(u)}}}function Gn(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f=t[0]._map&&t[0]._opt&&t[0]._opt.years&&Ke(t),m=t[1]._map&&t[1]._opt&&t[1]._opt.years&&Qe(t),g=t[2]._map&&t[2]._opt&&t[2]._opt.years&&nn(t),b=t[3]._map&&t[3]._opt&&t[3]._opt.years&&on(t),k=t[4]._map&&t[4]._opt&&t[4]._opt.years&&pn(t),x=t[11]._map&&t[11]._opt&&t[11]._opt.years&&un(t),j=t[12]._map&&t[12]._opt&&t[12]._opt.years&&mn(t),C=t[13]._map&&t[13]._opt&&t[13]._opt.years&&xn(t);function L(t,e){return t[5]._map||t[6]._map||t[7]._map||t[8]._map||t[10]._map?Dn:t[10]._map||t[1]._map||t[13]._map||t[11]._map||t[12]._map||t[0]._map||t[2]._map||t[4]._map||t[3]._map||t[9]._map?void 0:zn}let w=L(t),T=w&&w(t),E=t[10]._map&&Tn(t),$=t[5]._map&&En(t),q=t[6]._map&&Pn(t),P=t[7]._map&&Hn(t),H=t[8]._map&&Bn(t),N=t[9]._map&&In(t);return{c(){e=O("div"),f&&f.c(),n=M(),m&&m.c(),s=M(),g&&g.c(),l=M(),b&&b.c(),o=M(),k&&k.c(),r=M(),x&&x.c(),i=M(),j&&j.c(),a=M(),C&&C.c(),p=M(),T&&T.c(),c=M(),E&&E.c(),d=M(),$&&$.c(),u=M(),q&&q.c(),_=M(),P&&P.c(),h=M(),H&&H.c(),v=M(),N&&N.c(),S(e,"class","mvsFilters")},m(t,y){D(t,e,y),f&&f.m(e,null),z(e,n),m&&m.m(e,null),z(e,s),g&&g.m(e,null),z(e,l),b&&b.m(e,null),z(e,o),k&&k.m(e,null),z(e,r),x&&x.m(e,null),z(e,i),j&&j.m(e,null),z(e,a),C&&C.m(e,null),z(e,p),T&&T.m(e,null),z(e,c),E&&E.m(e,null),z(e,d),$&&$.m(e,null),z(e,u),q&&q.m(e,null),z(e,_),P&&P.m(e,null),z(e,h),H&&H.m(e,null),z(e,v),N&&N.m(e,null)},p(t,y){t[0]._map&&t[0]._opt&&t[0]._opt.years?f?f.p(t,y):(f=Ke(t),f.c(),f.m(e,n)):f&&(f.d(1),f=null),t[1]._map&&t[1]._opt&&t[1]._opt.years?m?m.p(t,y):(m=Qe(t),m.c(),m.m(e,s)):m&&(m.d(1),m=null),t[2]._map&&t[2]._opt&&t[2]._opt.years?g?g.p(t,y):(g=nn(t),g.c(),g.m(e,l)):g&&(g.d(1),g=null),t[3]._map&&t[3]._opt&&t[3]._opt.years?b?b.p(t,y):(b=on(t),b.c(),b.m(e,o)):b&&(b.d(1),b=null),t[4]._map&&t[4]._opt&&t[4]._opt.years?k?k.p(t,y):(k=pn(t),k.c(),k.m(e,r)):k&&(k.d(1),k=null),t[11]._map&&t[11]._opt&&t[11]._opt.years?x?x.p(t,y):(x=un(t),x.c(),x.m(e,i)):x&&(x.d(1),x=null),t[12]._map&&t[12]._opt&&t[12]._opt.years?j?j.p(t,y):(j=mn(t),j.c(),j.m(e,a)):j&&(j.d(1),j=null),t[13]._map&&t[13]._opt&&t[13]._opt.years?C?C.p(t,y):(C=xn(t),C.c(),C.m(e,p)):C&&(C.d(1),C=null),w===(w=L(t))&&T?T.p(t,y):(T&&T.d(1),T=w&&w(t),T&&(T.c(),T.m(e,c))),t[10]._map?E?E.p(t,y):(E=Tn(t),E.c(),E.m(e,d)):E&&(E.d(1),E=null),t[5]._map?$?$.p(t,y):($=En(t),$.c(),$.m(e,u)):$&&($.d(1),$=null),t[6]._map?q?q.p(t,y):(q=Pn(t),q.c(),q.m(e,_)):q&&(q.d(1),q=null),t[7]._map?P?P.p(t,y):(P=Hn(t),P.c(),P.m(e,h)):P&&(P.d(1),P=null),t[8]._map?H?H.p(t,y):(H=Bn(t),H.c(),H.m(e,v)):H&&(H.d(1),H=null),t[9]._map?N?N.p(t,y):(N=In(t),N.c(),N.m(e,null)):N&&(N.d(1),N=null)},i:y,o:y,d(t){t&&F(e),f&&f.d(),m&&m.d(),g&&g.d(),b&&b.d(),k&&k.d(),x&&x.d(),j&&j.d(),C&&C.d(),T&&T.d(),E&&E.d(),$&&$.d(),q&&q.d(),P&&P.d(),H&&H.d(),N&&N.d()}}}function An(t,e,n){let{DtpHearthsPicket4:s}=e,{DtpHearthsSettlements:l}=e,{DtpHearthsPicket:o}=e,{DtpHearths5:r}=e,{DtpHearths3:i}=e,{DtpHearthsStat:a}=e,{DtpHearthsTmp:p}=e,{DtpHearths:c}=e,{DtpVerifyed:d}=e,{DtpSkpdi:u}=e,{DtpGibdd:_}=e,{DtpGibddRub:h}=e,{Rub:v}=e,{Measures:f}=e,{control:m}=e;f||(f={}),v||(v={}),h||(h={}),s||(s={}),o||(o={}),l||(l={}),r||(r={}),i||(i={});let g,y,b=0;const k=new Date,x=new Date(new Date(k.getFullYear(),k.getMonth(),k.getDate()).getTime()),j=k,C=new Date(2019,0,1);let w,z,D,F=m._id_dtp||null,T=m._dateInterval||[C.getTime()/1e3,j.getTime()/1e3],O=d._opt||{},E=O.collision_type?Object.keys(O.collision_type).sort((t,e)=>O.collision_type[e]-O.collision_type[t]):[],M=u._opt||{},$=M.collision_type?Object.keys(M.collision_type).sort((t,e)=>M.collision_type[e]-M.collision_type[t]):[],q=_._opt||{},P=q.collision_type?Object.keys(q.collision_type).sort((t,e)=>q.collision_type[e]-q.collision_type[t]):[],S={Dps1:!0,Dps0:!0},N={ev1:!0,ev0:!0},B=(h||{})._opt||{},U=B.collision_type?Object.keys(B.collision_type).sort((t,e)=>B.collision_type[e]-B.collision_type[t]):[],I=(c||{})._opt||{},R=I.str_icon_type?Object.keys(I.str_icon_type).sort((t,e)=>I.str_icon_type[e]-I.str_icon_type[t]):[],Z=(p||{})._opt||{},V=Z.str_icon_type?Object.keys(Z.str_icon_type).sort((t,e)=>Z.str_icon_type[e]-Z.str_icon_type[t]):[],W=(a||{})._opt||{},K=W.str_icon_type?Object.keys(W.str_icon_type).sort((t,e)=>W.str_icon_type[e]-W.str_icon_type[t]):[],X=(i||{})._opt||{},Q=X.str_icon_type?Object.keys(X.str_icon_type).sort((t,e)=>X.str_icon_type[e]-X.str_icon_type[t]):[],tt=(r||{})._opt||{},et=tt.str_icon_type?Object.keys(tt.str_icon_type).sort((t,e)=>tt.str_icon_type[e]-tt.str_icon_type[t]):[],nt=(l||{})._opt||{},st=nt.road?Object.keys(nt.road).sort((t,e)=>nt.road[e]-nt.road[t]):[],lt=(o||{})._opt||{},ot=lt.road?Object.keys(lt.road).sort((t,e)=>lt.road[e]-lt.road[t]):[],rt=(s||{})._opt||{},it=rt.road?Object.keys(rt.road).sort((t,e)=>rt.road[e]-rt.road[t]):[],at=f._opt||{},pt=at.type?Object.keys(at.type).sort((t,e)=>at.type[e]-at.type[t]):[],ct=[""],dt={hearth3:!0,hearth5:!0},ut=null,_t=[""],ht=[""],vt=[""],ft=[""],mt={radius:19,blur:11.26,minOpacity:.34},gt=mt.radius,yt=11.26,bt=.34,kt=v&&v._argFilters?v._argFilters[0]:{type:"comp",zn:{on:!0,off:!0}},xt=kt.zn.on,jt=kt.zn.off,Ct=[];const Lt=()=>{if(f._map){let t=[];Ct.length&&t.push({type:"measures_type",zn:Ct}),T&&t.push({type:"date",zn:T}),f.setFilter(t)}};let wt,zt={};Object.keys(nt.years||{}).sort().forEach(t=>{n(33,zt[t]=!0,zt)});const Dt=t=>{if(l._map){if(t){let e=t.target||{},s=e.checked,l=e.id,o=e.name;"stricken"!==l&&n(33,zt[o]=s,zt)}let e=[{type:"year",zn:zt}];wt&&e.push({type:"id_city",zn:wt}),F&&e.push({type:"id_dtp",zn:F}),ut&&e.push({type:"id_hearth",zn:ut}),ct&&e.push({type:"roads",zn:ct}),e.push({type:"ht",zn:dt}),l.setFilter(e)}};let Ft={};Object.keys(lt.years||{}).sort().forEach(t=>{n(35,Ft[t]=!0,Ft)});const Tt=t=>{if(o._map){if(t){let e=t.target||{},s=e.checked,l=e.id,o=e.name;"stricken"!==l&&n(35,Ft[o]=s,Ft)}let e=[{type:"year",zn:Ft}];F&&e.push({type:"id_dtp",zn:F}),ut&&e.push({type:"id_hearth",zn:ut}),ct&&e.push({type:"roads",zn:ct}),e.push({type:"ht",zn:dt}),o.setFilter(e)}};let Ot,Et={};Object.keys(rt.years||{}).sort().forEach(t=>{n(37,Et[t]=!0,Et)});const Mt=t=>{if(s._map){if(t){let e=t.target||{},s=e.checked,l=e.id,o=e.name;"stricken"!==l&&n(37,Et[o]=s,Et)}let e=[];F&&e.push({type:"id_dtp",zn:F}),Ot&&e.push({type:"stricken",zn:Number(Ot)}),1===re&&e.push({type:"year",zn:Et}),ut&&e.push({type:"id_hearth",zn:ut}),ct&&e.push({type:"roads",zn:ct}),e.push({type:"ht",zn:dt}),s.setFilter(e)}},$t=()=>{Mt(),Dt(),Tt(),Wt({}),ne({}),je({}),fe({}),pe({}),Ut(),Bt(),Nt(),Lt(),qt()},qt=()=>{if(d._map){let t=[{type:"evnt",zn:N},{type:"itemType",zn:b}];F&&t.push({type:"id_dtp",zn:F}),T&&(n(115,m._dateInterval=T,m),t.push({type:"date",zn:T})),_t&&t.push({type:"collision_type",zn:_t}),d.setFilter(t)}};let Pt=h._argFilters&&h._argFilters.length?h._argFilters[0]:{type:"list_rub",zn:{on:!0,off:!0}},St=Pt.zn.on,Ht=Pt.zn.off;const Nt=()=>{if(h._map){let t=[{type:"list_rub",zn:{on:St,off:Ht}}];F&&t.push({type:"id_dtp",zn:F}),T&&t.push({type:"date",zn:T}),ft&&t.push({type:"collision_type",zn:ft}),h.setFilter(t)}},Bt=()=>{if(_._map){let t=[{type:"dps",zn:S},{type:"evnt",zn:N}];F&&t.push({type:"id_dtp",zn:F}),T&&t.push({type:"date",zn:T}),vt&&t.push({type:"collision_type",zn:vt}),_.setFilter(t)}},Ut=()=>{if(u._map){let t=[{type:"evnt",zn:N}];F&&t.push({type:"id_dtp",zn:F}),T&&t.push({type:"date",zn:T}),ht&&t.push({type:"collision_type",zn:ht}),u.setFilter(t)}};var It;It=()=>{let t={onSelect(t){this._o.field.value=this.toString(),T[this._o._dint]=this.getDate().getTime()/1e3+24*this._o._dint*60*60,qt(),Ut(),Bt(),Lt(),Nt()},toString(t,e){let n=t.getDate();n<10&&(n="0"+n);let s=t.getMonth()+1;return s<10&&(s="0"+s),`${n}.${s}.${t.getFullYear()}`},parse(t,e){const n=t.split("."),s=parseInt(n[0],10),l=parseInt(n[1],10)-1,o=parseInt(n[2],10);return new Date(o,l,s)},i18n:{previousMonth:"Предыдущий месяц",nextMonth:"Следующий месяц",months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],weekdays:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],weekdaysShort:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]},format:"DD.MM.YYYY",setDefaultDate:!0,yearRange:20,blurFieldOnSelect:!1};w=new Pikaday(L.extend({},t,{_dint:0,field:g,defaultDate:new Date(1e3*T[0])})),z=new Pikaday(L.extend({},t,{_dint:1,field:y,defaultDate:new Date(1e3*T[1])})),$t()},Y().$$.on_mount.push(It);let Gt,At,Rt=[""],Zt=1,Yt={},Vt={};Object.keys(tt.years||{}).sort().forEach(t=>{n(43,Yt[t]=!0,Yt),Object.keys(tt.years[t]).sort().forEach(e=>{At={},At[t]={},At[t][e]=!0})}),Vt=At||{};const Wt=t=>{if(r._map){let e=[],s=t.target||{},l=s.checked,o=s.id,i=s.name;if("hearths_period_type_52"===o)n(42,Zt=2);else if("hearths_period_type_51"===o)n(42,Zt=1);else if("hearths_year_5"===o)l?n(43,Yt[i]=!0,Yt):delete Yt[i];else if("hearths_quarter_5"===o){let t=i.split("_");l?(Vt[t[0]]||(Vt[t[0]]={}),Vt[t[0]][t[1]]=!0):(Vt[t[0]]&&delete Vt[t[0]][t[1]],0===Object.keys(Vt[t[0]]).length&&delete Vt[t[0]])}1===Zt?e.push({type:"year",zn:Yt}):2===Zt&&e.push({type:"quarter",zn:Vt}),Gt&&e.push({type:"stricken",zn:Number(Gt)}),Rt.length>0&&Rt[0]&&e.push({type:"str_icon_type",zn:Rt}),F&&e.push({type:"id_dtp",zn:F}),r.setFilter(e)}};let Kt,Jt,Xt=[""],Qt=1,te={},ee={};Object.keys(X.years||{}).sort().forEach(t=>{n(47,te[t]=!0,te),Object.keys(X.years[t]).sort().forEach(e=>{Jt={},Jt[t]={},Jt[t][e]=!0})}),ee=Jt||{};const ne=t=>{if(i._map){let e=[],s=t.target||{},l=s.checked,o=s.id,r=s.name;if("hearths_period_type_32"===o)n(46,Qt=2);else if("hearths_period_type_31"===o)n(46,Qt=1);else if("hearths_year_3"===o)l?n(47,te[r]=!0,te):delete te[r];else if("hearths_quarter_3"===o){let t=r.split("_");l?(ee[t[0]]||(ee[t[0]]={}),ee[t[0]][t[1]]=!0):(ee[t[0]]&&delete ee[t[0]][t[1]],0===Object.keys(ee[t[0]]).length&&delete ee[t[0]])}1===Qt?e.push({type:"year",zn:te}):2===Qt&&e.push({type:"quarter",zn:ee}),Kt&&e.push({type:"stricken",zn:Number(Kt)}),Xt.length>0&&Xt[0]&&e.push({type:"str_icon_type",zn:Xt}),F&&e.push({type:"id_dtp",zn:F}),i.setFilter(e)}};let se,le,oe=[""],re=1,ie={},ae={};Object.keys(W.years||{}).sort().forEach(t=>{n(51,ie[t]=!0,ie),Object.keys(W.years[t]).sort().forEach(e=>{le={},le[t]={},le[t][e]=!0})}),ae=le||{};const pe=t=>{if(a._map){let e=[],s=t.target||{},l=s.checked,o=s.id,r=s.name;if("hearths_period_type_Stat2"===o)n(50,re=2);else if("hearths_period_type_Stat1"===o)n(50,re=1);else if("hearths_year_Stat"===o)l?n(51,ie[r]=!0,ie):delete ie[r];else if("hearths_quarter_Stat"===o){let t=r.split("_");l?(ae[t[0]]||n(52,ae[t[0]]={},ae),n(52,ae[t[0]][t[1]]=!0,ae)):(ae[t[0]]&&delete ae[t[0]][t[1]],0===Object.keys(ae[t[0]]).length&&delete ae[t[0]])}1===re?e.push({type:"year",zn:ie}):2===re&&e.push({type:"quarter",zn:ae}),se&&e.push({type:"stricken",zn:Number(se)}),oe.length>0&&oe[0]&&e.push({type:"str_icon_type",zn:oe}),F&&e.push({type:"id_dtp",zn:F}),a.setFilter(e)}};let ce,de,ue=[""],_e=1,he={},ve={};Object.keys(Z.years||{}).sort().forEach(t=>{n(56,he[t]=!0,he),Object.keys(Z.years[t]).sort().forEach(e=>{de={},de[t]={},de[t][e]=!0})}),ve=de||{};const fe=t=>{if(p._map){let e=[],s=t.target||{},l=s.checked,o=s.id,r=s.name;if("hearths_period_type_tmp2"===o)n(55,_e=2);else if("hearths_period_type_tmp1"===o)n(55,_e=1);else if("hearths_year_tmp"===o)l?n(56,he[r]=!0,he):delete he[r];else if("hearths_quarter_tmp"===o){let t=r.split("_");l?(ve[t[0]]||n(57,ve[t[0]]={},ve),n(57,ve[t[0]][t[1]]=!0,ve)):(ve[t[0]]&&delete ve[t[0]][t[1]],0===Object.keys(ve[t[0]]).length&&delete ve[t[0]])}1===_e?e.push({type:"year",zn:he}):2===_e&&e.push({type:"quarter",zn:ve}),ce&&e.push({type:"stricken",zn:Number(ce)}),ue.length>0&&ue[0]&&e.push({type:"str_icon_type",zn:ue}),F&&e.push({type:"id_dtp",zn:F}),p.setFilter(e)}};let me,ge,ye=[""],be=1,ke={},xe={};Object.keys(I.years||{}).sort().forEach(t=>{n(61,ke[t]=!0,ke),Object.keys(I.years[t]).sort().forEach(e=>{ge={},ge[t]={},ge[t][e]=!0})}),xe=ge||{};const je=t=>{if(c._map){let e=[],s=t.target||{},l=s.checked,o=s.id,r=s.name;if("hearths_period_type2"===o)n(60,be=2);else if("hearths_period_type1"===o)n(60,be=1);else if("hearths_year"===o)l?n(61,ke[r]=!0,ke):delete ke[r];else if("hearths_quarter"===o){let t=r.split("_");l?(xe[t[0]]||n(62,xe[t[0]]={},xe),n(62,xe[t[0]][t[1]]=!0,xe)):(xe[t[0]]&&delete xe[t[0]][t[1]],0===Object.keys(xe[t[0]]).length&&delete xe[t[0]])}1===be?e.push({type:"year",zn:ke}):2===be&&e.push({type:"quarter",zn:xe}),me&&e.push({type:"stricken",zn:Number(me)}),ye.length>0&&ye[0]&&e.push({type:"str_icon_type",zn:ye}),F&&e.push({type:"id_dtp",zn:F}),c.setFilter(e)}};return t.$set=t=>{"DtpHearthsPicket4"in t&&n(0,s=t.DtpHearthsPicket4),"DtpHearthsSettlements"in t&&n(1,l=t.DtpHearthsSettlements),"DtpHearthsPicket"in t&&n(2,o=t.DtpHearthsPicket),"DtpHearths5"in t&&n(3,r=t.DtpHearths5),"DtpHearths3"in t&&n(4,i=t.DtpHearths3),"DtpHearthsStat"in t&&n(11,a=t.DtpHearthsStat),"DtpHearthsTmp"in t&&n(12,p=t.DtpHearthsTmp),"DtpHearths"in t&&n(13,c=t.DtpHearths),"DtpVerifyed"in t&&n(5,d=t.DtpVerifyed),"DtpSkpdi"in t&&n(6,u=t.DtpSkpdi),"DtpGibdd"in t&&n(7,_=t.DtpGibdd),"DtpGibddRub"in t&&n(8,h=t.DtpGibddRub),"Rub"in t&&n(9,v=t.Rub),"Measures"in t&&n(10,f=t.Measures),"control"in t&&n(115,m=t.control)},[s,l,o,r,i,d,u,_,h,v,f,a,p,c,g,y,F,S,N,ct,dt,ut,_t,ht,vt,ft,gt,yt,bt,D,xt,jt,Ct,zt,wt,Ft,Ot,Et,St,Ht,Gt,Rt,Zt,Yt,Kt,Xt,Qt,te,se,oe,re,ie,ae,ce,ue,_e,he,ve,me,ye,be,ke,xe,O,E,M,$,q,P,B,U,I,R,Z,V,W,K,X,Q,tt,et,nt,st,lt,ot,rt,it,at,pt,mt,Lt,t=>{let e=[{type:"comp",zn:{on:xt,off:jt}}];v.setFilter(e)},Dt,Tt,Mt,t=>{let e=t.target.value;n(34,wt=e||null),n(115,m._id_city=wt,m),$t()},t=>{let e=t.target.value;n(16,F=e||null),n(115,m._id_dtp=F,m),$t()},t=>{let e=t.target.value;n(21,ut=e||null),Dt(),Tt(),Mt()},t=>{let e=t.target;n(20,dt[e.name]=e.checked,dt),Dt(),Tt(),Mt()},t=>{let e=t.target;n(17,S[e.name]=e.checked,S),Bt()},t=>{let e=t.target;n(18,N[e.name]=e.checked,N),Bt(),Ut(),qt()},t=>{let e=t.target;n(8,h._needHeat=n(7,_._needHeat=n(6,u._needHeat=n(5,d._needHeat=!!e.checked&&mt,d),u),_),h),Nt(),Bt(),Ut(),qt()},()=>{let t={radius:gt,blur:yt,minOpacity:bt};_._heat&&_._heat.setOptions(t),u._heat&&u._heat.setOptions(t),d._heat&&d._heat.setOptions(t)},qt,Nt,Bt,Ut,t=>{let e=t.target;b=Number(e.value),qt()},()=>{let t=z.getDate(),e=w.getDate(),n=t-e;0===n&&(n=864e5),w.setDate(new Date(e.getTime()-n)),z.setDate(new Date(t.getTime()-n)),T=[w.getDate().getTime()/1e3,86400+z.getDate().getTime()/1e3],qt(),Ut(),Bt(),Nt()},()=>{let t=z.getDate(),e=w.getDate(),n=t-e;0===n&&(n=864e5),w.setDate(new Date(e.getTime()+n)),z.setDate(new Date(t.getTime()+n)),T=[w.getDate().getTime()/1e3,86400+z.getDate().getTime()/1e3],qt(),Ut(),Bt(),Nt()},Wt,ne,pe,fe,je,m,b,T,w,z,Vt,At,ee,Jt,le,de,ge,k,x,j,C,void 0,void 0,void 0,void 0,kt,$t,Pt,function(){re=this.__value,n(50,re)},[[],[],[],[],[]],(t,e)=>t+=rt.road[e],function(){ct=A(this),n(19,ct),n(86,it)},function(){Ot=G(this),n(36,Ot)},(t,e)=>t+=nt.road[e],function(){ct=A(this),n(19,ct),n(86,it)},(t,e)=>t+=lt.road[e],function(){ct=A(this),n(19,ct),n(86,it)},function(){Zt=this.__value,n(42,Zt)},(t,e)=>t+=tt.str_icon_type[e],function(){Rt=A(this),n(41,Rt),n(80,et)},function(){Gt=G(this),n(40,Gt)},function(){Qt=this.__value,n(46,Qt)},(t,e)=>t+=X.str_icon_type[e],function(){Xt=A(this),n(45,Xt),n(78,Q)},function(){Kt=G(this),n(44,Kt)},function(){re=this.__value,n(50,re)},function(){re=this.__value,n(50,re)},(t,e)=>t+=W.str_icon_type[e],function(){oe=A(this),n(49,oe),n(76,K)},function(){se=G(this),n(48,se)},function(){_e=this.__value,n(55,_e)},function(){_e=this.__value,n(55,_e)},(t,e)=>t+=Z.str_icon_type[e],function(){ue=A(this),n(54,ue),n(74,V)},function(){ce=G(this),n(53,ce)},function(){be=this.__value,n(60,be)},function(){be=this.__value,n(60,be)},(t,e)=>t+=I.str_icon_type[e],function(){ye=A(this),n(59,ye),n(72,R)},function(){me=G(this),n(58,me)},function(t){J[t?"unshift":"push"](()=>{n(14,g=t)})},function(t){J[t?"unshift":"push"](()=>{n(15,y=t)})},function(){bt=H(this.value),n(28,bt)},function(){gt=H(this.value),n(26,gt)},function(){yt=H(this.value),n(27,yt)},function(t){J[t?"unshift":"push"](()=>{n(29,D=t)})},(t,e)=>t+=at.type[e],function(){Ct=A(this),n(32,Ct),n(88,pt)},(t,e)=>t+=O.collision_type[e],function(){_t=A(this),n(22,_t),n(64,E)},(t,e)=>t+=M.collision_type[e],function(){ht=A(this),n(23,ht),n(66,$)},(t,e)=>t+=q.collision_type[e],function(){vt=A(this),n(24,vt),n(68,P)},function(){St=this.checked,n(38,St)},function(){Ht=this.checked,n(39,Ht)},(t,e)=>t+=B.collision_type[e],function(){ft=A(this),n(25,ft),n(70,U)},function(){xt=this.checked,n(30,xt)},function(){jt=this.checked,n(31,jt)}]}xe._needHeat={radius:19,blur:11.26,minOpacity:.34},xe.checkZoom=t=>{Object.keys(xe._layers).length?t<12&&xe.setFilter(ke):t>11&&xe.setFilter(ke)},xe.setFilter=t=>{if(!xe._map)return;xe.clearLayers(),ke=t||[];let e=[],n=[];xe._group&&xe._map&&(xe._group.getLayers().forEach(t=>{let s=t.options.props,l=0;ke.forEach(t=>{"itemType"===t.type?(0===t.zn||1===t.zn&&s.id_stat&&s.id_skpdi||2===t.zn&&s.id_skpdi&&!s.id_stat||3===t.zn&&s.id_stat&&!s.id_skpdi)&&l++:"evnt"===t.type?s.event?t.zn.ev1&&l++:t.zn.ev0&&l++:"id_dtp"===t.type?s.id_skpdi!=t.zn&&s.id_stat!=t.zn||l++:"collision_type"===t.type?(""===t.zn[0]||t.zn.filter(t=>t===s.collision_type).length)&&l++:"date"===t.type&&s.date>=t.zn[0]&&s.date<t.zn[1]&&l++}),l===ke.length&&(e.push(t),n.push(t._latlng))}),xe._needHeat?(xe._map.addLayer(xe._heat),xe._heat.setLatLngs(n),xe._heat.setOptions(xe._needHeat),xe._map._zoom>11&&xe.addLayer(ye.layerGroup(e))):(xe.addLayer(ye.layerGroup(e)),xe._map.removeLayer(xe._heat)))},xe.on("remove",()=>{xe._map.removeLayer(xe._heat),xe.clearLayers()}).on("add",t=>{ke=[],xe._heat=ye.heatLayer([],{interactive:!1}),fetch("https://dtp.mvs.group/scripts/index_dev.php?request=get_collision",{}).then(t=>t.json()).then(t=>{let e={collision_type:{},iconType:{},event:{}},n=[],s=t.map(t=>{let s=t.iconType||0,l=[],o=!1,r="#2F4F4F";s&&(o=s%2==0,s>=1&&s<=6?r="#8B4513":7===s||8===s?r="#228B22":s>=9&&s<=14?r="#8B4513":15===s||16===s?r="#7B68EE":17!==s&&18!==s||(r="#2F4F4F")),t.id_skpdi&&l.push({type:"skpdi",id:t.id_skpdi}),t.id_stat&&l.push({type:"gibdd",id:t.id_stat}),t._cur=l,t.lat&&t.lon||(console.log("_______",t),t.lat=t.lon=0);let i=e.event[t.event];i?i++:i=1,e.event[t.event]=i;let a=e.collision_type[t.collision_type];a?a++:a=1,e.collision_type[t.collision_type]=a,e.iconType[t.collision_type]=s;let p=ye.latLng(t.lat,t.lon,o?1:.5);return n.push(p),new g(p,{props:t,radius:6,triangle:l.length>1,box:!!t.id_skpdi,stroke:o,fillColor:r}).bindPopup(be).on("popupopen",t=>{!function(t){let e=ye.DomUtil.create("div");new ge({target:e,props:{prp:t}}),be.setContent(e)}(t.target.options.props)}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})});xe.addLayer(xe._heat),xe._heat.setLatLngs(n),xe._heat.setOptions(xe._needHeat),xe._opt=e,xe._group=ye.layerGroup(s),ke?xe.setFilter(ke):xe.addLayer(xe._group),xe.checkZoom(xe._map._zoom),xe._refreshFilters()})});class Rn extends gt{constructor(t){super(),mt(this,t,An,Gn,C,{DtpHearthsPicket4:0,DtpHearthsSettlements:1,DtpHearthsPicket:2,DtpHearths5:3,DtpHearths3:4,DtpHearthsStat:11,DtpHearthsTmp:12,DtpHearths:13,DtpVerifyed:5,DtpSkpdi:6,DtpGibdd:7,DtpGibddRub:8,Rub:9,Measures:10,control:115},[-1,-1,-1,-1,-1,-1,-1,-1])}}function Zn(t,e,n){const s=t.slice();return s[8]=e[n],s[10]=n,s}function Yn(t){let e,n,s,l,o,r,i,a,p,c,d,u=(t[0].piketaj_start_km||0)+"",_=(t[0].piketaj_finish_km||0)+"";return{c(){e=O("tr"),n=O("td"),n.textContent="Пикетаж:",s=M(),l=O("td"),o=E("От: "),r=O("b"),i=E(u),a=E(" км. до: "),p=O("b"),c=E(_),d=E(" км."),S(n,"class","first svelte-mnr9l0")},m(t,u){D(t,e,u),z(e,n),z(e,s),z(e,l),z(l,o),z(l,r),z(r,i),z(l,a),z(l,p),z(p,c),z(l,d)},p(t,e){1&e&&u!==(u=(t[0].piketaj_start_km||0)+"")&&N(i,u),1&e&&_!==(_=(t[0].piketaj_finish_km||0)+"")&&N(c,_)},d(t){t&&F(e)}}}function Vn(t){let e,n,s,l,o,r=(t[0].str_icon_type||"")+"";return{c(){e=O("tr"),n=O("td"),n.textContent="Тип ДТП:",s=M(),l=O("td"),o=E(r),S(n,"class","first svelte-mnr9l0")},m(t,r){D(t,e,r),z(e,n),z(e,s),z(e,l),z(l,o)},p(t,e){1&e&&r!==(r=(t[0].str_icon_type||"")+"")&&N(o,r)},d(t){t&&F(e)}}}function Wn(t){let e,n;const s=new ge({props:{prp:t[8],closeMe:t[7]}});return{c(){e=O("div"),_t(s.$$.fragment),S(e,"class","win leaflet-popup-content-wrapper  svelte-mnr9l0")},m(t,l){D(t,e,l),ht(s,e,null),n=!0},p(t,e){const n={};1&e&&(n.prp=t[8]),4&e&&(n.closeMe=t[7]),s.$set(n)},i(t){n||(dt(s.$$.fragment,t),n=!0)},o(t){ut(s.$$.fragment,t),n=!1},d(t){t&&F(e),vt(s)}}}function Kn(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f,m,g,y,b,k,j,C,L,w,T,$,P,H,B=Math.floor(t[8].piketaj_m/1e3)+"",U=t[8].piketaj_m%1e3+"",I=new Date(1e3*t[8].date).toLocaleDateString()+"",G=t[8].lost+"",A=t[8].stricken+"",R=t[8].address+"";function Z(...e){return t[5](t[10],...e)}function Y(...e){return t[6](t[10],...e)}let V=t[2]===t[10]&&Wn(t);return{c(){e=O("tr"),n=O("td"),s=O("ul"),l=O("li"),o=E("Пикетаж: "),r=E(B),i=E(" км. "),a=E(U),p=E(" м."),c=M(),d=O("li"),u=E(I),_=E(" погибших "),h=E(G),v=E(", раненых "),f=E(A),g=M(),y=O("tr"),b=O("td"),b.textContent="Адрес:",k=M(),j=O("td"),C=E(R),L=O("br"),w=O("span"),w.textContent="подробнее",T=M(),V&&V.c(),$=M(),S(l,"class","svelte-mnr9l0"),S(d,"title",m="id: "+t[8].id),S(d,"class","svelte-mnr9l0"),S(n,"class","first svelte-mnr9l0"),S(n,"colspan","2"),S(b,"class","first svelte-mnr9l0"),S(w,"class","link svelte-mnr9l0")},m(t,m,F){D(t,e,m),z(e,n),z(n,s),z(s,l),z(l,o),z(l,r),z(l,i),z(l,a),z(l,p),z(s,c),z(s,d),z(d,u),z(d,_),z(d,h),z(d,v),z(d,f),D(t,g,m),D(t,y,m),z(y,b),z(y,k),z(y,j),z(j,C),z(j,L),z(j,w),z(j,T),V&&V.m(j,null),z(y,$),P=!0,F&&x(H),H=[q(d,"click",Z),q(w,"click",Y)]},p(e,n){t=e,(!P||1&n)&&B!==(B=Math.floor(t[8].piketaj_m/1e3)+"")&&N(r,B),(!P||1&n)&&U!==(U=t[8].piketaj_m%1e3+"")&&N(a,U),(!P||1&n)&&I!==(I=new Date(1e3*t[8].date).toLocaleDateString()+"")&&N(u,I),(!P||1&n)&&G!==(G=t[8].lost+"")&&N(h,G),(!P||1&n)&&A!==(A=t[8].stricken+"")&&N(f,A),(!P||1&n&&m!==(m="id: "+t[8].id))&&S(d,"title",m),(!P||1&n)&&R!==(R=t[8].address+"")&&N(C,R),t[2]===t[10]?V?(V.p(t,n),dt(V,1)):(V=Wn(t),V.c(),dt(V,1),V.m(j,null)):V&&(pt(),ut(V,1,1,()=>{V=null}),ct())},i(t){P||(dt(V),P=!0)},o(t){ut(V),P=!1},d(t){t&&F(e),t&&F(g),t&&F(y),V&&V.d(),x(H)}}}function Jn(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f,m,g,y,b,k,x,j,C,L,w,$,q,P,H,B,U,I,G,A,R,Z,Y=t[1]?"Предочаг":"Очаг",V=(t[0].id||t[0].id_hearth)+"",W=t[0].quarter?t[0].quarter+" кв.":"",K=t[0].year+"",J=t[0].list_dtp.length+"",X=t[0].count_lost+"",Q=t[0].count_stricken+"",tt=t[0].piketaj_start_km&&Yn(t),et=t[0].str_icon_type&&Vn(t),nt=t[0].list_dtp,st=[];for(let e=0;e<nt.length;e+=1)st[e]=Kn(Zn(t,nt,e));const lt=t=>ut(st[t],1,1,()=>{st[t]=null});return{c(){e=O("div"),n=O("div"),s=E(Y),l=E(" ДТП (id: "),o=E(V),r=E(")"),i=M(),a=O("div"),p=E(W),c=M(),d=E(K),u=E("г."),_=M(),h=O("div"),v=O("table"),f=O("tbody"),tt&&tt.c(),m=M(),et&&et.c(),g=M(),y=O("tr"),b=O("td"),b.textContent="Всего ДТП:",k=M(),x=O("td"),j=E(J),C=M(),L=O("tr"),w=O("td"),w.textContent="Погибших:",$=M(),q=O("td"),P=E(X),H=M(),B=O("tr"),U=O("td"),U.textContent="Раненых:",I=M(),G=O("td"),A=E(Q),R=M();for(let t=0;t<st.length;t+=1)st[t].c();S(n,"class","pLine"),S(a,"class","pLine"),S(b,"class","first svelte-mnr9l0"),S(w,"class","first svelte-mnr9l0"),S(U,"class","first svelte-mnr9l0"),S(v,"class","table svelte-mnr9l0"),S(h,"class","featureCont"),S(e,"class","mvsPopup svelte-mnr9l0")},m(t,F){D(t,e,F),z(e,n),z(n,s),z(n,l),z(n,o),z(n,r),z(e,i),z(e,a),z(a,p),z(a,c),z(a,d),z(a,u),z(e,_),z(e,h),z(h,v),z(v,f),tt&&tt.m(f,null),z(f,m),et&&et.m(f,null),z(f,g),z(f,y),z(y,b),z(y,k),z(y,x),z(x,j),z(f,C),z(f,L),z(L,w),z(L,$),z(L,q),z(q,P),z(f,H),z(f,B),z(B,U),z(B,I),z(B,G),z(G,A),z(f,R);for(let t=0;t<st.length;t+=1)st[t].m(f,null);Z=!0},p(t,[e]){if((!Z||2&e)&&Y!==(Y=t[1]?"Предочаг":"Очаг")&&N(s,Y),(!Z||1&e)&&V!==(V=(t[0].id||t[0].id_hearth)+"")&&N(o,V),(!Z||1&e)&&W!==(W=t[0].quarter?t[0].quarter+" кв.":"")&&N(p,W),(!Z||1&e)&&K!==(K=t[0].year+"")&&N(d,K),t[0].piketaj_start_km?tt?tt.p(t,e):(tt=Yn(t),tt.c(),tt.m(f,m)):tt&&(tt.d(1),tt=null),t[0].str_icon_type?et?et.p(t,e):(et=Vn(t),et.c(),et.m(f,g)):et&&(et.d(1),et=null),(!Z||1&e)&&J!==(J=t[0].list_dtp.length+"")&&N(j,J),(!Z||1&e)&&X!==(X=t[0].count_lost+"")&&N(P,X),(!Z||1&e)&&Q!==(Q=t[0].count_stricken+"")&&N(A,Q),13&e){let n;for(nt=t[0].list_dtp,n=0;n<nt.length;n+=1){const s=Zn(t,nt,n);st[n]?(st[n].p(s,e),dt(st[n],1)):(st[n]=Kn(s),st[n].c(),dt(st[n],1),st[n].m(f,null))}for(pt(),n=nt.length;n<st.length;n+=1)lt(n);ct()}},i(t){if(!Z){for(let t=0;t<nt.length;t+=1)dt(st[t]);Z=!0}},o(t){st=st.filter(Boolean);for(let t=0;t<st.length;t+=1)ut(st[t]);Z=!1},d(t){t&&F(e),tt&&tt.d(),et&&et.d(),T(st,t)}}}function Xn(t,e,n){let s,{prp:l}=e,{predochag:o}=e;const r=t=>{let e=l._bounds.options.items[t];e&&e._map&&e._map.panTo(e._latlng)};return t.$set=t=>{"prp"in t&&n(0,l=t.prp),"predochag"in t&&n(1,o=t.predochag)},[l,o,s,r,t=>{console.log("showDtpInfo ",t)},t=>{r(t)},t=>{n(2,s=t)},()=>{n(2,s=null)}]}class Qn extends gt{constructor(t){super(),mt(this,t,Xn,Jn,C,{prp:0,predochag:1})}}const ts=window.L,es=ts.popup(),ns=ts.popup({minWidth:200});let ss;const ls=function(t){let e=ts.DomUtil.create("div");return new ge({target:e,props:{prp:t}}),es.setContent(e),e},os=ts.featureGroup([]);os.setFilter=t=>{os.clearLayers(),ss=t;let e=[];os._group&&os._map&&(os._group.getLayers().forEach(t=>{let n=t.options.cluster,s=n.list_dtp||[],l=0;ss.forEach(t=>{if("quarter"===t.type)t.zn[n.year]&&t.zn[n.year][n.quarter]&&l++;else if("id_dtp"===t.type)s.filter(e=>e.id==t.zn||e.id_skpdi==t.zn||e.id_stat==t.zn).length&&l++;else if("year"===t.type)t.zn[n.year]&&l++;else if("str_icon_type"===t.type)t.zn.filter(t=>t===n.str_icon_type).length&&l++;else if("stricken"===t.type){let e=t.zn;e?(1===e&&!n.count_stricken&&n.count_lost||2===e&&n.count_stricken&&!n.count_lost||3===e&&(n.count_stricken||n.count_lost)||4===e&&n.count_stricken&&n.count_lost)&&l++:l++}}),l===ss.length&&e.push(t)}),os.addLayer(ts.layerGroup(e)))},os.on("remove",()=>{os.clearLayers()}).on("add",t=>{ss=[];let e={str_icon_type:{},iconType:{},years:{},dtps:{},stricken:{0:0}},n=[];Promise.all([2019,2020].map(t=>fetch("https://dtp.mvs.group/scripts/hearths_dev/"+t+".txt",{}).then(t=>t.json()))).then(t=>{t.forEach(t=>{e.stricken[0]+=t.length,t.forEach(t=>{let s=t.icon_type||1,l=ts.latLngBounds(),o=t.list_dtp,r=!1,i="#FF0000";if(c(t,e),o.length){Number(t.year),Number(t.quarter);let a=e.years[t.year];a||(a=e.years[t.year]={}),e.years[t.year]=a;let p=a[t.quarter];t.quarter in a?p++:p=a[t.quarter]=1,a[t.quarter]=p;let c=e.str_icon_type[t.str_icon_type];c?c++:c=1,e.str_icon_type[t.str_icon_type]=c,e.iconType[t.str_icon_type]=s,s&&(r=s%2==0,1===s||2===s?i="#FFA500":3===s||4===s?i="#B8860B":5===s||6===s?i="#CD853F":7===s||8===s?i="#228B22":9===s||10===s?i="#FF8C00":11===s||12===s?i="#D2691E":13===s||14===s?i="#DEB887":15===s||16===s?i="#7B68EE":17!==s&&18!==s||(i="#2F4F4F"));let d=o.map(n=>{n.iconType;let s=n.coords||{lat:0,lon:0},o=ts.latLng(s.lat,s.lon),a=[];l.extend(o),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let p=e.dtps[n.id];return p?p[t.id]?p[t.id]++:p[t.id]=1:(p={},p[t.id]=1),e.dtps[n.id]=p,new g(ts.latLng(s.lat,s.lon),{cluster:t,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:r,fillColor:i}).bindPopup(es).on("popupopen",t=>{ls(t.target.options.props)}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})});t._bounds=ts.rectangle(l,{items:d,cluster:t,fill:!0,color:i,dashArray:"8 3 1"}).on("mouseover",t=>{let e=t.target;e._color=e.options.color,e.options.color="red",e._renderer._updateStyle(e)}).on("mouseout",t=>{let e=t.target;e.options.color=e._color,e._renderer._updateStyle(e)}).on("click",e=>{ts.DomEvent.stopPropagation(e);let n,s=1e3,l=e.target,o=e.latlng;e.originalEvent.ctrlKey&&l.bringToBack(),l.options.items.forEach(t=>{let e=t._latlng.distanceTo(o);e<s&&(s=e,n=t)}),s<10?(ls(n.options.props),es.setLatLng(n._latlng).openOn(os._map)):(!function(t){let e=ts.DomUtil.create("div");new Qn({target:e,props:{prp:t}}),ns.setContent(e)}(t),ns.setLatLng(o).openOn(os._map))}),n.push(t._bounds),n=n.concat(d)}}),os._opt=e,os._group=ts.layerGroup(n),ss?os.setFilter(ss):os.addLayer(os._group),os._refreshFilters()})})});const rs=window.L,is=rs.popup(),as=rs.popup({minWidth:200});let ps;const cs=function(t){let e=rs.DomUtil.create("div");return new ge({target:e,props:{prp:t}}),is.setContent(e),e},ds=rs.featureGroup([]);ds.setFilter=t=>{ds.clearLayers(),ps=t;let e=[];ds._group&&ds._map&&(ds._group.getLayers().forEach(t=>{let n=t.options.cluster,s=n.list_dtp||[],l=0;ps.forEach(t=>{if("quarter"===t.type)t.zn[n.year]&&t.zn[n.year][n.quarter]&&l++;else if("id_dtp"===t.type)s.filter(e=>e.id==t.zn||e.id_skpdi==t.zn||e.id_stat==t.zn).length&&l++;else if("year"===t.type)t.zn[n.year]&&l++;else if("str_icon_type"===t.type)t.zn.filter(t=>t===n.str_icon_type).length&&l++;else if("stricken"===t.type){let e=t.zn;e?(1===e&&!n.count_stricken&&n.count_lost||2===e&&n.count_stricken&&!n.count_lost||3===e&&(n.count_stricken||n.count_lost)||4===e&&n.count_stricken&&n.count_lost)&&l++:l++}}),l===ps.length&&e.push(t)}),ds.addLayer(rs.layerGroup(e)))},ds.on("remove",()=>{ds.clearLayers()}).on("add",t=>{ps=[];let e={str_icon_type:{},iconType:{},years:{},dtps:{},stricken:{0:0}},n=[];Promise.all([2019,2020].map(t=>fetch("https://dtp.mvs.group/scripts/hearthstmp_dev/"+t+".txt",{}).then(t=>t.json()))).then(t=>{t.forEach(t=>{e.stricken[0]+=t.length,t.forEach(t=>{let s=t.icon_type||1,l=rs.latLngBounds(),o=t.list_dtp,r=!1,i="#FF0000";if(c(t,e),o.length){Number(t.year),Number(t.quarter);let a=e.years[t.year];a||(a=e.years[t.year]={}),e.years[t.year]=a;let p=a[t.quarter];t.quarter in a?p++:p=a[t.quarter]=1,a[t.quarter]=p;let c=e.str_icon_type[t.str_icon_type];c?c++:c=1,e.str_icon_type[t.str_icon_type]=c,e.iconType[t.str_icon_type]=s,s&&(r=s%2==0,1===s||2===s?i="#FFA500":3===s||4===s?i="#B8860B":5===s||6===s?i="#CD853F":7===s||8===s?i="#228B22":9===s||10===s?i="#FF8C00":11===s||12===s?i="#D2691E":13===s||14===s?i="#DEB887":15===s||16===s?i="#7B68EE":17!==s&&18!==s||(i="#2F4F4F"));let d=o.map(n=>{n.iconType;let s=n.coords||{lat:0,lon:0},o=rs.latLng(s.lat,s.lon),a=[];l.extend(o),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let p=e.dtps[n.id];return p?p[t.id]?p[t.id]++:p[t.id]=1:(p={},p[t.id]=1),e.dtps[n.id]=p,new g(rs.latLng(s.lat,s.lon),{cluster:t,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:r,fillColor:i}).bindPopup(is).on("popupopen",t=>{cs(t.target.options.props)}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})});t._bounds=rs.rectangle(l,{items:d,cluster:t,fill:!0,color:i,dashArray:"8 3 1"}).on("mouseover",t=>{let e=t.target;e._color=e.options.color,e.options.color="red",e._renderer._updateStyle(e)}).on("mouseout",t=>{let e=t.target;e.options.color=e._color,e._renderer._updateStyle(e)}).on("click",e=>{rs.DomEvent.stopPropagation(e);let n,s=1e3,l=e.target,o=e.latlng;e.originalEvent.ctrlKey&&l.bringToBack(),l.options.items.forEach(t=>{let e=t._latlng.distanceTo(o);e<s&&(s=e,n=t)}),s<10?(cs(n.options.props),is.setLatLng(n._latlng).openOn(ds._map)):(!function(t){let e=rs.DomUtil.create("div");new Qn({target:e,props:{prp:t}}),as.setContent(e)}(t),as.setLatLng(o).openOn(ds._map))}),n.push(t._bounds),n=n.concat(d)}}),ds._opt=e,ds._group=rs.layerGroup(n),ps?ds.setFilter(ps):ds.addLayer(ds._group),ds._refreshFilters()})})});const us=window.L,_s=us.popup(),hs=us.popup({minWidth:200});let vs;const fs=function(t){let e=us.DomUtil.create("div");return new ge({target:e,props:{prp:t}}),_s.setContent(e),e},ms=us.featureGroup([]);ms.setFilter=t=>{ms.clearLayers(),vs=t;let e=[];ms._group&&ms._map&&(ms._group.getLayers().forEach(t=>{let n=t.options.cluster,s=n.list_dtp||[],l=0;vs.forEach(t=>{if("quarter"===t.type)t.zn[n.year]&&t.zn[n.year][n.quarter]&&l++;else if("id_dtp"===t.type)s.filter(e=>e.id==t.zn||e.id_skpdi==t.zn||e.id_stat==t.zn).length&&l++;else if("year"===t.type)t.zn[n.year]&&l++;else if("str_icon_type"===t.type)t.zn.filter(t=>t===n.str_icon_type).length&&l++;else if("stricken"===t.type){let e=t.zn;e?(1===e&&!n.count_stricken&&n.count_lost||2===e&&n.count_stricken&&!n.count_lost||3===e&&(n.count_stricken||n.count_lost)||4===e&&n.count_stricken&&n.count_lost)&&l++:l++}}),l===vs.length&&e.push(t)}),ms.addLayer(us.layerGroup(e)))},ms.on("remove",()=>{ms.clearLayers()}).on("add",t=>{vs=[];let e={str_icon_type:{},iconType:{},years:{},dtps:{},stricken:{0:0}},n=[];Promise.all([2019,2020].map(t=>fetch("https://dtp.mvs.group/scripts/hearthsstat_dev/"+t+".txt",{}).then(t=>t.json()))).then(t=>{t.forEach(t=>{e.stricken[0]+=t.length,t.forEach(t=>{let s=t.icon_type||1,l=us.latLngBounds(),o=t.list_dtp,r=!1,i="#FF0000";if(c(t,e),o.length){Number(t.year),Number(t.quarter);let a=e.years[t.year];a||(a=e.years[t.year]={}),e.years[t.year]=a;let p=a[t.quarter];t.quarter in a?p++:p=a[t.quarter]=1,a[t.quarter]=p;let c=e.str_icon_type[t.str_icon_type];c?c++:c=1,e.str_icon_type[t.str_icon_type]=c,e.iconType[t.str_icon_type]=s,s&&(r=s%2==0,1===s||2===s?i="#FFA500":3===s||4===s?i="#B8860B":5===s||6===s?i="#CD853F":7===s||8===s?i="#228B22":9===s||10===s?i="#FF8C00":11===s||12===s?i="#D2691E":13===s||14===s?i="#DEB887":15===s||16===s?i="#7B68EE":17!==s&&18!==s||(i="#2F4F4F"));let d=o.map(n=>{n.iconType;let s=n.coords||{lat:0,lon:0},o=us.latLng(s.lat,s.lon),a=[];l.extend(o),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let p=e.dtps[n.id];return p?p[t.id]?p[t.id]++:p[t.id]=1:(p={},p[t.id]=1),e.dtps[n.id]=p,new g(us.latLng(s.lat,s.lon),{cluster:t,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:r,fillColor:i}).bindPopup(_s).on("popupopen",t=>{fs(t.target.options.props)}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})});t._bounds=us.rectangle(l,{items:d,cluster:t,fill:!0,color:i,dashArray:"8 3 1"}).on("mouseover",t=>{let e=t.target;e._color=e.options.color,e.options.color="red",e._renderer._updateStyle(e)}).on("mouseout",t=>{let e=t.target;e.options.color=e._color,e._renderer._updateStyle(e)}).on("click",e=>{us.DomEvent.stopPropagation(e);let n,s=1e3,l=e.target,o=e.latlng,r=e.layerPoint;e.originalEvent.ctrlKey&&l.bringToBack(),l.options.items.forEach(t=>{let e=t._point.distanceTo(r);e<s&&(s=e,n=t)}),s<10?(fs(n.options.props),_s.setLatLng(n._latlng).openOn(ms._map)):(!function(t){let e=us.DomUtil.create("div");new Qn({target:e,props:{prp:t}}),hs.setContent(e)}(t),hs.setLatLng(o).openOn(ms._map))}),n.push(t._bounds),n=n.concat(d)}}),ms._opt=e,ms._group=us.layerGroup(n),vs?ms.setFilter(vs):ms.addLayer(ms._group),ms._refreshFilters()})})});const gs=window.L,ys=gs.popup(),bs=gs.popup({minWidth:200});let ks;const xs=function(t){let e=gs.DomUtil.create("div");return new ge({target:e,props:{prp:t}}),ys.setContent(e),e},js=gs.featureGroup([]);js.setFilter=t=>{js.clearLayers(),ks=t;let e=[];js._group&&js._map&&(js._group.getLayers().forEach(t=>{let n=t.options.cluster,s=n.list_dtp||[],l=0;ks.forEach(t=>{if("quarter"===t.type)t.zn[n.year]&&t.zn[n.year][n.quarter]&&l++;else if("id_dtp"===t.type)s.filter(e=>e.id==t.zn||e.id_skpdi==t.zn||e.id_stat==t.zn).length&&l++;else if("year"===t.type)t.zn[n.year]&&l++;else if("str_icon_type"===t.type)t.zn.filter(t=>t===n.str_icon_type).length&&l++;else if("stricken"===t.type){let e=t.zn;e?(1===e&&!n.count_stricken&&n.count_lost||2===e&&n.count_stricken&&!n.count_lost||3===e&&(n.count_stricken||n.count_lost)||4===e&&n.count_stricken&&n.count_lost)&&l++:l++}}),l===ks.length&&e.push(t)}),js.addLayer(gs.layerGroup(e)))},js.on("remove",()=>{js.clearLayers()}).on("add",t=>{ks=[];let e={str_icon_type:{},iconType:{},years:{},dtps:{},stricken:{0:0}},n=[];Promise.all([2019,2020].map(t=>fetch("https://dtp.mvs.group/scripts/hearths3_dev/"+t+".txt",{}).then(t=>t.json()))).then(t=>{t.forEach(t=>{e.stricken[0]+=t.length,t.forEach(t=>{let s=t.icon_type||1,l=gs.latLngBounds(),o=t.list_dtp,r=!1,i=(c(t,e),"#FF0000");if(o.length){Number(t.year),Number(t.quarter);let a=e.years[t.year];a||(a=e.years[t.year]={}),e.years[t.year]=a;let p=a[t.quarter];t.quarter in a?p++:p=a[t.quarter]=1,a[t.quarter]=p;let c,d=e.str_icon_type[t.str_icon_type];d?d++:d=1,e.str_icon_type[t.str_icon_type]=d,e.iconType[t.str_icon_type]=s,s&&(r=s%2==0,1===s||2===s?i="#FFA500":3===s||4===s?i="#B8860B":5===s||6===s?i="#CD853F":7===s||8===s?i="#228B22":9===s||10===s?i="#FF8C00":11===s||12===s?i="#D2691E":13===s||14===s?i="#DEB887":15===s||16===s?i="#7B68EE":17!==s&&18!==s||(i="#2F4F4F"));let u=o.map(n=>{n.iconType;let s=n.coords||{lat:0,lon:0},o=gs.latLng(s.lat,s.lon),a=[];l.extend(o),n.id===t.head&&(c=n),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let p=e.dtps[n.id];return p?p[t.id]?p[t.id]++:p[t.id]=1:(p={},p[t.id]=1),e.dtps[n.id]=p,new g(gs.latLng(s.lat,s.lon),{cluster:t,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:r,fillColor:i}).bindPopup(ys).on("popupopen",t=>{xs(t.target.options.props)}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})});t._bounds=c?gs.circle(gs.latLng(c.coords.lat,c.coords.lon),{radius:t.radius||500,items:u,cluster:t,color:i}):gs.rectangle(l,{items:u,cluster:t,fill:!0,color:i,dashArray:"8 3 1"}),t._bounds.on("mouseover",t=>{let e=t.target;e._color=e.options.color,e.options.color="red",e._renderer._updateStyle(e)}).on("mouseout",t=>{let e=t.target;e.options.color=e._color,e._renderer._updateStyle(e)}).on("click",e=>{gs.DomEvent.stopPropagation(e);let n,s=1e3,l=e.target,o=e.latlng,r=e.layerPoint;e.originalEvent.ctrlKey&&l.bringToBack(),l.options.items.forEach(t=>{let e=t._point.distanceTo(r);e<s&&(s=e,n=t)}),s<10?(xs(n.options.props),ys.setLatLng(n._latlng).openOn(js._map)):(!function(t){let e=gs.DomUtil.create("div");new Qn({target:e,props:{prp:t}}),bs.setContent(e)}(t),bs.setLatLng(o).openOn(js._map))}),n.push(t._bounds),n=n.concat(u)}}),js._opt=e,js._group=gs.layerGroup(n),ks?js.setFilter(ks):js.addLayer(js._group),js._refreshFilters()}),console.log("__DtpHearths3_____",t,js._opt)})});const Cs=window.L,Ls=Cs.popup(),ws=Cs.popup({minWidth:200});let zs;const Ds=function(t){let e=Cs.DomUtil.create("div");return new ge({target:e,props:{prp:t}}),Ls.setContent(e),e},Fs=Cs.featureGroup([]);Fs.setFilter=t=>{Fs.clearLayers(),zs=t;let e=[];Fs._group&&Fs._map&&(Fs._group.getLayers().forEach(t=>{let n=t.options.cluster,s=n.list_dtp||[],l=0;zs.forEach(t=>{if("quarter"===t.type)t.zn[n.year]&&t.zn[n.year][n.quarter]&&l++;else if("id_dtp"===t.type)s.filter(e=>e.id==t.zn||e.id_skpdi==t.zn||e.id_stat==t.zn).length&&l++;else if("year"===t.type)t.zn[n.year]&&l++;else if("str_icon_type"===t.type)t.zn.filter(t=>t===n.str_icon_type).length&&l++;else if("stricken"===t.type){let e=t.zn;e?(1===e&&!n.count_stricken&&n.count_lost||2===e&&n.count_stricken&&!n.count_lost||3===e&&(n.count_stricken||n.count_lost)||4===e&&n.count_stricken&&n.count_lost)&&l++:l++}}),l===zs.length&&e.push(t)}),Fs.addLayer(Cs.layerGroup(e)))},Fs.on("remove",()=>{Fs.clearLayers()}).on("add",t=>{zs=[];let e={str_icon_type:{},iconType:{},years:{},dtps:{},stricken:{0:0}},n=[];Promise.all([2019,2020].map(t=>fetch("https://dtp.mvs.group/scripts/hearths5_dev/"+t+".txt",{}).then(t=>t.json()))).then(t=>{t.forEach(t=>{e.stricken[0]+=t.length,t.forEach(t=>{let s=t.icon_type||1,l=Cs.latLngBounds(),o=t.list_dtp,r=!1,i="#FF0000";if(c(t,e),o.length){Number(t.year),Number(t.quarter);let a=e.years[t.year];a||(a=e.years[t.year]={}),e.years[t.year]=a;let p=a[t.quarter];t.quarter in a?p++:p=a[t.quarter]=1,a[t.quarter]=p;let c,d=e.str_icon_type[t.str_icon_type];d?d++:d=1,e.str_icon_type[t.str_icon_type]=d,e.iconType[t.str_icon_type]=s,s&&(r=s%2==0,1===s||2===s?i="#FFA500":3===s||4===s?i="#B8860B":5===s||6===s?i="#CD853F":7===s||8===s?i="#228B22":9===s||10===s?i="#FF8C00":11===s||12===s?i="#D2691E":13===s||14===s?i="#DEB887":15===s||16===s?i="#7B68EE":17!==s&&18!==s||(i="#2F4F4F"));let u=o.map(n=>{n.iconType;let s=n.coords||{lat:0,lon:0},o=Cs.latLng(s.lat,s.lon),a=[];l.extend(o),n.id===t.head&&(c=n),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let p=e.dtps[n.id];return p?p[t.id]?p[t.id]++:p[t.id]=1:(p={},p[t.id]=1),e.dtps[n.id]=p,new g(Cs.latLng(s.lat,s.lon),{cluster:t,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:r,fillColor:i}).bindPopup(Ls).on("popupopen",t=>{Ds(t.target.options.props)}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})});t._bounds=c?Cs.circle(Cs.latLng(c.coords.lat,c.coords.lon),{radius:t.radius||500,items:u,cluster:t,color:i}):Cs.rectangle(l,{items:u,cluster:t,fill:!0,color:i,dashArray:"8 3 1"}),t._bounds.on("mouseover",t=>{let e=t.target;e._color=e.options.color,e.options.color="red",e._renderer._updateStyle(e)}).on("mouseout",t=>{let e=t.target;e.options.color=e._color,e._renderer._updateStyle(e)}).on("click",e=>{Cs.DomEvent.stopPropagation(e);let n,s=1e3,l=e.target,o=e.latlng,r=e.layerPoint;e.originalEvent.ctrlKey&&l.bringToBack(),l.options.items.forEach(t=>{let e=t._point.distanceTo(r);e<s&&(s=e,n=t)}),s<10?(Ds(n.options.props),Ls.setLatLng(n._latlng).openOn(Fs._map)):(!function(t){let e=Cs.DomUtil.create("div");new Qn({target:e,props:{prp:t}}),ws.setContent(e)}(t),ws.setLatLng(o).openOn(Fs._map))}),n.push(t._bounds),n=n.concat(u)}}),Fs._opt=e,Fs._group=Cs.layerGroup(n),zs?Fs.setFilter(zs):Fs.addLayer(Fs._group),Fs._refreshFilters()})})});const Ts=window.L,Os=Ts.popup(),Es=Ts.popup({minWidth:200});let Ms=[];const $s=function(t){let e=Ts.DomUtil.create("div");return new ge({target:e,props:{prp:t}}),Os.setContent(e),e},qs=Ts.featureGroup([]);qs.setFilter=t=>{if(!qs._map)return;qs.clearLayers(),Ms=t.length?t:[];let e=Ms.length,n=[];qs._group&&(qs._group.getLayers().forEach(t=>{let s=t.options.cluster,l=0;Ms.forEach(t=>{if("ht"===t.type)t.zn[s.ht]&&l++;else if("roads"===t.type)(t.zn.filter(t=>t===s.road).length||1===t.zn.length&&""===t.zn[0])&&l++;else if("id_dtp"===t.type)!s.list_dtp.filter(e=>e.id==t.zn).length&&t.zn.length||l++;else if("id_hearth"===t.type)t.zn==s.id_hearth&&l++;else if("year"===t.type)t.zn[s.year]&&l++;else if("stricken"===t.type){let e=t.zn;e?(1===e&&!s.count_stricken&&s.count_lost||2===e&&s.count_stricken&&!s.count_lost||3===e&&(s.count_stricken||s.count_lost)||4===e&&s.count_stricken&&s.count_lost)&&l++:l++}}),l===e&&n.push(t)}),qs.addLayer(Ts.layerGroup(n)))},qs.on("remove",()=>{qs.clearLayers()}).on("add",t=>{let e={road:{},str_icon_type:{},iconType:{},years:{},dtps:{}},n=[],s=(t,s)=>{let l=t.icon_type||1,o=Ts.latLngBounds(),r=[],i=t.list_dtp,a=!1,p="#FF0000";if(t.ht=s,i.length){Number(t.year),Number(t.quarter);let s=e.years[t.year];s||(s=e.years[t.year]={}),e.years[t.year]=s;let c=s[t.quarter];t.quarter in s?c++:c=s[t.quarter]=1,s[t.quarter]=c;let d,u=e.str_icon_type[t.str_icon_type];u?u++:u=1,e.str_icon_type[t.str_icon_type]=u,e.iconType[t.str_icon_type]=l,t.road in e.road?e.road[t.road]++:e.road[t.road]=1,l&&(a=l%2==0,1===l||2===l?p="#FFA500":3===l||4===l?p="#B8860B":5===l||6===l?p="#CD853F":7===l||8===l?p="#228B22":9===l||10===l?p="#FF8C00":11===l||12===l?p="#D2691E":13===l||14===l?p="#DEB887":15===l||16===l?p="#7B68EE":17!==l&&18!==l||(p="#2F4F4F"));let _=i.map(n=>{n.iconType;let s=n.coords||{lat:0,lon:0},l=Ts.latLng(s.lat,s.lon),i=[];o.extend(l),r.push(l),n.id===t.head&&(d=n),n.id_skpdi&&i.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&i.push({type:"gibdd",id:n.id_stat}),n._cur=i;let c=e.dtps[n.id]||{},u=t.id||t.id_hearth;return c?c[u]?c[u]++:c[u]=1:(c={},c[u]=1),e.dtps[n.id]=c,new g(Ts.latLng(s.lat,s.lon),{cluster:t,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:a,fillColor:p}).bindPopup(Os).on("popupopen",t=>{$s(t.target.options.props)}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})});d?t._bounds=Ts.circle(Ts.latLng(d.coords.lat,d.coords.lon),{radius:t.radius||500,items:_,cluster:t,color:p}):r.length?t._bounds=Ts.polyline(r,{items:_,cluster:t,color:p,weight:4}):t._bounds=Ts.rectangle(o,{items:_,cluster:t,fill:!0,color:p,dashArray:"8 3 1"}),t._bounds.on("mouseover",t=>{let e=t.target;e._weight=e.options.weight,e._color=e.options.color,e.options.weight=8,e.options.color="red",e._renderer._updateStyle(e)}).on("mouseout",t=>{let e=t.target;e.options.weight=e._weight,e.options.color=e._color,e._renderer._updateStyle(e)}).on("click",e=>{Ts.DomEvent.stopPropagation(e);let n,s=1e3,l=e.target,o=e.latlng,r=e.layerPoint;e.originalEvent.ctrlKey&&l.bringToBack(),l.options.items.forEach(t=>{let e=t._point.distanceTo(r);e<s&&(s=e,n=t)}),s<10?($s(n.options.props),Os.setLatLng(n._latlng).openOn(qs._map)):(!function(t){let e=Ts.DomUtil.create("div");new Qn({target:e,props:{prp:t}}),Es.setContent(e)}(t),Es.setLatLng(o).openOn(qs._map))}),n.push(t._bounds),n=n.concat(_)}};Promise.all([2019,2020].map(t=>fetch("https://dtp.mvs.group/scripts/hearths_picket_dev/"+t+".txt",{}).then(t=>t.json()))).then(t=>{t.forEach(t=>{t.forEach(t=>{(t.hearth3||[]).forEach(t=>{s(t,"hearth3")}),(t.hearth5||[]).forEach(t=>{s(t,"hearth5")})}),qs._opt=e,qs._group=Ts.layerGroup(n),Ms?qs.setFilter(Ms):qs.addLayer(qs._group),qs._refreshFilters()}),console.log("__allJson_____",t,qs._opt)})});const Ps=window.L,Ss=Ps.popup(),Hs=Ps.popup({minWidth:200});let Ns=[];const Bs=function(t){let e=Ps.DomUtil.create("div");return new ge({target:e,props:{prp:t}}),Ss.setContent(e),e},Us=Ps.featureGroup([]);function Is(t,e,n){const s=t.slice();return s[4]=e[n],s[6]=n,s}function Gs(t,e,n){const s=t.slice();return s[4]=e[n],s[6]=n,s}function As(t){let e,n,s,l,o=t[4].complexName+"";return{c(){e=O("button"),n=E(o),S(e,"class",s="tab "+t[6]+" "+(0===t[6]?"active":"")+" svelte-h8luxq")},m(s,o,r){D(s,e,o),z(e,n),r&&l(),l=q(e,"click",t[2])},p:y,d(t){t&&F(e),l()}}}function Rs(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f,m,g,y,b,k,x,j,C,L,w,T,$,q,P,H,B,U,I,G,A=t[4].complexName+"",R=t[4].complexSid+"",Z=t[4].complexModelName+"",Y=t[4].complexTypeName+"",V=t[4].complexStageName+"",W=(t[4].kvfStatus||"")+"",K=(t[4].roadName||t[0].roadName||"")+"";return{c(){e=O("table"),n=O("tr"),s=O("td"),s.textContent="Комплекс:",l=O("td"),o=E(A),r=E(" (id: "),i=E(R),a=E(")"),p=M(),c=O("tr"),d=O("td"),d.textContent="Модель:",u=O("td"),_=E(Z),h=M(),v=O("tr"),f=O("td"),f.textContent="Тип:",m=O("td"),g=E(Y),y=M(),b=O("tr"),k=O("td"),k.textContent="Этап:",x=O("td"),j=E(V),C=M(),L=O("tr"),w=O("td"),w.textContent="Работоспособность:",T=O("td"),$=E(W),q=M(),P=O("tr"),H=O("td"),H.textContent="Дорога:",B=O("td"),U=E(K),I=M(),S(s,"class","first svelte-h8luxq"),S(d,"class","first svelte-h8luxq"),S(f,"class","first svelte-h8luxq"),S(k,"class","first svelte-h8luxq"),S(w,"class","first svelte-h8luxq"),S(H,"class","first svelte-h8luxq"),S(e,"class",G="tabCont "+t[6]+" "+(0===t[6]?"":"hidden")+" svelte-h8luxq")},m(t,F){D(t,e,F),z(e,n),z(n,s),z(n,l),z(l,o),z(l,r),z(l,i),z(l,a),z(e,p),z(e,c),z(c,d),z(c,u),z(u,_),z(e,h),z(e,v),z(v,f),z(v,m),z(m,g),z(e,y),z(e,b),z(b,k),z(b,x),z(x,j),z(e,C),z(e,L),z(L,w),z(L,T),z(T,$),z(e,q),z(e,P),z(P,H),z(P,B),z(B,U),z(e,I)},p(t,e){1&e&&K!==(K=(t[4].roadName||t[0].roadName||"")+"")&&N(U,K)},d(t){t&&F(e)}}}function Zs(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f,m,g,b,k,x,j,C,L,w,$,P,H,B,U,I,G,A,R,Z,Y,V,W,K,J,X=(t[0].id||t[0].lineSid)+"",Q=(t[0].roadName||"")+"",tt=t[0].lat+"",et=t[0].lon+"",nt=(t[0].lineAddress||"")+"",st=t[3],lt=[];for(let e=0;e<st.length;e+=1)lt[e]=As(Gs(t,st,e));let ot=t[3],rt=[];for(let e=0;e<ot.length;e+=1)rt[e]=Rs(Is(t,ot,e));return{c(){e=O("div"),n=O("div"),s=E("Рубеж (id: "),l=E(X),o=E(")"),r=M(),i=O("div"),a=O("table"),p=O("tbody"),c=O("tr"),d=O("td"),d.textContent="Дорога:",u=M(),_=O("td"),h=E(Q),v=M(),f=O("tr"),m=O("td"),m.textContent="Координаты:",g=M(),b=O("td"),k=E(tt),x=M(),j=E(et),C=M(),L=O("span"),w=M(),$=O("tr"),P=O("td"),P.textContent="Адрес:",H=M(),B=O("td"),U=E(nt),I=M(),G=O("tr"),A=O("td"),A.textContent="Комплексов:",R=M(),Z=O("td"),Z.textContent=`${t[3].length}`,Y=M(),V=O("tr"),W=O("td");for(let t=0;t<lt.length;t+=1)lt[t].c();K=M();for(let t=0;t<rt.length;t+=1)rt[t].c();S(n,"class","pLine"),S(d,"class","first svelte-h8luxq"),S(m,"class","first svelte-h8luxq"),S(L,"title","Скопировать в буфер обмена"),S(L,"class","leaflet-gmx-icon-copy"),S(P,"class","first svelte-h8luxq"),S(A,"class","first svelte-h8luxq"),S(W,"class","tabs svelte-h8luxq"),S(W,"colspan","2"),S(a,"class","table svelte-h8luxq"),S(i,"class","featureCont"),S(e,"class","mvsPopup svelte-h8luxq")},m(y,F,T){D(y,e,F),z(e,n),z(n,s),z(n,l),z(n,o),z(e,r),z(e,i),z(i,a),z(a,p),z(p,c),z(c,d),z(c,u),z(c,_),z(_,h),z(p,v),z(p,f),z(f,m),z(f,g),z(f,b),z(b,k),z(b,x),z(b,j),z(b,C),z(b,L),z(p,w),z(p,$),z($,P),z($,H),z($,B),z(B,U),z(p,I),z(p,G),z(G,A),z(G,R),z(G,Z),z(p,Y),z(p,V),z(V,W);for(let t=0;t<lt.length;t+=1)lt[t].m(W,null);z(W,K);for(let t=0;t<rt.length;t+=1)rt[t].m(W,null);T&&J(),J=q(L,"click",t[1])},p(t,[e]){if(1&e&&X!==(X=(t[0].id||t[0].lineSid)+"")&&N(l,X),1&e&&Q!==(Q=(t[0].roadName||"")+"")&&N(h,Q),1&e&&tt!==(tt=t[0].lat+"")&&N(k,tt),1&e&&et!==(et=t[0].lon+"")&&N(j,et),1&e&&nt!==(nt=(t[0].lineAddress||"")+"")&&N(U,nt),12&e){let n;for(st=t[3],n=0;n<st.length;n+=1){const s=Gs(t,st,n);lt[n]?lt[n].p(s,e):(lt[n]=As(s),lt[n].c(),lt[n].m(W,K))}for(;n<lt.length;n+=1)lt[n].d(1);lt.length=st.length}if(9&e){let n;for(ot=t[3],n=0;n<ot.length;n+=1){const s=Is(t,ot,n);rt[n]?rt[n].p(s,e):(rt[n]=Rs(s),rt[n].c(),rt[n].m(W,null))}for(;n<rt.length;n+=1)rt[n].d(1);rt.length=ot.length}},i:y,o:y,d(t){t&&F(e),T(lt,t),T(rt,t),J()}}}function Ys(t,e,n){let{prp:s}=e;let l=s&&s.complexes?s.complexes:[];return console.log("complexes ",l),t.$set=t=>{"prp"in t&&n(0,s=t.prp)},[s,t=>{navigator.clipboard.writeText(t.target.parentNode.textContent).catch(t=>{console.log("Something went wrong",t)})},t=>{let e=t.target,n=/tab (\d)/.exec(e.className),s=n&&2===n.length?n[1]:0,l=e.parentNode;for(let t=0,e=l.childNodes.length;t<e;t++){let e=l.childNodes[t];if(e.classList){let t=e.classList.contains(s);"BUTTON"===e.tagName?e.classList[t?"add":"remove"]("active"):"TABLE"===e.tagName&&e.classList[t?"remove":"add"]("hidden")}}},l]}Us.setFilter=t=>{if(!Us._map)return;Us.clearLayers(),Ns=t.length?t:[];let e=Ns.length,n=[];Us._group&&(Us._group.getLayers().forEach(t=>{let s=t.options.cluster,l=0;Ns.forEach(t=>{if("ht"===t.type)t.zn[s.ht]&&l++;else if("roads"===t.type)(t.zn.filter(t=>t===s.road).length||1===t.zn.length&&""===t.zn[0])&&l++;else if("id_dtp"===t.type)!s.list_dtp.filter(e=>e.id==t.zn).length&&t.zn.length||l++;else if("id_city"===t.type)!s.list_dtp.filter(e=>e.id_city==t.zn).length&&t.zn.length||l++;else if("id_hearth"===t.type)t.zn==s.id_hearth&&l++;else if("year"===t.type)t.zn[s.year]&&l++;else if("stricken"===t.type){let e=t.zn;e?(1===e&&!s.count_stricken&&s.count_lost||2===e&&s.count_stricken&&!s.count_lost||3===e&&(s.count_stricken||s.count_lost)||4===e&&s.count_stricken&&s.count_lost)&&l++:l++}}),l===e&&n.push(t)}),Us.addLayer(Ps.layerGroup(n)))},Us.on("remove",()=>{Us.clearLayers()}).on("add",t=>{let e={road:{},str_icon_type:{},iconType:{},id_city:{},years:{},dtps:{}},n=[],s=(t,s)=>{let l=t.icon_type||1,o=Ps.latLngBounds(),r=[],i=t.list_dtp,a=!1,p="#FF0000";if(t.ht=s,i.length){Number(t.year),Number(t.quarter);let s=e.years[t.year];s||(s=e.years[t.year]={}),e.years[t.year]=s;let c=s[t.quarter];t.quarter in s?c++:c=s[t.quarter]=1,s[t.quarter]=c;let d,u=e.str_icon_type[t.str_icon_type];u?u++:u=1,e.str_icon_type[t.str_icon_type]=u,e.iconType[t.str_icon_type]=l,t.road in e.road?e.road[t.road]++:e.road[t.road]=1,l&&(a=l%2==0,1===l||2===l?p="#FFA500":3===l||4===l?p="#B8860B":5===l||6===l?p="#CD853F":7===l||8===l?p="#228B22":9===l||10===l?p="#FF8C00":11===l||12===l?p="#D2691E":13===l||14===l?p="#DEB887":15===l||16===l?p="#7B68EE":17!==l&&18!==l||(p="#2F4F4F"));let _=i.map(n=>{n.iconType;let s=n.coords||{lat:0,lon:0},l=Ps.latLng(s.lat,s.lon),i=[];o.extend(l),r.push(l),n.id===t.head&&(d=n),n.id_skpdi&&i.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&i.push({type:"gibdd",id:n.id_stat}),n._cur=i;let c=e.id_city[n.id_city]||0;e.id_city[n.id_city]=c+1;let u=e.dtps[n.id]||{},_=t.id||t.id_hearth;return u?u[_]?u[_]++:u[_]=1:(u={},u[_]=1),e.dtps[n.id]=u,new g(Ps.latLng(s.lat,s.lon),{cluster:t,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:a,fillColor:p}).bindPopup(Ss).on("popupopen",t=>{Bs(t.target.options.props)}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})});d?t._bounds=Ps.circle(Ps.latLng(d.coords.lat,d.coords.lon),{radius:t.radius||500,items:_,cluster:t,color:p}):r.length?t._bounds=Ps.polyline(r,{items:_,cluster:t,color:p,weight:4}):t._bounds=Ps.rectangle(o,{items:_,cluster:t,fill:!0,color:p,dashArray:"8 3 1"}),t._bounds.on("mouseover",t=>{let e=t.target;e._weight=e.options.weight,e._color=e.options.color,e.options.weight=8,e.options.color="red",e._renderer._updateStyle(e)}).on("mouseout",t=>{let e=t.target;e.options.weight=e._weight,e.options.color=e._color,e._renderer._updateStyle(e)}).on("click",e=>{Ps.DomEvent.stopPropagation(e);let n,s=1e3,l=e.target,o=e.latlng,r=e.layerPoint;e.originalEvent.ctrlKey&&l.bringToBack(),l.options.items.forEach(t=>{let e=t._point.distanceTo(r);e<s&&(s=e,n=t)}),s<10?(Bs(n.options.props),Ss.setLatLng(n._latlng).openOn(Us._map)):(!function(t){let e=Ps.DomUtil.create("div");new Qn({target:e,props:{prp:t}}),Hs.setContent(e)}(t),Hs.setLatLng(o).openOn(Us._map))}),n.push(t._bounds),n=n.concat(_)}};Promise.all([2019,2020].map(t=>fetch("https://dtp.mvs.group/scripts/hearthssettlements_dev/"+t+".txt",{}).then(t=>t.json()))).then(t=>{t.forEach(t=>{t.forEach(t=>{(t.hearth3||[]).forEach(t=>{s(t,"hearth3")}),(t.hearth5||[]).forEach(t=>{s(t,"hearth5")})}),Us._opt=e,Us._group=Ps.layerGroup(n),Ns?Us.setFilter(Ns):Us.addLayer(Us._group),Us._refreshFilters()}),console.log("__allJson_____",t,Us._opt)})});class Vs extends gt{constructor(t){super(),mt(this,t,Ys,Zs,C,{prp:0})}}const Ws=window.L,Ks=Ws.popup();Ws.popup({minWidth:200});let Js;const Xs=Ws.featureGroup([]);function Qs(t,e,n){const s=t.slice();return s[4]=e[n],s[6]=n,s}function tl(t,e,n){const s=t.slice();return s[4]=e[n],s[6]=n,s}function el(t){let e,n,s,l,o=t[4].complex_name+"";return{c(){e=O("button"),n=E(o),S(e,"class",s="tab "+t[6]+" "+(0===t[6]?"active":"")+" svelte-h8luxq")},m(s,o,r){D(s,e,o),z(e,n),r&&l(),l=q(e,"click",t[2])},p:y,d(t){t&&F(e),l()}}}function nl(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f,m,g,b,k,x,j,C,L,w,T=t[4].complex_name+"",$=t[4].complex_sid+"",q=t[4].complex_model_name+"",P=t[4].complex_type_name+"",H=(t[4].cafap_status||"")+"";return{c(){e=O("table"),n=O("tr"),s=O("td"),s.textContent="Комплекс:",l=O("td"),o=E(T),r=E(" (id: "),i=E($),a=E(")"),p=M(),c=O("tr"),d=O("td"),d.textContent="Модель:",u=O("td"),_=E(q),h=M(),v=O("tr"),f=O("td"),f.textContent="Тип:",m=O("td"),g=E(P),b=M(),k=O("tr"),x=O("td"),x.textContent="Работоспособность:",j=O("td"),C=E(H),L=M(),S(s,"class","first svelte-h8luxq"),S(d,"class","first svelte-h8luxq"),S(f,"class","first svelte-h8luxq"),S(x,"class","first svelte-h8luxq"),S(e,"class",w="tabCont "+t[6]+" "+(0===t[6]?"":"hidden")+" svelte-h8luxq")},m(t,y){D(t,e,y),z(e,n),z(n,s),z(n,l),z(l,o),z(l,r),z(l,i),z(l,a),z(e,p),z(e,c),z(c,d),z(c,u),z(u,_),z(e,h),z(e,v),z(v,f),z(v,m),z(m,g),z(e,b),z(e,k),z(k,x),z(k,j),z(j,C),z(e,L)},p:y,d(t){t&&F(e)}}}function sl(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f,m,g,b,k,x,j,C,L,w,$,P,H,B,U,I,G,A,R,Z,Y,V,W,K,J,X,Q,tt,et,nt,st,lt=(t[0].id||t[0].line_id)+"",ot=(t[0].stage_name||"")+"",rt=(t[0].road_name||"")+"",it=t[0].lat+"",at=t[0].lon+"",pt=(t[0].address||"")+"",ct=t[3],dt=[];for(let e=0;e<ct.length;e+=1)dt[e]=el(tl(t,ct,e));let ut=t[3],_t=[];for(let e=0;e<ut.length;e+=1)_t[e]=nl(Qs(t,ut,e));return{c(){e=O("div"),n=O("div"),s=E("Рубеж (id: "),l=E(lt),o=E(")"),r=M(),i=O("div"),a=O("table"),p=O("tbody"),c=O("tr"),d=O("td"),d.textContent="Этап:",u=M(),_=O("td"),h=E(ot),v=M(),f=O("tr"),m=O("td"),m.textContent="Дорога:",g=M(),b=O("td"),k=E(rt),x=M(),j=O("tr"),C=O("td"),C.textContent="Координаты:",L=M(),w=O("td"),$=E(it),P=M(),H=E(at),B=M(),U=O("span"),I=M(),G=O("tr"),A=O("td"),A.textContent="Адрес:",R=M(),Z=O("td"),Y=E(pt),V=M(),W=O("tr"),K=O("td"),K.textContent="Комплексов:",J=M(),X=O("td"),X.textContent=`${t[3].length}`,Q=M(),tt=O("tr"),et=O("td");for(let t=0;t<dt.length;t+=1)dt[t].c();nt=M();for(let t=0;t<_t.length;t+=1)_t[t].c();S(n,"class","pLine"),S(d,"class","first svelte-h8luxq"),S(m,"class","first svelte-h8luxq"),S(C,"class","first svelte-h8luxq"),S(U,"title","Скопировать в буфер обмена"),S(U,"class","leaflet-gmx-icon-copy"),S(A,"class","first svelte-h8luxq"),S(K,"class","first svelte-h8luxq"),S(et,"class","tabs svelte-h8luxq"),S(et,"colspan","2"),S(a,"class","table svelte-h8luxq"),S(i,"class","featureCont"),S(e,"class","mvsPopup svelte-h8luxq")},m(y,F,T){D(y,e,F),z(e,n),z(n,s),z(n,l),z(n,o),z(e,r),z(e,i),z(i,a),z(a,p),z(p,c),z(c,d),z(c,u),z(c,_),z(_,h),z(p,v),z(p,f),z(f,m),z(f,g),z(f,b),z(b,k),z(p,x),z(p,j),z(j,C),z(j,L),z(j,w),z(w,$),z(w,P),z(w,H),z(w,B),z(w,U),z(p,I),z(p,G),z(G,A),z(G,R),z(G,Z),z(Z,Y),z(p,V),z(p,W),z(W,K),z(W,J),z(W,X),z(p,Q),z(p,tt),z(tt,et);for(let t=0;t<dt.length;t+=1)dt[t].m(et,null);z(et,nt);for(let t=0;t<_t.length;t+=1)_t[t].m(et,null);T&&st(),st=q(U,"click",t[1])},p(t,[e]){if(1&e&&lt!==(lt=(t[0].id||t[0].line_id)+"")&&N(l,lt),1&e&&ot!==(ot=(t[0].stage_name||"")+"")&&N(h,ot),1&e&&rt!==(rt=(t[0].road_name||"")+"")&&N(k,rt),1&e&&it!==(it=t[0].lat+"")&&N($,it),1&e&&at!==(at=t[0].lon+"")&&N(H,at),1&e&&pt!==(pt=(t[0].address||"")+"")&&N(Y,pt),12&e){let n;for(ct=t[3],n=0;n<ct.length;n+=1){const s=tl(t,ct,n);dt[n]?dt[n].p(s,e):(dt[n]=el(s),dt[n].c(),dt[n].m(et,nt))}for(;n<dt.length;n+=1)dt[n].d(1);dt.length=ct.length}if(8&e){let n;for(ut=t[3],n=0;n<ut.length;n+=1){const s=Qs(t,ut,n);_t[n]?_t[n].p(s,e):(_t[n]=nl(s),_t[n].c(),_t[n].m(et,null))}for(;n<_t.length;n+=1)_t[n].d(1);_t.length=ut.length}},i:y,o:y,d(t){t&&F(e),T(dt,t),T(_t,t),st()}}}function ll(t,e,n){let{prp:s}=e;let l=s&&s.list_complex?s.list_complex:[];return console.log("complexes ",l),t.$set=t=>{"prp"in t&&n(0,s=t.prp)},[s,t=>{navigator.clipboard.writeText(t.target.parentNode.textContent).catch(t=>{console.log("Something went wrong",t)})},t=>{let e=t.target,n=/tab (\d)/.exec(e.className),s=n&&2===n.length?n[1]:0,l=e.parentNode;for(let t=0,e=l.childNodes.length;t<e;t++){let e=l.childNodes[t];if(e.classList){let t=e.classList.contains(s);"BUTTON"===e.tagName?e.classList[t?"add":"remove"]("active"):"TABLE"===e.tagName&&e.classList[t?"remove":"add"]("hidden")}}},l]}Xs.setFilter=t=>{if(!Xs._map)return;Xs.clearLayers(),Js=t;let e=[];Xs._group&&(Xs._group.getLayers().forEach(t=>{let n=t.options.cluster,s=0;Js.forEach(t=>{if("ht"===t.type)t.zn[n.ht]&&s++;else if("roads"===t.type)(t.zn.filter(t=>t===n.road).length||1===t.zn.length&&""===t.zn[0])&&s++;else if("id_dtp"===t.type)!n.list_dtp.filter(e=>e.id==t.zn).length&&t.zn.length||s++;else if("id_hearth"===t.type)t.zn==n.id_hearth&&s++;else if("stricken"===t.type){let e=t.zn;e?(1===e&&!n.count_stricken&&n.count_lost||2===e&&n.count_stricken&&!n.count_lost||3===e&&(n.count_stricken||n.count_lost)||4===e&&n.count_stricken&&n.count_lost)&&s++:s++}}),s===Js.length&&e.push(t)}),Xs.addLayer(Ws.layerGroup(e)))},Xs.on("remove",()=>{Xs.clearLayers()}).on("add",t=>{let e=t=>{let e=Ws.latLngBounds(),n="#FF0000";t.complexes&&(1===t.complexes.length?n="#FFA500":t.complexes.length>1&&(n="#0000FF"));let s=t.coords||{lat:t.lat,lon:t.lon},l=Ws.latLng(s.lat,s.lon);return e.extend(l),new g(Ws.latLng(s.lat,s.lon),{props:t,radius:6,zIndexOffset:5e4,stroke:!1,fillColor:n}).bindPopup(Ks).on("popupopen",t=>{!function(t){let e=Ws.DomUtil.create("div");new Vs({target:e,props:{prp:t}}),Ks.setContent(e)}(t.target.options.props)}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})};fetch("./static/rub.geojson",{}).then(t=>t.json()).then(t=>{let n=t.map(e);Xs._group=Ws.layerGroup(n),Xs.addLayer(Xs._group)})});class ol extends gt{constructor(t){super(),mt(this,t,ll,sl,C,{prp:0})}}const rl=window.L,il=rl.popup();rl.popup({minWidth:200});let al,pl="https://dtp.mvs.group/scripts/rubez_dev/";const cl=rl.featureGroup([]);function dl(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f,m,g,b,k,x,j,C,L,w,T,$,P,H,B,U,I,G,A,R,Z,Y,V,W,K,J,X,Q,tt,et,nt,st,lt,ot,rt,it,at,pt,ct,dt,ut,_t,ht,vt,ft,mt,gt,yt,bt,kt=(t[0].type||"")+"",xt=(t[0].id||"")+"",jt=(t[0].dor||"")+"",Ct=(t[0].status||"")+"",Lt=t[3](t[0].date_created)+"",wt=t[3](t[0].date_finish_fact)+"",zt=t[2].lat+"",Dt=t[2].lon+"",Ft=(t[0].id_dtp||"")+"",Tt=(t[0].client||"")+"";return{c(){e=O("div"),n=O("div"),n.textContent="Мероприятие",s=M(),l=O("div"),o=O("table"),r=O("tbody"),i=O("tr"),a=O("td"),a.textContent="Тип мероприятия:",p=M(),c=O("td"),d=E(kt),u=M(),_=O("tr"),h=O("td"),h.textContent="ID:",v=M(),f=O("td"),m=E(xt),g=M(),b=O("tr"),k=O("td"),k.textContent="Участок дороги:",x=M(),j=O("td"),C=E(jt),L=M(),w=O("tr"),T=O("td"),T.textContent="Статус:",$=M(),P=O("td"),H=E(Ct),B=M(),U=O("tr"),I=O("td"),I.textContent="Дата добавления:",G=M(),A=O("td"),R=E(Lt),Z=M(),Y=O("tr"),V=O("td"),V.textContent="Дата завершения:",W=M(),K=O("td"),J=E(wt),X=M(),Q=O("tr"),tt=O("td"),tt.textContent="Координаты:",et=M(),nt=O("td"),st=E(zt),lt=M(),ot=E(Dt),rt=M(),it=O("span"),at=M(),pt=O("tr"),ct=O("td"),ct.textContent="ID ДТП СКПДИ:",dt=M(),ut=O("td"),_t=E(Ft),ht=M(),vt=O("tr"),ft=O("td"),ft.textContent="Заказчик:",mt=M(),gt=O("td"),yt=E(Tt),S(n,"class","pLine"),S(a,"class","first svelte-h8luxq"),S(h,"class","first svelte-h8luxq"),S(k,"class","first svelte-h8luxq"),S(T,"class","first svelte-h8luxq"),S(I,"class","first svelte-h8luxq"),S(V,"class","first svelte-h8luxq"),S(tt,"class","first svelte-h8luxq"),S(it,"title","Скопировать в буфер обмена"),S(it,"class","leaflet-gmx-icon-copy"),S(ct,"class","first svelte-h8luxq"),S(ft,"class","first svelte-h8luxq"),S(o,"class","table svelte-h8luxq"),S(l,"class","featureCont"),S(e,"class","mvsPopup svelte-h8luxq")},m(y,F,O){D(y,e,F),z(e,n),z(e,s),z(e,l),z(l,o),z(o,r),z(r,i),z(i,a),z(i,p),z(i,c),z(c,d),z(r,u),z(r,_),z(_,h),z(_,v),z(_,f),z(f,m),z(r,g),z(r,b),z(b,k),z(b,x),z(b,j),z(j,C),z(r,L),z(r,w),z(w,T),z(w,$),z(w,P),z(P,H),z(r,B),z(r,U),z(U,I),z(U,G),z(U,A),z(A,R),z(r,Z),z(r,Y),z(Y,V),z(Y,W),z(Y,K),z(K,J),z(r,X),z(r,Q),z(Q,tt),z(Q,et),z(Q,nt),z(nt,st),z(nt,lt),z(nt,ot),z(nt,rt),z(nt,it),z(r,at),z(r,pt),z(pt,ct),z(pt,dt),z(pt,ut),z(ut,_t),z(r,ht),z(r,vt),z(vt,ft),z(vt,mt),z(vt,gt),z(gt,yt),O&&bt(),bt=q(it,"click",t[1])},p(t,[e]){1&e&&kt!==(kt=(t[0].type||"")+"")&&N(d,kt),1&e&&xt!==(xt=(t[0].id||"")+"")&&N(m,xt),1&e&&jt!==(jt=(t[0].dor||"")+"")&&N(C,jt),1&e&&Ct!==(Ct=(t[0].status||"")+"")&&N(H,Ct),1&e&&Lt!==(Lt=t[3](t[0].date_created)+"")&&N(R,Lt),1&e&&wt!==(wt=t[3](t[0].date_finish_fact)+"")&&N(J,wt),1&e&&Ft!==(Ft=(t[0].id_dtp||"")+"")&&N(_t,Ft),1&e&&Tt!==(Tt=(t[0].client||"")+"")&&N(yt,Tt)},i:y,o:y,d(t){t&&F(e),bt()}}}function ul(t,e,n){let{prp:s}=e;let l=s.coords[0]||{lat:s.lat,lon:s.lon};return t.$set=t=>{"prp"in t&&n(0,s=t.prp)},[s,t=>{navigator.clipboard.writeText(t.target.parentNode.textContent).catch(t=>{console.log("Something went wrong",t)})},l,t=>{if(!t)return"";let e=new Date(1e3*t);return e.toLocaleDateString()+" "+e.toLocaleTimeString()}]}cl.setFilter=t=>{if(!cl._map)return;cl.clearLayers(),al=t,cl._argFilters=al;let e=[];cl._group&&(cl._group.getLayers().forEach(t=>{let n=t.options.props,s=0;al.forEach(t=>{"comp"===t.type&&(n.rub_flag?t.zn.on&&s++:t.zn.off&&s++)}),s===al.length&&e.push(t)}),cl.addLayer(rl.layerGroup(e)))},cl.on("remove",()=>{cl.clearLayers()}).on("add",t=>{let e={road:{},bad:[]},n=[],s={},l=t=>{let l=rl.latLngBounds(),o="gray";if(t.rub_flag&&(o="#00FF00"),s[t.line_sid]?console.log("___Дубль____",t):s[t.line_sid]=t,!t.lat||!t.lon)return void e.bad.push(t);let r=t.coords||{lat:t.lat,lon:t.lon},i=rl.latLng(r.lat,r.lon);l.extend(i),n.push(new g(rl.latLng(r.lat,r.lon),{props:t,radius:6,zIndexOffset:5e4,path:"camera",stroke:!1,fillColor:o}).bindPopup(il).on("popupopen",t=>{!function(t){let e=rl.DomUtil.create("div"),n=t.line_sid;fetch(pl+"rubez-complex-"+n+".txt",{}).then(t=>t.json()).then(t=>{new ol({target:e,props:{prp:t[0]}}),il.setContent(e)}),il.setContent(e)}(t.target.options.props)}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)}))};fetch(pl+"rubez.txt",{}).then(t=>t.json()).then(t=>{t.forEach(l),cl._group=rl.layerGroup(n),cl.addLayer(cl._group),console.log("opt",e)})});class _l extends gt{constructor(t){super(),mt(this,t,ul,dl,C,{prp:0})}}const hl=window.L,vl=hl.popup();let fl;const ml=hl.featureGroup([]);function gl(t,e,n){const s=t.slice();return s[9]=e[n],s[11]=n,s}function yl(t,e,n){const s=t.slice();return s[14]=e[n],s}function bl(t,e,n){const s=t.slice();return s[9]=e[n],s}function kl(t){let e,n,s,l=t[14].k_uch&&(t[14].npdd||t[14].sop_npdd)&&function(t){let e,n,s=t[14].k_uch+"";return{c(){e=O("li"),n=E(s)},m(t,s){D(t,e,s),z(e,n)},p:y,d(t){t&&F(e)}}}(t),o=t[14].npdd&&function(t){let e,n,s=t[14].npdd+"";return{c(){e=O("li"),n=E(s)},m(t,s){D(t,e,s),z(e,n)},p:y,d(t){t&&F(e)}}}(t),r=t[14].sop_npdd&&function(t){let e,n,s=t[14].sop_npdd+"";return{c(){e=O("li"),n=E(s)},m(t,s){D(t,e,s),z(e,n)},p:y,d(t){t&&F(e)}}}(t);return{c(){l&&l.c(),e=M(),o&&o.c(),n=M(),r&&r.c(),s=$()},m(t,i){l&&l.m(t,i),D(t,e,i),o&&o.m(t,i),D(t,n,i),r&&r.m(t,i),D(t,s,i)},p(t,e){t[14].k_uch&&(t[14].npdd||t[14].sop_npdd)&&l.p(t,e),t[14].npdd&&o.p(t,e),t[14].sop_npdd&&r.p(t,e)},d(t){l&&l.d(t),t&&F(e),o&&o.d(t),t&&F(n),r&&r.d(t),t&&F(s)}}}function xl(t){let e,n,s=t[9].ts&&function(t){let e,n,s=t[9].ts+"";return{c(){e=O("li"),n=E(s)},m(t,s){D(t,e,s),z(e,n)},p:y,d(t){t&&F(e)}}}(t),l=t[9].arr,o=[];for(let e=0;e<l.length;e+=1)o[e]=kl(yl(t,l,e));return{c(){s&&s.c(),e=M();for(let t=0;t<o.length;t+=1)o[t].c();n=$()},m(t,l){s&&s.m(t,l),D(t,e,l);for(let e=0;e<o.length;e+=1)o[e].m(t,l);D(t,n,l)},p(t,e){if(t[9].ts&&s.p(t,e),16&e){let s;for(l=t[9].arr,s=0;s<l.length;s+=1){const r=yl(t,l,s);o[s]?o[s].p(r,e):(o[s]=kl(r),o[s].c(),o[s].m(n.parentNode,n))}for(;s<o.length;s+=1)o[s].d(1);o.length=l.length}},d(t){s&&s.d(t),t&&F(e),T(o,t),t&&F(n)}}}function jl(t){let e,n,s,l,o,r=t[0].spog+"";return{c(){e=O("div"),n=O("div"),n.textContent="Погода:",s=M(),l=O("div"),o=E(r),S(n,"class","stitle"),S(l,"class","sval")},m(t,r){D(t,e,r),z(e,n),z(e,s),z(e,l),z(l,o)},p(t,e){1&e&&r!==(r=t[0].spog+"")&&N(o,r)},d(t){t&&F(e)}}}function Cl(t){let e,n,s,l,o,r=t[0].s_pch+"";return{c(){e=O("div"),n=O("div"),n.textContent="Покрытие:",s=M(),l=O("div"),o=E(r),S(n,"class","stitle"),S(l,"class","sval")},m(t,r){D(t,e,r),z(e,n),z(e,s),z(e,l),z(l,o)},p(t,e){1&e&&r!==(r=t[0].s_pch+"")&&N(o,r)},d(t){t&&F(e)}}}function Ll(t){let e,n,s,l,o,r=t[0].osv+"";return{c(){e=O("div"),n=O("div"),n.textContent="Освещенность:",s=M(),l=O("div"),o=E(r),S(n,"class","stitle"),S(l,"class","sval")},m(t,r){D(t,e,r),z(e,n),z(e,s),z(e,l),z(l,o)},p(t,e){1&e&&r!==(r=t[0].osv+"")&&N(o,r)},d(t){t&&F(e)}}}function wl(t){let e,n,s,l,o,r=t[0].ndu+"";return{c(){e=O("div"),n=O("div"),n.textContent="Иные условия:",s=M(),l=O("div"),o=E(r),S(n,"class","stitle"),S(l,"class","sval")},m(t,r){D(t,e,r),z(e,n),z(e,s),z(e,l),z(l,o)},p(t,e){1&e&&r!==(r=t[0].ndu+"")&&N(o,r)},d(t){t&&F(e)}}}function zl(t){let e,n,s,l,o,r,i,a=t[9].line_id+"",p=t[9].range+"";return{c(){e=O("li"),n=E(a),s=E(" ("),l=E(p),o=E(" м.)"),S(e,"class","link svelte-vw4d3d"),e.value=r=t[9].line_id},m(r,a,p){D(r,e,a),z(e,n),z(e,s),z(e,l),z(e,o),p&&i(),i=q(e,"click",t[2])},p(t,s){1&s&&a!==(a=t[9].line_id+"")&&N(n,a),1&s&&p!==(p=t[9].range+"")&&N(l,p),1&s&&r!==(r=t[9].line_id)&&(e.value=r)},d(t){t&&F(e),i()}}}function Dl(t){let e,n,s,l,o,r,i,a,p,c,d,u,_,h,v,f,m,g,b,k,x,j,C,L,w,$,P,H,B,U,I,G,A,R,Z,Y,V,W,K,J,X,Q,tt,et,nt,st,lt,ot,rt,it,at,pt,ct,dt,ut,_t,ht,vt,ft,mt,gt,yt,bt,kt,xt,jt,Ct,Lt,wt,zt,Dt,Ft,Tt,Ot,Et,Mt,$t,qt,Pt,St,Ht,Nt,Bt,Ut,It,Gt,At=(t[0].name||t[0].dtvp||"")+"",Rt=(t[0].sid||t[0].id_stat||t[0].id_skpdi||"")+"",Zt=(t[0].district||"")+"",Yt=(t[0].dor||"")+"",Vt=(t[0].km||0)+"",Wt=(t[0].m||0)+"",Kt=t[0].lat+"",Jt=t[0].lon+"",Xt=(t[0].collision_date||t[0].dtp_date||"")+"",Qt=(t[0].dtvp||"")+"",te=t[0].pog+"",ee=t[0].ran+"",ne=t[4],se=[];for(let e=0;e<ne.length;e+=1)se[e]=xl(bl(t,ne,e));let le=t[0].spog&&jl(t),oe=t[0].s_pch&&Cl(t),re=t[0].osv&&Ll(t),ie=t[0].ndu&&wl(t),ae=t[0].list_rub||[],pe=[];for(let e=0;e<ae.length;e+=1)pe[e]=zl(gl(t,ae,e));return{c(){e=O("div"),n=O("div"),s=O("b"),l=E(At),o=M(),r=O("div"),i=O("table"),a=O("tbody"),p=O("tr"),c=O("td"),c.textContent="ID:",d=M(),u=O("td"),_=E(Rt),h=M(),v=O("tr"),f=O("td"),f.textContent="Адрес:",m=M(),g=O("td"),b=E(Zt),k=M(),x=E(Yt),j=M(),C=O("tr"),L=O("td"),L.textContent="Пикетаж:",w=M(),$=O("td"),P=O("b"),H=E(Vt),B=E(" км. "),U=O("b"),I=E(Wt),G=E(" м."),A=M(),R=O("tr"),Z=O("td"),Z.textContent="Координаты:",Y=M(),V=O("td"),W=E(Kt),K=M(),J=E(Jt),X=M(),Q=O("span"),tt=M(),et=O("tr"),nt=O("td"),nt.textContent="Дата/время:",st=M(),lt=O("td"),ot=E(Xt),rt=M(),it=O("tr"),at=O("td"),at.textContent="Вид ДТП:",pt=M(),ct=O("td"),dt=E(Qt),ut=M(),_t=O("tr"),ht=O("td"),ht.textContent="Нарушения:",vt=M(),ft=O("td"),mt=O("ul");for(let t=0;t<se.length;t+=1)se[t].c();gt=M(),yt=O("tr"),bt=O("td"),bt.textContent="Условия:",kt=M(),xt=O("td"),le&&le.c(),jt=M(),oe&&oe.c(),Ct=M(),re&&re.c(),Lt=M(),ie&&ie.c(),wt=M(),zt=O("tr"),Dt=O("td"),Dt.textContent="Количество погибших/раненых:",Ft=M(),Tt=O("td"),Ot=O("b"),Et=E(te),Mt=E("/"),$t=E(ee),qt=M(),Pt=O("tr"),St=O("td"),St.textContent="Рубежи:",Ht=M(),Nt=O("td"),Bt=O("div"),Ut=M(),It=O("ul");for(let t=0;t<pe.length;t+=1)pe[t].c();S(n,"class","pLine"),S(c,"class","first svelte-vw4d3d"),S(f,"class","first svelte-vw4d3d"),S(L,"class","first svelte-vw4d3d"),S(Z,"class","first svelte-vw4d3d"),S(Q,"title","Скопировать в буфер обмена"),S(Q,"class","leaflet-gmx-icon-copy"),S(nt,"class","first svelte-vw4d3d"),S(at,"class","first svelte-vw4d3d"),S(ht,"class","first svelte-vw4d3d"),S(bt,"class","first svelte-vw4d3d"),S(Dt,"class","first svelte-vw4d3d"),S(St,"class","first svelte-vw4d3d"),S(Bt,"class","win leaflet-popup-content-wrapper  svelte-vw4d3d"),S(i,"class","table"),S(r,"class","featureCont"),S(e,"class","mvsPopup svelte-vw4d3d")},m(y,F,T){D(y,e,F),z(e,n),z(n,s),z(s,l),z(e,o),z(e,r),z(r,i),z(i,a),z(a,p),z(p,c),z(p,d),z(p,u),z(u,_),z(a,h),z(a,v),z(v,f),z(v,m),z(v,g),z(g,b),z(g,k),z(g,x),z(a,j),z(a,C),z(C,L),z(C,w),z(C,$),z($,P),z(P,H),z($,B),z($,U),z(U,I),z($,G),z(a,A),z(a,R),z(R,Z),z(R,Y),z(R,V),z(V,W),z(V,K),z(V,J),z(V,X),z(V,Q),z(a,tt),z(a,et),z(et,nt),z(et,st),z(et,lt),z(lt,ot),z(a,rt),z(a,it),z(it,at),z(it,pt),z(it,ct),z(ct,dt),z(a,ut),z(a,_t),z(_t,ht),z(_t,vt),z(_t,ft),z(ft,mt);for(let t=0;t<se.length;t+=1)se[t].m(mt,null);z(a,gt),z(a,yt),z(yt,bt),z(yt,kt),z(yt,xt),le&&le.m(xt,null),z(xt,jt),oe&&oe.m(xt,null),z(xt,Ct),re&&re.m(xt,null),z(xt,Lt),ie&&ie.m(xt,null),z(a,wt),z(a,zt),z(zt,Dt),z(zt,Ft),z(zt,Tt),z(Tt,Ot),z(Ot,Et),z(Ot,Mt),z(Ot,$t),z(a,qt),z(a,Pt),z(Pt,St),z(Pt,Ht),z(Pt,Nt),z(Nt,Bt),t[8](Bt),z(Nt,Ut),z(Nt,It);for(let t=0;t<pe.length;t+=1)pe[t].m(It,null);T&&Gt(),Gt=q(Q,"click",t[3])},p(t,[e]){if(1&e&&At!==(At=(t[0].name||t[0].dtvp||"")+"")&&N(l,At),1&e&&Rt!==(Rt=(t[0].sid||t[0].id_stat||t[0].id_skpdi||"")+"")&&N(_,Rt),1&e&&Zt!==(Zt=(t[0].district||"")+"")&&N(b,Zt),1&e&&Yt!==(Yt=(t[0].dor||"")+"")&&N(x,Yt),1&e&&Vt!==(Vt=(t[0].km||0)+"")&&N(H,Vt),1&e&&Wt!==(Wt=(t[0].m||0)+"")&&N(I,Wt),1&e&&Kt!==(Kt=t[0].lat+"")&&N(W,Kt),1&e&&Jt!==(Jt=t[0].lon+"")&&N(J,Jt),1&e&&Xt!==(Xt=(t[0].collision_date||t[0].dtp_date||"")+"")&&N(ot,Xt),1&e&&Qt!==(Qt=(t[0].dtvp||"")+"")&&N(dt,Qt),16&e){let n;for(ne=t[4],n=0;n<ne.length;n+=1){const s=bl(t,ne,n);se[n]?se[n].p(s,e):(se[n]=xl(s),se[n].c(),se[n].m(mt,null))}for(;n<se.length;n+=1)se[n].d(1);se.length=ne.length}if(t[0].spog?le?le.p(t,e):(le=jl(t),le.c(),le.m(xt,jt)):le&&(le.d(1),le=null),t[0].s_pch?oe?oe.p(t,e):(oe=Cl(t),oe.c(),oe.m(xt,Ct)):oe&&(oe.d(1),oe=null),t[0].osv?re?re.p(t,e):(re=Ll(t),re.c(),re.m(xt,Lt)):re&&(re.d(1),re=null),t[0].ndu?ie?ie.p(t,e):(ie=wl(t),ie.c(),ie.m(xt,null)):ie&&(ie.d(1),ie=null),1&e&&te!==(te=t[0].pog+"")&&N(Et,te),1&e&&ee!==(ee=t[0].ran+"")&&N($t,ee),5&e){let n;for(ae=t[0].list_rub||[],n=0;n<ae.length;n+=1){const s=gl(t,ae,n);pe[n]?pe[n].p(s,e):(pe[n]=zl(s),pe[n].c(),pe[n].m(It,null))}for(;n<pe.length;n+=1)pe[n].d(1);pe.length=ae.length}},i:y,o:y,d(n){n&&F(e),T(se,n),le&&le.d(),oe&&oe.d(),re&&re.d(),ie&&ie.d(),t[8](null),T(pe,n),Gt()}}}function Fl(t,e,n){let s,l,{showModal:o=!1}=e,{prp:r}=e,i=r.skpdiFiles?"":"disabled";V(()=>{o&&(s=new Lt({target:document.body,props:{data:r.skpdiFiles}}),s.$on("close",t=>{s.$destroy(),n(5,o=!1)}))});const a=(r.tsInfo||[]).map(t=>{let e=t.ts_uch||[];return{ts:"Осталось на месте ДТП"!==t.ts?t.ts:"",arr:e.map(t=>({k_uch:t.k_uch||"",npdd:"Нет нарушений"!==t.npdd?t.npdd:"",sop_npdd:"Нет нарушений"!==t.sop_npdd?t.sop_npdd:""}))}});return console.log("ddddd",r),t.$set=t=>{"showModal"in t&&n(5,o=t.showModal),"prp"in t&&n(0,r=t.prp)},[r,l,t=>{let e=t.target.value;console.log("showRub",t.target.value),n(1,l.innerHTML="",l),fetch("https://dtp.mvs.group/scripts/rubez_dev/rubez-complex-"+e+".txt",{}).then(t=>t.json()).then(t=>{new ol({target:l,props:{prp:t[0]}})})},t=>{navigator.clipboard.writeText(t.target.parentNode.textContent).catch(t=>{console.log("Something went wrong",t)})},a,o,s,i,function(t){J[t?"unshift":"push"](()=>{n(1,l=t)})}]}ml.setFilter=t=>{if(!ml._map)return;ml.clearLayers(),fl=t,ml._argFilters=fl;let e=[];ml._group&&(ml._group.getLayers().forEach(t=>{let n=t.options.props,s=0;fl.forEach(t=>{"measures_type"===t.type?(""===t.zn[0]||t.zn.filter(t=>t===n.type).length)&&s++:"id_dtp"===t.type?n.id_dtp==t.zn&&s++:"date"===t.type&&n.date_created>=t.zn[0]&&n.date_created<t.zn[1]&&s++}),s===fl.length&&e.push(t)}),ml.addLayer(hl.layerGroup(e)))},ml.on("remove",()=>{ml.clearLayers()}).on("add",t=>{let e={type:{},bad:[]},n=[],s={},l=t=>{hl.latLngBounds();let l="gray";t.rub_flag&&(l="#00FF00"),s[t.id]?console.log("___Дубль____",t):s[t.id]=t;let o=t.coords[0]||{lat:t.lat,lon:t.lon},r=hl.latLng(o.lat,o.lon);if(!o.lat||!o.lon||!t.id_dtp)return void e.bad.push(t);let i=t.type||" ";t.type=i;let a=e.type[i];a?a++:a=1,e.type[i]=a,n.push(new g(r,{props:t,radius:9,zIndexOffset:5e4,stroke:!1,fillColor:l}).bindPopup(vl).on("popupopen",t=>{!function(t){let e=hl.DomUtil.create("div");t.id;new _l({target:e,props:{prp:t}}),vl.setContent(e)}(t.target.options.props)}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)}))};fetch("https://dtp.mvs.group/scripts/events_dev/get_event.txt",{}).then(t=>t.json()).then(t=>{t.forEach(l),ml._opt=e,ml._group=hl.layerGroup(n),ml.addLayer(ml._group),console.log("opt",e)})});class Tl extends gt{constructor(t){super(),mt(this,t,Fl,Dl,C,{showModal:5,prp:0})}}const Ol=window.L,El=Ol.popup();let Ml;const $l=Ol.featureGroup([]);$l._needHeat={radius:19,blur:11.26,minOpacity:.34},$l.checkZoom=t=>{Object.keys($l._layers).length?t<12&&$l.setFilter(Ml):t>11&&$l.setFilter(Ml)},$l.setFilter=t=>{if(!$l._map)return;$l.clearLayers(),Ml=t||[],$l._argFilters=Ml;let e=[],n=[];$l._group&&$l._map&&($l._group.getLayers().forEach(t=>{let s=t.options.props,l=0;Ml.forEach(t=>{"collision_type"===t.type?(""===t.zn[0]||t.zn.filter(t=>t===s.collision_type).length)&&l++:"id_dtp"===t.type?s.id==t.zn&&l++:"list_rub"===t.type?s.list_rub.length?t.zn.on&&l++:t.zn.off&&l++:"date"===t.type&&s.date>=t.zn[0]&&s.date<t.zn[1]&&l++}),l===Ml.length&&(e.push(t),n.push(t._latlng))}),$l._needHeat?($l._map.addLayer($l._heat),$l._heat.setLatLngs(n),$l._heat.setOptions($l._needHeat),$l._map._zoom>11&&$l.addLayer(Ol.layerGroup(e))):($l.addLayer(Ol.layerGroup(e)),$l._map.removeLayer($l._heat)))},$l.on("remove",t=>{$l._map.removeLayer($l._heat),$l.clearLayers()}).on("add",t=>{$l._heat=Ol.heatLayer([],{gradient:{.1:"blue",.4:"lime",1:"red"}}),Ml=null,fetch("https://dtp.mvs.group/scripts/dtprubez_dev/get_stat_gipdd_with_rub.txt",{}).then(t=>t.json()).then(t=>{let e={collision_type:{},iconType:{}},n=[],s=t.map(t=>{let s=t.iconType||0,l=!1,o="#2F4F4F";s&&(l=s%2==0,s>=1&&s<=6?o="#8B4513":7===s||8===s?o="#228B22":s>=9&&s<=14?o="#8B4513":15===s||16===s?o="#7B68EE":17!==s&&18!==s||(o="#2F4F4F")),t.list_rub||(t.list_rub=[]),t.lat&&t.lon||(console.log("_______",t),t.lat=t.lon=0);let r=e.collision_type[t.collision_type];r?r++:r=1,e.collision_type[t.collision_type]=r,e.iconType[t.collision_type]=s;let i=Ol.latLng(t.lat,t.lon,l?1:.5);return n.push(i),new g(i,{props:t,radius:6,stroke:l,fillColor:o}).bindPopup(El).on("popupopen",t=>{var e;e=t.target.options.props.id,fetch("https://dtp.mvs.group/scripts/dtprubez_dev/get_stat_gipdd_with_rub_"+e+".txt",{}).then(t=>t.json()).then(t=>{let e=Ol.DomUtil.create("div");const n=new Tl({target:e,props:{prp:t}});El._svObj=n,El.setContent(e)})}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})});$l.addLayer($l._heat),$l._heat.setLatLngs(n),$l._heat.setOptions($l._needHeat),$l._opt=e,$l._group=Ol.layerGroup(s),$l.setFilter(),$l._map._zoom>11&&$l.addLayer($l._group),$l._refreshFilters()})});const ql=window.L;ql.popup();let Pl;const Sl=ql.featureGroup([]);Sl._needHeat={radius:19,blur:11.26,minOpacity:.34},Sl.checkZoom=t=>{Object.keys(Sl._layers).length?t<12&&Sl.setFilter(Pl):t>11&&Sl.setFilter(Pl)},Sl.setFilter=t=>{if(!Sl._map)return;Sl.clearLayers(),Pl=t||[],Sl._argFilters=Pl;let e=[],n=[];Sl._group&&(Sl._group.getLayers().forEach(t=>{let s=t.options.props,l=0;Pl.forEach(t=>{"collision_type"===t.type?(""===t.zn[0]||t.zn.filter(t=>t===s.collision_type).length)&&l++:"list_rub"===t.type?s.list_rub.length?t.zn.on&&l++:t.zn.off&&l++:"date"===t.type&&s.date>=t.zn[0]&&s.date<t.zn[1]&&l++}),l===Pl.length&&(e.push(t),n.push(t._latlng))}),Sl.addLayer(ql.layerGroup(e)))},Sl.on("remove",t=>{Sl.clearLayers()}).on("add",t=>{fetch("https://dtp.mvs.group/static/proxy.php?url=https://graphql.dev.mvs.group/graphql",{body:'{"operationName":null,"variables":{},"query":"{\\n  allVMapLineInfos(filter: {lon: {isNull: false}, lat: {isNull: false}}) {\\n    totalCount\\n    nodes {\\n      lineSid: sid\\n      lineName: name\\n      lineAddress: address\\n      roadName\\n      stage\\n      lat\\n      lon\\n      yield\\n      complexes\\n      __typename\\n    }\\n    __typename\\n  }\\n}\\n"}',method:"POST",mode:"cors"}).then(t=>t.json()).then(t=>{console.log("json",t)})});const Hl=window.L,Nl=Hl.popup(),Bl=Hl.popup({minWidth:200});let Ul;const Il=function(t){let e=Hl.DomUtil.create("div");return new ge({target:e,props:{prp:t}}),Nl.setContent(e),e},Gl=Hl.featureGroup([]);Gl.setFilter=t=>{if(!Gl._map)return;Gl.clearLayers(),Ul=t;let e=[];Gl._group&&(Gl._group.getLayers().forEach(t=>{let n=t.options.cluster,s=0;Ul.forEach(t=>{if("ht"===t.type)t.zn[n.ht]&&s++;else if("roads"===t.type)(t.zn.filter(t=>t===n.road).length||1===t.zn.length&&""===t.zn[0])&&s++;else if("id_dtp"===t.type)!n.list_dtp.filter(e=>e.id_skpdi==t.zn||e.id_stat==t.zn).length&&t.zn.length||s++;else if("id_hearth"===t.type)t.zn==n.id&&s++;else if("year"===t.type)t.zn[n.year]&&s++;else if("stricken"===t.type){let e=t.zn;e?(1===e&&!n.count_stricken&&n.count_lost||2===e&&n.count_stricken&&!n.count_lost||3===e&&(n.count_stricken||n.count_lost)||4===e&&n.count_stricken&&n.count_lost)&&s++:s++}}),s===Ul.length&&e.push(t)}),Gl.addLayer(Hl.layerGroup(e)))},Gl.on("remove",()=>{Gl.clearLayers()}).on("add",t=>{let e={road:{},str_icon_type:{},lost:0,stricken:{0:0},iconType:{},years:{},dtps:{}},n=[],s=(t,s)=>{let l=t.icon_type||1,o=Hl.latLngBounds(),r=[],i=t.list_dtp,a=!1,p="#FF0000";if(c(t,e),t.ht=s<2?"hearth3":"hearth5",i.length){e.years[t.year]=!0;let s=e.str_icon_type[t.str_icon_type];s?s++:s=1,e.str_icon_type[t.str_icon_type]=s,e.iconType[t.str_icon_type]=l,t.road in e.road?e.road[t.road]++:e.road[t.road]=1,l&&(a=l%2==0,1===l||2===l?p="#FFA500":3===l||4===l?p="#B8860B":5===l||6===l?p="#CD853F":7===l||8===l?p="#228B22":9===l||10===l?p="#FF8C00":11===l||12===l?p="#D2691E":13===l||14===l?p="#DEB887":15===l||16===l?p="#7B68EE":17!==l&&18!==l||(p="#2F4F4F"));let c=i.map(n=>{n.iconType;let s=n.coords||{lat:0,lon:0},l=Hl.latLng(s.lat,s.lon),i=[];o.extend(l),r.push(l),n.id_skpdi&&i.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&i.push({type:"gibdd",id:n.id_stat}),n._cur=i;let c=n.id||n.id_stat||n.id_skpdi,d=e.dtps[c]||{},u=t.id||t.id_hearth;return d?d[u]?d[u]++:d[u]=1:(d={},d[u]=1),e.dtps[c]=d,a=!1,n.lost&&(e.lost++,a=!0),new g(Hl.latLng(s.lat,s.lon),{cluster:t,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:a,fillColor:p}).bindPopup(Nl).on("popupopen",t=>{Il(t.target.options.props)}).on("popupclose",t=>{t.popup._svObj&&(t.popup._svObj.$destroy(),delete t.popup._svObj)})});r.length?t._bounds=Hl.polyline(r,{items:c,cluster:t,color:p,weight:4}):t._bounds=Hl.rectangle(o,{items:c,cluster:t,fill:!0,color:p,dashArray:"8 3 1"}),t._bounds.on("mouseover",t=>{let e=t.target;e._weight=e.options.weight,e._color=e.options.color,e.options.weight=8,e.options.color="red",e._renderer._updateStyle(e)}).on("mouseout",t=>{let e=t.target;e.options.weight=e._weight,e.options.color=e._color,e._renderer._updateStyle(e)}).on("click",e=>{Hl.DomEvent.stopPropagation(e);let n,s=1e3,l=e.target,o=e.latlng,r=e.layerPoint;e.originalEvent.ctrlKey&&l.bringToBack(),l.options.items.forEach(t=>{let e=t._point.distanceTo(r);e<s&&(s=e,n=t)}),s<10?(Il(n.options.props),Nl.setLatLng(n._latlng).openOn(Gl._map)):(!function(t){let e=Hl.DomUtil.create("div");new Qn({target:e,props:{predochag:1,prp:t}}),Bl.setContent(e)}(t),Bl.setLatLng(o).openOn(Gl._map))}),n.push(t._bounds),n=n.concat(c)}};Promise.all(["https://dtp.mvs.group/scripts/prehearths2_dev/2019.txt","https://dtp.mvs.group/scripts/prehearths2_dev/2020.txt","https://dtp.mvs.group/scripts/prehearths4_dev/2019.txt","https://dtp.mvs.group/scripts/prehearths4_dev/2020.txt"].map(t=>fetch(t,{}).then(t=>t.json()))).then(t=>{t.forEach((t,l)=>{e.stricken[0]+=t.length,t.forEach(t=>{s(t,l)}),Gl._opt=e,Gl._group=Hl.layerGroup(n),Ul?Gl.setFilter(Ul):Gl.addLayer(Gl._group),Gl._refreshFilters()}),console.log("__allJson_____",t,Gl._opt)})});const Al=window.L;let Rl;Al.canvas();const Zl=Al.featureGroup([]);Zl.on("remove",t=>{Zl.clearLayers()}).on("add",t=>{Rl=Zl._map,fetch("static/m4.geojson",{}).then(t=>t.json()).then(t=>{let e,n=Al.geoJson(t,{style:()=>({weight:6})}).on("mouseout",t=>{e&&e._map&&e._map.removeLayer(e)}).on("mousemove",t=>{e&&e._map&&e._map.removeLayer(e);let n,s=t.layer,l=Number.MAX_VALUE,o=t.layerPoint,r=t.latlng,i=s._rings[0];for(let t=0,e=i.length-1;t<e;t++){let e=Al.LineUtil._sqClosestPointOnSegment(o,i[t],i[t+1],!0);e<l&&(l=e,n=t)}let a=s._latlngs.slice(0,n);a.push(r),e=Al.polyline(a,{color:"red",weight:6,interactive:!1}).bindTooltip("").addTo(Rl),e.openTooltip(r);let p=Math.floor(d(a)),c=Math.floor(p/1e3),u=p-1e3*c;e.setTooltipContent(c+" км. "+u+" м.")});Zl.clearLayers(),Zl.addLayer(n)})});const Yl=window.L,Vl=Yl.map(document.body,{center:[55.758031,37.611694],minZoom:1,zoom:8,maxZoom:21,attributionControl:!1,trackResize:!0,fadeAnimation:!0,zoomAnimation:!0,distanceUnit:"auto",squareUnit:"auto"});var Wl=Vl._controlCorners,Kl=Vl._controlContainer,Jl="leaflet-top leaflet-bottom",Xl="leaflet-left leaflet-right",Ql={bottom:"leaflet-bottom "+Xl,gmxbottomleft:"leaflet-bottom leaflet-left",gmxbottomcenter:"leaflet-bottom "+Xl,gmxbottomright:"leaflet-bottom leaflet-right",center:Jl+" "+Xl,right:"leaflet-right "+Jl,left:"leaflet-left "+Jl,top:"leaflet-top "+Xl};for(var to in Ql)Wl[to]||(Wl[to]=Yl.DomUtil.create("div",Ql[to],Kl));Vl.addControl(Yl.control.gmxCenter()).addControl(Yl.control.fitCenter());var eo=Yl.TileLayer.extend({options:{tilesCRS:Yl.CRS.EPSG3395},_getTiledPixelBounds:function(t){var e=Yl.TileLayer.prototype._getTiledPixelBounds.call(this,t);return this._shiftY=this._getShiftY(this._tileZoom),e.min.y+=this._shiftY,e.max.y+=this._shiftY,e},_tileOnError:function(t,e,n){var s=e.getAttribute("src"),l=s.indexOf("/mapcache/");if(l>-1){var o=new URL("http:"+s).searchParams,r=s.substr(l+1).split("/"),i=a[r[1]];e.src=Yl.Util.template(i.errorTileUrlPrefix+i.postfix,{z:o.get("z"),x:o.get("x"),y:o.get("y")})}t(n,e)},_getTilePos:function(t){return Yl.TileLayer.prototype._getTilePos.call(this,t).subtract([0,this._shiftY])},_getShiftY:function(t){var e=this._map,n=e.getCenter(),s=e.options.crs.project(n).y-this.options.tilesCRS.project(n).y;return Math.floor(Yl.CRS.scale(t)*s/40075016.685578495)}});Yl.TileLayer.Mercator=eo,Yl.tileLayer.Mercator=function(t,e){return new eo(t,e)};let no={};p.b||(p.b="m2"),["m2","m3"].forEach(t=>{let e=a[t],n=Yl.tileLayer.Mercator(e.prefix+e.postfix,e.options);no[e.title]=n,p.b===e.options.key&&n.addTo(Vl)}),no.OpenStreetMap=Yl.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:21,maxNativeZoom:18});let so={"Трассы":Zl,"Мероприятия":ml,"Рубежи":cl,"Очаги с привязкой к городам":Us,"Предочаги по пикетажу":Gl,"Очаги ГИБДД по пикетажу":qs,"Очаги ГИБДД разные типы, геометрия":Fs,"Очаги ГИБДД одного типа, геометрия":js,"ДТП Очаги(Stat)":ms,"ДТП Очаги(tmp)":ds,"Очаги ГИБДД+СКПДИ по кварталам геометрия":os,"ДТП  ГИБДД+СКПДИ (объединение)":xe,"ДТП СКПДИ + тепловая карта":de,"ДТП ГИБДД + тепловая карта":Kt,"ДТП ГИБДД + тепловая карта + Рубежи":$l},lo=p.o?p.o.split(",").reduce((t,e)=>(t[e]=!0,t),{}):{};["m1","m4","m5"].forEach(t=>{let e=a[t],n=Yl.tileLayer.Mercator(e.prefix+e.postfix,e.options);so[e.title]=n,lo[e.options.key]&&n.addTo(Vl)});Yl.control.layers(no,so).addTo(Vl);let oo,ro,io=Yl.control.gmxIcon({id:"filters",className:"leaflet-bar",togglable:!0,title:"Фильтры"}).on("statechange",(function(t){let e=t.target,n=e._container,s=e._win;e.options.isActive?s||(s=e._win=Yl.DomUtil.create("div","win leaflet-control-layers",n),Yl.DomEvent.disableScrollPropagation(s),s._Filters=new Rn({target:s,props:{control:e,DtpGibddRub:$l,DtpGibdd:Kt,DtpSkpdi:de,Measures:ml,Rub:cl,DtpHearthsPicket4:Gl,DtpHearthsSettlements:Us,DtpHearthsPicket:qs,DtpHearths5:Fs,DtpHearths3:js,DtpHearthsStat:ms,DtpHearthsTmp:ds,DtpHearths:os,DtpVerifyed:xe}})):(e._win.parentNode.removeChild(e._win),e._win=null)})).addTo(Vl);Vl.pm.setLang("customName",{tooltips:{finishLine:"Щелкните любой существующий маркер для завершения"}},"ru"),Vl.pm.setLang("ru"),Vl.on("pm:create",t=>{Vl.removeLayer(t.layer),ao.setActive(!1)}).on("pm:drawstart",t=>{let e=t.workingLayer;if("Line"===t.shape){let n=Vl.pm.Draw.Line._hintMarker;n&&n.on("move",(function(t){var s=e.getLatLngs();if(s.length){var l=d(s),o=distVincenty(s[s.length-1],t.latlng),r=(l+=o)>1e3?(l/1e3).toFixed(2)+" км":Math.ceil(l)+" м",i=o>1e3?(o/1e3).toFixed(2)+" км":Math.ceil(o)+" м";n._tooltip.setContent("Отрезок <b>("+i+")</b>участка <b>("+r+")</b>")}})),oo&&t.target.pm.Toolbar.buttons.drawPolyline.buttonsDomNode&&(ro=t.target.pm.Toolbar.buttons.drawPolyline.buttonsDomNode.children[1],ro.style.display="none")}});let ao=Yl.control.gmxIcon({id:"measure",className:"leaflet-bar",togglable:!0,title:"Включить/Отключить режим измерения расстояний"}).on("statechange",(function(t){oo=t.target.options.isActive,oo?Vl.pm.enableDraw("Line",{finishOn:"dblclick"}):(Vl.pm.disableDraw("Line"),ro&&(ro.style.display=""))})).addTo(Vl);const po=()=>{setTimeout(()=>{io.options.isActive&&(io.setActive(!1),io._win=null,io.setActive(!0))})};$l._refreshFilters=Kt._refreshFilters=de._refreshFilters=ml._refreshFilters=xe._refreshFilters=os._refreshFilters=ms._refreshFilters=js._refreshFilters=Fs._refreshFilters=qs._refreshFilters=Us._refreshFilters=Gl._refreshFilters=cl._refreshFilters=ds._refreshFilters=po;return $l.on("remove",po),Kt.on("remove",po),de.on("remove",po),ml.on("remove",po),xe.on("remove",po),os.on("remove",po),ds.on("remove",po),ms.on("remove",po),js.on("remove",po),Fs.on("remove",po),qs.on("remove",po),Us.on("remove",po),Gl.on("remove",po),cl.on("remove",po),Vl.on("zoomend",t=>{Vl._crpx=0,xe._map&&xe.checkZoom(Vl._zoom),de._map&&de.checkZoom(Vl._zoom),Kt._map&&Kt.checkZoom(Vl._zoom)}),window._map=Vl,Vl}();
//# sourceMappingURL=main.js.map
