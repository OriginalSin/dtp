var dtp=function(){"use strict";const e=window.L;e.Control.GmxIcon=e.Control.extend({includes:e.Evented?e.Evented.prototype:e.Mixin.Events,options:{position:"topleft",id:"defaultIcon",isActive:!1},setActive:function(t,n,o){var l=this.options,s=this._container;if(l.togglable||l.toggle){var r=l.isActive,i=this._prefix,a=i+"-"+l.id;l.isActive=t,this._img&&(t&&l.activeImageUrl?this._img.src=l.activeImageUrl:!t&&l.regularImageUrl&&(this._img.src=l.regularImageUrl)),t?(e.DomUtil.addClass(s,i+"-active"),e.DomUtil.addClass(s,a+"-active"),s.children.length&&e.DomUtil.addClass(s,i+"-externalImage-active"),l.styleActive&&this.setStyle(l.styleActive)):(e.DomUtil.removeClass(s,i+"-active"),e.DomUtil.removeClass(s,a+"-active"),s.children.length&&e.DomUtil.removeClass(s,i+"-externalImage-active"),l.style&&this.setStyle(l.style)),n||r===t||this.fire("statechange",o)}if(e.gmxUtil&&e.gmxUtil.isIEOrEdge){var c=s.getElementsByTagName("use");if(c.length){var p=c[0],d=p.getAttribute("href")||p.getAttribute("xlink:href");p.setAttribute("href",d)}}},onAdd:function(t){var n=null,o=this.options,l=o.svgSprite||t.options.svgSprite,s="leaflet-gmx-icon"+(!l||o.regularImageUrl||o.text?"":"Svg"),r=s+"-"+o.id;this._prefix=s;var i=e.DomUtil.create("div",s+" "+r);if(i._id=o.id,this._container=i,o.title&&(i.title=o.title),this.setStyle=function(e){for(var t in e)i.style[t]=e[t]},o.className&&e.DomUtil.addClass(i,o.className),o.regularImageUrl)(n=e.DomUtil.create("img","",i)).src=o.regularImageUrl,this._img=n,e.DomUtil.addClass(i,s+"-img"),e.DomUtil.addClass(i,s+"-externalImage");else if(o.text)e.DomUtil.addClass(i,s+"-text"),e.DomUtil.create("span","",i).innerHTML=o.text;else if(l){e.DomUtil.addClass(i,"svgIcon");var a="#"+o.id.toLowerCase();i.innerHTML='<svg role="img" class="svgIcon"><use xlink:href="'+a+'" href="'+a+'"></use></svg>'}else e.DomUtil.addClass(i,s+"-img "+s+"-sprite");o.style&&this.setStyle(o.style),this._iconClick=function(e){i.parentNode&&i===e.toElement&&(this.setActive(!this.options.isActive,!1,e),this.fire("click",e),this.options.stateChange&&this.options.stateChange(this,e))};var c=e.DomEvent.stopPropagation;e.DomEvent.preventDefault;return e.DomEvent.on(i,"mousemove",c).on(i,"touchstart",c).on(i,"mousedown",c).on(i,"dblclick",c).on(i,"click",c).on(i,"click",this._iconClick,this),o.onAdd&&o.onAdd(this),this.fire("controladd"),t.fire("controladd",this),o.notHide&&(i._notHide=!0),t.gmxControlsManager&&t.gmxControlsManager.add(this),i},onRemove:function(t){t.gmxControlsManager&&t.gmxControlsManager.remove(this),this.fire("controlremove"),t.fire("controlremove",this);var n=this._container,o=e.DomEvent.stopPropagation;e.DomEvent.off(n,"mousemove",o).off(n,"touchstart",o).off(n,"mousedown",o).off(n,"dblclick",o).off(n,"click",o).off(n,"click",this._iconClick,this)},addTo:function(t){return e.Control.prototype.addTo.call(this,t),this.options.addBefore&&this.addBefore(this.options.addBefore),this},addBefore:function(e){var t=this._parent&&this._parent._container;if(t||(t=this._map&&this._map._controlCorners[this.getPosition()]),t)for(var n=0,o=t.childNodes.length;n<o;n++){var l=t.childNodes[n];if(e===l._id){t.insertBefore(this._container,l);break}}else this.options.addBefore=e;return this}}),e.Control.gmxIcon=e.Control.GmxIcon,e.control.gmxIcon=function(t){return new e.Control.GmxIcon(t)};const t=window.L;t.Control.GmxCenter=t.Control.extend({options:{position:"center",id:"center",notHide:!0,color:"red"},onRemove:function(e){e.gmxControlsManager&&e.gmxControlsManager.remove(this),e.fire("controlremove",this)},onAdd:function(e){var n="http://www.w3.org/2000/svg",o=t.DomUtil.create("div","leaflet-gmx-center"),l=t.DomUtil.create("div","leaflet-gmx-center"),s=document.createElementNS(n,"svg"),r=document.createElementNS(n,"g"),i=document.createElementNS(n,"path");return this._container=o,o._id=this.options.id,this.options.notHide&&(o._notHide=!0),i.setAttribute("stroke-width",2),i.setAttribute("stroke-opacity",2),i.setAttribute("d","M9 0L9 18M0 9L18 9"),this._path=i,r.appendChild(i),s.appendChild(r),s.setAttribute("width",18),s.setAttribute("height",18),l.appendChild(s),o.appendChild(l),this.setColor(this.options.color),e.fire("controladd",this),e.gmxControlsManager&&e.gmxControlsManager.add(this),o},setColor:function(e){return this.options.color=e,this._map&&this._path.setAttribute("stroke",e),this}}),t.Control.gmxCenter=t.Control.GmxCenter,t.control.gmxCenter=function(e){return new t.Control.GmxCenter(e)};const n=window.L;n.Control.FitCenter=n.Control.extend({options:{position:"topright",id:"fitcenter",notHide:!0,color:"#216b9c"},onRemove:function(e){e.gmxControlsManager&&e.gmxControlsManager.remove(this),e.off("moveend",this._update,this).fire("controlremove",this)},onAdd:function(e){var t=this.options.id,o="leaflet-gmx-"+t,l=n.DomUtil.create("div",o),s=n.DomUtil.create("input","",l),r=n.DomUtil.create("button","",l),i=n.DomUtil.create("div","results",l);return r.title="Переместить центр карты",s.placeholder="Поиск по адресам, координатам",this._input=s,this._container=l,this._results=i,l._id=t,e.on("mousemove",e=>{this._results.style.display="none"},this),n.DomEvent.on(s,"input",this._getSuggestions,this),n.DomEvent.on(s,"contextmenu",n.DomEvent.stopPropagation,this),n.DomEvent.on(l,"mousemove",n.DomEvent.stop),n.DomEvent.on(l,"mouseover",e=>{"block"!==this._results.style.display&&(this._results.style.display="block")},this),n.DomEvent.on(r,"click",(function(){let t=s.value.match(/[+-]?([0-9]*[.])?[0-9]+/g);t&&t.length>1&&e.setView([Number(t[0]),Number(t[1])])})),n.DomEvent.disableClickPropagation(l),e.on("moveend",this._update,this).fire("controladd",this),e.gmxControlsManager&&e.gmxControlsManager.add(this),l},_parseSearch:function(e){if((e=e||[]).length){this._results;let t=document.createDocumentFragment();e.forEach(e=>{let o=e.display_name,l=e.boundingbox,s=n.DomUtil.create("div","",t);s.innerHTML=o,n.DomEvent.on(s,"click",e=>{this._map.fitBounds([[l[0],l[2]],[l[1],l[3]]])},this)}),this._results.innerText="",this._results.appendChild(t),this._results.classList.add("active")}},_getSuggestions:function(e){const t=e.target.value||"калужское шоссе",n=["format=json","limit=10","polygon_text=1","bounded=1","viewbox=34,53,41,57"].join("&"),o="&q="+encodeURI(t);fetch(`//nominatim.openstreetmap.org/search?${n}${o}`,{}).then(e=>e.json()).then(this._parseSearch.bind(this))},_update:function(e){this._map&&this.setCoords(this._map.getCenter())},_trunc:function(e){return(""+(Math.round(1e7*e)/1e7+1e-8)).substring(0,9)},setCoords:function(e){return this}}),n.control.fitCenter=function(e){return new n.Control.FitCenter(e)};const o='&copy; <a href="https://n.maps.yandex.ru/?oid=1900133#!/?z=18&ll=36.860478%2C55.429679&l=nk%23map">Yandex</a> contributors',l="//inv.mvs.group/mapcache/",s=new Date,r=s.getMonth()+1,i=s.getDate(),a=(s.getFullYear(),{m1:{title:"Дороги",prefix:l+"m1/",postfix:"?x={x}&y={y}&z={z}&l=mrcss",errorTileUrlPrefix:"//core-nmaps-mrc-browser.maps.yandex.ru/tiles",options:{key:"m1",minZoom:10,maxZoom:19,attribution:o}},m2:{title:"Карта(Яндекс)",prefix:l+"m2/tiles",postfix:"?l=map&v=18.01.10-2&x={x}&y={y}&z={z}&scale=1&lang=ru_RU",errorTileUrlPrefix:"//vec01.maps.yandex.net/tiles",options:{key:"m2",maxNativeZoom:19,maxZoom:21,attribution:o}},m3:{title:"Снимки(Яндекс)",prefix:l+"m3/tiles",postfix:"?l=sat&v=3.462.0&x={x}&y={y}&z={z}&lang=ru_RU",errorTileUrlPrefix:"//sat04.maps.yandex.net/tiles",options:{key:"m3",maxNativeZoom:19,maxZoom:21,attribution:o}},m4:{title:"Скорость(Народная карта)",prefix:l+"m4/",postfix:"?x={x}&y={y}&z={z}&l=mpskl&sl=104,301135,302526,302827,5300026,5400046,70300236,70300638",errorTileUrlPrefix:"//04.core-nmaps-renderer-nmaps.maps.yandex.net/tile",options:{key:"m4",minZoom:8,maxZoom:19,attribution:o}},m5:{title:"Светофоры",prefix:l+"m5/",postfix:"?x={x}&y={y}&z={z}&l=mpskl&sl=301750",errorTileUrlPrefix:"//04.core-nmaps-renderer-nmaps.maps.yandex.net/tile",options:{key:"m4",minZoom:12,maxZoom:19,attribution:o}},m6:{title:"Дороги в стадии строительства",prefix:"//03.core-nmaps-renderer-nmaps.maps.yandex.net/",postfix:"?x={x}&y={y}&z={z}&l=mpskl&sl=70300289",errorTileUrlPrefix:"//03.core-nmaps-renderer-nmaps.maps.yandex.net/",options:{key:"m6",minZoom:10,maxZoom:19,attribution:o}}}),c={};window.URLSearchParams&&new URLSearchParams(window.location.search).forEach((e,t)=>{c[t]=e});const p=window.L;let d=p.canvas();const u=function(e,t){var n=p.Projection.Mercator.project(t),o=p.Projection.Mercator.unproject(new p.Point(n.x+40,n.y+30));return 156543.033928041*Math.pow(2,-e)*((e,t)=>{for(var n=Math.PI/180,o={lon:n*e.lng,lat:n*e.lat},l={lon:n*t.lng,lat:n*t.lat},s=6378137,r=6356752.3142,i=1/298.257223563,a=l.lon-o.lon,c=Math.atan((1-i)*Math.tan(o.lat)),p=Math.atan((1-i)*Math.tan(l.lat)),d=Math.sin(c),u=Math.cos(c),_=Math.sin(p),h=Math.cos(p),v=a,f=2*Math.PI,m=20;Math.abs(v-f)>1e-12&&--m>0;){var y=Math.sin(v),g=Math.cos(v),b=Math.sqrt(h*y*(h*y)+(u*_-d*h*g)*(u*_-d*h*g));if(0===b)return 0;var x=d*_+u*h*g,k=Math.atan2(b,x),j=u*h*y/b,L=1-j*j,C=x-2*d*_/L;isNaN(C)&&(C=0);var D=i/16*L*(4+i*(4-3*L));f=v,v=a+(1-D)*i*j*(k+D*b*(C+D*x*(2*C*C-1)))}if(0===m)return NaN;var w=L*(s*s/(r*r)-1),T=w/1024*(256+w*(w*(74-47*w)-128));return r*(1+w/16384*(4096+w*(w*(320-175*w)-768)))*(k-T*b*(C+T/4*(x*(2*C*C-1)-T/6*C*(4*b*b-3)*(4*C*C-3))))})(t,o)/50};p.canvas({padding:.5});p.Canvas.include({_updateMarkerPoint:function(e){if(!(!this._drawing||e._empty()||e.feature&&e.feature.properties._isHidden)){var t=e._point,n=e.options._radiusM,o=e.options.image,l=e._map,s=this._ctx,r=e.options.iconName||"border";if(l){if(o){let n=e.options.w||20,l=e.options.h||20;return void s.drawImage(o,t.x-n/2,t.y-l/2,n,l)}let i=l._zoom;n&&!l._rpx&&l._needRound&&(l._rpx=l._needRound*n/u(i,l.getCenter())),l._rpx>20&&l._needRound&&(s.save(),s.beginPath(),s.globalAlpha=.2,s.fillStyle="gray",s.arc(t.x,t.y,l._rpx,0,2*Math.PI),s.fill(),s.stroke(),s.closePath(),s.restore()),i>12&&(s.save(),s.beginPath(),s.globalAlpha=1,s.fillStyle="white",s.arc(t.x,t.y,14,0,2*Math.PI),s.fill(),s.closePath(),s.restore()),s.save(),s.beginPath(),s.translate(t.x-0,t.y-0),this._fillStroke(s,e),s.stroke(iconPaths[r].path),s.globalAlpha=e.options.fillOpacity,s.fill(iconPaths[r].path),s.closePath(),s.restore()}}},_updateCirclePoint:function(e){if(this._drawing&&!e._empty()){var t=e._point,n=e.options,o=n.radius||14,l=2*o,s=(e._map,this._ctx);s.save(),s.beginPath(),s.globalAlpha=1,s.fillStyle=n.fillColor||"red",n.triangle?(s.moveTo(t.x,t.y+o),s.lineTo(t.x+o,t.y-o),s.lineTo(t.x-o,t.y-o),s.lineTo(t.x,t.y+o)):n.rhomb?(s.moveTo(t.x+o,t.y),s.lineTo(t.x,t.y+o),s.lineTo(t.x-o,t.y),s.lineTo(t.x,t.y-o),s.lineTo(t.x+o,t.y)):n.box?s.fillRect(t.x-o,t.y-o,l,l):s.arc(t.x,t.y,o,0,2*Math.PI),s.fill(),n.stroke&&(s.stroke(),n.triangle?(s.moveTo(t.x,t.y+o),s.lineTo(t.x+o,t.y-o),s.lineTo(t.x-o,t.y-o),s.lineTo(t.x,t.y+o)):n.box?s.strokeRect(t.x-o,t.y-o,l,l):s.arc(t.x,t.y,o,0,2*Math.PI)),s.closePath(),s.restore()}}});p.CircleMarker.extend({_updatePath:function(){this._renderer._updateMarkerPoint(this)}});const _=p.CircleMarker.extend({options:{renderer:d},_updatePath:function(){this._renderer._updateCirclePoint(this)}});p.Rectangle.extend({options:{renderer:d}});function h(){}function v(e){return e()}function f(){return Object.create(null)}function m(e){e.forEach(v)}function y(e){return"function"==typeof e}function g(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function b(e){return null==e?"":e}function x(e,t){e.appendChild(t)}function k(e,t,n){e.insertBefore(t,n||null)}function j(e){e.parentNode.removeChild(e)}function C(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function D(e){return document.createElement(e)}function w(e){return document.createTextNode(e)}function T(){return w(" ")}function F(){return w("")}function E(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function O(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function M(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function z(e){return""===e?void 0:+e}function S(e,t){t=""+t,e.data!==t&&(e.data=t)}function $(e,t){(null!=t||e.value)&&(e.value=t)}function P(e,t){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}}function q(e,t){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];o.selected=~t.indexOf(o.__value)}}function H(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function U(e){return[].map.call(e.querySelectorAll(":checked"),e=>e.__value)}let B;function N(e){B=e}function A(){if(!B)throw new Error("Function called outside component initialization");return B}function G(e){A().$$.after_update.push(e)}function I(){const e=A();return(t,n)=>{const o=e.$$.callbacks[t];if(o){const l=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);o.slice().forEach(t=>{t.call(e,l)})}}}const Z=[],R=[],Y=[],V=[],J=Promise.resolve();let K=!1;function W(e){Y.push(e)}let Q=!1;const X=new Set;function ee(){if(!Q){Q=!0;do{for(let e=0;e<Z.length;e+=1){const t=Z[e];N(t),te(t.$$)}for(Z.length=0;R.length;)R.pop()();for(let e=0;e<Y.length;e+=1){const t=Y[e];X.has(t)||(X.add(t),t())}Y.length=0}while(Z.length);for(;V.length;)V.pop()();K=!1,Q=!1,X.clear()}}function te(e){if(null!==e.fragment){e.update(),m(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(W)}}const ne=new Set;let oe;function le(){oe={r:0,c:[],p:oe}}function se(){oe.r||m(oe.c),oe=oe.p}function re(e,t){e&&e.i&&(ne.delete(e),e.i(t))}function ie(e,t,n,o){if(e&&e.o){if(ne.has(e))return;ne.add(e),oe.c.push(()=>{ne.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}}function ae(e){e&&e.c()}function ce(e,t,n){const{fragment:o,on_mount:l,on_destroy:s,after_update:r}=e.$$;o&&o.m(t,n),W(()=>{const t=l.map(v).filter(y);s?s.push(...t):m(t),e.$$.on_mount=[]}),r.forEach(W)}function pe(e,t){const n=e.$$;null!==n.fragment&&(m(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function de(e,t){-1===e.$$.dirty[0]&&(Z.push(e),K||(K=!0,J.then(ee)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ue(e,t,n,o,l,s,r=[-1]){const i=B;N(e);const a=t.props||{},c=e.$$={fragment:null,ctx:null,props:s,update:h,not_equal:l,bound:f(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(i?i.$$.context:[]),callbacks:f(),dirty:r};let p=!1;if(c.ctx=n?n(e,a,(t,n,...o)=>{const s=o.length?o[0]:n;return c.ctx&&l(c.ctx[t],c.ctx[t]=s)&&(c.bound[t]&&c.bound[t](s),p&&de(e,t)),n}):[],c.update(),p=!0,m(c.before_update),c.fragment=!!o&&o(c.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);c.fragment&&c.fragment.l(e),e.forEach(j)}else c.fragment&&c.fragment.c();t.intro&&re(e.$$.fragment),ce(e,t.target,t.anchor),ee()}N(i)}class _e{$destroy(){pe(this,1),this.$destroy=h}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function he(e,t,n){const o=e.slice();return o[7]=t[n],o[9]=n,o}function ve(e){let t,n,o,l,s;function r(...t){return e[6](e[9],...t)}return{c(){t=D("li"),M(t,"class",n="dot"+(e[9]===e[1]?" selected":"")+" svelte-jjp3es"),t.value=o=e[9],M(t,"role","button"),M(t,"tabindex","0"),M(t,"aria-label",l="slide item "+e[9])},m(e,n,o){k(e,t,n),o&&s(),s=E(t,"click",O(r))},p(o,l){e=o,2&l&&n!==(n="dot"+(e[9]===e[1]?" selected":"")+" svelte-jjp3es")&&M(t,"class",n)},d(e){e&&j(t),s()}}}function fe(e){let t,n,o,l,s,r,i,a,c,p,d,u,_,v,f,y,g,b,L,F,z,$,P,q,H,U,B,N,A,G,I=(e[0][e[1]].kindName||"Фото и схемы ДТП")+"",Z=e[1]+1+"",R=e[0].length+"",Y=e[0],V=[];for(let t=0;t<Y.length;t+=1)V[t]=ve(he(e,Y,t));return{c(){t=D("div"),n=T(),o=D("div"),l=D("div"),s=T(),r=D("div"),i=D("div"),a=D("div"),c=w(I),p=T(),d=D("div"),u=D("div"),_=D("div"),v=D("button"),f=T(),y=D("div"),g=D("a"),b=D("img"),z=T(),$=D("button"),P=T(),q=D("ul");for(let e=0;e<V.length;e+=1)V[e].c();H=T(),U=D("p"),B=w(Z),N=w(" из "),A=w(R),M(t,"class","modal-background svelte-jjp3es"),M(l,"title","Закрыть"),M(l,"class","ant-modal-close svelte-jjp3es"),M(a,"class","ant-modal-title"),M(a,"id","rcDialogTitle1"),M(i,"class","ant-modal-header svelte-jjp3es"),M(v,"type","button"),M(v,"aria-label","previous slide / item"),M(v,"class","control-arrow control-prev svelte-jjp3es"),b.src!==(L=""+(me+e[0][e[1]].guid))&&M(b,"src",L),M(b,"alt",""),M(b,"class","svelte-jjp3es"),M(g,"target","_blank"),M(g,"href",F=""+(me+e[0][e[1]].guid)),M(g,"title","Открыть на весь экран"),M(g,"class","svelte-jjp3es"),M(y,"class","slider-wrapper axis-horizontal svelte-jjp3es"),M($,"type","button"),M($,"aria-label","next slide / item"),M($,"class","control-arrow control-next svelte-jjp3es"),M(q,"class","control-dots svelte-jjp3es"),M(U,"class","carousel-status svelte-jjp3es"),M(_,"class","carousel carousel-slider svelte-jjp3es"),function(e,t,n,o){e.style.setProperty(t,n,o?"important":"")}(_,"width","100%"),M(d,"class","ant-modal-body svelte-jjp3es"),M(r,"class","ant-modal-content svelte-jjp3es"),M(o,"class","modal svelte-jjp3es"),M(o,"role","dialog"),M(o,"aria-modal","true")},m(h,j,L){k(h,t,j),k(h,n,j),k(h,o,j),x(o,l),x(o,s),x(o,r),x(r,i),x(i,a),x(a,c),x(r,p),x(r,d),x(d,u),x(u,_),x(_,v),x(_,f),x(_,y),x(y,g),x(g,b),x(_,z),x(_,$),x(_,P),x(_,q);for(let e=0;e<V.length;e+=1)V[e].m(q,null);x(_,H),x(_,U),x(U,B),x(U,N),x(U,A),L&&m(G),G=[E(t,"click",O(e[2])),E(l,"click",O(e[2])),E(v,"click",O(e[3])),E($,"click",O(e[4])),E(o,"click",O(ye))]},p(e,[t]){if(3&t&&I!==(I=(e[0][e[1]].kindName||"Фото и схемы ДТП")+"")&&S(c,I),3&t&&b.src!==(L=""+(me+e[0][e[1]].guid))&&M(b,"src",L),3&t&&F!==(F=""+(me+e[0][e[1]].guid))&&M(g,"href",F),3&t){let n;for(Y=e[0],n=0;n<Y.length;n+=1){const o=he(e,Y,n);V[n]?V[n].p(o,t):(V[n]=ve(o),V[n].c(),V[n].m(q,null))}for(;n<V.length;n+=1)V[n].d(1);V.length=Y.length}2&t&&Z!==(Z=e[1]+1+"")&&S(B,Z),1&t&&R!==(R=e[0].length+"")&&S(A,R)},i:h,o:h,d(e){e&&j(t),e&&j(n),e&&j(o),C(V,e),m(G)}}}const me="//map.mvs.group/skpdi/proxy.php?guid=",ye=()=>{};function ge(e,t,n){const o=I();let{data:l}=t,s=0;return e.$set=e=>{"data"in e&&n(0,l=e.data)},[l,s,()=>{o("close")},()=>{s&&n(1,s--,s)},()=>{s<l.length-1&&n(1,s++,s)},o,e=>{n(1,s=e)}]}class be extends _e{constructor(e){super(),ue(this,e,ge,fe,g,{data:0})}}function xe(e,t,n){const o=e.slice();return o[9]=t[n],o}function ke(e,t,n){const o=e.slice();return o[6]=t[n],o}function je(e){let t,n,o,l=e[9].k_uch&&(e[9].npdd||e[9].sop_npdd)&&function(e){let t,n,o=e[9].k_uch+"";return{c(){t=D("li"),n=w(o)},m(e,o){k(e,t,o),x(t,n)},p:h,d(e){e&&j(t)}}}(e),s=e[9].npdd&&function(e){let t,n,o=e[9].npdd+"";return{c(){t=D("li"),n=w(o)},m(e,o){k(e,t,o),x(t,n)},p:h,d(e){e&&j(t)}}}(e),r=e[9].sop_npdd&&function(e){let t,n,o=e[9].sop_npdd+"";return{c(){t=D("li"),n=w(o)},m(e,o){k(e,t,o),x(t,n)},p:h,d(e){e&&j(t)}}}(e);return{c(){l&&l.c(),t=T(),s&&s.c(),n=T(),r&&r.c(),o=F()},m(e,i){l&&l.m(e,i),k(e,t,i),s&&s.m(e,i),k(e,n,i),r&&r.m(e,i),k(e,o,i)},p(e,t){e[9].k_uch&&(e[9].npdd||e[9].sop_npdd)&&l.p(e,t),e[9].npdd&&s.p(e,t),e[9].sop_npdd&&r.p(e,t)},d(e){l&&l.d(e),e&&j(t),s&&s.d(e),e&&j(n),r&&r.d(e),e&&j(o)}}}function Le(e){let t,n,o=e[6].ts&&function(e){let t,n,o=e[6].ts+"";return{c(){t=D("li"),n=w(o)},m(e,o){k(e,t,o),x(t,n)},p:h,d(e){e&&j(t)}}}(e),l=e[6].arr,s=[];for(let t=0;t<l.length;t+=1)s[t]=je(xe(e,l,t));return{c(){o&&o.c(),t=T();for(let e=0;e<s.length;e+=1)s[e].c();n=F()},m(e,l){o&&o.m(e,l),k(e,t,l);for(let t=0;t<s.length;t+=1)s[t].m(e,l);k(e,n,l)},p(e,t){if(e[6].ts&&o.p(e,t),4&t){let o;for(l=e[6].arr,o=0;o<l.length;o+=1){const r=xe(e,l,o);s[o]?s[o].p(r,t):(s[o]=je(r),s[o].c(),s[o].m(n.parentNode,n))}for(;o<s.length;o+=1)s[o].d(1);s.length=l.length}},d(e){o&&o.d(e),e&&j(t),C(s,e),e&&j(n)}}}function Ce(e){let t,n,o,l,s,r=e[0].spog+"";return{c(){t=D("div"),n=D("div"),n.textContent="Погода:",o=T(),l=D("div"),s=w(r),M(n,"class","stitle"),M(l,"class","sval")},m(e,r){k(e,t,r),x(t,n),x(t,o),x(t,l),x(l,s)},p(e,t){1&t&&r!==(r=e[0].spog+"")&&S(s,r)},d(e){e&&j(t)}}}function De(e){let t,n,o,l,s,r=e[0].s_pch+"";return{c(){t=D("div"),n=D("div"),n.textContent="Покрытие:",o=T(),l=D("div"),s=w(r),M(n,"class","stitle"),M(l,"class","sval")},m(e,r){k(e,t,r),x(t,n),x(t,o),x(t,l),x(l,s)},p(e,t){1&t&&r!==(r=e[0].s_pch+"")&&S(s,r)},d(e){e&&j(t)}}}function we(e){let t,n,o,l,s,r=e[0].osv+"";return{c(){t=D("div"),n=D("div"),n.textContent="Освещенность:",o=T(),l=D("div"),s=w(r),M(n,"class","stitle"),M(l,"class","sval")},m(e,r){k(e,t,r),x(t,n),x(t,o),x(t,l),x(l,s)},p(e,t){1&t&&r!==(r=e[0].osv+"")&&S(s,r)},d(e){e&&j(t)}}}function Te(e){let t,n,o,l,s,r=e[0].ndu+"";return{c(){t=D("div"),n=D("div"),n.textContent="Иные условия:",o=T(),l=D("div"),s=w(r),M(n,"class","stitle"),M(l,"class","sval")},m(e,r){k(e,t,r),x(t,n),x(t,o),x(t,l),x(l,s)},p(e,t){1&t&&r!==(r=e[0].ndu+"")&&S(s,r)},d(e){e&&j(t)}}}function Fe(e){let t,n,o,l,s,r,i,a,c,p,d,u,_,v,f,m,y,g,b,L,F,O,z,$,P,q,H,U,B,N,A,G,I,Z,R,Y,V,J,K,W,Q,X,ee,te,ne,oe,le,se,re,ie,ae,ce,pe,de,ue,_e,he,ve,fe,me,ye,ge=(e[0].name||e[0].dtvp||"")+"",be=(e[0].district||"")+"",xe=(e[0].dor||"")+"",je=e[0].lat+"",Fe=e[0].lon+"",Ee=(e[0].collision_date||e[0].dtp_date||"")+"",Oe=(e[0].dtvp||"")+"",Me=e[0].pog+"",ze=e[0].ran+"",Se=e[2],$e=[];for(let t=0;t<Se.length;t+=1)$e[t]=Le(ke(e,Se,t));let Pe=e[0].spog&&Ce(e),qe=e[0].s_pch&&De(e),He=e[0].osv&&we(e),Ue=e[0].ndu&&Te(e);return{c(){t=D("div"),n=D("div"),o=D("b"),l=w(ge),s=T(),r=D("div"),i=D("table"),a=D("tbody"),c=D("tr"),p=D("td"),p.textContent="Адрес:",d=T(),u=D("td"),_=w(be),v=T(),f=w(xe),m=T(),y=D("tr"),g=D("td"),g.textContent="Координаты:",b=T(),L=D("td"),F=w(je),O=T(),z=w(Fe),$=T(),P=D("span"),q=T(),H=D("tr"),U=D("td"),U.textContent="Дата/время:",B=T(),N=D("td"),A=w(Ee),G=T(),I=D("tr"),Z=D("td"),Z.textContent="Вид ДТП:",R=T(),Y=D("td"),V=w(Oe),J=T(),K=D("tr"),W=D("td"),W.textContent="Нарушения:",Q=T(),X=D("td"),ee=D("ul");for(let e=0;e<$e.length;e+=1)$e[e].c();te=T(),ne=D("tr"),oe=D("td"),oe.textContent="Условия:",le=T(),se=D("td"),Pe&&Pe.c(),re=T(),qe&&qe.c(),ie=T(),He&&He.c(),ae=T(),Ue&&Ue.c(),ce=T(),pe=D("tr"),de=D("td"),de.textContent="Количество погибших/раненых:",ue=T(),_e=D("td"),he=D("b"),ve=w(Me),fe=w("/"),me=w(ze),M(n,"class","pLine"),M(p,"class","first svelte-ipyqnf"),M(g,"class","first svelte-ipyqnf"),M(P,"title","Скопировать в буфер обмена"),M(P,"class","leaflet-gmx-icon-copy"),M(U,"class","first svelte-ipyqnf"),M(Z,"class","first svelte-ipyqnf"),M(W,"class","first svelte-ipyqnf"),M(oe,"class","first svelte-ipyqnf"),M(de,"class","first svelte-ipyqnf"),M(i,"class","table"),M(r,"class","featureCont"),M(t,"class","mvsPopup svelte-ipyqnf")},m(h,j,C){k(h,t,j),x(t,n),x(n,o),x(o,l),x(t,s),x(t,r),x(r,i),x(i,a),x(a,c),x(c,p),x(c,d),x(c,u),x(u,_),x(u,v),x(u,f),x(a,m),x(a,y),x(y,g),x(y,b),x(y,L),x(L,F),x(L,O),x(L,z),x(L,$),x(L,P),x(a,q),x(a,H),x(H,U),x(H,B),x(H,N),x(N,A),x(a,G),x(a,I),x(I,Z),x(I,R),x(I,Y),x(Y,V),x(a,J),x(a,K),x(K,W),x(K,Q),x(K,X),x(X,ee);for(let e=0;e<$e.length;e+=1)$e[e].m(ee,null);x(a,te),x(a,ne),x(ne,oe),x(ne,le),x(ne,se),Pe&&Pe.m(se,null),x(se,re),qe&&qe.m(se,null),x(se,ie),He&&He.m(se,null),x(se,ae),Ue&&Ue.m(se,null),x(a,ce),x(a,pe),x(pe,de),x(pe,ue),x(pe,_e),x(_e,he),x(he,ve),x(he,fe),x(he,me),C&&ye(),ye=E(P,"click",e[1])},p(e,[t]){if(1&t&&ge!==(ge=(e[0].name||e[0].dtvp||"")+"")&&S(l,ge),1&t&&be!==(be=(e[0].district||"")+"")&&S(_,be),1&t&&xe!==(xe=(e[0].dor||"")+"")&&S(f,xe),1&t&&je!==(je=e[0].lat+"")&&S(F,je),1&t&&Fe!==(Fe=e[0].lon+"")&&S(z,Fe),1&t&&Ee!==(Ee=(e[0].collision_date||e[0].dtp_date||"")+"")&&S(A,Ee),1&t&&Oe!==(Oe=(e[0].dtvp||"")+"")&&S(V,Oe),4&t){let n;for(Se=e[2],n=0;n<Se.length;n+=1){const o=ke(e,Se,n);$e[n]?$e[n].p(o,t):($e[n]=Le(o),$e[n].c(),$e[n].m(ee,null))}for(;n<$e.length;n+=1)$e[n].d(1);$e.length=Se.length}e[0].spog?Pe?Pe.p(e,t):(Pe=Ce(e),Pe.c(),Pe.m(se,re)):Pe&&(Pe.d(1),Pe=null),e[0].s_pch?qe?qe.p(e,t):(qe=De(e),qe.c(),qe.m(se,ie)):qe&&(qe.d(1),qe=null),e[0].osv?He?He.p(e,t):(He=we(e),He.c(),He.m(se,ae)):He&&(He.d(1),He=null),e[0].ndu?Ue?Ue.p(e,t):(Ue=Te(e),Ue.c(),Ue.m(se,null)):Ue&&(Ue.d(1),Ue=null),1&t&&Me!==(Me=e[0].pog+"")&&S(ve,Me),1&t&&ze!==(ze=e[0].ran+"")&&S(me,ze)},i:h,o:h,d(e){e&&j(t),C($e,e),Pe&&Pe.d(),qe&&qe.d(),He&&He.d(),Ue&&Ue.d(),ye()}}}function Ee(e,t,n){let o,{showModal:l=!1}=t,{prp:s}=t;s.skpdiFiles;G(()=>{l&&(o=new be({target:document.body,props:{data:s.skpdiFiles}}),o.$on("close",e=>{o.$destroy(),n(3,l=!1)}))});const r=(s.tsInfo||[]).map(e=>{let t=e.ts_uch||[];return{ts:"Осталось на месте ДТП"!==e.ts?e.ts:"",arr:t.map(e=>({k_uch:e.k_uch||"",npdd:"Нет нарушений"!==e.npdd?e.npdd:"",sop_npdd:"Нет нарушений"!==e.sop_npdd?e.sop_npdd:""}))}});return e.$set=e=>{"showModal"in e&&n(3,l=e.showModal),"prp"in e&&n(0,s=e.prp)},[s,e=>{navigator.clipboard.writeText(e.target.parentNode.textContent).catch(e=>{console.log("Something went wrong",e)})},r,l]}class Oe extends _e{constructor(e){super(),ue(this,e,Ee,Fe,g,{showModal:3,prp:0})}}const Me=window.L,ze=Me.popup();let Se;const $e=Me.featureGroup([]);function Pe(e,t,n){const o=e.slice();return o[6]=t[n],o}function qe(e,t,n){const o=e.slice();return o[6]=t[n],o}function He(e){let t,n=e[1].collisionTypes,o=[];for(let t=0;t<n.length;t+=1)o[t]=Ue(qe(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=F()},m(e,n){for(let t=0;t<o.length;t+=1)o[t].m(e,n);k(e,t,n)},p(e,l){if(2&l){let s;for(n=e[1].collisionTypes,s=0;s<n.length;s+=1){const r=qe(e,n,s);o[s]?o[s].p(r,l):(o[s]=Ue(r),o[s].c(),o[s].m(t.parentNode,t))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(e){C(o,e),e&&j(t)}}}function Ue(e){let t,n,o=(e[6].collisionType||"")+"";return{c(){t=D("li"),n=w(o)},m(e,o){k(e,t,o),x(t,n)},p(e,t){2&t&&o!==(o=(e[6].collisionType||"")+"")&&S(n,o)},d(e){e&&j(t)}}}function Be(e){let t,n=e[1].uchs,o=[];for(let t=0;t<n.length;t+=1)o[t]=Ne(Pe(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=F()},m(e,n){for(let t=0;t<o.length;t+=1)o[t].m(e,n);k(e,t,n)},p(e,l){if(2&l){let s;for(n=e[1].uchs,s=0;s<n.length;s+=1){const r=Pe(e,n,s);o[s]?o[s].p(r,l):(o[s]=Ne(r),o[s].c(),o[s].m(t.parentNode,t))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(e){C(o,e),e&&j(t)}}}function Ne(e){let t,n,o,l,s,r,i,a,c=(e[6].collisionPartyCategory||"")+"",p=(e[6].collisionPartyCond||"")+"";return{c(){t=D("li"),n=w(c),o=T(),l=D("b"),s=D("i"),r=w("("),i=w(p),a=w(")")},m(e,c){k(e,t,c),x(t,n),x(t,o),x(t,l),x(l,s),x(s,r),x(s,i),x(s,a)},p(e,t){2&t&&c!==(c=(e[6].collisionPartyCategory||"")+"")&&S(n,c),2&t&&p!==(p=(e[6].collisionPartyCond||"")+"")&&S(i,p)},d(e){e&&j(t)}}}function Ae(e){let t,n,o,l,s,r,i,a,c,p,d,u,_,v,f,y,g,b,L,C,F,O,z,$,P,q,H,U,B,N,A,G,I,Z,R,Y,V,J,K,W,Q,X,ee,te,ne,oe,le,se,re=(e[1].name||e[1].dtvp||"")+"",ie=e[1].lat+"",ae=e[1].lon+"",ce=(e[1].collision_date||e[1].dtp_date||"")+"",pe=(e[1].collision_context||e[1].dtp_date||"")+"",de=e[1].collisionTypes&&e[1].collisionTypes.length&&He(e),ue=e[1].uchs&&e[1].uchs.length&&Be(e);return{c(){t=D("div"),n=D("div"),o=D("b"),l=w(re),s=T(),r=D("div"),i=D("table"),a=D("tbody"),c=D("tr"),p=D("td"),p.textContent="Координаты:",d=T(),u=D("td"),_=w(ie),v=T(),f=w(ae),y=T(),g=D("span"),b=T(),L=D("tr"),C=D("td"),C.textContent="Дата/время:",F=T(),O=D("td"),z=w(ce),$=T(),P=D("tr"),q=D("td"),H=D("div"),H.textContent="Условия ДТП:",U=T(),B=D("div"),N=w(pe),A=T(),G=D("tr"),I=D("td"),I.textContent="Нарушения:",Z=T(),R=D("td"),Y=D("ul"),de&&de.c(),V=T(),J=D("tr"),K=D("td"),K.textContent="Участники:",W=T(),Q=D("td"),X=D("ul"),ue&&ue.c(),ee=T(),te=D("tr"),ne=D("td"),oe=D("button"),le=w("Фото и схемы"),M(n,"class","pLine"),M(p,"class","first"),M(g,"title","Скопировать в буфер обмена"),M(g,"class","leaflet-gmx-icon-copy"),M(C,"class","first"),M(H,"class","first"),M(q,"colspan","2"),M(I,"class","first"),M(K,"class","first"),M(oe,"class","primary svelte-1aipaym"),oe.disabled=e[2],M(ne,"class","center"),M(ne,"colspan","2"),M(i,"class","table"),M(r,"class","featureCont"),M(t,"class","mvsPopup")},m(h,j,D){k(h,t,j),x(t,n),x(n,o),x(o,l),x(t,s),x(t,r),x(r,i),x(i,a),x(a,c),x(c,p),x(c,d),x(c,u),x(u,_),x(u,v),x(u,f),x(u,y),x(u,g),x(a,b),x(a,L),x(L,C),x(L,F),x(L,O),x(O,z),x(a,$),x(a,P),x(P,q),x(q,H),x(q,U),x(q,B),x(B,N),x(a,A),x(a,G),x(G,I),x(G,Z),x(G,R),x(R,Y),de&&de.m(Y,null),x(a,V),x(a,J),x(J,K),x(J,W),x(J,Q),x(Q,X),ue&&ue.m(X,null),x(a,ee),x(a,te),x(te,ne),x(ne,oe),x(oe,le),D&&m(se),se=[E(g,"click",e[3]),E(oe,"click",e[5])]},p(e,[t]){2&t&&re!==(re=(e[1].name||e[1].dtvp||"")+"")&&S(l,re),2&t&&ie!==(ie=e[1].lat+"")&&S(_,ie),2&t&&ae!==(ae=e[1].lon+"")&&S(f,ae),2&t&&ce!==(ce=(e[1].collision_date||e[1].dtp_date||"")+"")&&S(z,ce),2&t&&pe!==(pe=(e[1].collision_context||e[1].dtp_date||"")+"")&&S(N,pe),e[1].collisionTypes&&e[1].collisionTypes.length?de?de.p(e,t):(de=He(e),de.c(),de.m(Y,null)):de&&(de.d(1),de=null),e[1].uchs&&e[1].uchs.length?ue?ue.p(e,t):(ue=Be(e),ue.c(),ue.m(X,null)):ue&&(ue.d(1),ue=null),4&t&&(oe.disabled=e[2])},i:h,o:h,d(e){e&&j(t),de&&de.d(),ue&&ue.d(),m(se)}}}function Ge(e,t,n){let o,{showModal:l=!1}=t,{prp:s}=t,r=s.files&&s.files.length?"":"disabled";G(()=>{n(2,r=s.files&&s.files.length?"":"disabled"),l&&(o=new be({target:document.body,props:{data:s.files}}),o.$on("close",e=>{o.$destroy(),n(0,l=!1)}))});return e.$set=e=>{"showModal"in e&&n(0,l=e.showModal),"prp"in e&&n(1,s=e.prp)},[l,s,r,e=>{navigator.clipboard.writeText(e.target.parentNode.textContent).catch(e=>{console.log("Something went wrong",e)})},o,()=>n(0,l=!0)]}$e.checkZoom=e=>{Object.keys($e._layers).length?e<12&&$e.setFilter(Se):e>11&&$e.setFilter(Se)},$e.setFilter=e=>{$e.clearLayers(),Se=e;let t=[],n=[];$e._group&&($e._group.getLayers().forEach(e=>{let o=e.options.props,l=0;Se.forEach(e=>{"collision_type"===e.type?(""===e.zn[0]||e.zn.filter(e=>e===o.collision_type).length)&&l++:"date"===e.type&&o.date>=e.zn[0]&&o.date<e.zn[1]&&l++}),l===Se.length&&(t.push(e),n.push(e._latlng))}),$e._needHeat?($e._map.addLayer($e._heat),$e._heat.setLatLngs(n),$e._heat.setOptions($e._needHeat),$e._map._zoom>11&&$e.addLayer(Me.layerGroup(t))):($e.addLayer(Me.layerGroup(t)),$e._map.removeLayer($e._heat)))},$e.on("remove",e=>{$e._needHeat=null,$e._map.removeLayer($e._heat),$e.clearLayers()}).on("add",e=>{$e._heat=Me.heatLayer([],{gradient:{.1:"blue",.4:"lime",1:"red"}}),fetch("https://dtp.mvs.group/scripts/index.php?request=get_stat_gipdd",{}).then(e=>e.json()).then(e=>{let t={collision_type:{},iconType:{}},n=e.map(e=>{let n=e.iconType||0,o=!1,l="#2F4F4F";n&&(o=n%2==0,n>=1&&n<=6?l="#8B4513":7===n||8===n?l="#228B22":n>=9&&n<=14?l="#8B4513":15===n||16===n?l="#7B68EE":17!==n&&18!==n||(l="#2F4F4F")),e.lat&&e.lon||(console.log("_______",e),e.lat=e.lon=0);let s=t.collision_type[e.collision_type];return s?s++:s=1,t.collision_type[e.collision_type]=s,t.iconType[e.collision_type]=n,new _(Me.latLng(e.lat,e.lon),{props:e,radius:6,stroke:o,fillColor:l}).bindPopup(ze).on("popupopen",e=>{var t;t=e.target.options.props.id,fetch("https://dtp.mvs.group/scripts/index.php?request=get_dtp_id&id="+t+"&type=gibdd",{}).then(e=>e.json()).then(e=>{let t=Me.DomUtil.create("div");const n=new Oe({target:t,props:{prp:e}});ze._svObj=n,ze.setContent(t)})}).on("popupclose",e=>{e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)})});$e._opt=t,$e._group=Me.layerGroup(n),Se?$e.setFilter(Se):$e.addLayer($e._group),$e._refreshFilters()})});class Ie extends _e{constructor(e){super(),ue(this,e,Ge,Ae,g,{showModal:0,prp:1})}}const Ze=window.L,Re=Ze.popup();let Ye;const Ve=Ze.featureGroup([]);function Je(e,t,n){const o=e.slice();return o[6]=t[n],o[8]=n,o}function Ke(e){let t,n,o,l,s,r="gibdd"===e[6].type?"ГИБДД":"СКПДИ";return{c(){t=D("button"),n=w(r),M(t,"class",o=b(e[2]===e[8]?"current":"")+" svelte-txaali"),t.value=l=e[8]},m(o,l,r){k(o,t,l),x(t,n),r&&s(),s=E(t,"click",e[4])},p(e,l){1&l&&r!==(r="gibdd"===e[6].type?"ГИБДД":"СКПДИ")&&S(n,r),4&l&&o!==(o=b(e[2]===e[8]?"current":"")+" svelte-txaali")&&M(t,"class",o)},d(e){e&&j(t),s()}}}function We(e){let t;const n=new Ie({props:{prp:e[3]}});return{c(){ae(n.$$.fragment)},m(e,o){ce(n,e,o),t=!0},p(e,t){const o={};8&t&&(o.prp=e[3]),n.$set(o)},i(e){t||(re(n.$$.fragment,e),t=!0)},o(e){ie(n.$$.fragment,e),t=!1},d(e){pe(n,e)}}}function Qe(e){let t;const n=new Oe({props:{prp:e[3]}});return{c(){ae(n.$$.fragment)},m(e,o){ce(n,e,o),t=!0},p(e,t){const o={};8&t&&(o.prp=e[3]),n.$set(o)},i(e){t||(re(n.$$.fragment,e),t=!0)},o(e){ie(n.$$.fragment,e),t=!1},d(e){pe(n,e)}}}function Xe(e){let t,n,o,l,s,r,i,a,c,p,d=e[0]._cur,u=[];for(let t=0;t<d.length;t+=1)u[t]=Ke(Je(e,d,t));const _=[Qe,We],h=[];function v(e,t){return"gibdd"===e[0]._cur[e[2]].type?0:1}return i=v(e),a=h[i]=_[i](e),{c(){t=D("div"),n=D("div"),o=D("a"),o.textContent="×",l=T(),s=D("div");for(let e=0;e<u.length;e+=1)u[e].c();r=T(),a.c(),M(o,"class","leaflet-popup-close-button"),M(o,"href","#close"),M(n,"class","close"),M(s,"class","pLine"),M(t,"class","mvsPopup")},m(a,d,_){k(a,t,d),x(t,n),x(n,o),x(t,l),x(t,s);for(let e=0;e<u.length;e+=1)u[e].m(s,null);var v;x(t,r),h[i].m(t,null),c=!0,_&&p(),p=E(o,"click",(v=function(){y(e[1])&&e[1].apply(this,arguments)},function(e){return e.preventDefault(),v.call(this,e)}))},p(n,[o]){if(e=n,21&o){let t;for(d=e[0]._cur,t=0;t<d.length;t+=1){const n=Je(e,d,t);u[t]?u[t].p(n,o):(u[t]=Ke(n),u[t].c(),u[t].m(s,null))}for(;t<u.length;t+=1)u[t].d(1);u.length=d.length}let l=i;i=v(e),i===l?h[i].p(e,o):(le(),ie(h[l],1,1,()=>{h[l]=null}),se(),a=h[i],a||(a=h[i]=_[i](e),a.c()),re(a,1),a.m(t,null))},i(e){c||(re(a),c=!0)},o(e){ie(a),c=!1},d(e){e&&j(t),C(u,e),h[i].d(),p()}}}function et(e,t,n){let{prp:o}=t,{closeMe:l=(()=>{})}=t,s=0,r={};const i=e=>{let t=o._cur[e],l=t.type,s="https://dtp.mvs.group/scripts/index.php?request=get_dtp_id&id="+t.id+"&type="+l;fetch(s,{}).then(e=>e.json()).then(e=>{n(3,r=e)})};return i(s),e.$set=e=>{"prp"in e&&n(0,o=e.prp),"closeMe"in e&&n(1,l=e.closeMe)},[o,l,s,r,e=>{let t=e.target,o=Number(t.value);s!==o&&(n(2,s=o),i(s))}]}Ve.checkZoom=e=>{Object.keys(Ve._layers).length?e<12&&Ve.setFilter(Ye):e>11&&Ve.setFilter(Ye)},Ve.setFilter=e=>{Ve.clearLayers(),Ye=e;let t=[],n=[];Ve._group&&(Ve._group.getLayers().forEach(e=>{let o=e.options.props,l=0;Ye.forEach(e=>{"collision_type"===e.type?(""===e.zn[0]||e.zn.filter(e=>e===o.collision_type).length)&&l++:"date"===e.type&&o.date>=e.zn[0]&&o.date<e.zn[1]&&l++}),l===Ye.length&&(t.push(e),n.push(e._latlng))}),Ve._needHeat?(Ve._map.addLayer(Ve._heat),Ve._heat.setLatLngs(n),Ve._heat.setOptions(Ve._needHeat),Ve._map._zoom>11&&Ve.addLayer(Ze.layerGroup(t))):(Ve.addLayer(Ze.layerGroup(t)),Ve._map.removeLayer(Ve._heat)))},Ve.on("remove",()=>{Ve._needHeat=null,Ve._map.removeLayer(Ve._heat),Ve.clearLayers()}).on("add",e=>{Ve._heat=Ze.heatLayer([]),fetch("https://dtp.mvs.group/scripts/index.php?request=get_skpdi",{}).then(e=>e.json()).then(e=>{let t={collision_type:{},iconType:{}},n=e.map(e=>{let n=e.iconType||0,o=!1,l="#2F4F4F";n&&(o=n%2==0,n>=1&&n<=6?l="#8B4513":7===n||8===n?l="#228B22":n>=9&&n<=14?l="#8B4513":15===n||16===n?l="#7B68EE":17!==n&&18!==n||(l="#2F4F4F")),e.lat&&e.lon||(console.log("_______",e),e.lat=e.lon=0);let s=t.collision_type[e.collision_type];return s?s++:s=1,t.collision_type[e.collision_type]=s,t.iconType[e.collision_type]=n,new _(Ze.latLng(e.lat,e.lon),{props:e,radius:6,box:!0,stroke:o,fillColor:l}).bindPopup(Re).on("popupopen",e=>{var t;t=e.target.options.props.id,fetch("https://dtp.mvs.group/scripts/index.php?request=get_dtp_id&id="+t+"&type=skpdi",{}).then(e=>e.json()).then(e=>{let t=Ze.DomUtil.create("div");const n=new Ie({target:t,props:{prp:e}});Re._svObj=n,Re.setContent(t)})}).on("popupclose",e=>{console.log("popupclose",e),e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)})});Ve._opt=t,Ve._group=Ze.layerGroup(n),Ye?Ve.setFilter(Ye):Ve.addLayer(Ve._group),Ve._refreshFilters()})});class tt extends _e{constructor(e){super(),ue(this,e,et,Xe,g,{prp:0,closeMe:1})}}const nt=window.L,ot=nt.popup();let lt;const st=nt.featureGroup([]);function rt(e,t,n){const o=e.slice();return o[128]=t[n],o}function it(e,t,n){const o=e.slice();return o[128]=t[n],o}function at(e,t,n){const o=e.slice();return o[128]=t[n],o}function ct(e,t,n){const o=e.slice();return o[128]=t[n],o}function pt(e,t,n){const o=e.slice();return o[139]=t[n],o}function dt(e,t,n){const o=e.slice();return o[128]=t[n],o}function ut(e,t,n){const o=e.slice();return o[128]=t[n],o}function _t(e,t,n){const o=e.slice();return o[128]=t[n],o}function ht(e,t,n){const o=e.slice();return o[139]=t[n],o}function vt(e,t,n){const o=e.slice();return o[128]=t[n],o}function ft(e,t,n){const o=e.slice();return o[128]=t[n],o}function mt(e,t,n){const o=e.slice();return o[128]=t[n],o}function yt(e,t,n){const o=e.slice();return o[139]=t[n],o}function gt(e,t,n){const o=e.slice();return o[128]=t[n],o}function bt(e,t,n){const o=e.slice();return o[128]=t[n],o}function xt(e,t,n){const o=e.slice();return o[128]=t[n],o}function kt(e,t,n){const o=e.slice();return o[128]=t[n],o}function jt(e,t,n){const o=e.slice();return o[128]=t[n],o}function Lt(e,t,n){const o=e.slice();return o[128]=t[n],o}function Ct(e){let t,n,o,l,s,r,i,a,c,p,d,u,_,h,v,f,y,g,b,L,w,F,O,z,S,$,H,U=Object.keys(e[3]._opt.years).sort(),B=[];for(let t=0;t<U.length;t+=1)B[t]=Dt(Lt(e,U,t));let N=e[58],A=[];for(let t=0;t<N.length;t+=1)A[t]=wt(jt(e,N,t));return{c(){t=D("div"),t.innerHTML="Фильтры - <b>ДТП Очаги (5)</b>",n=T(),o=D("div"),l=D("div"),s=D("fieldset"),r=D("legend"),r.textContent="Фильтрация по периодам:",i=T(),a=D("div"),c=D("input"),u=D("label"),u.textContent="Фильтрация по годам",_=T(),h=D("div");for(let e=0;e<B.length;e+=1)B[e].c();v=T(),f=D("div"),y=D("select"),g=D("option"),g.textContent=`\n\t\t\t\t\t\tВсе типы (${e[58].reduce(e[92],0)})\n\t\t\t\t\t`;for(let e=0;e<A.length;e+=1)A[e].c();b=T(),L=D("div"),w=D("select"),F=D("option"),F.textContent="Очаги все",O=D("option"),O.textContent="Только с погибшими",z=D("option"),z.textContent="Только с пострадавшими",S=D("option"),S.textContent="С пострадавшими или погибшими",$=D("option"),$.textContent="С пострадавшими и погибшими",M(t,"class","pLine svelte-1jsovbn"),M(c,"type","radio"),c.__value=p=1,c.value=c.__value,c.checked=d=1===e[22],M(c,"id","hearths_period_type_51"),M(c,"name","hearths_period_type_5"),M(c,"class","svelte-1jsovbn"),e[91][4].push(c),M(u,"for","hearths_period_type_51"),M(u,"class","svelte-1jsovbn"),M(h,"class","pLine margin svelte-1jsovbn"),M(a,"class","pLine type svelte-1jsovbn"),M(l,"class","pLine nowrap svelte-1jsovbn"),g.__value="",g.value=g.__value,M(g,"class","svelte-1jsovbn"),M(y,"class","multiple_icon_typeTmp svelte-1jsovbn"),y.multiple=!0,void 0===e[21]&&W(()=>e[93].call(y)),M(f,"class","pLine svelte-1jsovbn"),F.__value="",F.value=F.__value,O.__value="1",O.value=O.__value,z.__value="2",z.value=z.__value,S.__value="3",S.value=S.__value,$.__value="4",$.value=$.__value,M(w,"class","svelte-1jsovbn"),void 0===e[20]&&W(()=>e[94].call(w)),M(L,"class","pLine svelte-1jsovbn"),M(o,"class","filtersCont svelte-1jsovbn")},m(p,d,j){k(p,t,d),k(p,n,d),k(p,o,d),x(o,l),x(l,s),x(s,r),x(s,i),x(s,a),x(a,c),c.checked=c.__value===e[22],x(a,u),x(a,_),x(a,h);for(let e=0;e<B.length;e+=1)B[e].m(h,null);x(o,v),x(o,f),x(f,y),x(y,g);for(let e=0;e<A.length;e+=1)A[e].m(y,null);q(y,e[21]),x(o,b),x(o,L),x(L,w),x(w,F),x(w,O),x(w,z),x(w,S),x(w,$),P(w,e[20]),j&&m(H),H=[E(c,"change",e[67]),E(c,"change",e[90]),E(y,"change",e[93]),E(y,"change",e[67]),E(w,"change",e[94]),E(w,"change",e[67])]},p(e,t){if(4194304&t[0]&&d!==(d=1===e[22])&&(c.checked=d),4194304&t[0]&&(c.checked=c.__value===e[22]),12582920&t[0]|32&t[2]){let n;for(U=Object.keys(e[3]._opt.years).sort(),n=0;n<U.length;n+=1){const o=Lt(e,U,n);B[n]?B[n].p(o,t):(B[n]=Dt(o),B[n].c(),B[n].m(h,null))}for(;n<B.length;n+=1)B[n].d(1);B.length=U.length}if(201326592&t[1]){let n;for(N=e[58],n=0;n<N.length;n+=1){const o=jt(e,N,n);A[n]?A[n].p(o,t):(A[n]=wt(o),A[n].c(),A[n].m(y,null))}for(;n<A.length;n+=1)A[n].d(1);A.length=N.length}2097152&t[0]&&q(y,e[21]),1048576&t[0]&&P(w,e[20])},d(l){l&&j(t),l&&j(n),l&&j(o),e[91][4].splice(e[91][4].indexOf(c),1),C(B,l),C(A,l),m(H)}}}function Dt(e){let t,n,o,l,s,r,i,a=e[128]+"";return{c(){t=D("input"),s=D("label"),r=w(a),M(t,"type","checkbox"),M(t,"id","hearths_year_5"),t.checked=n=e[23][e[128]],t.disabled=o=2===e[22],M(t,"name",l=e[128]),M(t,"class","svelte-1jsovbn"),M(s,"for","hearths_year_5"),M(s,"class","svelte-1jsovbn")},m(n,o,l){k(n,t,o),k(n,s,o),x(s,r),l&&i(),i=E(t,"change",e[67])},p(e,s){8388616&s[0]&&n!==(n=e[23][e[128]])&&(t.checked=n),4194304&s[0]&&o!==(o=2===e[22])&&(t.disabled=o),8&s[0]&&l!==(l=e[128])&&M(t,"name",l),8&s[0]&&a!==(a=e[128]+"")&&S(r,a)},d(e){e&&j(t),e&&j(s),i()}}}function wt(e){let t,n,o,l,s,r,i,a=e[128]+"",c=e[57].str_icon_type[e[128]]+"";return{c(){t=D("option"),n=w(a),o=w(" ("),l=w(c),s=w(")\n\t\t\t\t\t\t"),t.__value=r=e[128],t.value=t.__value,M(t,"class",i="icon_type_"+e[57].iconType[e[128]]+" svelte-1jsovbn")},m(e,r){k(e,t,r),x(t,n),x(t,o),x(t,l),x(t,s)},p:h,d(e){e&&j(t)}}}function Tt(e){let t,n,o,l,s,r,i,a,c,p,d,u,_,h,v,f,y,g,b,L,w,F,O,z,S,$,H,U=Object.keys(e[4]._opt.years).sort(),B=[];for(let t=0;t<U.length;t+=1)B[t]=Ft(kt(e,U,t));let N=e[56],A=[];for(let t=0;t<N.length;t+=1)A[t]=Et(xt(e,N,t));return{c(){t=D("div"),t.innerHTML="Фильтры - <b>ДТП Очаги (3)</b>",n=T(),o=D("div"),l=D("div"),s=D("fieldset"),r=D("legend"),r.textContent="Фильтрация по периодам:",i=T(),a=D("div"),c=D("input"),u=D("label"),u.textContent="Фильтрация по годам",_=T(),h=D("div");for(let e=0;e<B.length;e+=1)B[e].c();v=T(),f=D("div"),y=D("select"),g=D("option"),g.textContent=`\n\t\t\t\t\t\tВсе типы (${e[56].reduce(e[96],0)})\n\t\t\t\t\t`;for(let e=0;e<A.length;e+=1)A[e].c();b=T(),L=D("div"),w=D("select"),F=D("option"),F.textContent="Очаги все",O=D("option"),O.textContent="Только с погибшими",z=D("option"),z.textContent="Только с пострадавшими",S=D("option"),S.textContent="С пострадавшими или погибшими",$=D("option"),$.textContent="С пострадавшими и погибшими",M(t,"class","pLine svelte-1jsovbn"),M(c,"type","radio"),c.__value=p=1,c.value=c.__value,c.checked=d=1===e[26],M(c,"id","hearths_period_type_31"),M(c,"name","hearths_period_type_3"),M(c,"class","svelte-1jsovbn"),e[91][3].push(c),M(u,"for","hearths_period_type_31"),M(u,"class","svelte-1jsovbn"),M(h,"class","pLine margin svelte-1jsovbn"),M(a,"class","pLine type svelte-1jsovbn"),M(l,"class","pLine nowrap svelte-1jsovbn"),g.__value="",g.value=g.__value,M(g,"class","svelte-1jsovbn"),M(y,"class","multiple_icon_typeTmp svelte-1jsovbn"),y.multiple=!0,void 0===e[25]&&W(()=>e[97].call(y)),M(f,"class","pLine svelte-1jsovbn"),F.__value="",F.value=F.__value,O.__value="1",O.value=O.__value,z.__value="2",z.value=z.__value,S.__value="3",S.value=S.__value,$.__value="4",$.value=$.__value,M(w,"class","svelte-1jsovbn"),void 0===e[24]&&W(()=>e[98].call(w)),M(L,"class","pLine svelte-1jsovbn"),M(o,"class","filtersCont svelte-1jsovbn")},m(p,d,j){k(p,t,d),k(p,n,d),k(p,o,d),x(o,l),x(l,s),x(s,r),x(s,i),x(s,a),x(a,c),c.checked=c.__value===e[26],x(a,u),x(a,_),x(a,h);for(let e=0;e<B.length;e+=1)B[e].m(h,null);x(o,v),x(o,f),x(f,y),x(y,g);for(let e=0;e<A.length;e+=1)A[e].m(y,null);q(y,e[25]),x(o,b),x(o,L),x(L,w),x(w,F),x(w,O),x(w,z),x(w,S),x(w,$),P(w,e[24]),j&&m(H),H=[E(c,"change",e[68]),E(c,"change",e[95]),E(y,"change",e[97]),E(y,"change",e[68]),E(w,"change",e[98]),E(w,"change",e[68])]},p(e,t){if(67108864&t[0]&&d!==(d=1===e[26])&&(c.checked=d),67108864&t[0]&&(c.checked=c.__value===e[26]),201326608&t[0]|64&t[2]){let n;for(U=Object.keys(e[4]._opt.years).sort(),n=0;n<U.length;n+=1){const o=kt(e,U,n);B[n]?B[n].p(o,t):(B[n]=Ft(o),B[n].c(),B[n].m(h,null))}for(;n<B.length;n+=1)B[n].d(1);B.length=U.length}if(50331648&t[1]){let n;for(N=e[56],n=0;n<N.length;n+=1){const o=xt(e,N,n);A[n]?A[n].p(o,t):(A[n]=Et(o),A[n].c(),A[n].m(y,null))}for(;n<A.length;n+=1)A[n].d(1);A.length=N.length}33554432&t[0]&&q(y,e[25]),16777216&t[0]&&P(w,e[24])},d(l){l&&j(t),l&&j(n),l&&j(o),e[91][3].splice(e[91][3].indexOf(c),1),C(B,l),C(A,l),m(H)}}}function Ft(e){let t,n,o,l,s,r,i,a=e[128]+"";return{c(){t=D("input"),s=D("label"),r=w(a),M(t,"type","checkbox"),M(t,"id","hearths_year_3"),t.checked=n=e[27][e[128]],t.disabled=o=2===e[26],M(t,"name",l=e[128]),M(t,"class","svelte-1jsovbn"),M(s,"for","hearths_year_3"),M(s,"class","svelte-1jsovbn")},m(n,o,l){k(n,t,o),k(n,s,o),x(s,r),l&&i(),i=E(t,"change",e[68])},p(e,s){134217744&s[0]&&n!==(n=e[27][e[128]])&&(t.checked=n),67108864&s[0]&&o!==(o=2===e[26])&&(t.disabled=o),16&s[0]&&l!==(l=e[128])&&M(t,"name",l),16&s[0]&&a!==(a=e[128]+"")&&S(r,a)},d(e){e&&j(t),e&&j(s),i()}}}function Et(e){let t,n,o,l,s,r,i,a=e[128]+"",c=e[55].str_icon_type[e[128]]+"";return{c(){t=D("option"),n=w(a),o=w(" ("),l=w(c),s=w(")\n\t\t\t\t\t\t"),t.__value=r=e[128],t.value=t.__value,M(t,"class",i="icon_type_"+e[55].iconType[e[128]]+" svelte-1jsovbn")},m(e,r){k(e,t,r),x(t,n),x(t,o),x(t,l),x(t,s)},p:h,d(e){e&&j(t)}}}function Ot(e){let t,n,o,l,s,r,i,a,c,p,d,u,_,h,v,f,y,g,b,L,w,F,O,z,S,$,H,U,B,N,A,G,I,Z,R=Object.keys(e[5]._opt.years).sort(),Y=[];for(let t=0;t<R.length;t+=1)Y[t]=Mt(bt(e,R,t));let V=Object.keys(e[5]._opt.years).sort(),J=[];for(let t=0;t<V.length;t+=1)J[t]=St(gt(e,V,t));let K=e[54],Q=[];for(let t=0;t<K.length;t+=1)Q[t]=$t(mt(e,K,t));return{c(){t=D("div"),t.innerHTML="Фильтры - <b>ДТП Очаги (Stat)</b>",n=T(),o=D("div"),l=D("div"),s=D("fieldset"),r=D("legend"),r.textContent="Фильтрация по периодам:",i=T(),a=D("div"),c=D("input"),u=D("label"),u.textContent="Фильтрация по годам",_=T(),h=D("div");for(let e=0;e<Y.length;e+=1)Y[e].c();v=T(),f=D("div"),y=D("input"),b=D("label"),b.textContent="Фильтрация по кварталам",L=T(),w=D("div");for(let e=0;e<J.length;e+=1)J[e].c();F=T(),O=D("div"),z=D("select"),S=D("option"),S.textContent=`\n\t\t\t\t\t\tВсе типы (${e[54].reduce(e[101],0)})\n\t\t\t\t\t`;for(let e=0;e<Q.length;e+=1)Q[e].c();$=T(),H=D("div"),U=D("select"),B=D("option"),B.textContent="Очаги все",N=D("option"),N.textContent="Только с погибшими",A=D("option"),A.textContent="Только с пострадавшими",G=D("option"),G.textContent="С пострадавшими или погибшими",I=D("option"),I.textContent="С пострадавшими и погибшими",M(t,"class","pLine svelte-1jsovbn"),M(c,"type","radio"),c.__value=p=1,c.value=c.__value,c.checked=d=1===e[30],M(c,"id","hearths_period_type_Stat1"),M(c,"name","hearths_period_type_Stat"),M(c,"class","svelte-1jsovbn"),e[91][2].push(c),M(u,"for","hearths_period_type_Stat1"),M(u,"class","svelte-1jsovbn"),M(h,"class","pLine margin svelte-1jsovbn"),M(a,"class","pLine type svelte-1jsovbn"),M(y,"type","radio"),y.__value=g=2,y.value=y.__value,M(y,"id","hearths_period_type_Stat2"),M(y,"name","hearths_period_type_Stat"),M(y,"class","svelte-1jsovbn"),e[91][2].push(y),M(b,"for","hearths_period_type_Stat2"),M(b,"class","svelte-1jsovbn"),M(w,"class","pLine margin svelte-1jsovbn"),M(f,"class","pLine type svelte-1jsovbn"),M(l,"class","pLine nowrap svelte-1jsovbn"),S.__value="",S.value=S.__value,M(S,"class","svelte-1jsovbn"),M(z,"class","multiple_icon_typeTmp svelte-1jsovbn"),z.multiple=!0,void 0===e[29]&&W(()=>e[102].call(z)),M(O,"class","pLine svelte-1jsovbn"),B.__value="",B.value=B.__value,N.__value="1",N.value=N.__value,A.__value="2",A.value=A.__value,G.__value="3",G.value=G.__value,I.__value="4",I.value=I.__value,M(U,"class","svelte-1jsovbn"),void 0===e[28]&&W(()=>e[103].call(U)),M(H,"class","pLine svelte-1jsovbn"),M(o,"class","filtersCont svelte-1jsovbn")},m(p,d,g){k(p,t,d),k(p,n,d),k(p,o,d),x(o,l),x(l,s),x(s,r),x(s,i),x(s,a),x(a,c),c.checked=c.__value===e[30],x(a,u),x(a,_),x(a,h);for(let e=0;e<Y.length;e+=1)Y[e].m(h,null);x(s,v),x(s,f),x(f,y),y.checked=y.__value===e[30],x(f,b),x(f,L),x(f,w);for(let e=0;e<J.length;e+=1)J[e].m(w,null);x(o,F),x(o,O),x(O,z),x(z,S);for(let e=0;e<Q.length;e+=1)Q[e].m(z,null);q(z,e[29]),x(o,$),x(o,H),x(H,U),x(U,B),x(U,N),x(U,A),x(U,G),x(U,I),P(U,e[28]),g&&m(Z),Z=[E(c,"change",e[69]),E(c,"change",e[99]),E(y,"change",e[69]),E(y,"change",e[100]),E(z,"change",e[102]),E(z,"change",e[69]),E(U,"change",e[103]),E(U,"change",e[69])]},p(e,t){if(1073741824&t[0]&&d!==(d=1===e[30])&&(c.checked=d),1073741824&t[0]&&(c.checked=c.__value===e[30]),1073741856&t[0]|1&t[1]|128&t[2]){let n;for(R=Object.keys(e[5]._opt.years).sort(),n=0;n<R.length;n+=1){const o=bt(e,R,n);Y[n]?Y[n].p(o,t):(Y[n]=Mt(o),Y[n].c(),Y[n].m(h,null))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=R.length}if(1073741824&t[0]&&(y.checked=y.__value===e[30]),1073741856&t[0]|2&t[1]|128&t[2]){let n;for(V=Object.keys(e[5]._opt.years).sort(),n=0;n<V.length;n+=1){const o=gt(e,V,n);J[n]?J[n].p(o,t):(J[n]=St(o),J[n].c(),J[n].m(w,null))}for(;n<J.length;n+=1)J[n].d(1);J.length=V.length}if(12582912&t[1]){let n;for(K=e[54],n=0;n<K.length;n+=1){const o=mt(e,K,n);Q[n]?Q[n].p(o,t):(Q[n]=$t(o),Q[n].c(),Q[n].m(z,null))}for(;n<Q.length;n+=1)Q[n].d(1);Q.length=K.length}536870912&t[0]&&q(z,e[29]),268435456&t[0]&&P(U,e[28])},d(l){l&&j(t),l&&j(n),l&&j(o),e[91][2].splice(e[91][2].indexOf(c),1),C(Y,l),e[91][2].splice(e[91][2].indexOf(y),1),C(J,l),C(Q,l),m(Z)}}}function Mt(e){let t,n,o,l,s,r,i,a=e[128]+"";return{c(){t=D("input"),s=D("label"),r=w(a),M(t,"type","checkbox"),M(t,"id","hearths_year_Stat"),t.checked=n=e[31][e[128]],t.disabled=o=2===e[30],M(t,"name",l=e[128]),M(t,"class","svelte-1jsovbn"),M(s,"for","hearths_year_Stat"),M(s,"class","svelte-1jsovbn")},m(n,o,l){k(n,t,o),k(n,s,o),x(s,r),l&&i(),i=E(t,"change",e[69])},p(e,s){32&s[0]|1&s[1]&&n!==(n=e[31][e[128]])&&(t.checked=n),1073741824&s[0]&&o!==(o=2===e[30])&&(t.disabled=o),32&s[0]&&l!==(l=e[128])&&M(t,"name",l),32&s[0]&&a!==(a=e[128]+"")&&S(r,a)},d(e){e&&j(t),e&&j(s),i()}}}function zt(e){let t,n,o,l,s,r,i,a,c,p,d=e[139]+"",u=e[128]+"";return{c(){t=D("input"),s=D("label"),r=w(d),i=w(" кв. "),a=w(u),M(t,"type","checkbox"),M(t,"id","hearths_quarter_Stat"),t.checked=n=e[32][e[128]]&&e[32][e[128]][e[139]],t.disabled=o=1===e[30],M(t,"name",l=e[128]+"_"+e[139]),M(t,"class","svelte-1jsovbn"),M(s,"for",c="hearths_quarter_Stat_"+e[128]+"_"+e[139]),M(s,"class","svelte-1jsovbn")},m(n,o,l){k(n,t,o),k(n,s,o),x(s,r),x(s,i),x(s,a),l&&p(),p=E(t,"change",e[69])},p(e,i){32&i[0]|2&i[1]&&n!==(n=e[32][e[128]]&&e[32][e[128]][e[139]])&&(t.checked=n),1073741824&i[0]&&o!==(o=1===e[30])&&(t.disabled=o),32&i[0]&&l!==(l=e[128]+"_"+e[139])&&M(t,"name",l),32&i[0]&&d!==(d=e[139]+"")&&S(r,d),32&i[0]&&u!==(u=e[128]+"")&&S(a,u),32&i[0]&&c!==(c="hearths_quarter_Stat_"+e[128]+"_"+e[139])&&M(s,"for",c)},d(e){e&&j(t),e&&j(s),p()}}}function St(e){let t,n,o=Object.keys(e[5]._opt.years[e[128]]).sort(),l=[];for(let t=0;t<o.length;t+=1)l[t]=zt(yt(e,o,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=T(),n=D("br")},m(e,o){for(let t=0;t<l.length;t+=1)l[t].m(e,o);k(e,t,o),k(e,n,o)},p(e,n){if(1073741856&n[0]|2&n[1]|128&n[2]){let s;for(o=Object.keys(e[5]._opt.years[e[128]]).sort(),s=0;s<o.length;s+=1){const r=yt(e,o,s);l[s]?l[s].p(r,n):(l[s]=zt(r),l[s].c(),l[s].m(t.parentNode,t))}for(;s<l.length;s+=1)l[s].d(1);l.length=o.length}},d(e){C(l,e),e&&j(t),e&&j(n)}}}function $t(e){let t,n,o,l,s,r,i,a=e[128]+"",c=e[53].str_icon_type[e[128]]+"";return{c(){t=D("option"),n=w(a),o=w(" ("),l=w(c),s=w(")\n\t\t\t\t\t\t"),t.__value=r=e[128],t.value=t.__value,M(t,"class",i="icon_type_"+e[53].iconType[e[128]]+" svelte-1jsovbn")},m(e,r){k(e,t,r),x(t,n),x(t,o),x(t,l),x(t,s)},p:h,d(e){e&&j(t)}}}function Pt(e){let t,n,o,l,s,r,i,a,c,p,d,u,_,h,v,f,y,g,b,L,w,F,O,z,S,$,H,U,B,N,A,G,I,Z,R=Object.keys(e[6]._opt.years).sort(),Y=[];for(let t=0;t<R.length;t+=1)Y[t]=qt(ft(e,R,t));let V=Object.keys(e[6]._opt.years).sort(),J=[];for(let t=0;t<V.length;t+=1)J[t]=Ut(vt(e,V,t));let K=e[52],Q=[];for(let t=0;t<K.length;t+=1)Q[t]=Bt(_t(e,K,t));return{c(){t=D("div"),t.innerHTML="Фильтры - <b>ДТП Очаги (TMP)</b>",n=T(),o=D("div"),l=D("div"),s=D("fieldset"),r=D("legend"),r.textContent="Фильтрация по периодам:",i=T(),a=D("div"),c=D("input"),u=D("label"),u.textContent="Фильтрация по годам",_=T(),h=D("div");for(let e=0;e<Y.length;e+=1)Y[e].c();v=T(),f=D("div"),y=D("input"),b=D("label"),b.textContent="Фильтрация по кварталам",L=T(),w=D("div");for(let e=0;e<J.length;e+=1)J[e].c();F=T(),O=D("div"),z=D("select"),S=D("option"),S.textContent=`\n\t\t\t\t\t\tВсе типы (${e[52].reduce(e[106],0)})\n\t\t\t\t\t`;for(let e=0;e<Q.length;e+=1)Q[e].c();$=T(),H=D("div"),U=D("select"),B=D("option"),B.textContent="Очаги все",N=D("option"),N.textContent="Только с погибшими",A=D("option"),A.textContent="Только с пострадавшими",G=D("option"),G.textContent="С пострадавшими или погибшими",I=D("option"),I.textContent="С пострадавшими и погибшими",M(t,"class","pLine svelte-1jsovbn"),M(c,"type","radio"),c.__value=p=1,c.value=c.__value,c.checked=d=1===e[35],M(c,"id","hearths_period_type_tmp1"),M(c,"name","hearths_period_type_tmp"),M(c,"class","svelte-1jsovbn"),e[91][1].push(c),M(u,"for","hearths_period_type_tmp1"),M(u,"class","svelte-1jsovbn"),M(h,"class","pLine margin svelte-1jsovbn"),M(a,"class","pLine type svelte-1jsovbn"),M(y,"type","radio"),y.__value=g=2,y.value=y.__value,M(y,"id","hearths_period_type_tmp2"),M(y,"name","hearths_period_type_tmp"),M(y,"class","svelte-1jsovbn"),e[91][1].push(y),M(b,"for","hearths_period_type_tmp2"),M(b,"class","svelte-1jsovbn"),M(w,"class","pLine margin svelte-1jsovbn"),M(f,"class","pLine type svelte-1jsovbn"),M(l,"class","pLine nowrap svelte-1jsovbn"),S.__value="",S.value=S.__value,M(S,"class","svelte-1jsovbn"),M(z,"class","multiple_icon_typeTmp svelte-1jsovbn"),z.multiple=!0,void 0===e[34]&&W(()=>e[107].call(z)),M(O,"class","pLine svelte-1jsovbn"),B.__value="",B.value=B.__value,N.__value="1",N.value=N.__value,A.__value="2",A.value=A.__value,G.__value="3",G.value=G.__value,I.__value="4",I.value=I.__value,M(U,"class","svelte-1jsovbn"),void 0===e[33]&&W(()=>e[108].call(U)),M(H,"class","pLine svelte-1jsovbn"),M(o,"class","filtersCont svelte-1jsovbn")},m(p,d,g){k(p,t,d),k(p,n,d),k(p,o,d),x(o,l),x(l,s),x(s,r),x(s,i),x(s,a),x(a,c),c.checked=c.__value===e[35],x(a,u),x(a,_),x(a,h);for(let e=0;e<Y.length;e+=1)Y[e].m(h,null);x(s,v),x(s,f),x(f,y),y.checked=y.__value===e[35],x(f,b),x(f,L),x(f,w);for(let e=0;e<J.length;e+=1)J[e].m(w,null);x(o,F),x(o,O),x(O,z),x(z,S);for(let e=0;e<Q.length;e+=1)Q[e].m(z,null);q(z,e[34]),x(o,$),x(o,H),x(H,U),x(U,B),x(U,N),x(U,A),x(U,G),x(U,I),P(U,e[33]),g&&m(Z),Z=[E(c,"change",e[70]),E(c,"change",e[104]),E(y,"change",e[70]),E(y,"change",e[105]),E(z,"change",e[107]),E(z,"change",e[70]),E(U,"change",e[108]),E(U,"change",e[70])]},p(e,t){if(16&t[1]&&d!==(d=1===e[35])&&(c.checked=d),16&t[1]&&(c.checked=c.__value===e[35]),64&t[0]|48&t[1]|256&t[2]){let n;for(R=Object.keys(e[6]._opt.years).sort(),n=0;n<R.length;n+=1){const o=ft(e,R,n);Y[n]?Y[n].p(o,t):(Y[n]=qt(o),Y[n].c(),Y[n].m(h,null))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=R.length}if(16&t[1]&&(y.checked=y.__value===e[35]),64&t[0]|80&t[1]|256&t[2]){let n;for(V=Object.keys(e[6]._opt.years).sort(),n=0;n<V.length;n+=1){const o=vt(e,V,n);J[n]?J[n].p(o,t):(J[n]=Ut(o),J[n].c(),J[n].m(w,null))}for(;n<J.length;n+=1)J[n].d(1);J.length=V.length}if(3145728&t[1]){let n;for(K=e[52],n=0;n<K.length;n+=1){const o=_t(e,K,n);Q[n]?Q[n].p(o,t):(Q[n]=Bt(o),Q[n].c(),Q[n].m(z,null))}for(;n<Q.length;n+=1)Q[n].d(1);Q.length=K.length}8&t[1]&&q(z,e[34]),4&t[1]&&P(U,e[33])},d(l){l&&j(t),l&&j(n),l&&j(o),e[91][1].splice(e[91][1].indexOf(c),1),C(Y,l),e[91][1].splice(e[91][1].indexOf(y),1),C(J,l),C(Q,l),m(Z)}}}function qt(e){let t,n,o,l,s,r,i,a=e[128]+"";return{c(){t=D("input"),s=D("label"),r=w(a),M(t,"type","checkbox"),M(t,"id","hearths_year_tmp"),t.checked=n=e[36][e[128]],t.disabled=o=2===e[35],M(t,"name",l=e[128]),M(t,"class","svelte-1jsovbn"),M(s,"for","hearths_year_tmp"),M(s,"class","svelte-1jsovbn")},m(n,o,l){k(n,t,o),k(n,s,o),x(s,r),l&&i(),i=E(t,"change",e[70])},p(e,s){64&s[0]|32&s[1]&&n!==(n=e[36][e[128]])&&(t.checked=n),16&s[1]&&o!==(o=2===e[35])&&(t.disabled=o),64&s[0]&&l!==(l=e[128])&&M(t,"name",l),64&s[0]&&a!==(a=e[128]+"")&&S(r,a)},d(e){e&&j(t),e&&j(s),i()}}}function Ht(e){let t,n,o,l,s,r,i,a,c,p,d=e[139]+"",u=e[128]+"";return{c(){t=D("input"),s=D("label"),r=w(d),i=w(" кв. "),a=w(u),M(t,"type","checkbox"),M(t,"id","hearths_quarter_tmp"),t.checked=n=e[37][e[128]]&&e[37][e[128]][e[139]],t.disabled=o=1===e[35],M(t,"name",l=e[128]+"_"+e[139]),M(t,"class","svelte-1jsovbn"),M(s,"for",c="hearths_quarter_tmp_"+e[128]+"_"+e[139]),M(s,"class","svelte-1jsovbn")},m(n,o,l){k(n,t,o),k(n,s,o),x(s,r),x(s,i),x(s,a),l&&p(),p=E(t,"change",e[70])},p(e,i){64&i[0]|64&i[1]&&n!==(n=e[37][e[128]]&&e[37][e[128]][e[139]])&&(t.checked=n),16&i[1]&&o!==(o=1===e[35])&&(t.disabled=o),64&i[0]&&l!==(l=e[128]+"_"+e[139])&&M(t,"name",l),64&i[0]&&d!==(d=e[139]+"")&&S(r,d),64&i[0]&&u!==(u=e[128]+"")&&S(a,u),64&i[0]&&c!==(c="hearths_quarter_tmp_"+e[128]+"_"+e[139])&&M(s,"for",c)},d(e){e&&j(t),e&&j(s),p()}}}function Ut(e){let t,n,o=Object.keys(e[6]._opt.years[e[128]]).sort(),l=[];for(let t=0;t<o.length;t+=1)l[t]=Ht(ht(e,o,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=T(),n=D("br")},m(e,o){for(let t=0;t<l.length;t+=1)l[t].m(e,o);k(e,t,o),k(e,n,o)},p(e,n){if(64&n[0]|80&n[1]|256&n[2]){let s;for(o=Object.keys(e[6]._opt.years[e[128]]).sort(),s=0;s<o.length;s+=1){const r=ht(e,o,s);l[s]?l[s].p(r,n):(l[s]=Ht(r),l[s].c(),l[s].m(t.parentNode,t))}for(;s<l.length;s+=1)l[s].d(1);l.length=o.length}},d(e){C(l,e),e&&j(t),e&&j(n)}}}function Bt(e){let t,n,o,l,s,r,i,a=e[128]+"",c=e[51].str_icon_type[e[128]]+"";return{c(){t=D("option"),n=w(a),o=w(" ("),l=w(c),s=w(")\n\t\t\t\t\t\t"),t.__value=r=e[128],t.value=t.__value,M(t,"class",i="icon_type_"+e[51].iconType[e[128]]+" svelte-1jsovbn")},m(e,r){k(e,t,r),x(t,n),x(t,o),x(t,l),x(t,s)},p:h,d(e){e&&j(t)}}}function Nt(e){let t,n,o,l,s,r,i,a,c,p,d,u,_,h,v,f,y,g,b,L,w,F,O,z,S,$,H,U,B,N,A,G,I,Z,R,Y,V=Object.keys(e[7]._opt.years).sort(),J=[];for(let t=0;t<V.length;t+=1)J[t]=At(ut(e,V,t));let K=Object.keys(e[7]._opt.years).sort(),Q=[];for(let t=0;t<K.length;t+=1)Q[t]=It(dt(e,K,t));let X=e[50],ee=[];for(let t=0;t<X.length;t+=1)ee[t]=Zt(ct(e,X,t));return{c(){t=D("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=T(),o=D("div"),o.innerHTML="Фильтры - <b>ДТП Очаги</b>",l=T(),s=D("div"),r=D("div"),i=D("fieldset"),a=D("legend"),a.textContent="Фильтрация по периодам:",c=T(),p=D("div"),d=D("input"),h=D("label"),h.textContent="Фильтрация по годам",v=T(),f=D("div");for(let e=0;e<J.length;e+=1)J[e].c();y=T(),g=D("div"),b=D("input"),w=D("label"),w.textContent="Фильтрация по кварталам",F=T(),O=D("div");for(let e=0;e<Q.length;e+=1)Q[e].c();z=T(),S=D("div"),$=D("select"),H=D("option"),H.textContent=`\n\t\t\t\t\t\tВсе типы (${e[50].reduce(e[111],0)})\n\t\t\t\t\t`;for(let e=0;e<ee.length;e+=1)ee[e].c();U=T(),B=D("div"),N=D("select"),A=D("option"),A.textContent="Очаги все",G=D("option"),G.textContent="Только с погибшими",I=D("option"),I.textContent="Только с пострадавшими",Z=D("option"),Z.textContent="С пострадавшими или погибшими",R=D("option"),R.textContent="С пострадавшими и погибшими",M(t,"class","pLine svelte-1jsovbn"),M(o,"class","pLine svelte-1jsovbn"),M(d,"type","radio"),d.__value=u=1,d.value=d.__value,d.checked=_=1===e[40],M(d,"id","hearths_period_type1"),M(d,"name","hearths_period_type"),M(d,"class","svelte-1jsovbn"),e[91][0].push(d),M(h,"for","hearths_period_type1"),M(h,"class","svelte-1jsovbn"),M(f,"class","pLine margin svelte-1jsovbn"),M(p,"class","pLine type svelte-1jsovbn"),M(b,"type","radio"),b.__value=L=2,b.value=b.__value,M(b,"id","hearths_period_type2"),M(b,"name","hearths_period_type"),M(b,"class","svelte-1jsovbn"),e[91][0].push(b),M(w,"for","hearths_period_type2"),M(w,"class","svelte-1jsovbn"),M(O,"class","pLine margin svelte-1jsovbn"),M(g,"class","pLine type svelte-1jsovbn"),M(r,"class","pLine nowrap svelte-1jsovbn"),H.__value="",H.value=H.__value,M(H,"class","svelte-1jsovbn"),M($,"class","multiple_icon_typeTmp svelte-1jsovbn"),$.multiple=!0,void 0===e[39]&&W(()=>e[112].call($)),M(S,"class","pLine svelte-1jsovbn"),A.__value="",A.value=A.__value,G.__value="1",G.value=G.__value,I.__value="2",I.value=I.__value,Z.__value="3",Z.value=Z.__value,R.__value="4",R.value=R.__value,M(N,"class","svelte-1jsovbn"),void 0===e[38]&&W(()=>e[113].call(N)),M(B,"class","pLine svelte-1jsovbn"),M(s,"class","filtersCont svelte-1jsovbn")},m(u,_,j){k(u,t,_),k(u,n,_),k(u,o,_),k(u,l,_),k(u,s,_),x(s,r),x(r,i),x(i,a),x(i,c),x(i,p),x(p,d),d.checked=d.__value===e[40],x(p,h),x(p,v),x(p,f);for(let e=0;e<J.length;e+=1)J[e].m(f,null);x(i,y),x(i,g),x(g,b),b.checked=b.__value===e[40],x(g,w),x(g,F),x(g,O);for(let e=0;e<Q.length;e+=1)Q[e].m(O,null);x(s,z),x(s,S),x(S,$),x($,H);for(let e=0;e<ee.length;e+=1)ee[e].m($,null);q($,e[39]),x(s,U),x(s,B),x(B,N),x(N,A),x(N,G),x(N,I),x(N,Z),x(N,R),P(N,e[38]),j&&m(Y),Y=[E(d,"change",e[71]),E(d,"change",e[109]),E(b,"change",e[71]),E(b,"change",e[110]),E($,"change",e[112]),E($,"change",e[71]),E(N,"change",e[113]),E(N,"change",e[71])]},p(e,t){if(512&t[1]&&_!==(_=1===e[40])&&(d.checked=_),512&t[1]&&(d.checked=d.__value===e[40]),128&t[0]|1536&t[1]|512&t[2]){let n;for(V=Object.keys(e[7]._opt.years).sort(),n=0;n<V.length;n+=1){const o=ut(e,V,n);J[n]?J[n].p(o,t):(J[n]=At(o),J[n].c(),J[n].m(f,null))}for(;n<J.length;n+=1)J[n].d(1);J.length=V.length}if(512&t[1]&&(b.checked=b.__value===e[40]),128&t[0]|2560&t[1]|512&t[2]){let n;for(K=Object.keys(e[7]._opt.years).sort(),n=0;n<K.length;n+=1){const o=dt(e,K,n);Q[n]?Q[n].p(o,t):(Q[n]=It(o),Q[n].c(),Q[n].m(O,null))}for(;n<Q.length;n+=1)Q[n].d(1);Q.length=K.length}if(786432&t[1]){let n;for(X=e[50],n=0;n<X.length;n+=1){const o=ct(e,X,n);ee[n]?ee[n].p(o,t):(ee[n]=Zt(o),ee[n].c(),ee[n].m($,null))}for(;n<ee.length;n+=1)ee[n].d(1);ee.length=X.length}256&t[1]&&q($,e[39]),128&t[1]&&P(N,e[38])},d(r){r&&j(t),r&&j(n),r&&j(o),r&&j(l),r&&j(s),e[91][0].splice(e[91][0].indexOf(d),1),C(J,r),e[91][0].splice(e[91][0].indexOf(b),1),C(Q,r),C(ee,r),m(Y)}}}function At(e){let t,n,o,l,s,r,i,a,c=e[128]+"";return{c(){t=D("input"),s=D("label"),r=w(c),M(t,"type","checkbox"),M(t,"id","hearths_year"),t.checked=n=e[41][e[128]],t.disabled=o=2===e[40],M(t,"name",l=e[128]),M(t,"class","svelte-1jsovbn"),M(s,"for",i="hearths_year"+e[128]),M(s,"class","svelte-1jsovbn")},m(n,o,l){k(n,t,o),k(n,s,o),x(s,r),l&&a(),a=E(t,"change",e[71])},p(e,a){128&a[0]|1024&a[1]&&n!==(n=e[41][e[128]])&&(t.checked=n),512&a[1]&&o!==(o=2===e[40])&&(t.disabled=o),128&a[0]&&l!==(l=e[128])&&M(t,"name",l),128&a[0]&&c!==(c=e[128]+"")&&S(r,c),128&a[0]&&i!==(i="hearths_year"+e[128])&&M(s,"for",i)},d(e){e&&j(t),e&&j(s),a()}}}function Gt(e){let t,n,o,l,s,r,i,a,c,p,d=e[139]+"",u=e[128]+"";return{c(){t=D("input"),s=D("label"),r=w(d),i=w(" кв. "),a=w(u),M(t,"type","checkbox"),M(t,"id","hearths_quarter"),t.checked=n=e[42][e[128]]&&e[42][e[128]][e[139]],t.disabled=o=1===e[40],M(t,"name",l=e[128]+"_"+e[139]),M(t,"class","svelte-1jsovbn"),M(s,"for",c="hearths_quarter_"+e[128]+"_"+e[139]),M(s,"class","svelte-1jsovbn")},m(n,o,l){k(n,t,o),k(n,s,o),x(s,r),x(s,i),x(s,a),l&&p(),p=E(t,"change",e[71])},p(e,i){128&i[0]|2048&i[1]&&n!==(n=e[42][e[128]]&&e[42][e[128]][e[139]])&&(t.checked=n),512&i[1]&&o!==(o=1===e[40])&&(t.disabled=o),128&i[0]&&l!==(l=e[128]+"_"+e[139])&&M(t,"name",l),128&i[0]&&d!==(d=e[139]+"")&&S(r,d),128&i[0]&&u!==(u=e[128]+"")&&S(a,u),128&i[0]&&c!==(c="hearths_quarter_"+e[128]+"_"+e[139])&&M(s,"for",c)},d(e){e&&j(t),e&&j(s),p()}}}function It(e){let t,n,o=Object.keys(e[7]._opt.years[e[128]]).sort(),l=[];for(let t=0;t<o.length;t+=1)l[t]=Gt(pt(e,o,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=T(),n=D("br")},m(e,o){for(let t=0;t<l.length;t+=1)l[t].m(e,o);k(e,t,o),k(e,n,o)},p(e,n){if(128&n[0]|2560&n[1]|512&n[2]){let s;for(o=Object.keys(e[7]._opt.years[e[128]]).sort(),s=0;s<o.length;s+=1){const r=pt(e,o,s);l[s]?l[s].p(r,n):(l[s]=Gt(r),l[s].c(),l[s].m(t.parentNode,t))}for(;s<l.length;s+=1)l[s].d(1);l.length=o.length}},d(e){C(l,e),e&&j(t),e&&j(n)}}}function Zt(e){let t,n,o,l,s,r,i,a=e[128]+"",c=e[49].str_icon_type[e[128]]+"";return{c(){t=D("option"),n=w(a),o=w(" ("),l=w(c),s=w(")\n\t\t\t\t\t\t"),t.__value=r=e[128],t.value=t.__value,M(t,"class",i="icon_type_"+e[49].iconType[e[128]]+" svelte-1jsovbn")},m(e,r){k(e,t,r),x(t,n),x(t,o),x(t,l),x(t,s)},p:h,d(e){e&&j(t)}}}function Rt(e){let t;return{c(){t=D("div"),t.textContent="Нет включенных слоев",M(t,"class","pLine svelte-1jsovbn")},m(e,n){k(e,t,n)},p:h,d(e){e&&j(t)}}}function Yt(e){let t,n,o,l,s,r,i,a,c,p,d,u,_,h,v,f,y,g,b,L,C,F,O,z,P,q,H,U,B,N,A,G,I,Z,R,Y,V,J,K,W,Q,X;return{c(){t=D("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=T(),o=D("div"),l=D("button"),s=T(),r=D("input"),i=T(),a=D("input"),c=T(),p=D("button"),d=T(),u=D("div"),_=D("br"),h=T(),v=D("label"),f=D("input"),g=D("span"),b=w("Мин.яркость ("),L=w(e[16]),C=w(")"),F=T(),O=D("br"),z=T(),P=D("label"),q=D("input"),U=D("span"),B=w("Радиус ("),N=w(e[14]),A=w(")"),G=T(),I=D("br"),Z=T(),R=D("label"),Y=D("input"),J=D("span"),K=w("Размытие ("),W=w(e[15]),Q=w(")"),M(t,"class","pLine svelte-1jsovbn"),M(l,"class","pika-prev"),M(r,"type","text"),M(r,"class","begDate svelte-1jsovbn"),M(a,"type","text"),M(a,"class","endDate svelte-1jsovbn"),M(p,"class","pika-next"),M(o,"class","pikaday pLine svelte-1jsovbn"),M(f,"type","range"),M(f,"min","0.05"),M(f,"max","1"),M(f,"step","0.01"),f.disabled=y=!e[13],M(f,"class","svelte-1jsovbn"),M(v,"class","svelte-1jsovbn"),M(q,"type","range"),M(q,"min","0"),M(q,"max","100"),M(q,"step","1"),q.disabled=H=!e[13],M(q,"class","svelte-1jsovbn"),M(P,"class","svelte-1jsovbn"),M(Y,"type","range"),M(Y,"min","0"),M(Y,"max","15"),M(Y,"step","0.01"),Y.disabled=V=!e[13],M(Y,"class","svelte-1jsovbn"),M(R,"class","svelte-1jsovbn"),M(u,"class","pLine svelte-1jsovbn")},m(y,j,D){k(y,t,j),k(y,n,j),k(y,o,j),x(o,l),x(o,s),x(o,r),e[114](r),x(o,i),x(o,a),e[115](a),x(o,c),x(o,p),k(y,d,j),k(y,u,j),x(u,_),x(u,h),x(u,v),x(v,f),$(f,e[16]),x(v,g),x(g,b),x(g,L),x(g,C),x(u,F),x(u,O),x(u,z),x(u,P),x(P,q),$(q,e[14]),x(P,U),x(U,B),x(U,N),x(U,A),x(u,G),x(u,I),x(u,Z),x(u,R),x(R,Y),$(Y,e[15]),x(R,J),x(J,K),x(J,W),x(J,Q),D&&m(X),X=[E(l,"click",e[65]),E(p,"click",e[66]),E(f,"change",e[116]),E(f,"input",e[116]),E(f,"input",e[60]),E(q,"change",e[117]),E(q,"input",e[117]),E(q,"input",e[60]),E(Y,"change",e[118]),E(Y,"input",e[118]),E(Y,"input",e[60])]},p(e,t){8192&t[0]&&y!==(y=!e[13])&&(f.disabled=y),65536&t[0]&&$(f,e[16]),65536&t[0]&&S(L,e[16]),8192&t[0]&&H!==(H=!e[13])&&(q.disabled=H),16384&t[0]&&$(q,e[14]),16384&t[0]&&S(N,e[14]),8192&t[0]&&V!==(V=!e[13])&&(Y.disabled=V),32768&t[0]&&$(Y,e[15]),32768&t[0]&&S(W,e[15])},d(l){l&&j(t),l&&j(n),l&&j(o),e[114](null),e[115](null),l&&j(d),l&&j(u),m(X)}}}function Vt(e){let t,n,o,l,s,r,i,a,c,p,d,u,_,h,v,f,y,g,b;function L(e,t){return e[0]._arm?Kt:Jt}let w=L(e),F=w(e),O=e[43].collision_type&&function(e){let t,n,o,l,s=e[44],r=[];for(let t=0;t<s.length;t+=1)r[t]=Wt(at(e,s,t));return{c(){t=D("div"),n=D("select"),o=D("option"),o.textContent=`\n\t\t\t\t\t\tВсе типы (${e[44].reduce(e[120],0)})\n\t\t\t\t\t`;for(let e=0;e<r.length;e+=1)r[e].c();o.__value="",o.value=o.__value,M(o,"class","svelte-1jsovbn"),M(n,"class","multiple_icon_type svelte-1jsovbn"),n.multiple=!0,void 0===e[10]&&W(()=>e[121].call(n)),M(t,"class","pLine svelte-1jsovbn")},m(s,i,a){k(s,t,i),x(t,n),x(n,o);for(let e=0;e<r.length;e+=1)r[e].m(n,null);q(n,e[10]),a&&m(l),l=[E(n,"change",e[121]),E(n,"change",e[61])]},p(e,t){if(12288&t[1]){let o;for(s=e[44],o=0;o<s.length;o+=1){const l=at(e,s,o);r[o]?r[o].p(l,t):(r[o]=Wt(l),r[o].c(),r[o].m(n,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=s.length}1024&t[0]&&q(n,e[10])},d(e){e&&j(t),C(r,e),m(l)}}}(e);return{c(){t=D("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=T(),o=D("div"),o.innerHTML="Фильтры - <b>ДТП Сводный</b>",l=T(),s=D("div"),r=D("input"),i=D("label"),i.textContent="- тепловая карта",a=T(),c=D("div"),p=D("div"),d=D("input"),u=D("label"),u.textContent="Все",_=T(),F.c(),h=T(),v=D("div"),f=D("input"),y=D("label"),y.textContent="Только ГИБДД",g=T(),O&&O.c(),M(t,"class","pLine svelte-1jsovbn"),M(o,"class","pLine svelte-1jsovbn"),M(r,"type","checkbox"),r.value="DtpVerifyed",M(r,"name","heatDtpVerifyed"),M(r,"class","svelte-1jsovbn"),M(i,"for","heatDtpVerifyed"),M(i,"class","svelte-1jsovbn"),M(s,"class","pLine svelte-1jsovbn"),M(d,"type","radio"),M(d,"id","d0"),M(d,"name","drone"),d.value="0",d.checked=!0,M(d,"class","svelte-1jsovbn"),M(u,"for","d0"),M(u,"class","svelte-1jsovbn"),M(p,"class","pLine svelte-1jsovbn"),M(f,"type","radio"),M(f,"id","d3"),M(f,"name","drone"),f.value="3",M(f,"class","svelte-1jsovbn"),M(y,"for","d3"),M(y,"class","svelte-1jsovbn"),M(v,"class","pLine svelte-1jsovbn"),M(c,"class","filtersCont svelte-1jsovbn")},m(j,L,C){k(j,t,L),k(j,n,L),k(j,o,L),k(j,l,L),k(j,s,L),x(s,r),e[119](r),x(s,i),k(j,a,L),k(j,c,L),x(c,p),x(p,d),x(p,u),x(c,_),F.m(c,null),x(c,h),x(c,v),x(v,f),x(v,y),x(c,g),O&&O.m(c,null),C&&m(b),b=[E(r,"change",e[59]),E(d,"click",e[64]),E(f,"click",e[64])]},p(e,t){w===(w=L(e))&&F?F.p(e,t):(F.d(1),F=w(e),F&&(F.c(),F.m(c,h))),e[43].collision_type&&O.p(e,t)},d(r){r&&j(t),r&&j(n),r&&j(o),r&&j(l),r&&j(s),e[119](null),r&&j(a),r&&j(c),F.d(),O&&O.d(),m(b)}}}function Jt(e){let t,n,o,l,s,r,i,a;return{c(){t=D("div"),n=D("input"),o=D("label"),o.textContent="Только Пересечения",l=T(),s=D("div"),r=D("input"),i=D("label"),i.textContent="Только СКПДИ",M(n,"type","radio"),M(n,"id","d1"),M(n,"name","drone"),n.value="1",M(n,"class","svelte-1jsovbn"),M(o,"for","d1"),M(o,"class","svelte-1jsovbn"),M(t,"class","pLine svelte-1jsovbn"),M(r,"type","radio"),M(r,"id","d2"),M(r,"name","drone"),r.value="2",M(r,"class","svelte-1jsovbn"),M(i,"for","d2"),M(i,"class","svelte-1jsovbn"),M(s,"class","pLine svelte-1jsovbn")},m(c,p,d){k(c,t,p),x(t,n),x(t,o),k(c,l,p),k(c,s,p),x(s,r),x(s,i),d&&m(a),a=[E(n,"click",e[64]),E(r,"click",e[64])]},p:h,d(e){e&&j(t),e&&j(l),e&&j(s),m(a)}}}function Kt(e){let t,n,o,l;return{c(){t=D("div"),n=D("input"),o=D("label"),o.textContent="Только Пересечения ГИБДД и СКПДИ",M(n,"type","radio"),M(n,"id","d1"),M(n,"name","drone"),n.value="1",M(n,"class","svelte-1jsovbn"),M(o,"for","d1"),M(o,"class","svelte-1jsovbn"),M(t,"class","pLine svelte-1jsovbn")},m(s,r,i){k(s,t,r),x(t,n),x(t,o),i&&l(),l=E(n,"click",e[64])},p:h,d(e){e&&j(t),l()}}}function Wt(e){let t,n,o,l,s,r,i,a=e[128]+"",c=e[43].collision_type[e[128]]+"";return{c(){t=D("option"),n=w(a),o=w(" ("),l=w(c),s=w(")\n\t\t\t\t\t\t"),t.__value=r=e[128],t.value=t.__value,M(t,"class",i="icon_type_"+e[43].iconType[e[128]]+" svelte-1jsovbn")},m(e,r){k(e,t,r),x(t,n),x(t,o),x(t,l),x(t,s)},p:h,d(e){e&&j(t)}}}function Qt(e){let t,n,o,l,s,r,i,a,c,p,d=e[45].collision_type&&function(e){let t,n,o,l,s=e[46],r=[];for(let t=0;t<s.length;t+=1)r[t]=Xt(it(e,s,t));return{c(){t=D("div"),n=D("select"),o=D("option"),o.textContent=`\n\t\t\t\t\t\tВсе типы (${e[46].reduce(e[123],0)})\n\t\t\t\t\t`;for(let e=0;e<r.length;e+=1)r[e].c();o.__value="",o.value=o.__value,M(o,"class","svelte-1jsovbn"),M(n,"class","multiple_icon_type svelte-1jsovbn"),n.multiple=!0,void 0===e[11]&&W(()=>e[124].call(n)),M(t,"class","pLine svelte-1jsovbn")},m(s,i,a){k(s,t,i),x(t,n),x(n,o);for(let e=0;e<r.length;e+=1)r[e].m(n,null);q(n,e[11]),a&&m(l),l=[E(n,"change",e[124]),E(n,"change",e[63])]},p(e,t){if(49152&t[1]){let o;for(s=e[46],o=0;o<s.length;o+=1){const l=it(e,s,o);r[o]?r[o].p(l,t):(r[o]=Xt(l),r[o].c(),r[o].m(n,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=s.length}2048&t[0]&&q(n,e[11])},d(e){e&&j(t),C(r,e),m(l)}}}(e);return{c(){t=D("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=T(),o=D("div"),o.innerHTML="Фильтры - <b>ДТП СКПДИ</b>",l=T(),s=D("div"),r=D("div"),i=D("input"),a=D("label"),a.textContent="- тепловая карта",c=T(),d&&d.c(),M(t,"class","pLine svelte-1jsovbn"),M(o,"class","pLine svelte-1jsovbn"),M(i,"type","checkbox"),i.value="DtpSkpdi",M(i,"name","heatDtpSkpdi"),M(i,"class","svelte-1jsovbn"),M(a,"for","heatDtpSkpdi"),M(a,"class","svelte-1jsovbn"),M(r,"class","pLine svelte-1jsovbn"),M(s,"class","filtersCont svelte-1jsovbn")},m(u,_,h){k(u,t,_),k(u,n,_),k(u,o,_),k(u,l,_),k(u,s,_),x(s,r),x(r,i),e[122](i),x(r,a),x(s,c),d&&d.m(s,null),h&&p(),p=E(i,"change",e[59])},p(e,t){e[45].collision_type&&d.p(e,t)},d(r){r&&j(t),r&&j(n),r&&j(o),r&&j(l),r&&j(s),e[122](null),d&&d.d(),p()}}}function Xt(e){let t,n,o,l,s,r,i,a=e[128]+"",c=e[45].collision_type[e[128]]+"";return{c(){t=D("option"),n=w(a),o=w(" ("),l=w(c),s=w(")\n\t\t\t\t\t\t"),t.__value=r=e[128],t.value=t.__value,M(t,"class",i="icon_type_"+e[45].iconType[e[128]]+" svelte-1jsovbn")},m(e,r){k(e,t,r),x(t,n),x(t,o),x(t,l),x(t,s)},p:h,d(e){e&&j(t)}}}function en(e){let t,n,o,l,s,r,i,a,c,p,d=e[47].collision_type&&function(e){let t,n,o,l,s=e[48],r=[];for(let t=0;t<s.length;t+=1)r[t]=tn(rt(e,s,t));return{c(){t=D("div"),n=D("select"),o=D("option"),o.textContent=`\n\t\t\t\t\t\tВсе типы (${e[48].reduce(e[126],0)})\n\t\t\t\t\t`;for(let e=0;e<r.length;e+=1)r[e].c();o.__value="",o.value=o.__value,M(o,"class","svelte-1jsovbn"),M(n,"class","multiple_icon_type svelte-1jsovbn"),n.multiple=!0,void 0===e[12]&&W(()=>e[127].call(n)),M(t,"class","pLine svelte-1jsovbn")},m(s,i,a){k(s,t,i),x(t,n),x(n,o);for(let e=0;e<r.length;e+=1)r[e].m(n,null);q(n,e[12]),a&&m(l),l=[E(n,"change",e[127]),E(n,"change",e[62])]},p(e,t){if(196608&t[1]){let o;for(s=e[48],o=0;o<s.length;o+=1){const l=rt(e,s,o);r[o]?r[o].p(l,t):(r[o]=tn(l),r[o].c(),r[o].m(n,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=s.length}4096&t[0]&&q(n,e[12])},d(e){e&&j(t),C(r,e),m(l)}}}(e);return{c(){t=D("div"),t.innerHTML='<hr class="svelte-1jsovbn">',n=T(),o=D("div"),o.innerHTML="Фильтры - <b>ДТП ГИБДД</b>",l=T(),s=D("div"),r=D("div"),i=D("input"),a=D("label"),a.textContent="- тепловая карта",c=T(),d&&d.c(),M(t,"class","pLine svelte-1jsovbn"),M(o,"class","pLine svelte-1jsovbn"),M(i,"type","checkbox"),i.value="DtpGibdd",M(i,"name","heatDtpGibdd"),M(i,"class","svelte-1jsovbn"),M(a,"for","heatDtpGibdd"),M(a,"class","svelte-1jsovbn"),M(r,"class","pLine svelte-1jsovbn"),M(s,"class","filtersCont svelte-1jsovbn")},m(u,_,h){k(u,t,_),k(u,n,_),k(u,o,_),k(u,l,_),k(u,s,_),x(s,r),x(r,i),e[125](i),x(r,a),x(s,c),d&&d.m(s,null),h&&p(),p=E(i,"change",e[59])},p(e,t){e[47].collision_type&&d.p(e,t)},d(r){r&&j(t),r&&j(n),r&&j(o),r&&j(l),r&&j(s),e[125](null),d&&d.d(),p()}}}function tn(e){let t,n,o,l,s,r,i,a=e[128]+"",c=e[47].collision_type[e[128]]+"";return{c(){t=D("option"),n=w(a),o=w(" ("),l=w(c),s=w(")\n\t\t\t\t\t\t"),t.__value=r=e[128],t.value=t.__value,M(t,"class",i="icon_type_"+e[47].iconType[e[128]]+" svelte-1jsovbn")},m(e,r){k(e,t,r),x(t,n),x(t,o),x(t,l),x(t,s)},p:h,d(e){e&&j(t)}}}function nn(e){let t,n,o,l,s,r,i,a,c,p=e[3]._map&&e[3]._opt&&e[3]._opt.years&&Ct(e),d=e[4]._map&&e[4]._opt&&e[4]._opt.years&&Tt(e),u=e[5]._map&&e[5]._opt&&e[5]._opt.years&&Ot(e),_=e[6]._map&&e[6]._opt&&e[6]._opt.years&&Pt(e),v=e[7]._map&&e[7]._opt&&e[7]._opt.years&&Nt(e);function f(e,t){return e[0]._map||e[1]._map||e[2]._map?Yt:e[7]._map||e[6]._map?void 0:Rt}let m=f(e),y=m&&m(e),g=e[0]._map&&Vt(e),b=e[1]._map&&Qt(e),L=e[2]._map&&en(e);return{c(){t=D("div"),p&&p.c(),n=T(),d&&d.c(),o=T(),u&&u.c(),l=T(),_&&_.c(),s=T(),v&&v.c(),r=T(),y&&y.c(),i=T(),g&&g.c(),a=T(),b&&b.c(),c=T(),L&&L.c(),M(t,"class","mvsFilters")},m(e,h){k(e,t,h),p&&p.m(t,null),x(t,n),d&&d.m(t,null),x(t,o),u&&u.m(t,null),x(t,l),_&&_.m(t,null),x(t,s),v&&v.m(t,null),x(t,r),y&&y.m(t,null),x(t,i),g&&g.m(t,null),x(t,a),b&&b.m(t,null),x(t,c),L&&L.m(t,null)},p(e,h){e[3]._map&&e[3]._opt&&e[3]._opt.years?p?p.p(e,h):(p=Ct(e),p.c(),p.m(t,n)):p&&(p.d(1),p=null),e[4]._map&&e[4]._opt&&e[4]._opt.years?d?d.p(e,h):(d=Tt(e),d.c(),d.m(t,o)):d&&(d.d(1),d=null),e[5]._map&&e[5]._opt&&e[5]._opt.years?u?u.p(e,h):(u=Ot(e),u.c(),u.m(t,l)):u&&(u.d(1),u=null),e[6]._map&&e[6]._opt&&e[6]._opt.years?_?_.p(e,h):(_=Pt(e),_.c(),_.m(t,s)):_&&(_.d(1),_=null),e[7]._map&&e[7]._opt&&e[7]._opt.years?v?v.p(e,h):(v=Nt(e),v.c(),v.m(t,r)):v&&(v.d(1),v=null),m===(m=f(e))&&y?y.p(e,h):(y&&y.d(1),y=m&&m(e),y&&(y.c(),y.m(t,i))),e[0]._map?g?g.p(e,h):(g=Vt(e),g.c(),g.m(t,a)):g&&(g.d(1),g=null),e[1]._map?b?b.p(e,h):(b=Qt(e),b.c(),b.m(t,c)):b&&(b.d(1),b=null),e[2]._map?L?L.p(e,h):(L=en(e),L.c(),L.m(t,null)):L&&(L.d(1),L=null)},i:h,o:h,d(e){e&&j(t),p&&p.d(),d&&d.d(),u&&u.d(),_&&_.d(),v&&v.d(),y&&y.d(),g&&g.d(),b&&b.d(),L&&L.d()}}}function on(e,t,n){let o,l,{DtpVerifyed:s}=t,{DtpHearths5:r}=t,{DtpHearths3:i}=t,{DtpHearthsStat:a}=t,{DtpHearthsTmp:c}=t,{DtpHearths:p}=t,{DtpSkpdi:d}=t,{DtpGibdd:u}=t,_=0;const h=new Date,v=new Date(new Date(h.getFullYear(),h.getMonth(),h.getDate()).getTime()),f=h,m=new Date(2018,0,1);let y,g,b,x,k,j,C,D=[m.getTime()/1e3,f.getTime()/1e3],w=s._opt||{},T=w.collision_type?Object.keys(w.collision_type).sort((e,t)=>w.collision_type[t]-w.collision_type[e]):[],F=d._opt||{},E=F.collision_type?Object.keys(F.collision_type).sort((e,t)=>F.collision_type[t]-F.collision_type[e]):[],O=u._opt||{},M=O.collision_type?Object.keys(O.collision_type).sort((e,t)=>O.collision_type[t]-O.collision_type[e]):[],S=p._opt||{},$=S.str_icon_type?Object.keys(S.str_icon_type).sort((e,t)=>S.str_icon_type[t]-S.str_icon_type[e]):[],P=c._opt||{},q=P.str_icon_type?Object.keys(P.str_icon_type).sort((e,t)=>P.str_icon_type[t]-P.str_icon_type[e]):[],B=a._opt||{},N=B.str_icon_type?Object.keys(B.str_icon_type).sort((e,t)=>B.str_icon_type[t]-B.str_icon_type[e]):[],G=i._opt||{},I=G.str_icon_type?Object.keys(G.str_icon_type).sort((e,t)=>G.str_icon_type[t]-G.str_icon_type[e]):[],Z=r._opt||{},Y=Z.str_icon_type?Object.keys(Z.str_icon_type).sort((e,t)=>Z.str_icon_type[t]-Z.str_icon_type[e]):[],V=[""],J=[""],K=[""],W=19,Q=11.26,X=.34;const ee=e=>{let t;if(e){let o=e.target;n(13,b=o.checked),t=x,x=o.value}b&&n(13,b={radius:W,blur:Q,minOpacity:X}),"DtpGibdd"===x?(n(2,u._needHeat=b,u),ne(),n(1,d._needHeat=n(0,s._needHeat=null,s),d),j&&n(18,j.checked=!1,j),C&&n(19,C.checked=!1,C)):"DtpSkpdi"===x?(n(1,d._needHeat=b,d),oe(),n(2,u._needHeat=n(0,s._needHeat=null,s),u),k&&n(17,k.checked=!1,k),C&&n(19,C.checked=!1,C)):"DtpVerifyed"===x&&(n(0,s._needHeat=b,s),te(),n(2,u._needHeat=n(1,d._needHeat=null,d),u),k&&n(17,k.checked=!1,k),j&&n(18,j.checked=!1,j)),"DtpGibdd"===t?ne():"DtpSkpdi"===t?oe():"DtpVerifyed"===t&&te()},te=()=>{let e=[{type:"itemType",zn:_}];D&&e.push({type:"date",zn:D}),V&&e.push({type:"collision_type",zn:V}),s.setFilter(e)},ne=()=>{let e=[];D&&e.push({type:"date",zn:D}),K&&e.push({type:"collision_type",zn:K}),u.setFilter(e)},oe=()=>{let e=[];D&&e.push({type:"date",zn:D}),J&&e.push({type:"collision_type",zn:J}),d.setFilter(e)};var le;le=()=>{let e={onSelect(e){this._o.field.value=this.toString(),D[this._o._dint]=this.getDate().getTime()/1e3+24*this._o._dint*60*60,te(),oe(),ne()},toString(e,t){let n=e.getDate();n<10&&(n="0"+n);let o=e.getMonth()+1;return o<10&&(o="0"+o),`${n}.${o}.${e.getFullYear()}`},parse(e,t){const n=e.split("."),o=parseInt(n[0],10),l=parseInt(n[1],10)-1,s=parseInt(n[2],10);return new Date(s,l,o)},i18n:{previousMonth:"Предыдущий месяц",nextMonth:"Следующий месяц",months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],weekdays:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],weekdaysShort:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]},format:"DD.MM.YYYY",setDefaultDate:!0,yearRange:20,blurFieldOnSelect:!1};y=new Pikaday(L.extend({},e,{_dint:0,field:o,defaultDate:new Date(1e3*D[0])})),g=new Pikaday(L.extend({},e,{_dint:1,field:l,defaultDate:new Date(1e3*D[1])}))},A().$$.on_mount.push(le);let se,re,ie=[""],ae=1,ce={},pe={};Object.keys(Z.years||{}).sort().forEach(e=>{n(23,ce[e]=!0,ce),Object.keys(Z.years[e]).sort().forEach(t=>{re={},re[e]={},re[e][t]=!0})}),pe=re||{};let de,ue,_e=[""],he=1,ve={},fe={};Object.keys(G.years||{}).sort().forEach(e=>{n(27,ve[e]=!0,ve),Object.keys(G.years[e]).sort().forEach(t=>{ue={},ue[e]={},ue[e][t]=!0})}),fe=ue||{};let me,ye,ge=[""],be=1,xe={},ke={};Object.keys(B.years||{}).sort().forEach(e=>{n(31,xe[e]=!0,xe),Object.keys(B.years[e]).sort().forEach(t=>{ye={},ye[e]={},ye[e][t]=!0})}),ke=ye||{};let je,Le,Ce=[""],De=1,we={},Te={};Object.keys(P.years||{}).sort().forEach(e=>{n(36,we[e]=!0,we),Object.keys(P.years[e]).sort().forEach(t=>{Le={},Le[e]={},Le[e][t]=!0})}),Te=Le||{};let Fe,Ee,Oe=[""],Me=1,ze={},Se={};Object.keys(S.years||{}).sort().forEach(e=>{n(41,ze[e]=!0,ze),Object.keys(S.years[e]).sort().forEach(t=>{Ee={},Ee[e]={},Ee[e][t]=!0})}),Se=Ee||{};return e.$set=e=>{"DtpVerifyed"in e&&n(0,s=e.DtpVerifyed),"DtpHearths5"in e&&n(3,r=e.DtpHearths5),"DtpHearths3"in e&&n(4,i=e.DtpHearths3),"DtpHearthsStat"in e&&n(5,a=e.DtpHearthsStat),"DtpHearthsTmp"in e&&n(6,c=e.DtpHearthsTmp),"DtpHearths"in e&&n(7,p=e.DtpHearths),"DtpSkpdi"in e&&n(1,d=e.DtpSkpdi),"DtpGibdd"in e&&n(2,u=e.DtpGibdd)},[s,d,u,r,i,a,c,p,o,l,V,J,K,b,W,Q,X,k,j,C,se,ie,ae,ce,de,_e,he,ve,me,ge,be,xe,ke,je,Ce,De,we,Te,Fe,Oe,Me,ze,Se,w,T,F,E,O,M,S,$,P,q,B,N,G,I,Z,Y,ee,()=>{let e={radius:W,blur:Q,minOpacity:X};"DtpGibdd"===x||"DtpSkpdi"===x?d._heat.setOptions(e):"DtpVerifyed"===x&&s._heat.setOptions(e)},te,ne,oe,e=>{let t=e.target;_=Number(t.value),te()},()=>{let e=g.getDate(),t=y.getDate(),n=e-t;0===n&&(n=864e5),y.setDate(new Date(t.getTime()-n)),g.setDate(new Date(e.getTime()-n)),D=[y.getDate().getTime()/1e3,86400+g.getDate().getTime()/1e3],te()},()=>{let e=g.getDate(),t=y.getDate(),n=e-t;0===n&&(n=864e5),y.setDate(new Date(t.getTime()+n)),g.setDate(new Date(e.getTime()+n)),D=[y.getDate().getTime()/1e3,86400+g.getDate().getTime()/1e3],te()},e=>{let t=[],o=e.target||{},l=o.checked,s=o.id,i=o.name;if("hearths_period_type_52"===s)n(22,ae=2);else if("hearths_period_type_51"===s)n(22,ae=1);else if("hearths_year_5"===s)l?n(23,ce[i]=!0,ce):delete ce[i];else if("hearths_quarter_5"===s){let e=i.split("_");l?(pe[e[0]]||(pe[e[0]]={}),pe[e[0]][e[1]]=!0):(pe[e[0]]&&delete pe[e[0]][e[1]],0===Object.keys(pe[e[0]]).length&&delete pe[e[0]])}1===ae?t.push({type:"year",zn:ce}):2===ae&&t.push({type:"quarter",zn:pe}),se&&t.push({type:"stricken",zn:Number(se)}),ie.length>0&&ie[0]&&t.push({type:"str_icon_type",zn:ie}),r.setFilter(t)},e=>{let t=[],o=e.target||{},l=o.checked,s=o.id,r=o.name;if("hearths_period_type_32"===s)n(26,he=2);else if("hearths_period_type_31"===s)n(26,he=1);else if("hearths_year_3"===s)l?n(27,ve[r]=!0,ve):delete ve[r];else if("hearths_quarter_3"===s){let e=r.split("_");l?(fe[e[0]]||(fe[e[0]]={}),fe[e[0]][e[1]]=!0):(fe[e[0]]&&delete fe[e[0]][e[1]],0===Object.keys(fe[e[0]]).length&&delete fe[e[0]])}1===he?t.push({type:"year",zn:ve}):2===he&&t.push({type:"quarter",zn:fe}),de&&t.push({type:"stricken",zn:Number(de)}),_e.length>0&&_e[0]&&t.push({type:"str_icon_type",zn:_e}),i.setFilter(t)},e=>{let t=[],o=e.target||{},l=o.checked,s=o.id,r=o.name;if("hearths_period_type_Stat2"===s)n(30,be=2);else if("hearths_period_type_Stat1"===s)n(30,be=1);else if("hearths_year_Stat"===s)l?n(31,xe[r]=!0,xe):delete xe[r];else if("hearths_quarter_Stat"===s){let e=r.split("_");l?(ke[e[0]]||n(32,ke[e[0]]={},ke),n(32,ke[e[0]][e[1]]=!0,ke)):(ke[e[0]]&&delete ke[e[0]][e[1]],0===Object.keys(ke[e[0]]).length&&delete ke[e[0]])}1===be?t.push({type:"year",zn:xe}):2===be&&t.push({type:"quarter",zn:ke}),me&&t.push({type:"stricken",zn:Number(me)}),ge.length>0&&ge[0]&&t.push({type:"str_icon_type",zn:ge}),a.setFilter(t)},e=>{let t=[],o=e.target||{},l=o.checked,s=o.id,r=o.name;if("hearths_period_type_tmp2"===s)n(35,De=2);else if("hearths_period_type_tmp1"===s)n(35,De=1);else if("hearths_year_tmp"===s)l?n(36,we[r]=!0,we):delete we[r];else if("hearths_quarter_tmp"===s){let e=r.split("_");l?(Te[e[0]]||n(37,Te[e[0]]={},Te),n(37,Te[e[0]][e[1]]=!0,Te)):(Te[e[0]]&&delete Te[e[0]][e[1]],0===Object.keys(Te[e[0]]).length&&delete Te[e[0]])}1===De?t.push({type:"year",zn:we}):2===De&&t.push({type:"quarter",zn:Te}),je&&t.push({type:"stricken",zn:Number(je)}),Ce.length>0&&Ce[0]&&t.push({type:"str_icon_type",zn:Ce}),c.setFilter(t)},e=>{let t=[],o=e.target||{},l=o.checked,s=o.id,r=o.name;if(console.log("setFilterHearths",l,s,r,e),"hearths_period_type2"===s)n(40,Me=2);else if("hearths_period_type1"===s)n(40,Me=1);else if("hearths_year"===s)l?n(41,ze[r]=!0,ze):delete ze[r];else if("hearths_quarter"===s){let e=r.split("_");l?(Se[e[0]]||n(42,Se[e[0]]={},Se),n(42,Se[e[0]][e[1]]=!0,Se)):(Se[e[0]]&&delete Se[e[0]][e[1]],0===Object.keys(Se[e[0]]).length&&delete Se[e[0]])}1===Me?t.push({type:"year",zn:ze}):2===Me&&t.push({type:"quarter",zn:Se}),Fe&&t.push({type:"stricken",zn:Number(Fe)}),Oe.length>0&&Oe[0]&&t.push({type:"str_icon_type",zn:Oe}),p.setFilter(t)},_,D,y,g,x,pe,re,fe,ue,ye,Le,Ee,h,v,f,m,()=>{ee()},()=>{ee()},function(){ae=this.__value,n(22,ae)},[[],[],[],[],[]],(e,t)=>e+=Z.str_icon_type[t],function(){ie=U(this),n(21,ie),n(58,Y)},function(){se=H(this),n(20,se)},function(){he=this.__value,n(26,he)},(e,t)=>e+=G.str_icon_type[t],function(){_e=U(this),n(25,_e),n(56,I)},function(){de=H(this),n(24,de)},function(){be=this.__value,n(30,be)},function(){be=this.__value,n(30,be)},(e,t)=>e+=B.str_icon_type[t],function(){ge=U(this),n(29,ge),n(54,N)},function(){me=H(this),n(28,me)},function(){De=this.__value,n(35,De)},function(){De=this.__value,n(35,De)},(e,t)=>e+=P.str_icon_type[t],function(){Ce=U(this),n(34,Ce),n(52,q)},function(){je=H(this),n(33,je)},function(){Me=this.__value,n(40,Me)},function(){Me=this.__value,n(40,Me)},(e,t)=>e+=S.str_icon_type[t],function(){Oe=U(this),n(39,Oe),n(50,$)},function(){Fe=H(this),n(38,Fe)},function(e){R[e?"unshift":"push"](()=>{n(8,o=e)})},function(e){R[e?"unshift":"push"](()=>{n(9,l=e)})},function(){X=z(this.value),n(16,X)},function(){W=z(this.value),n(14,W)},function(){Q=z(this.value),n(15,Q)},function(e){R[e?"unshift":"push"](()=>{n(19,C=e)})},(e,t)=>e+=w.collision_type[t],function(){V=U(this),n(10,V),n(44,T)},function(e){R[e?"unshift":"push"](()=>{n(18,j=e)})},(e,t)=>e+=F.collision_type[t],function(){J=U(this),n(11,J),n(46,E)},function(e){R[e?"unshift":"push"](()=>{n(17,k=e)})},(e,t)=>e+=O.collision_type[t],function(){K=U(this),n(12,K),n(48,M)}]}st.checkZoom=e=>{Object.keys(st._layers).length?e<12&&st.setFilter(lt):e>11&&st.setFilter(lt)},st.setFilter=e=>{st.clearLayers(),lt=e;let t=[],n=[];st._group&&(st._group.getLayers().forEach(e=>{let o=e.options.props,l=0;lt.forEach(e=>{"itemType"===e.type?(0===e.zn||1===e.zn&&o.id_stat&&o.id_skpdi||2===e.zn&&o.id_skpdi&&!o.id_stat||3===e.zn&&o.id_stat&&!o.id_skpdi)&&l++:"collision_type"===e.type?(""===e.zn[0]||e.zn.filter(e=>e===o.collision_type).length)&&l++:"date"===e.type&&o.date>=e.zn[0]&&o.date<e.zn[1]&&l++}),l===lt.length&&(t.push(e),n.push(e._latlng))}),st._needHeat?(st._map.addLayer(st._heat),st._heat.setLatLngs(n),st._heat.setOptions(st._needHeat),st._map._zoom>11&&st.addLayer(nt.layerGroup(t))):(st.addLayer(nt.layerGroup(t)),st._map.removeLayer(st._heat)))},st.on("remove",()=>{st._needHeat=null,st._map.removeLayer(st._heat),st.clearLayers()}).on("add",e=>{st._heat=nt.heatLayer([],{interactive:!1}),fetch("https://dtp.mvs.group/scripts/index.php?request=get_collision",{}).then(e=>e.json()).then(e=>{let t={collision_type:{},iconType:{}},n=e.map(e=>{let n=e.iconType||0,o=[],l=!1,s="#2F4F4F";n&&(l=n%2==0,n>=1&&n<=6?s="#8B4513":7===n||8===n?s="#228B22":n>=9&&n<=14?s="#8B4513":15===n||16===n?s="#7B68EE":17!==n&&18!==n||(s="#2F4F4F")),e.id_skpdi&&o.push({type:"skpdi",id:e.id_skpdi}),e.id_stat&&o.push({type:"gibdd",id:e.id_stat}),e._cur=o,e.lat&&e.lon||(console.log("_______",e),e.lat=e.lon=0);let r=t.collision_type[e.collision_type];return r?r++:r=1,t.collision_type[e.collision_type]=r,t.iconType[e.collision_type]=n,new _(nt.latLng(e.lat,e.lon),{props:e,radius:6,triangle:o.length>1,box:!!e.id_skpdi,stroke:l,fillColor:s}).bindPopup(ot).on("popupopen",e=>{!function(e){let t=nt.DomUtil.create("div");new tt({target:t,props:{prp:e}}),ot.setContent(t)}(e.target.options.props)}).on("popupclose",e=>{e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)})});st._opt=t,st._group=nt.layerGroup(n),lt?st.setFilter(lt):st.addLayer(st._group),st._refreshFilters()})});class ln extends _e{constructor(e){super(),ue(this,e,on,nn,g,{DtpVerifyed:0,DtpHearths5:3,DtpHearths3:4,DtpHearthsStat:5,DtpHearthsTmp:6,DtpHearths:7,DtpSkpdi:1,DtpGibdd:2},[-1,-1,-1,-1,-1,-1])}}function sn(e,t,n){const o=e.slice();return o[7]=t[n],o[9]=n,o}function rn(e){let t,n;const o=new tt({props:{prp:e[7],closeMe:e[6]}});return{c(){t=D("div"),ae(o.$$.fragment),M(t,"class","win leaflet-popup-content-wrapper  svelte-mnr9l0")},m(e,l){k(e,t,l),ce(o,t,null),n=!0},p(e,t){const n={};1&t&&(n.prp=e[7]),2&t&&(n.closeMe=e[6]),o.$set(n)},i(e){n||(re(o.$$.fragment,e),n=!0)},o(e){ie(o.$$.fragment,e),n=!1},d(e){e&&j(t),pe(o)}}}function an(e){let t,n,o,l,s,r,i,a,c,p,d,u,_,h,v,f,y,g,b,L,C,F,O=new Date(1e3*e[7].date).toLocaleDateString()+"",z=e[7].lost+"",$=e[7].stricken+"",P=e[7].address+"";function q(...t){return e[4](e[9],...t)}function H(...t){return e[5](e[9],...t)}let U=e[1]===e[9]&&rn(e);return{c(){t=D("tr"),n=D("td"),o=D("ul"),l=D("li"),s=w(O),r=w(" погибших "),i=w(z),a=w(", раненых "),c=w($),d=T(),u=D("tr"),_=D("td"),_.textContent="Адрес:",h=T(),v=D("td"),f=w(P),y=D("br"),g=D("span"),g.textContent="подробнее",b=T(),U&&U.c(),L=T(),M(l,"title",p="id: "+e[7].id),M(l,"class","svelte-mnr9l0"),M(n,"class","first svelte-mnr9l0"),M(n,"colspan","2"),M(_,"class","first svelte-mnr9l0"),M(g,"class","link svelte-mnr9l0")},m(e,p,j){k(e,t,p),x(t,n),x(n,o),x(o,l),x(l,s),x(l,r),x(l,i),x(l,a),x(l,c),k(e,d,p),k(e,u,p),x(u,_),x(u,h),x(u,v),x(v,f),x(v,y),x(v,g),x(v,b),U&&U.m(v,null),x(u,L),C=!0,j&&m(F),F=[E(l,"click",q),E(g,"click",H)]},p(t,n){e=t,(!C||1&n)&&O!==(O=new Date(1e3*e[7].date).toLocaleDateString()+"")&&S(s,O),(!C||1&n)&&z!==(z=e[7].lost+"")&&S(i,z),(!C||1&n)&&$!==($=e[7].stricken+"")&&S(c,$),(!C||1&n&&p!==(p="id: "+e[7].id))&&M(l,"title",p),(!C||1&n)&&P!==(P=e[7].address+"")&&S(f,P),e[1]===e[9]?U?(U.p(e,n),re(U,1)):(U=rn(e),U.c(),re(U,1),U.m(v,null)):U&&(le(),ie(U,1,1,()=>{U=null}),se())},i(e){C||(re(U),C=!0)},o(e){ie(U),C=!1},d(e){e&&j(t),e&&j(d),e&&j(u),U&&U.d(),m(F)}}}function cn(e){let t,n,o,l,s,r,i,a,c,p,d,u,_,h,v,f,m,y,g,b,L,F,E,O,z,$,P,q,H,U,B,N,A,G,I,Z,R,Y,V,J,K=e[0].id+"",W=e[0].quarter?e[0].quarter+" кв.":"",Q=e[0].year+"",X=(e[0].str_icon_type||"")+"",ee=e[0].list_dtp.length+"",te=e[0].count_lost+"",ne=e[0].count_stricken+"",oe=e[0].list_dtp,ae=[];for(let t=0;t<oe.length;t+=1)ae[t]=an(sn(e,oe,t));const ce=e=>ie(ae[e],1,1,()=>{ae[e]=null});return{c(){t=D("div"),n=D("div"),o=w("Очаг ДТП (id: "),l=w(K),s=w(")"),r=T(),i=D("div"),a=w(W),c=T(),p=w(Q),d=w("г."),u=T(),_=D("div"),h=D("table"),v=D("tbody"),f=D("tr"),m=D("td"),m.textContent="Тип ДТП:",y=T(),g=D("td"),b=w(X),L=T(),F=D("tr"),E=D("td"),E.textContent="Всего ДТП:",O=T(),z=D("td"),$=w(ee),P=T(),q=D("tr"),H=D("td"),H.textContent="Погибших:",U=T(),B=D("td"),N=w(te),A=T(),G=D("tr"),I=D("td"),I.textContent="Раненых:",Z=T(),R=D("td"),Y=w(ne),V=T();for(let e=0;e<ae.length;e+=1)ae[e].c();M(n,"class","pLine"),M(i,"class","pLine"),M(m,"class","first svelte-mnr9l0"),M(E,"class","first svelte-mnr9l0"),M(H,"class","first svelte-mnr9l0"),M(I,"class","first svelte-mnr9l0"),M(h,"class","table svelte-mnr9l0"),M(_,"class","featureCont"),M(t,"class","mvsPopup svelte-mnr9l0")},m(e,j){k(e,t,j),x(t,n),x(n,o),x(n,l),x(n,s),x(t,r),x(t,i),x(i,a),x(i,c),x(i,p),x(i,d),x(t,u),x(t,_),x(_,h),x(h,v),x(v,f),x(f,m),x(f,y),x(f,g),x(g,b),x(v,L),x(v,F),x(F,E),x(F,O),x(F,z),x(z,$),x(v,P),x(v,q),x(q,H),x(q,U),x(q,B),x(B,N),x(v,A),x(v,G),x(G,I),x(G,Z),x(G,R),x(R,Y),x(v,V);for(let e=0;e<ae.length;e+=1)ae[e].m(v,null);J=!0},p(e,[t]){if((!J||1&t)&&K!==(K=e[0].id+"")&&S(l,K),(!J||1&t)&&W!==(W=e[0].quarter?e[0].quarter+" кв.":"")&&S(a,W),(!J||1&t)&&Q!==(Q=e[0].year+"")&&S(p,Q),(!J||1&t)&&X!==(X=(e[0].str_icon_type||"")+"")&&S(b,X),(!J||1&t)&&ee!==(ee=e[0].list_dtp.length+"")&&S($,ee),(!J||1&t)&&te!==(te=e[0].count_lost+"")&&S(N,te),(!J||1&t)&&ne!==(ne=e[0].count_stricken+"")&&S(Y,ne),7&t){let n;for(oe=e[0].list_dtp,n=0;n<oe.length;n+=1){const o=sn(e,oe,n);ae[n]?(ae[n].p(o,t),re(ae[n],1)):(ae[n]=an(o),ae[n].c(),re(ae[n],1),ae[n].m(v,null))}for(le(),n=oe.length;n<ae.length;n+=1)ce(n);se()}},i(e){if(!J){for(let e=0;e<oe.length;e+=1)re(ae[e]);J=!0}},o(e){ae=ae.filter(Boolean);for(let e=0;e<ae.length;e+=1)ie(ae[e]);J=!1},d(e){e&&j(t),C(ae,e)}}}function pn(e,t,n){let o,{prp:l}=t;const s=e=>{let t=l._bounds.options.items[e];t&&t._map&&t._map.panTo(t._latlng)};return e.$set=e=>{"prp"in e&&n(0,l=e.prp)},[l,o,s,e=>{console.log("showDtpInfo ",e)},e=>{s(e)},e=>{n(1,o=e)},()=>{n(1,o=null)}]}class dn extends _e{constructor(e){super(),ue(this,e,pn,cn,g,{prp:0})}}const un=window.L,_n=un.popup(),hn=un.popup({minWidth:200});let vn;const fn=function(e){let t=un.DomUtil.create("div");return new tt({target:t,props:{prp:e}}),_n.setContent(t),t},mn=un.featureGroup([]);mn.setFilter=e=>{mn.clearLayers(),vn=e;let t=[];mn._group&&(mn._group.getLayers().forEach(e=>{let n=e.options.cluster,o=0;vn.forEach(e=>{if("quarter"===e.type)e.zn[n.year]&&e.zn[n.year][n.quarter]&&o++;else if("year"===e.type)e.zn[n.year]&&o++;else if("str_icon_type"===e.type)e.zn.filter(e=>e===n.str_icon_type).length&&o++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&n.count_lost||2===t&&n.count_stricken||3===t&&(n.count_stricken||n.count_lost)||3===t&&n.count_stricken&&n.count_lost)&&o++:o++}}),o===vn.length&&t.push(e)}),mn.addLayer(un.layerGroup(t)))},mn.on("remove",()=>{mn.clearLayers()}).on("add",e=>{let t={str_icon_type:{},iconType:{},years:{},dtps:{}},n=[];Promise.all([2019,2020].map(e=>fetch("https://dtp.mvs.group/scripts/hearths/"+e+".txt",{}).then(e=>e.json()))).then(e=>{e.forEach(e=>{e.forEach(e=>{let o=e.icon_type||1,l=un.latLngBounds(),s=e.list_dtp,r=!1,i="#FF0000";if(s.length){Number(e.year),Number(e.quarter);let a=t.years[e.year];a||(a=t.years[e.year]={}),t.years[e.year]=a;let c=a[e.quarter];e.quarter in a?c++:c=a[e.quarter]=1,a[e.quarter]=c;let p=t.str_icon_type[e.str_icon_type];p?p++:p=1,t.str_icon_type[e.str_icon_type]=p,t.iconType[e.str_icon_type]=o,o&&(r=o%2==0,1===o||2===o?i="#FFA500":3===o||4===o?i="#B8860B":5===o||6===o?i="#CD853F":7===o||8===o?i="#228B22":9===o||10===o?i="#FF8C00":11===o||12===o?i="#D2691E":13===o||14===o?i="#DEB887":15===o||16===o?i="#7B68EE":17!==o&&18!==o||(i="#2F4F4F"));let d=s.map(n=>{n.iconType;let o=n.coords||{lat:0,lon:0},s=un.latLng(o.lat,o.lon),a=[];l.extend(s),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let c=t.dtps[n.id];return c?c[e.id]?c[e.id]++:c[e.id]=1:(c={},c[e.id]=1),t.dtps[n.id]=c,new _(un.latLng(o.lat,o.lon),{cluster:e,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:r,fillColor:i}).bindPopup(_n).on("popupopen",e=>{fn(e.target.options.props)}).on("popupclose",e=>{e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)})});e._bounds=un.rectangle(l,{items:d,cluster:e,fill:!0,color:i,dashArray:"8 3 1"}).on("mouseover",e=>{let t=e.target;t._color=t.options.color,t.options.color="red",t._renderer._updateStyle(t)}).on("mouseout",e=>{let t=e.target;t.options.color=t._color,t._renderer._updateStyle(t)}).on("click",t=>{un.DomEvent.stopPropagation(t);let n,o=1e3,l=t.target,s=t.latlng;t.originalEvent.ctrlKey&&l.bringToBack(),l.options.items.forEach(e=>{let t=e._latlng.distanceTo(s);t<o&&(o=t,n=e)}),o<10?(fn(n.options.props),_n.setLatLng(n._latlng).openOn(mn._map)):(!function(e){let t=un.DomUtil.create("div");new dn({target:t,props:{prp:e}}),hn.setContent(t)}(e),hn.setLatLng(s).openOn(mn._map))}),n.push(e._bounds),n=n.concat(d)}}),mn._opt=t,mn._group=un.layerGroup(n),vn?mn.setFilter(vn):mn.addLayer(mn._group),mn._refreshFilters()}),console.log("__allJson_____",e,mn._opt)})});const yn=window.L,gn=yn.popup(),bn=yn.popup({minWidth:200});let xn;const kn=function(e){let t=yn.DomUtil.create("div");return new tt({target:t,props:{prp:e}}),gn.setContent(t),t},jn=yn.featureGroup([]);jn.setFilter=e=>{jn.clearLayers(),xn=e;let t=[];jn._group&&(jn._group.getLayers().forEach(e=>{let n=e.options.cluster,o=0;xn.forEach(e=>{if("quarter"===e.type)e.zn[n.year]&&e.zn[n.year][n.quarter]&&o++;else if("year"===e.type)e.zn[n.year]&&o++;else if("str_icon_type"===e.type)e.zn.filter(e=>e===n.str_icon_type).length&&o++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&n.count_lost||2===t&&n.count_stricken||3===t&&(n.count_stricken||n.count_lost)||3===t&&n.count_stricken&&n.count_lost)&&o++:o++}}),o===xn.length&&t.push(e)}),jn.addLayer(yn.layerGroup(t)))},jn.on("remove",()=>{jn.clearLayers()}).on("add",e=>{let t={str_icon_type:{},iconType:{},years:{},dtps:{}},n=[];Promise.all([2019,2020].map(e=>fetch("https://dtp.mvs.group/scripts/hearthstmp/"+e+".txt",{}).then(e=>e.json()))).then(e=>{e.forEach(e=>{e.forEach(e=>{let o=e.icon_type||1,l=yn.latLngBounds(),s=e.list_dtp,r=!1,i="#FF0000";if(s.length){Number(e.year),Number(e.quarter);let a=t.years[e.year];a||(a=t.years[e.year]={}),t.years[e.year]=a;let c=a[e.quarter];e.quarter in a?c++:c=a[e.quarter]=1,a[e.quarter]=c;let p=t.str_icon_type[e.str_icon_type];p?p++:p=1,t.str_icon_type[e.str_icon_type]=p,t.iconType[e.str_icon_type]=o,o&&(r=o%2==0,1===o||2===o?i="#FFA500":3===o||4===o?i="#B8860B":5===o||6===o?i="#CD853F":7===o||8===o?i="#228B22":9===o||10===o?i="#FF8C00":11===o||12===o?i="#D2691E":13===o||14===o?i="#DEB887":15===o||16===o?i="#7B68EE":17!==o&&18!==o||(i="#2F4F4F"));let d=s.map(n=>{n.iconType;let o=n.coords||{lat:0,lon:0},s=yn.latLng(o.lat,o.lon),a=[];l.extend(s),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let c=t.dtps[n.id];return c?c[e.id]?c[e.id]++:c[e.id]=1:(c={},c[e.id]=1),t.dtps[n.id]=c,new _(yn.latLng(o.lat,o.lon),{cluster:e,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:r,fillColor:i}).bindPopup(gn).on("popupopen",e=>{kn(e.target.options.props)}).on("popupclose",e=>{e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)})});e._bounds=yn.rectangle(l,{items:d,cluster:e,fill:!0,color:i,dashArray:"8 3 1"}).on("mouseover",e=>{let t=e.target;t._color=t.options.color,t.options.color="red",t._renderer._updateStyle(t)}).on("mouseout",e=>{let t=e.target;t.options.color=t._color,t._renderer._updateStyle(t)}).on("click",t=>{yn.DomEvent.stopPropagation(t);let n,o=1e3,l=t.target,s=t.latlng;t.originalEvent.ctrlKey&&l.bringToBack(),l.options.items.forEach(e=>{let t=e._latlng.distanceTo(s);t<o&&(o=t,n=e)}),o<10?(kn(n.options.props),gn.setLatLng(n._latlng).openOn(jn._map)):(!function(e){let t=yn.DomUtil.create("div");new dn({target:t,props:{prp:e}}),bn.setContent(t)}(e),bn.setLatLng(s).openOn(jn._map))}),n.push(e._bounds),n=n.concat(d)}}),jn._opt=t,jn._group=yn.layerGroup(n),xn?jn.setFilter(xn):jn.addLayer(jn._group),jn._refreshFilters()}),console.log("__allJson_____",e,jn._opt)})});const Ln=window.L,Cn=Ln.popup(),Dn=Ln.popup({minWidth:200});let wn;const Tn=function(e){let t=Ln.DomUtil.create("div");return new tt({target:t,props:{prp:e}}),Cn.setContent(t),t},Fn=Ln.featureGroup([]);Fn.setFilter=e=>{Fn.clearLayers(),wn=e;let t=[];Fn._group&&(Fn._group.getLayers().forEach(e=>{let n=e.options.cluster,o=0;wn.forEach(e=>{if("quarter"===e.type)e.zn[n.year]&&e.zn[n.year][n.quarter]&&o++;else if("year"===e.type)e.zn[n.year]&&o++;else if("str_icon_type"===e.type)e.zn.filter(e=>e===n.str_icon_type).length&&o++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&n.count_lost||2===t&&n.count_stricken||3===t&&(n.count_stricken||n.count_lost)||3===t&&n.count_stricken&&n.count_lost)&&o++:o++}}),o===wn.length&&t.push(e)}),Fn.addLayer(Ln.layerGroup(t)))},Fn.on("remove",()=>{Fn.clearLayers()}).on("add",e=>{let t={str_icon_type:{},iconType:{},years:{},dtps:{}},n=[];Promise.all([2019,2020].map(e=>fetch("https://dtp.mvs.group/scripts/hearthsstat/"+e+".txt",{}).then(e=>e.json()))).then(e=>{e.forEach(e=>{e.forEach(e=>{let o=e.icon_type||1,l=Ln.latLngBounds(),s=e.list_dtp,r=!1,i="#FF0000";if(s.length){Number(e.year),Number(e.quarter);let a=t.years[e.year];a||(a=t.years[e.year]={}),t.years[e.year]=a;let c=a[e.quarter];e.quarter in a?c++:c=a[e.quarter]=1,a[e.quarter]=c;let p=t.str_icon_type[e.str_icon_type];p?p++:p=1,t.str_icon_type[e.str_icon_type]=p,t.iconType[e.str_icon_type]=o,o&&(r=o%2==0,1===o||2===o?i="#FFA500":3===o||4===o?i="#B8860B":5===o||6===o?i="#CD853F":7===o||8===o?i="#228B22":9===o||10===o?i="#FF8C00":11===o||12===o?i="#D2691E":13===o||14===o?i="#DEB887":15===o||16===o?i="#7B68EE":17!==o&&18!==o||(i="#2F4F4F"));let d=s.map(n=>{n.iconType;let o=n.coords||{lat:0,lon:0},s=Ln.latLng(o.lat,o.lon),a=[];l.extend(s),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let c=t.dtps[n.id];return c?c[e.id]?c[e.id]++:c[e.id]=1:(c={},c[e.id]=1),t.dtps[n.id]=c,new _(Ln.latLng(o.lat,o.lon),{cluster:e,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:r,fillColor:i}).bindPopup(Cn).on("popupopen",e=>{Tn(e.target.options.props)}).on("popupclose",e=>{e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)})});e._bounds=Ln.rectangle(l,{items:d,cluster:e,fill:!0,color:i,dashArray:"8 3 1"}).on("mouseover",e=>{let t=e.target;t._color=t.options.color,t.options.color="red",t._renderer._updateStyle(t)}).on("mouseout",e=>{let t=e.target;t.options.color=t._color,t._renderer._updateStyle(t)}).on("click",t=>{Ln.DomEvent.stopPropagation(t);let n,o=1e3,l=t.target,s=t.latlng,r=t.layerPoint;t.originalEvent.ctrlKey&&l.bringToBack(),l.options.items.forEach(e=>{let t=e._point.distanceTo(r);t<o&&(o=t,n=e)}),o<10?(Tn(n.options.props),Cn.setLatLng(n._latlng).openOn(Fn._map)):(!function(e){let t=Ln.DomUtil.create("div");new dn({target:t,props:{prp:e}}),Dn.setContent(t)}(e),Dn.setLatLng(s).openOn(Fn._map))}),n.push(e._bounds),n=n.concat(d)}}),Fn._opt=t,Fn._group=Ln.layerGroup(n),wn?Fn.setFilter(wn):Fn.addLayer(Fn._group),Fn._refreshFilters()}),console.log("__allJson_____",e,Fn._opt)})});const En=window.L,On=En.popup(),Mn=En.popup({minWidth:200});let zn;const Sn=function(e){let t=En.DomUtil.create("div");return new tt({target:t,props:{prp:e}}),On.setContent(t),t},$n=En.featureGroup([]);$n.setFilter=e=>{$n.clearLayers(),zn=e;let t=[];$n._group&&($n._group.getLayers().forEach(e=>{let n=e.options.cluster,o=0;zn.forEach(e=>{if("quarter"===e.type)e.zn[n.year]&&e.zn[n.year][n.quarter]&&o++;else if("year"===e.type)e.zn[n.year]&&o++;else if("str_icon_type"===e.type)e.zn.filter(e=>e===n.str_icon_type).length&&o++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&n.count_lost||2===t&&n.count_stricken||3===t&&(n.count_stricken||n.count_lost)||3===t&&n.count_stricken&&n.count_lost)&&o++:o++}}),o===zn.length&&t.push(e)}),$n.addLayer(En.layerGroup(t)))},$n.on("remove",()=>{$n.clearLayers()}).on("add",e=>{let t={str_icon_type:{},iconType:{},years:{},dtps:{}},n=[];Promise.all([2019,2020].map(e=>fetch("https://dtp.mvs.group/scripts/hearths3/"+e+".txt",{}).then(e=>e.json()))).then(e=>{e.forEach(e=>{e.forEach(e=>{let o=e.icon_type||1,l=En.latLngBounds(),s=e.list_dtp,r=!1,i="#FF0000";if(s.length){Number(e.year),Number(e.quarter);let a=t.years[e.year];a||(a=t.years[e.year]={}),t.years[e.year]=a;let c=a[e.quarter];e.quarter in a?c++:c=a[e.quarter]=1,a[e.quarter]=c;let p,d=t.str_icon_type[e.str_icon_type];d?d++:d=1,t.str_icon_type[e.str_icon_type]=d,t.iconType[e.str_icon_type]=o,o&&(r=o%2==0,1===o||2===o?i="#FFA500":3===o||4===o?i="#B8860B":5===o||6===o?i="#CD853F":7===o||8===o?i="#228B22":9===o||10===o?i="#FF8C00":11===o||12===o?i="#D2691E":13===o||14===o?i="#DEB887":15===o||16===o?i="#7B68EE":17!==o&&18!==o||(i="#2F4F4F"));let u=s.map(n=>{n.iconType;let o=n.coords||{lat:0,lon:0},s=En.latLng(o.lat,o.lon),a=[];l.extend(s),n.id===e.head&&(p=n),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let c=t.dtps[n.id];return c?c[e.id]?c[e.id]++:c[e.id]=1:(c={},c[e.id]=1),t.dtps[n.id]=c,new _(En.latLng(o.lat,o.lon),{cluster:e,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:r,fillColor:i}).bindPopup(On).on("popupopen",e=>{Sn(e.target.options.props)}).on("popupclose",e=>{e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)})});e._bounds=p?En.circle(En.latLng(p.coords.lat,p.coords.lon),{radius:e.radius||500,items:u,cluster:e,color:i}):En.rectangle(l,{items:u,cluster:e,fill:!0,color:i,dashArray:"8 3 1"}),e._bounds.on("mouseover",e=>{let t=e.target;t._color=t.options.color,t.options.color="red",t._renderer._updateStyle(t)}).on("mouseout",e=>{let t=e.target;t.options.color=t._color,t._renderer._updateStyle(t)}).on("click",t=>{En.DomEvent.stopPropagation(t);let n,o=1e3,l=t.target,s=t.latlng,r=t.layerPoint;t.originalEvent.ctrlKey&&l.bringToBack(),l.options.items.forEach(e=>{let t=e._point.distanceTo(r);t<o&&(o=t,n=e)}),o<10?(Sn(n.options.props),On.setLatLng(n._latlng).openOn($n._map)):(!function(e){let t=En.DomUtil.create("div");new dn({target:t,props:{prp:e}}),Mn.setContent(t)}(e),Mn.setLatLng(s).openOn($n._map))}),n.push(e._bounds),n=n.concat(u)}}),$n._opt=t,$n._group=En.layerGroup(n),zn?$n.setFilter(zn):$n.addLayer($n._group),$n._refreshFilters()}),console.log("__allJson_____",e,$n._opt)})});const Pn=window.L,qn=Pn.popup(),Hn=Pn.popup({minWidth:200});let Un;const Bn=function(e){let t=Pn.DomUtil.create("div");return new tt({target:t,props:{prp:e}}),qn.setContent(t),t},Nn=Pn.featureGroup([]);Nn.setFilter=e=>{Nn.clearLayers(),Un=e;let t=[];Nn._group&&(Nn._group.getLayers().forEach(e=>{let n=e.options.cluster,o=0;Un.forEach(e=>{if("quarter"===e.type)e.zn[n.year]&&e.zn[n.year][n.quarter]&&o++;else if("year"===e.type)e.zn[n.year]&&o++;else if("str_icon_type"===e.type)e.zn.filter(e=>e===n.str_icon_type).length&&o++;else if("stricken"===e.type){let t=e.zn;t?(1===t&&!n.count_stricken&&n.count_lost||2===t&&n.count_stricken&&!n.count_lost||3===t&&(n.count_stricken||n.count_lost)||3===t&&n.count_stricken&&n.count_lost)&&o++:o++}}),o===Un.length&&t.push(e)}),Nn.addLayer(Pn.layerGroup(t)))},Nn.on("remove",()=>{Nn.clearLayers()}).on("add",e=>{let t={str_icon_type:{},iconType:{},years:{},dtps:{}},n=[];Promise.all([2019,2020].map(e=>fetch("https://dtp.mvs.group/scripts/hearths5/"+e+".txt",{}).then(e=>e.json()))).then(e=>{e.forEach(e=>{e.forEach(e=>{let o=e.icon_type||1,l=Pn.latLngBounds(),s=e.list_dtp,r=!1,i="#FF0000";if(s.length){Number(e.year),Number(e.quarter);let a=t.years[e.year];a||(a=t.years[e.year]={}),t.years[e.year]=a;let c=a[e.quarter];e.quarter in a?c++:c=a[e.quarter]=1,a[e.quarter]=c;let p,d=t.str_icon_type[e.str_icon_type];d?d++:d=1,t.str_icon_type[e.str_icon_type]=d,t.iconType[e.str_icon_type]=o,o&&(r=o%2==0,1===o||2===o?i="#FFA500":3===o||4===o?i="#B8860B":5===o||6===o?i="#CD853F":7===o||8===o?i="#228B22":9===o||10===o?i="#FF8C00":11===o||12===o?i="#D2691E":13===o||14===o?i="#DEB887":15===o||16===o?i="#7B68EE":17!==o&&18!==o||(i="#2F4F4F"));let u=s.map(n=>{n.iconType;let o=n.coords||{lat:0,lon:0},s=Pn.latLng(o.lat,o.lon),a=[];l.extend(s),n.id===e.head&&(p=n),n.id_skpdi&&a.push({type:"skpdi",id:n.id_skpdi}),n.id_stat&&a.push({type:"gibdd",id:n.id_stat}),n._cur=a;let c=t.dtps[n.id];return c?c[e.id]?c[e.id]++:c[e.id]=1:(c={},c[e.id]=1),t.dtps[n.id]=c,new _(Pn.latLng(o.lat,o.lon),{cluster:e,props:n,radius:6,zIndexOffset:5e4,rhomb:!0,stroke:r,fillColor:i}).bindPopup(qn).on("popupopen",e=>{Bn(e.target.options.props)}).on("popupclose",e=>{e.popup._svObj&&(e.popup._svObj.$destroy(),delete e.popup._svObj)})});e._bounds=p?Pn.circle(Pn.latLng(p.coords.lat,p.coords.lon),{radius:e.radius||500,items:u,cluster:e,color:i}):Pn.rectangle(l,{items:u,cluster:e,fill:!0,color:i,dashArray:"8 3 1"}),e._bounds.on("mouseover",e=>{let t=e.target;t._color=t.options.color,t.options.color="red",t._renderer._updateStyle(t)}).on("mouseout",e=>{let t=e.target;t.options.color=t._color,t._renderer._updateStyle(t)}).on("click",t=>{Pn.DomEvent.stopPropagation(t);let n,o=1e3,l=t.target,s=t.latlng,r=t.layerPoint;t.originalEvent.ctrlKey&&l.bringToBack(),l.options.items.forEach(e=>{let t=e._point.distanceTo(r);t<o&&(o=t,n=e)}),o<10?(Bn(n.options.props),qn.setLatLng(n._latlng).openOn(Nn._map)):(!function(e){let t=Pn.DomUtil.create("div");new dn({target:t,props:{prp:e}}),Hn.setContent(t)}(e),Hn.setLatLng(s).openOn(Nn._map))}),n.push(e._bounds),n=n.concat(u)}}),Nn._opt=t,Nn._group=Pn.layerGroup(n),Un?Nn.setFilter(Un):Nn.addLayer(Nn._group),Nn._refreshFilters()}),console.log("__allJson_____",e,Nn._opt)})});const An=window.L,Gn=An.map(document.body,{center:[55.758031,37.611694],minZoom:1,zoom:8,maxZoom:21,attributionControl:!1,trackResize:!0,fadeAnimation:!0,zoomAnimation:!0,distanceUnit:"auto",squareUnit:"auto"});var In=Gn._controlCorners,Zn=Gn._controlContainer,Rn="leaflet-top leaflet-bottom",Yn="leaflet-left leaflet-right",Vn={bottom:"leaflet-bottom "+Yn,gmxbottomleft:"leaflet-bottom leaflet-left",gmxbottomcenter:"leaflet-bottom "+Yn,gmxbottomright:"leaflet-bottom leaflet-right",center:Rn+" "+Yn,right:"leaflet-right "+Rn,left:"leaflet-left "+Rn,top:"leaflet-top "+Yn};for(var Jn in Vn)In[Jn]||(In[Jn]=An.DomUtil.create("div",Vn[Jn],Zn));Gn.addControl(An.control.gmxCenter()).addControl(An.control.fitCenter());var Kn=An.TileLayer.extend({options:{tilesCRS:An.CRS.EPSG3395},_getTiledPixelBounds:function(e){var t=An.TileLayer.prototype._getTiledPixelBounds.call(this,e);return this._shiftY=this._getShiftY(this._tileZoom),t.min.y+=this._shiftY,t.max.y+=this._shiftY,t},_tileOnError:function(e,t,n){var o=t.getAttribute("src"),l=o.indexOf("/mapcache/");if(l>-1){var s=new URL("http:"+o).searchParams,r=o.substr(l+1).split("/"),i=a[r[1]];t.src=An.Util.template(i.errorTileUrlPrefix+i.postfix,{z:s.get("z"),x:s.get("x"),y:s.get("y")})}e(n,t)},_getTilePos:function(e){return An.TileLayer.prototype._getTilePos.call(this,e).subtract([0,this._shiftY])},_getShiftY:function(e){var t=this._map,n=t.getCenter(),o=t.options.crs.project(n).y-this.options.tilesCRS.project(n).y;return Math.floor(An.CRS.scale(e)*o/40075016.685578495)}});An.TileLayer.Mercator=Kn,An.tileLayer.Mercator=function(e,t){return new Kn(e,t)};let Wn={};c.b||(c.b="m2"),["m2","m3"].forEach(e=>{let t=a[e],n=An.tileLayer.Mercator(t.prefix+t.postfix,t.options);Wn[t.title]=n,c.b===t.options.key&&n.addTo(Gn)}),Wn.OpenStreetMap=An.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:21,maxNativeZoom:18});let Qn={"ДТП Очаги(5)":Nn,"ДТП Очаги(3)":$n,"ДТП Очаги(Stat)":Fn,"ДТП Очаги(tmp)":jn,"ДТП Очаги":mn,"ДТП Сводный":st,"ДТП СКПДИ":Ve,"ДТП ГИБДД":$e},Xn=c.o?c.o.split(",").reduce((e,t)=>(e[t]=!0,e),{}):{};["m1","m4","m5"].forEach(e=>{let t=a[e],n=An.tileLayer.Mercator(t.prefix+t.postfix,t.options);Qn[t.title]=n,Xn[t.options.key]&&n.addTo(Gn)}),An.control.layers(Wn,Qn).addTo(Gn);let eo=An.control.gmxIcon({id:"filters",className:"leaflet-bar",togglable:!0,title:"Фильтры"}).on("statechange",(function(e){let t=e.target,n=t._container,o=t._win;t.options.isActive?o||(o=t._win=An.DomUtil.create("div","win leaflet-control-layers",n),An.DomEvent.disableScrollPropagation(o),o._Filters=new ln({target:o,props:{DtpGibdd:$e,DtpSkpdi:Ve,DtpHearths5:Nn,DtpHearths3:$n,DtpHearthsStat:Fn,DtpHearthsTmp:jn,DtpHearths:mn,DtpVerifyed:st}})):(t._win.parentNode.removeChild(t._win),t._win=null)})).addTo(Gn);const to=(e,t)=>{for(var n=Math.PI/180,o={lon:n*e.lng,lat:n*e.lat},l={lon:n*t.lng,lat:n*t.lat},s=6378137,r=6356752.3142,i=1/298.257223563,a=l.lon-o.lon,c=Math.atan((1-i)*Math.tan(o.lat)),p=Math.atan((1-i)*Math.tan(l.lat)),d=Math.sin(c),u=Math.cos(c),_=Math.sin(p),h=Math.cos(p),v=a,f=2*Math.PI,m=20;Math.abs(v-f)>1e-12&&--m>0;){var y=Math.sin(v),g=Math.cos(v),b=Math.sqrt(h*y*(h*y)+(u*_-d*h*g)*(u*_-d*h*g));if(0===b)return 0;var x=d*_+u*h*g,k=Math.atan2(b,x),j=u*h*y/b,L=1-j*j,C=x-2*d*_/L;isNaN(C)&&(C=0);var D=i/16*L*(4+i*(4-3*L));f=v,v=a+(1-D)*i*j*(k+D*b*(C+D*x*(2*C*C-1)))}if(0===m)return NaN;var w=L*(s*s/(r*r)-1),T=w/1024*(256+w*(w*(74-47*w)-128));return r*(1+w/16384*(4096+w*(w*(320-175*w)-768)))*(k-T*b*(C+T/4*(x*(2*C*C-1)-T/6*C*(4*b*b-3)*(4*C*C-3))))};let no,oo;Gn.pm.setLang("customName",{tooltips:{finishLine:"Щелкните любой существующий маркер для завершения"}},"ru"),Gn.pm.setLang("ru"),Gn.on("pm:create",e=>{Gn.removeLayer(e.layer),lo.setActive(!1)}).on("pm:drawstart",e=>{let t=e.workingLayer;if("Line"===e.shape){let n=Gn.pm.Draw.Line._hintMarker;n&&n.on("move",(function(e){var o=t.getLatLngs();if(o.length){var l=(e=>{let t=0,n=(e=e||[])[0];return e.forEach(e=>{t+=to(e,n),n=e}),t})(o),s=to(o[o.length-1],e.latlng),r=(l+=s)>1e3?(l/1e3).toFixed(2)+" км":Math.ceil(l)+" м",i=s>1e3?(s/1e3).toFixed(2)+" км":Math.ceil(s)+" м";n._tooltip.setContent("Отрезок <b>("+i+")</b>участка <b>("+r+")</b>")}})),no&&e.target.pm.Toolbar.buttons.drawPolyline.buttonsDomNode&&(oo=e.target.pm.Toolbar.buttons.drawPolyline.buttonsDomNode.children[1],oo.style.display="none")}});let lo=An.control.gmxIcon({id:"measure",className:"leaflet-bar",togglable:!0,title:"Включить/Отключить режим измерения расстояний"}).on("statechange",(function(e){no=e.target.options.isActive,no?Gn.pm.enableDraw("Line",{finishOn:"dblclick"}):(Gn.pm.disableDraw("Line"),oo&&(oo.style.display=""))})).addTo(Gn);const so=()=>{setTimeout(()=>{eo.options.isActive&&(eo.setActive(!1),eo._win=null,eo.setActive(!0))})};$e._refreshFilters=Ve._refreshFilters=st._refreshFilters=mn._refreshFilters=Fn._refreshFilters=$n._refreshFilters=Nn._refreshFilters=jn._refreshFilters=so;return $e.on("remove",so),Ve.on("remove",so),st.on("remove",so),mn.on("remove",so),jn.on("remove",so),Fn.on("remove",so),$n.on("remove",so),Nn.on("remove",so),Gn.on("zoomend",e=>{Gn._crpx=0,st._map&&st.checkZoom(Gn._zoom),Ve._map&&Ve.checkZoom(Gn._zoom),$e._map&&$e.checkZoom(Gn._zoom)}),Gn}();
//# sourceMappingURL=main.js.map
